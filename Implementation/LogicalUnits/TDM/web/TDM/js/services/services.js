angular.module("TDM-FE").service("Session",(function(){this.create=function(userAuthenticated){this.userAuthenticated=userAuthenticated},this.destroy=function(){this.userAuthenticated=null}})),angular.module("TDM-FE").factory("TDMService",(function(Restangular,$sessionStorage,$rootScope){var invokeFabricWebServiceWrapper=(path,body,method)=>new Promise((resolve,reject)=>{window.k2api.invokeFabricWebService(path,body,method).then(resp=>{resolve(resp)}).catch(err=>{reject(err)}).finally(()=>{$rootScope.$apply()})});return{deleteGenericAPI:function(url,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(url,data,"DELETE"):Restangular.all(url).customDELETE(data)},putGenericAPI:function(url,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(url,data,"PUT"):Restangular.all(url).customPUT(data)},postGenericAPI:function(url,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(url,data,"POST"):Restangular.all(url).post(data)},getGenericAPI:function(url){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(url,null,"GET"):Restangular.all(url).get("")},getCustomLogicFlows:function(luList){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("getcustomlogicflows",{luList:luList},"GET"):Restangular.all(environmentsbyuserandbe).get(be_name)},getCustomLogicParams:function(luName,flowName){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("getCustomLogicParams",{luName:luName,flowName:flowName},"GET"):Restangular.all(environmentsbyuserandbe).get(be_name)},getDateTimeFormat:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("getDateTimeFormat",{},"GET"):Restangular.all(environmentsbyuserandbe).get(be_name)},decryptInterfacePassword:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("decryptInterfacePassword",data,"POST"):Restangular.all("decryptInterfacePassword").post(data)},getSummaryReport:function(executionId,luName){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`taskSummaryReport/${executionId}/luName/${luName}`,null,"GET"):Restangular.one("taskSummaryReport",executionId).one("luName",luName).get("")},testInterfaceDbConnection:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("testDbConnection",data,"POST"):Restangular.all("testDbConnection").post(data)},getDbInterfacesByProductLUs:function(productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/product/${productId}/dbInterfaces`,null,"GET"):Restangular.all("environment").one("product",productId).all("dbInterfaces").get("")},getSupportedDbTypes:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("supportedDbTypes",null,"GET"):Restangular.all("supportedDbTypes").get("")},saveDBTypes:function(DBTypes){$sessionStorage.supportedDbTypes=DBTypes},getDBTypes:function(){return $sessionStorage.supportedDbTypes},getEnvironments:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environments",null,"get"):Restangular.all("environments").get("")},getEnvironment:function(id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environment/"+id,null,"GET"):Restangular.one("environment",id).get("")},getProducts:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("products",null,"get"):Restangular.all("products").get("")},getProductsWithLUs:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("productsWithLUs",null,"GET"):Restangular.all("productsWithLUs").get("")},getProduct:function(productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("product/"+productId,null,"get"):Restangular.one("product",productId).get("")},updateEnvironment:function(environmentId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environment/"+environmentId,data,"PUT"):Restangular.one("environment",environmentId).customPUT(data)},addEnvironment:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environment",data,"POST"):Restangular.all("environment").post(data)},deleteEnvironment:function(environmentID,environmentName){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/envname/${environmentName}`,null,"DELETE"):Restangular.one("environment",environmentID).one("envname",environmentName).customDELETE("")},updateProduct:function(productId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("product/"+productId,data,"PUT"):Restangular.one("product",productId).customPUT(data)},createProduct:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("product",data,"POST"):Restangular.all("product").post(data)},deleteProduct:function(productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("product/"+productId,null,"DELETE"):Restangular.one("product",productId).customDELETE("")},createDataCenter:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("datacenter",data,"POST"):Restangular.all("datacenter").post(data)},getDataCenters:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("dataCenters",null,"get"):Restangular.all("datacenters").get("")},updateDataCenter:function(data_center_id,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("dataCenters/"+data_center_id,data,"PUT"):Restangular.one("datacenter",data_center_id).customPUT(data)},deleteDataCenter:function(data_center_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("dataCenters/"+data_center_id,null,"DELETE"):Restangular.one("datacenter",data_center_id).customDELETE("")},getProductInterfaces:function(productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`product/${productId}/interfaces`,null,"GET"):Restangular.one("product",productId).all("interfaces").get("")},postProductInterface:function(productId,productName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`product/${productId}/productname/${productName}/interface`,data,"POST"):Restangular.one("product",productId).one("productname",productName).all("interface").post(data)},putProductInterface:function(productId,productName,interface_id,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`product/${productId}/productname/${productName}/interface/${interface_id}`,data,"PUT"):Restangular.one("product",productId).one("productname",productName).one("interface",interface_id).customPUT(data)},deleteProductInterface:function(productId,productName,interface_id,interface_name,interfacesCount,envCount){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`product/${productId}/productname/${productName}/interface/${interface_id}/interfacename/${interface_name}/envcount/${envCount}`,null,"DELETE"):Restangular.one("product",productId).one("productname",productName).one("interface",interface_id).one("interfacename",interface_name).one("interfacecount",interfacesCount).one("envcount",envCount).customDELETE("")},getLogicalUnits:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("logicalunits",null,"GET"):Restangular.all("logicalunits").get("")},getProductLogicalUnits:function(productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`product/${productId}/logicalunits`,null,"GET"):Restangular.one("product",productId).all("logicalunits").get("")},getBELogicalUnits:function(beId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/logicalunits`,null,"GET"):Restangular.one("businessentity",beId).all("logicalunits").get("")},getLogicalUnitsWithoutProduct:function(beId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("logicalunitswithoutproduct",null,"GET"):Restangular.all("logicalunitswithoutproduct").get("")},postLogicalUnits:function(beId,beName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/bename/${beName}/logicalunits`,data,"POST"):Restangular.one("businessentity",beId).one("bename",beName).all("logicalunits").post(data)},putLogicalUnit:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${data.be_id}/logicalunit/${data.lu_id}`,{logicalUnit:data},"PUT"):Restangular.one("businessentity",data.be_id).one("logicalunit",data.lu_id).customPUT(data)},putLogicalUnits:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${data.be_id}/logicalunits`,data,"PUT"):Restangular.one("businessentity",data.be_id).all("logicalunits").customPUT(data)},deleteLogicalUnit:function(beId,beName,luId,luName){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/bename/${beName}/logicalunit/${luId}/luname/${luName}`,null,"DELETE"):Restangular.one("businessentity",beId).one("bename",beName).one("logicalunit",luId).one("luname",luName).customDELETE("")},getBusinessEntities:function(productId,lu_name){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("businessentities",null,"get"):Restangular.all("businessentities").get("")},createBusinessEntity:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("businessentity",data,"POST"):Restangular.all("businessentity").post(data)},updateBusinessEntity:function(beId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("businessentity/"+beId,data,"PUT"):Restangular.one("businessentity",beId).customPUT(data)},deleteBusinessEntity:function(beId,beName){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("businessentity/"+beId,null,"DELETE"):Restangular.one("businessentity",beId).customDELETE("")},getTasks:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("tasks",null,"GET"):Restangular.all("tasks").get("")},createTask:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("task",data,"POST"):Restangular.all("task").post(data)},updateTask:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("task/"+data.task_id,data,"PUT"):Restangular.one("task",data.task_id).customPUT(data)},deleteTask:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${data.task_id}/taskname/${data.task_title}`,null,"DELETE"):Restangular.one("task",data.task_id).one("taskname",data.task_title).customDELETE("")},getEnvironmentRoles:function(environmentID){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/roles`,null,"GET"):Restangular.one("environment",environmentID).all("roles").get("")},postEnvironmentRole:function(environmentID,environmentName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/envname/${environmentName}/role`,data,"POST"):Restangular.one("environment",environmentID).one("envname",environmentName).all("role").post(data)},updateEnvironmentRole:function(environmentID,environmentName,roleID,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/envname/${environmentName}/role/${roleID}`,data,"PUT"):Restangular.one("environment",environmentID).one("envname",environmentName).one("role",roleID).customPUT(data)},deleteEnvironmentRole:function(environmentID,environmentName,roleID,roleName){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/envname/${environmentName}/role/${roleID}/rolename/${roleName}`,null,"DELETE"):Restangular.one("environment",environmentID).one("envname",environmentName).one("role",roleID).one("rolename",roleName).customDELETE("")},getTesters:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/testers`,null,"GET"):Restangular.one("environment",envId).all("testers").get("")},getOwners:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("owners",null,"GET"):Restangular.all("owners").get("")},getEnvironmentRoleTesters:function(environmentID,roleID){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/role/${roleID}/users`,null,"GET"):Restangular.one("environment",environmentID).one("role",roleID).all("users").get("")},postEnvironmentRoleTesters:function(environmentID,environmentName,roleID,roleName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/envname/${environmentName}/role/${roleID}/rolename/${roleName}/users`,{users:data},"POST"):Restangular.one("environment",environmentID).one("envname",environmentName).one("role",roleID).one("rolename",roleName).all("users").post(data)},getProductsForBusinessEntityAndEnv:function(be_id,environment_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${be_id}/environment/${environment_id}/products`,null,"GET"):Restangular.one("businessentity",be_id).one("environment",environment_id).all("products").get("")},getLogicalUnitsForBusinessEntityAndEnv:function(be_id,environment_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${be_id}/environment/${environment_id}/logicalunits`,null,"GET"):Restangular.one("businessentity",be_id).one("environment",environment_id).all("logicalunits").get("")},getTaskProducts:function(task_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${task_id}/products`,null,"GET"):Restangular.one("task",task_id).all("products").get("")},getTaskLogicalUnits:function(task_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${task_id}/logicalunits`,null,"GET"):Restangular.one("task",task_id).all("logicalunits").get("")},getTaskPostExecutionProcesses:function(task_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${task_id}/postexecutionprocess`,null,"GET"):Restangular.one("task",task_id).all("postexecutionprocess").get("")},postTaskProducts:function(taskId,taskName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${task_id}/taskname/${taskName}/products`,data,"POST"):Restangular.one("task",taskId).one("taskname",taskName).all("products").post(data)},postTaskLogicalUnits:function(taskId,taskName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${taskId}/taskname/${taskName}/logicalUnits`,data,"POST"):Restangular.one("task",taskId).one("taskname",taskName).all("logicalUnits").post(data)},postTaskPostExecutionProcess:function(taskId,taskName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${taskId}/taskname/${taskName}/postexecutionprocesses`,data,"POST"):Restangular.one("task",taskId).one("taskname",taskName).all("postexecutionprocesses").post(data)},getRoleForUserInEnv:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/userRole`,null,"GET"):Restangular.one("environment",envId).all("userRole").get("")},getEnvProducts:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/products`,null,"GET"):Restangular.one("environment",envId).all("products").get("")},getEnvGlobals:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/globals`,null,"GET"):Restangular.one("environment",envId).all("globals").get("")},postEnvProduct:function(envId,envName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envname/${envName}/product`,data,"POST"):Restangular.one("environment",envId).one("envname",envName).all("product").post(data)},postEnvGlobal:function(envId,envName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envname/${envName}/global`,data,"POST"):Restangular.one("environment",envId).one("envname",envName).all("global").post(data)},getAllGlobals:function(lus){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environment/getAllGlobals",lus,"GET"):Restangular.one("environment",envId).all("getAllGlobals").get("")},putEnvProduct:function(envId,envName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envname/${envName}/product`,data,"PUT"):Restangular.one("environment",envId).one("envname",envName).all("product").customPUT(data)},putEnvGlobal:function(envId,envName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envname/${envName}/global`,data,"PUT"):Restangular.one("environment",envId).one("envname",envName).all("global").customPUT(data)},deleteEnvGlobal:function(envId,envName,global_name,lu_name){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envname/${envName}/luname/${lu_name}/global/${global_name}`,null,"DELETE"):Restangular.one("environment",envId).one("envname",envName).one("global",global_name).customDELETE("")},deleteEnvProduct:function(envId,envName,productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envname/${envName}/product/${productId}`,null,"DELETE"):Restangular.one("environment",envId).one("envname",envName).one("product",productId).customDELETE("")},getEnvironmentOwners:function(environmentID){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${environmentID}/owners`,null,"GET"):Restangular.one("environment",environmentID).all("owners").get("")},getEnvironmentsForUser:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environmentsbyuser",null,"GET"):Restangular.all("environmentsbyuser").get("")},getBusinessEntityParameters:function(beID){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beID}/parameters`,null,"GET"):Restangular.one("businessentity",beID).all("parameters").get("")},getAnalysisCount:function(beID,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beID}/analysiscount`,data,"POST"):Restangular.one("businessentity",beID).all("analysiscount").post(data)},getTaskHistory:function(taskExecId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${taskExecId}/history`,null,"GET"):Restangular.one("task",taskId).all("history").get("")},getSummaryTaskHistory:function(taskId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${taskId}/summary`,null,"GET"):Restangular.one("task",taskId).all("summary").get("")},getActivities:function(interval){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("activities/"+interval,null,"GET"):Restangular.one("activities",interval).get("")},getNumOfTasksPerMonth:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numoftaskspermonth",null,"GET"):Restangular.all("numoftaskspermonth").get("")},getNumOfCopiedEntitiesPerMonth:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numofcopiedentitiespermonth",null,"GET"):Restangular.all("numofcopiedentitiespermonth").get("")},getNumOfTaskExecutionsPerMonth:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numoftaskexecutionspermonth",null,"GET"):Restangular.all("numoftaskexecutionspermonth").get("")},getNumOfProcessedEntitiesPerEnv:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numofprocessedentitiesperenv",null,"GET"):Restangular.all("numofprocessedentitiesperenv").get("")},getNumOfTasksPerEnv:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numoftasksperenv",null,"GET"):Restangular.all("numoftasksperenv").get("")},getBusinessEntitiesForEnvProducts:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/businessEntitiesForEnvProducts`,null,"GET"):Restangular.one("environment",envId).all("businessEntitiesForEnvProducts").get("")},executeTask:function(taskID,forced){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${taskID}/forced/${forced||!1}/startTask`,null,"POST"):Restangular.one("task",taskID).one("forced",forced||!1).all("startTask").get("")},getProductEnvCount:function(productId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`product/${productId}/envcount`,null,"GET"):Restangular.one("product",productId).all("envcount").get("")},getEnvTaskCount:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/taskCount`,null,"GET"):Restangular.one("environment",envId).all("taskCount").get("")},getTasksExecutionsStatus:function(interval){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("tasksExecutionsStatus/"+interval,null,"GET"):Restangular.one("tasksExecutionsStatus",interval).get("")},getTasksPerBE:function(interval){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("tasksPerBE/"+interval,null,"GET"):Restangular.one("tasksPerBE",interval).get("")},getDataCenterEnvironmentCount:function(data_center_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`datacenter/${data_center_id}/envcount`,null,"GET"):Restangular.one("datacenter",data_center_id).all("envcount").get("")},holdTask:function(task_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${task_id}/holdTask`,null,"PUT"):Restangular.one("task",task_id).all("holdTask").customPUT("")},activateTask:function(task_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`task/${task_id}/activateTask`,null,"PUT"):Restangular.one("task",task_id).all("activateTask").customPUT("")},getBEProductCount:function(be_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${be_id}/productCount`,null,"GET"):Restangular.one("businessentity",be_id).all("productCount").get("")},getEnvironmentSummary:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/summary/Month`,null,"GET"):Restangular.one("environment",envId).all("summary").all("Month").get("")},getTaskMonitor:function(data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("task/summary/Month",data,"POST"):Restangular.all("task").all("monitor").post(data)},stopExecution:function(execution){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("taskexecution/stopexecution",execution,"POST"):Restangular.all("taskexecution").all("stopexecution").post(execution)},getTimeZone:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("dbtimezone",null,"GET"):Restangular.all("dbtimezone").get("")},getNumProcessedCopiedFailedEntities:function(interval){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numofprocessedcopiedfailedentities/"+interval,null,"GET"):Restangular.one("numofprocessedcopiedfailedentities",interval).get("")},getNumCopiedFailedEntitiesPerLU:function(interval){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("numofcopiedfailedentitiesperlu/"+interval,null,"GET"):Restangular.one("numofcopiedfailedentitiesperlu",interval).get("")},deleteTaskForBE:function(be_id){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${be_id}/task`,null,"DELETE"):Restangular.one("businessentity",be_id).all("task").customDELETE("")},getEnvExclusionLists:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/exclusionLists`,null,"GET"):Restangular.one("environment",envId).all("exclusionLists").get("")},getEnvExclusionList:function(envId,elId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/exclusionLists/${elId}`,null,"GET"):Restangular.one("environment",envId).one("exclusionLists",elId).get("")},postEnvExclusionList:function(envId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/exclusionLists/`,data,"POST"):Restangular.one("environment",envId).all("exclusionLists").post(data)},putEnvExclusionList:function(envId,elId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/exclusionLists/${elId}`,data,"PUT"):Restangular.one("environment",envId).one("exclusionLists",elId).customPUT(data)},deleteEnvExclusionList:function(envId,elId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/exclusionLists/${elId}`,null,"DELETE"):Restangular.one("environment",envId).one("exclusionLists",elId).customDELETE("")},postEnvExclusionListValidateRequestedBy:function(envId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/validateRequestedBy`,data,"POST"):Restangular.one("environment",envId).all("validateRequestedBy").post(data)},postEnvExclusionListValidateList:function(envId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/validateList`,data,"POST"):Restangular.one("environment",envId).all("validateList").post(data)},postEnvExclusionListValidateListBeforeUpdate:function(envId,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/validateListBeforeUpdate`,data,"POST"):Restangular.one("environment",envId).all("validateListBeforeUpdate").post(data)},getEnvTesters:function(envId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`environment/${envId}/envTesters`,null,"GET"):Restangular.one("environment",envId).all("envTesters").get("")},getAdmins:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("getAdmins",null,"GET"):Restangular.all("getAdmins").get("")},getTDMStats:function(body){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("taskStats",body,"POST"):Restangular.all("taskStats").post(body)},getLuTree:function(body){return window.k2api&&window.k2api.invokeFabricWebService?new Promise((resolve,reject)=>{invokeFabricWebServiceWrapper("wsGetTaskExeStatsForEntity",body,"GET").then(resp=>{if(resp&&"FAILED"===resp.errorCode)return reject({errorCode:"FAILED",message:resp.message});var data=resp&&void 0!==resp.result?resp.result:[],treeIterateWithMap=function(current,rootLU){if(current.lu_name=current.luName,current.lu_status=current.luStatus||"completed",delete current.entityStatus,delete current.luStatus,delete current.luName,current.collapsed=!0,current.isRoot||(current.parentRootLuName=rootLU),current.count=current.children&&current.children.length||0,current.hasChildren=current.children&&current.children.length>0||!1,!current.children||0==current.children.length)return current.isRoot&&(current.lu_status=current.luStatus||"completed"),void(current.children=[]);for(var i=0,len=current.children.length;i<len;i++)treeIterateWithMap(current.children[i],rootLU)},tree=[];for(var key in data)data[key].isRoot=!0,data[key].errorInPath="failed"===data[key].luStatus,tree.push(data[key]),treeIterateWithMap(data[key],data[key].luName);resolve({errorCode:"SUCCESS",message:null,result:tree})}).catch(err=>{reject({errorCode:"FAILED",message:err})})}):Restangular.all("luTree").post(body)},getLUChildren:function(body){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("luChildren",body,"POST"):Restangular.all("luChildren").post(body)},getRunningTasks:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("runningTasks",null,"GET"):Restangular.all("runningTasks").get("")},postExecutionProcess:function(beId,beName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/bename/${beName}/postexecutionprocess`,data,"POST"):Restangular.one("businessentity",beId).one("bename",beName).all("postexecutionprocess").post(data)},putExecutionProcess:function(beId,beName,data){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/bename/${beName}/postexecutionprocess/${data.process_id}`,data,"PUT"):Restangular.one("businessentity",beId).one("bename",beName).one("postexecutionprocess",data.process_id).customPUT(data)},deleteExecutionProcess:function(beId,beName,process_id,process_name){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/bename/${beName}/postexecutionprocess/${process_id}/${process_name}`,null,"DELETE"):Restangular.one("businessentity",beId).one("bename",beName).one("postexecutionprocess",process_id).all(process_name).customDELETE("")},getBEPostExecutionProcess:function(beId){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper(`businessentity/${beId}/postexecutionprocess`,null,"GET"):Restangular.one("businessentity",beId).all("postexecutionprocess").get("")},getUserRole:()=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("wsGetUserPermissionGroup",null,"GET")},deleteRoleFromPermissionGroup:role=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("wsDeletePermissionGroupMapping",{role:role},"DELETE")},getTDMVersion:()=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("/tdmVersion",null,"GET")},getFabricRolesforUser:user=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("wsGetFabricRolesByUser",{user:user},"GET")},getUsersByPermssionGroups:permissionGroup=>{if(window.k2api&&window.k2api.invokeFabricWebService)return new Promise((resolve,reject)=>{invokeFabricWebServiceWrapper("/wsGetUsersByPermissionGroup",{permissionGroup:permissionGroup},"GET").then(response=>{response.result=_.map(response.result||[],user=>({uid:user,user_id:user,displayName:user,username:user})),resolve(response)}).catch(err=>{reject(err)})})},getFabricRoles:role=>{if(window.k2api&&window.k2api.invokeFabricWebService){let permissionGroupList={};return role&&(permissionGroupList.permissionGroupList=role),invokeFabricWebServiceWrapper("wsGetFabricRoles",permissionGroupList,"GET")}},attachRoleToPermissionGroup:(permission_group,role,description)=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("wsAddPermissionGroupMapping",{permission_group:permission_group,role:role,description:description},"POST")},updateRoleToPermissionGroup:(permission_group,old_role,new_role,description)=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("wsUpdatePermissionGroupMapping",{permission_group:permission_group,old_role:old_role,new_role:new_role,description:description},"PUT")},getPermissionGroups:()=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("wsGetPermissionGroupMappings",null,"GET")},getReservedEntities:entityId=>{if(window.k2api&&window.k2api.invokeFabricWebService){const requestBody={};return entityId&&(requestBody.entityId=entityId),invokeFabricWebServiceWrapper("getReservedEntities",requestBody,"GET")}},addNote:data=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("addNote",data,"POST")},releaseEntities:data=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("release/listOfEntities",data,"POST")},extendReservedEntities:data=>{if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("extend",data,"POST")},getParamsData:function(){if(window.k2api&&window.k2api.invokeFabricWebService)return invokeFabricWebServiceWrapper("getTdmGuiParams",null,"GET")},getActiveBusinessentitiesAPI:function(){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("getActiveBusinessentities",{},"GET"):Restangular.all(getActiveBusinessentities).get()},getEnvironmentsByUserandBe:function(be_name){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("environmentsbyuserandbe",{be_name:be_name},"GET"):Restangular.all(environmentsbyuserandbe).get(be_name)},getRetentionPeriod:function(be_name){return window.k2api&&window.k2api.invokeFabricWebService?invokeFabricWebServiceWrapper("retentionperiodinfo",{},"GET"):Restangular.all(environmentsbyuserandbe).get(be_name)}}})).factory("AuthService",(function(Restangular,$sessionStorage,USER_ROLES,Session,TDMService,$rootScope,toastr){var userAuth=null;TDMService.getUserRole().then(resp=>{if("SUCCESS"!==resp.errorCode||!resp.result||["admin","owner","tester"].indexOf(resp.result)<0)return void toastr.error(resp.message||"User Not Allowed to to use TDM APP");const roleObj={type:resp.result,id:{admin:0,owner:1,tester:2}[resp.result]};TDMService.getParamsData().then(resp=>{"SUCCESS"===resp.errorCode?(userAuth={accessToken:"tdm-WS",userName:"",displayName:"",userRole:roleObj,userID:"",tdmReprotsUrl:"http://[etlIpAddress]:3510/tdm_reports/",fluxMode:!0,permissionGroups:resp.result&&resp.result.permissionGroups||[],timezone:0},k2api.invokeFabricCommands("set username;").then(data=>{userAuth.userID=data.results[0].resultSet.rows[0][0],userAuth.displayName=data.results[0].resultSet.rows[0][0],userAuth.userName=data.results[0].resultSet.rows[0][0]}),$sessionStorage.userAuthenticated=userAuth,Session.create(userAuth),$rootScope.allowed=!0):toastr.error(resp.message||"User Not Allowed to to use TDM APP")})}).catch(err=>{toastr.error(err&&err.message||"User Not Allowed to to use TDM APP")});var isAuthenticated=function(){return!(!Session||!Session.userAuthenticated)&&!!Session.userAuthenticated};return{isFluxMode:function(){return userAuth&&1==userAuth.fluxMode},isAuthenticated:isAuthenticated,isAuthorized:function(authorizedRoles){return angular.isArray(authorizedRoles)||(authorizedRoles=[authorizedRoles]),isAuthenticated()&&-1!==authorizedRoles.indexOf(USER_ROLES[Session.userAuthenticated.userRole.type])},getUsername:function(){return userAuth&&userAuth.userName?userAuth.userName:"Unknown User"},getRole:function(){return userAuth.userRole},authorizedToEdit:function(role){if(USER_ROLES[userAuth.userRole.type]<=role)return!0},getUserId:function(){return userAuth.userID},getDisplayName:function(){return userAuth&&userAuth.displayName?userAuth.displayName:"Unknown User"},getTDMReports:function(){return userAuth&&userAuth.tdmReprotsUrl||"http://[etlIpAddress]:3210/tdm_reports/"},getRetentionPeriod:function(){return userAuth.retentionPeriod},getTimeZone:function(){return userAuth.timezone},getPermissionGroups:function(){return userAuth.permissionGroups}}})).factory("BreadCrumbsService",(function(){var data=[],currentID=0;return{push:function(translationData,name,callback){data.push({click:currentID,translationData:translationData,name:name,callback:callback}),currentID++},getAll:function(){return data},init:function(){data=[],currentID=0},breadCrumbChange:function(click){_.remove(data,(function(n){return n.click>click&&(currentID--,!0)}))}}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL3NlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwidGhpcyIsImNyZWF0ZSIsInVzZXJBdXRoZW50aWNhdGVkIiwiZGVzdHJveSIsImZhY3RvcnkiLCJSZXN0YW5ndWxhciIsIiRzZXNzaW9uU3RvcmFnZSIsIiRyb290U2NvcGUiLCJpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlciIsInBhdGgiLCJib2R5IiwibWV0aG9kIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ3aW5kb3ciLCJrMmFwaSIsImludm9rZUZhYnJpY1dlYlNlcnZpY2UiLCJ0aGVuIiwicmVzcCIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsIiRhcHBseSIsImRlbGV0ZUdlbmVyaWNBUEkiLCJ1cmwiLCJkYXRhIiwiYWxsIiwiY3VzdG9tREVMRVRFIiwicHV0R2VuZXJpY0FQSSIsImN1c3RvbVBVVCIsInBvc3RHZW5lcmljQVBJIiwicG9zdCIsImdldEdlbmVyaWNBUEkiLCJnZXQiLCJnZXRDdXN0b21Mb2dpY0Zsb3dzIiwibHVMaXN0IiwiZW52aXJvbm1lbnRzYnl1c2VyYW5kYmUiLCJiZV9uYW1lIiwiZ2V0Q3VzdG9tTG9naWNQYXJhbXMiLCJsdU5hbWUiLCJmbG93TmFtZSIsImdldERhdGVUaW1lRm9ybWF0IiwiZGVjcnlwdEludGVyZmFjZVBhc3N3b3JkIiwiZ2V0U3VtbWFyeVJlcG9ydCIsImV4ZWN1dGlvbklkIiwib25lIiwidGVzdEludGVyZmFjZURiQ29ubmVjdGlvbiIsImdldERiSW50ZXJmYWNlc0J5UHJvZHVjdExVcyIsInByb2R1Y3RJZCIsImdldFN1cHBvcnRlZERiVHlwZXMiLCJzYXZlREJUeXBlcyIsIkRCVHlwZXMiLCJzdXBwb3J0ZWREYlR5cGVzIiwiZ2V0REJUeXBlcyIsImdldEVudmlyb25tZW50cyIsImdldEVudmlyb25tZW50IiwiaWQiLCJnZXRQcm9kdWN0cyIsImdldFByb2R1Y3RzV2l0aExVcyIsImdldFByb2R1Y3QiLCJ1cGRhdGVFbnZpcm9ubWVudCIsImVudmlyb25tZW50SWQiLCJhZGRFbnZpcm9ubWVudCIsImRlbGV0ZUVudmlyb25tZW50IiwiZW52aXJvbm1lbnRJRCIsImVudmlyb25tZW50TmFtZSIsInVwZGF0ZVByb2R1Y3QiLCJjcmVhdGVQcm9kdWN0IiwiZGVsZXRlUHJvZHVjdCIsImNyZWF0ZURhdGFDZW50ZXIiLCJnZXREYXRhQ2VudGVycyIsInVwZGF0ZURhdGFDZW50ZXIiLCJkYXRhX2NlbnRlcl9pZCIsImRlbGV0ZURhdGFDZW50ZXIiLCJnZXRQcm9kdWN0SW50ZXJmYWNlcyIsInBvc3RQcm9kdWN0SW50ZXJmYWNlIiwicHJvZHVjdE5hbWUiLCJwdXRQcm9kdWN0SW50ZXJmYWNlIiwiaW50ZXJmYWNlX2lkIiwiZGVsZXRlUHJvZHVjdEludGVyZmFjZSIsImludGVyZmFjZV9uYW1lIiwiaW50ZXJmYWNlc0NvdW50IiwiZW52Q291bnQiLCJnZXRMb2dpY2FsVW5pdHMiLCJnZXRQcm9kdWN0TG9naWNhbFVuaXRzIiwiZ2V0QkVMb2dpY2FsVW5pdHMiLCJiZUlkIiwiZ2V0TG9naWNhbFVuaXRzV2l0aG91dFByb2R1Y3QiLCJwb3N0TG9naWNhbFVuaXRzIiwiYmVOYW1lIiwicHV0TG9naWNhbFVuaXQiLCJiZV9pZCIsImx1X2lkIiwibG9naWNhbFVuaXQiLCJwdXRMb2dpY2FsVW5pdHMiLCJkZWxldGVMb2dpY2FsVW5pdCIsImx1SWQiLCJnZXRCdXNpbmVzc0VudGl0aWVzIiwibHVfbmFtZSIsImNyZWF0ZUJ1c2luZXNzRW50aXR5IiwidXBkYXRlQnVzaW5lc3NFbnRpdHkiLCJkZWxldGVCdXNpbmVzc0VudGl0eSIsImdldFRhc2tzIiwiY3JlYXRlVGFzayIsInVwZGF0ZVRhc2siLCJ0YXNrX2lkIiwiZGVsZXRlVGFzayIsInRhc2tfdGl0bGUiLCJnZXRFbnZpcm9ubWVudFJvbGVzIiwicG9zdEVudmlyb25tZW50Um9sZSIsInVwZGF0ZUVudmlyb25tZW50Um9sZSIsInJvbGVJRCIsImRlbGV0ZUVudmlyb25tZW50Um9sZSIsInJvbGVOYW1lIiwiZ2V0VGVzdGVycyIsImVudklkIiwiZ2V0T3duZXJzIiwiZ2V0RW52aXJvbm1lbnRSb2xlVGVzdGVycyIsInBvc3RFbnZpcm9ubWVudFJvbGVUZXN0ZXJzIiwidXNlcnMiLCJnZXRQcm9kdWN0c0ZvckJ1c2luZXNzRW50aXR5QW5kRW52IiwiZW52aXJvbm1lbnRfaWQiLCJnZXRMb2dpY2FsVW5pdHNGb3JCdXNpbmVzc0VudGl0eUFuZEVudiIsImdldFRhc2tQcm9kdWN0cyIsImdldFRhc2tMb2dpY2FsVW5pdHMiLCJnZXRUYXNrUG9zdEV4ZWN1dGlvblByb2Nlc3NlcyIsInBvc3RUYXNrUHJvZHVjdHMiLCJ0YXNrSWQiLCJ0YXNrTmFtZSIsInBvc3RUYXNrTG9naWNhbFVuaXRzIiwicG9zdFRhc2tQb3N0RXhlY3V0aW9uUHJvY2VzcyIsImdldFJvbGVGb3JVc2VySW5FbnYiLCJnZXRFbnZQcm9kdWN0cyIsImdldEVudkdsb2JhbHMiLCJwb3N0RW52UHJvZHVjdCIsImVudk5hbWUiLCJwb3N0RW52R2xvYmFsIiwiZ2V0QWxsR2xvYmFscyIsImx1cyIsInB1dEVudlByb2R1Y3QiLCJwdXRFbnZHbG9iYWwiLCJkZWxldGVFbnZHbG9iYWwiLCJnbG9iYWxfbmFtZSIsImRlbGV0ZUVudlByb2R1Y3QiLCJnZXRFbnZpcm9ubWVudE93bmVycyIsImdldEVudmlyb25tZW50c0ZvclVzZXIiLCJnZXRCdXNpbmVzc0VudGl0eVBhcmFtZXRlcnMiLCJiZUlEIiwiZ2V0QW5hbHlzaXNDb3VudCIsImdldFRhc2tIaXN0b3J5IiwidGFza0V4ZWNJZCIsImdldFN1bW1hcnlUYXNrSGlzdG9yeSIsImdldEFjdGl2aXRpZXMiLCJpbnRlcnZhbCIsImdldE51bU9mVGFza3NQZXJNb250aCIsImdldE51bU9mQ29waWVkRW50aXRpZXNQZXJNb250aCIsImdldE51bU9mVGFza0V4ZWN1dGlvbnNQZXJNb250aCIsImdldE51bU9mUHJvY2Vzc2VkRW50aXRpZXNQZXJFbnYiLCJnZXROdW1PZlRhc2tzUGVyRW52IiwiZ2V0QnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzIiwiZXhlY3V0ZVRhc2siLCJ0YXNrSUQiLCJmb3JjZWQiLCJnZXRQcm9kdWN0RW52Q291bnQiLCJnZXRFbnZUYXNrQ291bnQiLCJnZXRUYXNrc0V4ZWN1dGlvbnNTdGF0dXMiLCJnZXRUYXNrc1BlckJFIiwiZ2V0RGF0YUNlbnRlckVudmlyb25tZW50Q291bnQiLCJob2xkVGFzayIsImFjdGl2YXRlVGFzayIsImdldEJFUHJvZHVjdENvdW50IiwiZ2V0RW52aXJvbm1lbnRTdW1tYXJ5IiwiZ2V0VGFza01vbml0b3IiLCJzdG9wRXhlY3V0aW9uIiwiZXhlY3V0aW9uIiwiZ2V0VGltZVpvbmUiLCJnZXROdW1Qcm9jZXNzZWRDb3BpZWRGYWlsZWRFbnRpdGllcyIsImdldE51bUNvcGllZEZhaWxlZEVudGl0aWVzUGVyTFUiLCJkZWxldGVUYXNrRm9yQkUiLCJnZXRFbnZFeGNsdXNpb25MaXN0cyIsImdldEVudkV4Y2x1c2lvbkxpc3QiLCJlbElkIiwicG9zdEVudkV4Y2x1c2lvbkxpc3QiLCJwdXRFbnZFeGNsdXNpb25MaXN0IiwiZGVsZXRlRW52RXhjbHVzaW9uTGlzdCIsInBvc3RFbnZFeGNsdXNpb25MaXN0VmFsaWRhdGVSZXF1ZXN0ZWRCeSIsInBvc3RFbnZFeGNsdXNpb25MaXN0VmFsaWRhdGVMaXN0IiwicG9zdEVudkV4Y2x1c2lvbkxpc3RWYWxpZGF0ZUxpc3RCZWZvcmVVcGRhdGUiLCJnZXRFbnZUZXN0ZXJzIiwiZ2V0QWRtaW5zIiwiZ2V0VERNU3RhdHMiLCJnZXRMdVRyZWUiLCJlcnJvckNvZGUiLCJtZXNzYWdlIiwidW5kZWZpbmVkIiwicmVzdWx0IiwidHJlZUl0ZXJhdGVXaXRoTWFwIiwiY3VycmVudCIsInJvb3RMVSIsImx1X3N0YXR1cyIsImx1U3RhdHVzIiwiZW50aXR5U3RhdHVzIiwiY29sbGFwc2VkIiwiaXNSb290IiwicGFyZW50Um9vdEx1TmFtZSIsImNvdW50IiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJoYXNDaGlsZHJlbiIsImkiLCJsZW4iLCJ0cmVlIiwia2V5IiwiZXJyb3JJblBhdGgiLCJwdXNoIiwiZ2V0TFVDaGlsZHJlbiIsImdldFJ1bm5pbmdUYXNrcyIsInBvc3RFeGVjdXRpb25Qcm9jZXNzIiwicHV0RXhlY3V0aW9uUHJvY2VzcyIsInByb2Nlc3NfaWQiLCJkZWxldGVFeGVjdXRpb25Qcm9jZXNzIiwicHJvY2Vzc19uYW1lIiwiZ2V0QkVQb3N0RXhlY3V0aW9uUHJvY2VzcyIsImdldFVzZXJSb2xlIiwiZGVsZXRlUm9sZUZyb21QZXJtaXNzaW9uR3JvdXAiLCJyb2xlIiwiZ2V0VERNVmVyc2lvbiIsImdldEZhYnJpY1JvbGVzZm9yVXNlciIsInVzZXIiLCJnZXRVc2Vyc0J5UGVybXNzaW9uR3JvdXBzIiwicGVybWlzc2lvbkdyb3VwIiwicmVzcG9uc2UiLCJfIiwibWFwIiwidWlkIiwidXNlcl9pZCIsImRpc3BsYXlOYW1lIiwidXNlcm5hbWUiLCJnZXRGYWJyaWNSb2xlcyIsInBlcm1pc3Npb25Hcm91cExpc3QiLCJhdHRhY2hSb2xlVG9QZXJtaXNzaW9uR3JvdXAiLCJwZXJtaXNzaW9uX2dyb3VwIiwiZGVzY3JpcHRpb24iLCJ1cGRhdGVSb2xlVG9QZXJtaXNzaW9uR3JvdXAiLCJvbGRfcm9sZSIsIm5ld19yb2xlIiwiZ2V0UGVybWlzc2lvbkdyb3VwcyIsImdldFJlc2VydmVkRW50aXRpZXMiLCJlbnRpdHlJZCIsInJlcXVlc3RCb2R5IiwiYWRkTm90ZSIsInJlbGVhc2VFbnRpdGllcyIsImV4dGVuZFJlc2VydmVkRW50aXRpZXMiLCJnZXRQYXJhbXNEYXRhIiwiZ2V0QWN0aXZlQnVzaW5lc3NlbnRpdGllc0FQSSIsImdldEFjdGl2ZUJ1c2luZXNzZW50aXRpZXMiLCJnZXRFbnZpcm9ubWVudHNCeVVzZXJhbmRCZSIsImdldFJldGVudGlvblBlcmlvZCIsIlVTRVJfUk9MRVMiLCJTZXNzaW9uIiwiVERNU2VydmljZSIsInRvYXN0ciIsInVzZXJBdXRoIiwiaW5kZXhPZiIsImVycm9yIiwicm9sZU9iaiIsInR5cGUiLCJhZG1pbiIsIm93bmVyIiwidGVzdGVyIiwiYWNjZXNzVG9rZW4iLCJ1c2VyTmFtZSIsInVzZXJSb2xlIiwidXNlcklEIiwidGRtUmVwcm90c1VybCIsImZsdXhNb2RlIiwicGVybWlzc2lvbkdyb3VwcyIsInRpbWV6b25lIiwiaW52b2tlRmFicmljQ29tbWFuZHMiLCJyZXN1bHRzIiwicmVzdWx0U2V0Iiwicm93cyIsImFsbG93ZWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJpc0ZsdXhNb2RlIiwiaXNBdXRob3JpemVkIiwiYXV0aG9yaXplZFJvbGVzIiwiaXNBcnJheSIsImdldFVzZXJuYW1lIiwiZ2V0Um9sZSIsImF1dGhvcml6ZWRUb0VkaXQiLCJnZXRVc2VySWQiLCJnZXREaXNwbGF5TmFtZSIsImdldFRETVJlcG9ydHMiLCJyZXRlbnRpb25QZXJpb2QiLCJjdXJyZW50SUQiLCJ0cmFuc2xhdGlvbkRhdGEiLCJuYW1lIiwiY2FsbGJhY2siLCJjbGljayIsImdldEFsbCIsImluaXQiLCJicmVhZENydW1iQ2hhbmdlIiwicmVtb3ZlIiwibiJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLE9BQU8sVUFBVUMsUUFBUSxXQUFXLFdBQzFDQyxLQUFLQyxPQUFTLFNBQVVDLG1CQUN0QkYsS0FBS0Usa0JBQW9CQSxtQkFFM0JGLEtBQUtHLFFBQVUsV0FDYkgsS0FBS0Usa0JBQW9CLFNBSTdCTCxRQUNHQyxPQUFPLFVBRVBNLFFBQVEsY0FBYyxTQUFVQyxZQUFhQyxnQkFBaUJDLFlBRTdELElBQUlDLDhCQUFnQyxDQUFDQyxLQUFNQyxLQUFNQyxTQUN4QyxJQUFJQyxRQUFRLENBQUNDLFFBQVFDLFVBQzFCQyxPQUFPQyxNQUFNQyx1QkFBdUJSLEtBQU1DLEtBQU1DLFFBQVFPLEtBQUtDLE9BQzNETixRQUFRTSxRQUNQQyxNQUFNQyxNQUNQUCxPQUFPTyxPQUNOQyxRQUFRLEtBQ1RmLFdBQVdnQixhQTB4RGpCLE1BQU8sQ0FDTEMsaUJBdkJx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UzFCLFlBQW9CMEIsU0FBUzFCLFlBQy9DLGdCQXdFUHlELGNBaEVrQixXQUNsQixPQUNHL0IsVUFBWUEsU0FBU1ksZUFDdEIsMkNBOERGakIsbUJBdEJ1QixXQUN2QixPQUFPSyxTQUFTZ0MsaUJBc0JoQnZILFlBZmdCLFdBQ2hCLE9BQU91RixTQUFTZSxVQWVoQi9CLG9CQXBCd0IsV0FDeEIsT0FBT2dCLFNBQVNjLHNCQXVCckJqUixRQUFRLHNCQUFzQixXQUM3QixJQUFJc0IsS0FBTyxHQUNQOFEsVUFBWSxFQUNoQixNQUFPLENBQ0xqRixLQUFNLFNBQVVrRixnQkFBaUJDLEtBQU1DLFVBQ3JDalIsS0FBSzZMLEtBQUssQ0FDUnFGLE1BQU9KLFVBQ1BDLGdCQUFpQkEsZ0JBQ2pCQyxLQUFNQSxLQUNOQyxTQUFVQSxXQUVaSCxhQUVGSyxPQUFRLFdBQ04sT0FBT25SLE1BRVRvUixLQUFNLFdBQ0pwUixLQUFPLEdBQ1A4USxVQUFZLEdBRWRPLGlCQUFrQixTQUFVSCxPQUMxQm5FLEVBQUV1RSxPQUFPdFIsTUFBTSxTQUFVdVIsR0FDdkIsT0FBSUEsRUFBRUwsTUFBUUEsUUFDWkosYUFDTyIsImZpbGUiOiJzZXJ2aWNlcy9zZXJ2aWNlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKFwiVERNLUZFXCIpLnNlcnZpY2UoXCJTZXNzaW9uXCIsIGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAodXNlckF1dGhlbnRpY2F0ZWQpIHtcbiAgICB0aGlzLnVzZXJBdXRoZW50aWNhdGVkID0gdXNlckF1dGhlbnRpY2F0ZWQ7XG4gIH07XG4gIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnVzZXJBdXRoZW50aWNhdGVkID0gbnVsbDtcbiAgfTtcbn0pO1xuXG5hbmd1bGFyXG4gIC5tb2R1bGUoXCJURE0tRkVcIilcblxuICAuZmFjdG9yeShcIlRETVNlcnZpY2VcIiwgZnVuY3Rpb24gKFJlc3Rhbmd1bGFyLCAkc2Vzc2lvblN0b3JhZ2UsICRyb290U2NvcGUpIHtcblxuICAgIHZhciBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlciA9IChwYXRoLCBib2R5LCBtZXRob2QpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcbiAgICAgICAgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UocGF0aCwgYm9keSwgbWV0aG9kKS50aGVuKHJlc3AgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzcCk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT57XG4gICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTsgIFxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVSb2xlRnJvbVBlcm1pc3Npb25Hcm91cCA9IChyb2xlKSA9PiB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcIndzRGVsZXRlUGVybWlzc2lvbkdyb3VwTWFwcGluZ1wiLFxuICAgICAgICAgIHtyb2xlOiByb2xlfSxcbiAgICAgICAgICBcIkRFTEVURVwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdldFRETVZlcnNpb24gPSAoKSA9PiB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcIi90ZG1WZXJzaW9uXCIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdldEZhYnJpY1JvbGVzZm9yVXNlciA9ICh1c2VyKSA9PiB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcIndzR2V0RmFicmljUm9sZXNCeVVzZXJcIixcbiAgICAgICAgICB7dXNlcjogdXNlcn0sXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBnZXRVc2Vyc0J5UGVybXNzaW9uR3JvdXBzID0gKHBlcm1pc3Npb25Hcm91cCkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgICAgXCIvd3NHZXRVc2Vyc0J5UGVybWlzc2lvbkdyb3VwXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBlcm1pc3Npb25Hcm91cFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgICApLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0ID0gXy5tYXAocmVzcG9uc2UucmVzdWx0IHx8IFtdLHVzZXIgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFwidWlkXCI6IHVzZXIsXG4gICAgICAgICAgICAgICAgXCJ1c2VyX2lkXCI6IHVzZXIsXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5TmFtZVwiOiB1c2VyLFxuICAgICAgICAgICAgICAgIFwidXNlcm5hbWVcIjogdXNlcixcbiAgICAgICAgICAgICAgfTsgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAgIHZhciBhdHRhY2hSb2xlVG9QZXJtaXNzaW9uR3JvdXAgPSAocGVybWlzc2lvbl9ncm91cCwgcm9sZSAsZGVzY3JpcHRpb24pID0+IHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwid3NBZGRQZXJtaXNzaW9uR3JvdXBNYXBwaW5nXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcGVybWlzc2lvbl9ncm91cCxcbiAgICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICB2YXIgdXBkYXRlUm9sZVRvUGVybWlzc2lvbkdyb3VwID0gKHBlcm1pc3Npb25fZ3JvdXAsIG9sZF9yb2xlLCBuZXdfcm9sZSAsZGVzY3JpcHRpb24pID0+IHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwid3NVcGRhdGVQZXJtaXNzaW9uR3JvdXBNYXBwaW5nXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgcGVybWlzc2lvbl9ncm91cCxcbiAgICAgICAgICAgIG9sZF9yb2xlLFxuICAgICAgICAgICAgbmV3X3JvbGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ2V0RmFicmljUm9sZXMgPSAocm9sZSkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICBsZXQgcGVybWlzc2lvbkdyb3VwTGlzdCA9IHt9O1xuICAgICAgICBpZiAocm9sZSkge1xuICAgICAgICAgIHBlcm1pc3Npb25Hcm91cExpc3QucGVybWlzc2lvbkdyb3VwTGlzdCA9IHJvbGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwid3NHZXRGYWJyaWNSb2xlc1wiLFxuICAgICAgICAgIHBlcm1pc3Npb25Hcm91cExpc3QsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBnZXRVc2VyUm9sZSA9ICgpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwid3NHZXRVc2VyUGVybWlzc2lvbkdyb3VwXCIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRSZXNlcnZlZEVudGl0aWVzID0gKGVudGl0eUlkKSA9PiB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge307XG4gICAgICAgIGlmIChlbnRpdHlJZCkge1xuICAgICAgICAgIHJlcXVlc3RCb2R5LmVudGl0eUlkID0gZW50aXR5SWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwiZ2V0UmVzZXJ2ZWRFbnRpdGllc1wiLFxuICAgICAgICAgIHJlcXVlc3RCb2R5LFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGFkZE5vdGUgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgXCJhZGROb3RlXCIsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBcIlBPU1RcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcmVsZWFzZUVudGl0aWVzID0gKGRhdGEpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwicmVsZWFzZS9saXN0T2ZFbnRpdGllc1wiLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGV4dGVuZFJlc2VydmVkRW50aXRpZXMgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgXCJleHRlbmRcIixcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgdmFyIGdldFBlcm1pc3Npb25Hcm91cHMgPSAoKSA9PiB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcIndzR2V0UGVybWlzc2lvbkdyb3VwTWFwcGluZ3NcIixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFN1cHBvcnRlZERiVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcInN1cHBvcnRlZERiVHlwZXNcIixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJzdXBwb3J0ZWREYlR5cGVzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHNhdmVEQlR5cGVzID0gZnVuY3Rpb24gKERCVHlwZXMpIHtcbiAgICAgICRzZXNzaW9uU3RvcmFnZS5zdXBwb3J0ZWREYlR5cGVzID0gREJUeXBlcztcbiAgICB9O1xuXG4gICAgdmFyIGdldERCVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJHNlc3Npb25TdG9yYWdlLnN1cHBvcnRlZERiVHlwZXM7XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZpcm9ubWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcImVudmlyb25tZW50c1wiLCBudWxsLCBcImdldFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJlbnZpcm9ubWVudHNcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0RW52aXJvbm1lbnQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2lkfWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgaWQpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFByb2R1Y3RzID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXCJwcm9kdWN0c1wiLCBudWxsLCBcImdldFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJwcm9kdWN0c1wiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRQcm9kdWN0c1dpdGhMVXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcInByb2R1Y3RzV2l0aExVc1wiLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcInByb2R1Y3RzV2l0aExVc1wiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRQcm9kdWN0ID0gZnVuY3Rpb24gKHByb2R1Y3RJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHByb2R1Y3QvJHtwcm9kdWN0SWR9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiZ2V0XCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJwcm9kdWN0XCIsIHByb2R1Y3RJZCkuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgdXBkYXRlRW52aXJvbm1lbnQgPSBmdW5jdGlvbiAoZW52aXJvbm1lbnRJZCwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52aXJvbm1lbnRJZH1gLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQVVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudmlyb25tZW50SWQpLmN1c3RvbVBVVChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGFkZEVudmlyb25tZW50ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFwiZW52aXJvbm1lbnRcIiwgZGF0YSwgXCJQT1NUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcImVudmlyb25tZW50XCIpLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVFbnZpcm9ubWVudCA9IGZ1bmN0aW9uIChlbnZpcm9ubWVudElELCBlbnZpcm9ubWVudE5hbWUpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2Vudmlyb25tZW50SUR9L2Vudm5hbWUvJHtlbnZpcm9ubWVudE5hbWV9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiREVMRVRFXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZpcm9ubWVudElEKVxuICAgICAgICAgIC5vbmUoXCJlbnZuYW1lXCIsIGVudmlyb25tZW50TmFtZSlcbiAgICAgICAgICAuY3VzdG9tREVMRVRFKFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgdXBkYXRlUHJvZHVjdCA9IGZ1bmN0aW9uIChwcm9kdWN0SWQsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBwcm9kdWN0LyR7cHJvZHVjdElkfWAsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBcIlBVVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwicHJvZHVjdFwiLCBwcm9kdWN0SWQpLmN1c3RvbVBVVChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVByb2R1Y3QgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXCJwcm9kdWN0XCIsIGRhdGEsIFwiUE9TVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJwcm9kdWN0XCIpLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVQcm9kdWN0ID0gZnVuY3Rpb24gKHByb2R1Y3RJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHByb2R1Y3QvJHtwcm9kdWN0SWR9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiREVMRVRFXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJwcm9kdWN0XCIsIHByb2R1Y3RJZCkuY3VzdG9tREVMRVRFKFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlRGF0YUNlbnRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihgZGF0YWNlbnRlcmAsIGRhdGEsIFwiUE9TVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJkYXRhY2VudGVyXCIpLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXREYXRhQ2VudGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFwiZGF0YUNlbnRlcnNcIiwgbnVsbCwgXCJnZXRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwiZGF0YWNlbnRlcnNcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgdXBkYXRlRGF0YUNlbnRlciA9IGZ1bmN0aW9uIChkYXRhX2NlbnRlcl9pZCwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGRhdGFDZW50ZXJzLyR7ZGF0YV9jZW50ZXJfaWR9YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJkYXRhY2VudGVyXCIsIGRhdGFfY2VudGVyX2lkKS5jdXN0b21QVVQoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVEYXRhQ2VudGVyID0gZnVuY3Rpb24gKGRhdGFfY2VudGVyX2lkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZGF0YUNlbnRlcnMvJHtkYXRhX2NlbnRlcl9pZH1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJERUxFVEVcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImRhdGFjZW50ZXJcIiwgZGF0YV9jZW50ZXJfaWQpLmN1c3RvbURFTEVURShcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFByb2R1Y3RJbnRlcmZhY2VzID0gZnVuY3Rpb24gKHByb2R1Y3RJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHByb2R1Y3QvJHtwcm9kdWN0SWR9L2ludGVyZmFjZXNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInByb2R1Y3RcIiwgcHJvZHVjdElkKS5hbGwoXCJpbnRlcmZhY2VzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHBvc3RQcm9kdWN0SW50ZXJmYWNlID0gZnVuY3Rpb24gKHByb2R1Y3RJZCwgcHJvZHVjdE5hbWUsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBwcm9kdWN0LyR7cHJvZHVjdElkfS9wcm9kdWN0bmFtZS8ke3Byb2R1Y3ROYW1lfS9pbnRlcmZhY2VgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJwcm9kdWN0XCIsIHByb2R1Y3RJZClcbiAgICAgICAgICAub25lKFwicHJvZHVjdG5hbWVcIiwgcHJvZHVjdE5hbWUpXG4gICAgICAgICAgLmFsbChcImludGVyZmFjZVwiKVxuICAgICAgICAgIC5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcHV0UHJvZHVjdEludGVyZmFjZSA9IGZ1bmN0aW9uIChcbiAgICAgIHByb2R1Y3RJZCxcbiAgICAgIHByb2R1Y3ROYW1lLFxuICAgICAgaW50ZXJmYWNlX2lkLFxuICAgICAgZGF0YVxuICAgICkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHByb2R1Y3QvJHtwcm9kdWN0SWR9L3Byb2R1Y3RuYW1lLyR7cHJvZHVjdE5hbWV9L2ludGVyZmFjZS8ke2ludGVyZmFjZV9pZH1gLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQVVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInByb2R1Y3RcIiwgcHJvZHVjdElkKVxuICAgICAgICAgIC5vbmUoXCJwcm9kdWN0bmFtZVwiLCBwcm9kdWN0TmFtZSlcbiAgICAgICAgICAub25lKFwiaW50ZXJmYWNlXCIsIGludGVyZmFjZV9pZClcbiAgICAgICAgICAuY3VzdG9tUFVUKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVsZXRlUHJvZHVjdEludGVyZmFjZSA9IGZ1bmN0aW9uIChcbiAgICAgIHByb2R1Y3RJZCxcbiAgICAgIHByb2R1Y3ROYW1lLFxuICAgICAgaW50ZXJmYWNlX2lkLFxuICAgICAgaW50ZXJmYWNlX25hbWUsXG4gICAgICBpbnRlcmZhY2VzQ291bnQsXG4gICAgICBlbnZDb3VudFxuICAgICkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHByb2R1Y3QvJHtwcm9kdWN0SWR9L3Byb2R1Y3RuYW1lLyR7cHJvZHVjdE5hbWV9L2ludGVyZmFjZS8ke2ludGVyZmFjZV9pZH0vaW50ZXJmYWNlbmFtZS8ke2ludGVyZmFjZV9uYW1lfS9lbnZjb3VudC8ke2VudkNvdW50fWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkRFTEVURVwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwicHJvZHVjdFwiLCBwcm9kdWN0SWQpXG4gICAgICAgICAgLm9uZShcInByb2R1Y3RuYW1lXCIsIHByb2R1Y3ROYW1lKVxuICAgICAgICAgIC5vbmUoXCJpbnRlcmZhY2VcIiwgaW50ZXJmYWNlX2lkKVxuICAgICAgICAgIC5vbmUoXCJpbnRlcmZhY2VuYW1lXCIsIGludGVyZmFjZV9uYW1lKVxuICAgICAgICAgIC5vbmUoXCJpbnRlcmZhY2Vjb3VudFwiLCBpbnRlcmZhY2VzQ291bnQpXG4gICAgICAgICAgLm9uZShcImVudmNvdW50XCIsIGVudkNvdW50KVxuICAgICAgICAgIC5jdXN0b21ERUxFVEUoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRMb2dpY2FsVW5pdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcImxvZ2ljYWx1bml0c1wiLCBudWxsLCBcIkdFVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJsb2dpY2FsdW5pdHNcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0UHJvZHVjdExvZ2ljYWxVbml0cyA9IGZ1bmN0aW9uIChwcm9kdWN0SWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBwcm9kdWN0LyR7cHJvZHVjdElkfS9sb2dpY2FsdW5pdHNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInByb2R1Y3RcIiwgcHJvZHVjdElkKVxuICAgICAgICAgIC5hbGwoXCJsb2dpY2FsdW5pdHNcIilcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QkVMb2dpY2FsVW5pdHMgPSBmdW5jdGlvbiAoYmVJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGJ1c2luZXNzZW50aXR5LyR7YmVJZH0vbG9naWNhbHVuaXRzYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJidXNpbmVzc2VudGl0eVwiLCBiZUlkKVxuICAgICAgICAgIC5hbGwoXCJsb2dpY2FsdW5pdHNcIilcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0TG9naWNhbFVuaXRzV2l0aG91dFByb2R1Y3QgPSBmdW5jdGlvbiAoYmVJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGxvZ2ljYWx1bml0c3dpdGhvdXRwcm9kdWN0YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJsb2dpY2FsdW5pdHN3aXRob3V0cHJvZHVjdFwiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0TG9naWNhbFVuaXRzID0gZnVuY3Rpb24gKGJlSWQsIGJlTmFtZSwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGJ1c2luZXNzZW50aXR5LyR7YmVJZH0vYmVuYW1lLyR7YmVOYW1lfS9sb2dpY2FsdW5pdHNgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJidXNpbmVzc2VudGl0eVwiLCBiZUlkKVxuICAgICAgICAgIC5vbmUoXCJiZW5hbWVcIiwgYmVOYW1lKVxuICAgICAgICAgIC5hbGwoXCJsb2dpY2FsdW5pdHNcIilcbiAgICAgICAgICAucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHB1dExvZ2ljYWxVbml0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2RhdGEuYmVfaWR9L2xvZ2ljYWx1bml0LyR7ZGF0YS5sdV9pZH1gLFxuICAgICAgICAgIHtsb2dpY2FsVW5pdDogZGF0YX0sXG4gICAgICAgICAgXCJQVVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImJ1c2luZXNzZW50aXR5XCIsIGRhdGEuYmVfaWQpXG4gICAgICAgICAgLm9uZShcImxvZ2ljYWx1bml0XCIsIGRhdGEubHVfaWQpXG4gICAgICAgICAgLmN1c3RvbVBVVChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHB1dExvZ2ljYWxVbml0cyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgYnVzaW5lc3NlbnRpdHkvJHtkYXRhLmJlX2lkfS9sb2dpY2FsdW5pdHNgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQVVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImJ1c2luZXNzZW50aXR5XCIsIGRhdGEuYmVfaWQpXG4gICAgICAgICAgLmFsbChcImxvZ2ljYWx1bml0c1wiKVxuICAgICAgICAgIC5jdXN0b21QVVQoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVMb2dpY2FsVW5pdCA9IGZ1bmN0aW9uIChiZUlkLCBiZU5hbWUsIGx1SWQsIGx1TmFtZSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGJ1c2luZXNzZW50aXR5LyR7YmVJZH0vYmVuYW1lLyR7YmVOYW1lfS9sb2dpY2FsdW5pdC8ke2x1SWR9L2x1bmFtZS8ke2x1TmFtZX1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJERUxFVEVcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImJ1c2luZXNzZW50aXR5XCIsIGJlSWQpXG4gICAgICAgICAgLm9uZShcImJlbmFtZVwiLCBiZU5hbWUpXG4gICAgICAgICAgLm9uZShcImxvZ2ljYWx1bml0XCIsIGx1SWQpXG4gICAgICAgICAgLm9uZShcImx1bmFtZVwiLCBsdU5hbWUpXG4gICAgICAgICAgLmN1c3RvbURFTEVURShcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEJ1c2luZXNzRW50aXRpZXMgPSBmdW5jdGlvbiAocHJvZHVjdElkLCBsdV9uYW1lKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBcImJ1c2luZXNzZW50aXRpZXNcIixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiZ2V0XCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJidXNpbmVzc2VudGl0aWVzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZUJ1c2luZXNzRW50aXR5ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIFwiYnVzaW5lc3NlbnRpdHlcIixcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwiYnVzaW5lc3NlbnRpdHlcIikucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHVwZGF0ZUJ1c2luZXNzRW50aXR5ID0gZnVuY3Rpb24gKGJlSWQsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlSWR9YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJidXNpbmVzc2VudGl0eVwiLCBiZUlkKS5jdXN0b21QVVQoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVCdXNpbmVzc0VudGl0eSA9IGZ1bmN0aW9uIChiZUlkLCBiZU5hbWUpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlSWR9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiREVMRVRFXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJidXNpbmVzc2VudGl0eVwiLCBiZUlkKS5jdXN0b21ERUxFVEUoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRUYXNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFwidGFza3NcIiwgbnVsbCwgXCJHRVRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwidGFza3NcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlVGFzayA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcInRhc2tcIiwgZGF0YSwgXCJQT1NUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcInRhc2tcIikucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHVwZGF0ZVRhc2sgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2svJHtkYXRhLnRhc2tfaWR9YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJ0YXNrXCIsIGRhdGEudGFza19pZCkuY3VzdG9tUFVUKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVsZXRlVGFzayA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgdGFzay8ke2RhdGEudGFza19pZH0vdGFza25hbWUvJHtkYXRhLnRhc2tfdGl0bGV9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiREVMRVRFXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJ0YXNrXCIsIGRhdGEudGFza19pZClcbiAgICAgICAgICAub25lKFwidGFza25hbWVcIiwgZGF0YS50YXNrX3RpdGxlKVxuICAgICAgICAgIC5jdXN0b21ERUxFVEUoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZpcm9ubWVudFJvbGVzID0gZnVuY3Rpb24gKGVudmlyb25tZW50SUQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2Vudmlyb25tZW50SUR9L3JvbGVzYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZpcm9ubWVudElEKVxuICAgICAgICAgIC5hbGwoXCJyb2xlc1wiKVxuICAgICAgICAgIC5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0RW52aXJvbm1lbnRSb2xlID0gZnVuY3Rpb24gKGVudmlyb25tZW50SUQsIGVudmlyb25tZW50TmFtZSwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52aXJvbm1lbnRJRH0vZW52bmFtZS8ke2Vudmlyb25tZW50TmFtZX0vcm9sZWAsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBcIlBPU1RcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudmlyb25tZW50SUQpXG4gICAgICAgICAgLm9uZShcImVudm5hbWVcIiwgZW52aXJvbm1lbnROYW1lKVxuICAgICAgICAgIC5hbGwoXCJyb2xlXCIpXG4gICAgICAgICAgLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciB1cGRhdGVFbnZpcm9ubWVudFJvbGUgPSBmdW5jdGlvbiAoXG4gICAgICBlbnZpcm9ubWVudElELFxuICAgICAgZW52aXJvbm1lbnROYW1lLFxuICAgICAgcm9sZUlELFxuICAgICAgZGF0YVxuICAgICkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52aXJvbm1lbnRJRH0vZW52bmFtZS8ke2Vudmlyb25tZW50TmFtZX0vcm9sZS8ke3JvbGVJRH1gLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQVVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudmlyb25tZW50SUQpXG4gICAgICAgICAgLm9uZShcImVudm5hbWVcIiwgZW52aXJvbm1lbnROYW1lKVxuICAgICAgICAgIC5vbmUoXCJyb2xlXCIsIHJvbGVJRClcbiAgICAgICAgICAuY3VzdG9tUFVUKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVsZXRlRW52aXJvbm1lbnRSb2xlID0gZnVuY3Rpb24gKFxuICAgICAgZW52aXJvbm1lbnRJRCxcbiAgICAgIGVudmlyb25tZW50TmFtZSxcbiAgICAgIHJvbGVJRCxcbiAgICAgIHJvbGVOYW1lXG4gICAgKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvJHtlbnZpcm9ubWVudElEfS9lbnZuYW1lLyR7ZW52aXJvbm1lbnROYW1lfS9yb2xlLyR7cm9sZUlEfS9yb2xlbmFtZS8ke3JvbGVOYW1lfWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkRFTEVURVwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52aXJvbm1lbnRJRClcbiAgICAgICAgICAub25lKFwiZW52bmFtZVwiLCBlbnZpcm9ubWVudE5hbWUpXG4gICAgICAgICAgLm9uZShcInJvbGVcIiwgcm9sZUlEKVxuICAgICAgICAgIC5vbmUoXCJyb2xlbmFtZVwiLCByb2xlTmFtZSlcbiAgICAgICAgICAuY3VzdG9tREVMRVRFKFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0VGVzdGVycyA9IGZ1bmN0aW9uIChlbnZJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L3Rlc3RlcnNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudklkKS5hbGwoXCJ0ZXN0ZXJzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldE93bmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKGBvd25lcnNgLCBudWxsLCBcIkdFVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJvd25lcnNcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0UHJvZHVjdHNGb3JCdXNpbmVzc0VudGl0eUFuZEVudiA9IGZ1bmN0aW9uIChiZV9pZCwgZW52aXJvbm1lbnRfaWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlX2lkfS9lbnZpcm9ubWVudC8ke2Vudmlyb25tZW50X2lkfS9wcm9kdWN0c2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiYnVzaW5lc3NlbnRpdHlcIiwgYmVfaWQpXG4gICAgICAgICAgLm9uZShcImVudmlyb25tZW50XCIsIGVudmlyb25tZW50X2lkKVxuICAgICAgICAgIC5hbGwoXCJwcm9kdWN0c1wiKVxuICAgICAgICAgIC5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRMb2dpY2FsVW5pdHNGb3JCdXNpbmVzc0VudGl0eUFuZEVudiA9IGZ1bmN0aW9uIChcbiAgICAgIGJlX2lkLFxuICAgICAgZW52aXJvbm1lbnRfaWRcbiAgICApIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlX2lkfS9lbnZpcm9ubWVudC8ke2Vudmlyb25tZW50X2lkfS9sb2dpY2FsdW5pdHNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImJ1c2luZXNzZW50aXR5XCIsIGJlX2lkKVxuICAgICAgICAgIC5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZpcm9ubWVudF9pZClcbiAgICAgICAgICAuYWxsKFwibG9naWNhbHVuaXRzXCIpXG4gICAgICAgICAgLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFRhc2tQcm9kdWN0cyA9IGZ1bmN0aW9uICh0YXNrX2lkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgdGFzay8ke3Rhc2tfaWR9L3Byb2R1Y3RzYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJ0YXNrXCIsIHRhc2tfaWQpLmFsbChcInByb2R1Y3RzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFRhc2tMb2dpY2FsVW5pdHMgPSBmdW5jdGlvbiAodGFza19pZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2svJHt0YXNrX2lkfS9sb2dpY2FsdW5pdHNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInRhc2tcIiwgdGFza19pZCkuYWxsKFwibG9naWNhbHVuaXRzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFRhc2tQb3N0RXhlY3V0aW9uUHJvY2Vzc2VzID0gZnVuY3Rpb24gKHRhc2tfaWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGB0YXNrLyR7dGFza19pZH0vcG9zdGV4ZWN1dGlvbnByb2Nlc3NgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInRhc2tcIiwgdGFza19pZClcbiAgICAgICAgICAuYWxsKFwicG9zdGV4ZWN1dGlvbnByb2Nlc3NcIilcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcG9zdFRhc2tQcm9kdWN0cyA9IGZ1bmN0aW9uICh0YXNrSWQsIHRhc2tOYW1lLCBkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgdGFzay8ke3Rhc2tfaWR9L3Rhc2tuYW1lLyR7dGFza05hbWV9L3Byb2R1Y3RzYCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwidGFza1wiLCB0YXNrSWQpXG4gICAgICAgICAgLm9uZShcInRhc2tuYW1lXCIsIHRhc2tOYW1lKVxuICAgICAgICAgIC5hbGwoXCJwcm9kdWN0c1wiKVxuICAgICAgICAgIC5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcG9zdFRhc2tMb2dpY2FsVW5pdHMgPSBmdW5jdGlvbiAodGFza0lkLCB0YXNrTmFtZSwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2svJHt0YXNrSWR9L3Rhc2tuYW1lLyR7dGFza05hbWV9L2xvZ2ljYWxVbml0c2AsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBcIlBPU1RcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInRhc2tcIiwgdGFza0lkKVxuICAgICAgICAgIC5vbmUoXCJ0YXNrbmFtZVwiLCB0YXNrTmFtZSlcbiAgICAgICAgICAuYWxsKFwibG9naWNhbFVuaXRzXCIpXG4gICAgICAgICAgLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0VGFza1Bvc3RFeGVjdXRpb25Qcm9jZXNzID0gZnVuY3Rpb24gKHRhc2tJZCwgdGFza05hbWUsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGB0YXNrLyR7dGFza0lkfS90YXNrbmFtZS8ke3Rhc2tOYW1lfS9wb3N0ZXhlY3V0aW9ucHJvY2Vzc2VzYCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwidGFza1wiLCB0YXNrSWQpXG4gICAgICAgICAgLm9uZShcInRhc2tuYW1lXCIsIHRhc2tOYW1lKVxuICAgICAgICAgIC5hbGwoXCJwb3N0ZXhlY3V0aW9ucHJvY2Vzc2VzXCIpXG4gICAgICAgICAgLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRSb2xlRm9yVXNlckluRW52ID0gZnVuY3Rpb24gKGVudklkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvJHtlbnZJZH0vdXNlclJvbGVgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudklkKS5hbGwoXCJ1c2VyUm9sZVwiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZQcm9kdWN0cyA9IGZ1bmN0aW9uIChlbnZJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L3Byb2R1Y3RzYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZCkuYWxsKFwicHJvZHVjdHNcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0RW52R2xvYmFscyA9IGZ1bmN0aW9uIChlbnZJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L2dsb2JhbHNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudklkKS5hbGwoXCJnbG9iYWxzXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEFsbEdsb2JhbHMgPSBmdW5jdGlvbiAobHVzKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvZ2V0QWxsR2xvYmFsc2AsXG4gICAgICAgICAgbHVzLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAuYWxsKFwiZ2V0QWxsR2xvYmFsc1wiKVxuICAgICAgICAgIC5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0RW52UHJvZHVjdCA9IGZ1bmN0aW9uIChlbnZJZCwgZW52TmFtZSwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L2Vudm5hbWUvJHtlbnZOYW1lfS9wcm9kdWN0YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpXG4gICAgICAgICAgLm9uZShcImVudm5hbWVcIiwgZW52TmFtZSlcbiAgICAgICAgICAuYWxsKFwicHJvZHVjdFwiKVxuICAgICAgICAgIC5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcG9zdEVudkdsb2JhbCA9IGZ1bmN0aW9uIChlbnZJZCwgZW52TmFtZSwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L2Vudm5hbWUvJHtlbnZOYW1lfS9nbG9iYWxgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAub25lKFwiZW52bmFtZVwiLCBlbnZOYW1lKVxuICAgICAgICAgIC5hbGwoXCJnbG9iYWxcIilcbiAgICAgICAgICAucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHB1dEVudkdsb2JhbCA9IGZ1bmN0aW9uIChlbnZJZCwgZW52TmFtZSwgZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L2Vudm5hbWUvJHtlbnZOYW1lfS9nbG9iYWxgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQVVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudklkKVxuICAgICAgICAgIC5vbmUoXCJlbnZuYW1lXCIsIGVudk5hbWUpXG4gICAgICAgICAgLmFsbChcImdsb2JhbFwiKVxuICAgICAgICAgIC5jdXN0b21QVVQoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVFbnZHbG9iYWwgPSBmdW5jdGlvbiAoZW52SWQsIGVudk5hbWUsIGdsb2JhbF9uYW1lLGx1X25hbWUpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9lbnZuYW1lLyR7ZW52TmFtZX0vbHVuYW1lLyR7bHVfbmFtZX0vZ2xvYmFsLyR7Z2xvYmFsX25hbWV9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiREVMRVRFXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAub25lKFwiZW52bmFtZVwiLCBlbnZOYW1lKVxuICAgICAgICAgIC5vbmUoXCJnbG9iYWxcIiwgZ2xvYmFsX25hbWUpXG4gICAgICAgICAgLmN1c3RvbURFTEVURShcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHB1dEVudlByb2R1Y3QgPSBmdW5jdGlvbiAoZW52SWQsIGVudk5hbWUsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9lbnZuYW1lLyR7ZW52TmFtZX0vcHJvZHVjdGAsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBcIlBVVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpXG4gICAgICAgICAgLm9uZShcImVudm5hbWVcIiwgZW52TmFtZSlcbiAgICAgICAgICAuYWxsKFwicHJvZHVjdFwiKVxuICAgICAgICAgIC5jdXN0b21QVVQoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWxldGVFbnZQcm9kdWN0ID0gZnVuY3Rpb24gKGVudklkLCBlbnZOYW1lLCBwcm9kdWN0SWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9lbnZuYW1lLyR7ZW52TmFtZX0vcHJvZHVjdC8ke3Byb2R1Y3RJZH1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJERUxFVEVcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudklkKVxuICAgICAgICAgIC5vbmUoXCJlbnZuYW1lXCIsIGVudk5hbWUpXG4gICAgICAgICAgLm9uZShcInByb2R1Y3RcIiwgcHJvZHVjdElkKVxuICAgICAgICAgIC5jdXN0b21ERUxFVEUoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZpcm9ubWVudFJvbGVUZXN0ZXJzID0gZnVuY3Rpb24gKGVudmlyb25tZW50SUQsIHJvbGVJRCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52aXJvbm1lbnRJRH0vcm9sZS8ke3JvbGVJRH0vdXNlcnNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudmlyb25tZW50SUQpXG4gICAgICAgICAgLm9uZShcInJvbGVcIiwgcm9sZUlEKVxuICAgICAgICAgIC5hbGwoXCJ1c2Vyc1wiKVxuICAgICAgICAgIC5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0RW52aXJvbm1lbnRSb2xlVGVzdGVycyA9IGZ1bmN0aW9uIChcbiAgICAgIGVudmlyb25tZW50SUQsXG4gICAgICBlbnZpcm9ubWVudE5hbWUsXG4gICAgICByb2xlSUQsXG4gICAgICByb2xlTmFtZSxcbiAgICAgIGRhdGFcbiAgICApIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2Vudmlyb25tZW50SUR9L2Vudm5hbWUvJHtlbnZpcm9ubWVudE5hbWV9L3JvbGUvJHtyb2xlSUR9L3JvbGVuYW1lLyR7cm9sZU5hbWV9L3VzZXJzYCxcbiAgICAgICAgICB7dXNlcnM6IGRhdGF9LFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52aXJvbm1lbnRJRClcbiAgICAgICAgICAub25lKFwiZW52bmFtZVwiLCBlbnZpcm9ubWVudE5hbWUpXG4gICAgICAgICAgLm9uZShcInJvbGVcIiwgcm9sZUlEKVxuICAgICAgICAgIC5vbmUoXCJyb2xlbmFtZVwiLCByb2xlTmFtZSlcbiAgICAgICAgICAuYWxsKFwidXNlcnNcIilcbiAgICAgICAgICAucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEVudmlyb25tZW50T3duZXJzID0gZnVuY3Rpb24gKGVudmlyb25tZW50SUQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2Vudmlyb25tZW50SUR9L293bmVyc2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52aXJvbm1lbnRJRClcbiAgICAgICAgICAuYWxsKFwib3duZXJzXCIpXG4gICAgICAgICAgLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEVudmlyb25tZW50c0ZvclVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnRzYnl1c2VyYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJlbnZpcm9ubWVudHNieXVzZXJcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QnVzaW5lc3NFbnRpdHlQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKGJlSUQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlSUR9L3BhcmFtZXRlcnNgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImJ1c2luZXNzZW50aXR5XCIsIGJlSUQpXG4gICAgICAgICAgLmFsbChcInBhcmFtZXRlcnNcIilcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QW5hbHlzaXNDb3VudCA9IGZ1bmN0aW9uIChiZUlELCBkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgYnVzaW5lc3NlbnRpdHkvJHtiZUlEfS9hbmFseXNpc2NvdW50YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiYnVzaW5lc3NlbnRpdHlcIiwgYmVJRClcbiAgICAgICAgICAuYWxsKFwiYW5hbHlzaXNjb3VudFwiKVxuICAgICAgICAgIC5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0U3VtbWFyeVRhc2tIaXN0b3J5ID0gZnVuY3Rpb24gKHRhc2tJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2svJHt0YXNrSWR9L3N1bW1hcnlgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInRhc2tcIiwgdGFza0lkKS5hbGwoXCJzdW1tYXJ5XCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFRhc2tIaXN0b3J5ID0gZnVuY3Rpb24gKHRhc2tFeGVjSWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGB0YXNrLyR7dGFza0V4ZWNJZH0vaGlzdG9yeWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwidGFza1wiLCB0YXNrSWQpLmFsbChcImhpc3RvcnlcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QWN0aXZpdGllcyA9IGZ1bmN0aW9uIChpbnRlcnZhbCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGFjdGl2aXRpZXMvJHtpbnRlcnZhbH1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImFjdGl2aXRpZXNcIiwgaW50ZXJ2YWwpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldE51bU9mVGFza3NQZXJNb250aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBudW1vZnRhc2tzcGVybW9udGhgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcIm51bW9mdGFza3NwZXJtb250aFwiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXROdW1PZkNvcGllZEVudGl0aWVzUGVyTW9udGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgbnVtb2Zjb3BpZWRlbnRpdGllc3Blcm1vbnRoYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJudW1vZmNvcGllZGVudGl0aWVzcGVybW9udGhcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0TnVtT2ZUYXNrRXhlY3V0aW9uc1Blck1vbnRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYG51bW9mdGFza2V4ZWN1dGlvbnNwZXJtb250aGAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwibnVtb2Z0YXNrZXhlY3V0aW9uc3Blcm1vbnRoXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldE51bU9mUHJvY2Vzc2VkRW50aXRpZXNQZXJFbnYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgbnVtb2Zwcm9jZXNzZWRlbnRpdGllc3BlcmVudmAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwibnVtb2Zwcm9jZXNzZWRlbnRpdGllc3BlcmVudlwiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXROdW1PZlRhc2tzUGVyRW52ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYG51bW9mdGFza3NwZXJlbnZgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcIm51bW9mdGFza3NwZXJlbnZcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzID0gZnVuY3Rpb24gKGVudklkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvJHtlbnZJZH0vYnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAuYWxsKFwiYnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzXCIpXG4gICAgICAgICAgLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGV4ZWN1dGVUYXNrID0gZnVuY3Rpb24gKHRhc2tJRCwgZm9yY2VkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgdGFzay8ke3Rhc2tJRH0vZm9yY2VkLyR7Zm9yY2VkIHx8IGZhbHNlfS9zdGFydFRhc2tgLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJ0YXNrXCIsIHRhc2tJRClcbiAgICAgICAgICAub25lKFwiZm9yY2VkXCIsIGZvcmNlZCB8fCBmYWxzZSlcbiAgICAgICAgICAuYWxsKFwic3RhcnRUYXNrXCIpXG4gICAgICAgICAgLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFByb2R1Y3RFbnZDb3VudCA9IGZ1bmN0aW9uIChwcm9kdWN0SWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBwcm9kdWN0LyR7cHJvZHVjdElkfS9lbnZjb3VudGAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwicHJvZHVjdFwiLCBwcm9kdWN0SWQpLmFsbChcImVudmNvdW50XCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEVudlRhc2tDb3VudCA9IGZ1bmN0aW9uIChlbnZJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L3Rhc2tDb3VudGAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpLmFsbChcInRhc2tDb3VudFwiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRUYXNrc0V4ZWN1dGlvbnNTdGF0dXMgPSBmdW5jdGlvbiAoaW50ZXJ2YWwpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGB0YXNrc0V4ZWN1dGlvbnNTdGF0dXMvJHtpbnRlcnZhbH1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInRhc2tzRXhlY3V0aW9uc1N0YXR1c1wiLCBpbnRlcnZhbCkuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0VGFza3NQZXJCRSA9IGZ1bmN0aW9uIChpbnRlcnZhbCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2tzUGVyQkUvJHtpbnRlcnZhbH1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJHRVRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcInRhc2tzUGVyQkVcIiwgaW50ZXJ2YWwpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldERhdGFDZW50ZXJFbnZpcm9ubWVudENvdW50ID0gZnVuY3Rpb24gKGRhdGFfY2VudGVyX2lkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZGF0YWNlbnRlci8ke2RhdGFfY2VudGVyX2lkfS9lbnZjb3VudGAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZGF0YWNlbnRlclwiLCBkYXRhX2NlbnRlcl9pZClcbiAgICAgICAgICAuYWxsKFwiZW52Y291bnRcIilcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgaG9sZFRhc2sgPSBmdW5jdGlvbiAodGFza19pZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2svJHt0YXNrX2lkfS9ob2xkVGFza2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIlBVVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwidGFza1wiLCB0YXNrX2lkKS5hbGwoXCJob2xkVGFza1wiKS5jdXN0b21QVVQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgYWN0aXZhdGVUYXNrID0gZnVuY3Rpb24gKHRhc2tfaWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGB0YXNrLyR7dGFza19pZH0vYWN0aXZhdGVUYXNrYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJ0YXNrXCIsIHRhc2tfaWQpXG4gICAgICAgICAgLmFsbChcImFjdGl2YXRlVGFza1wiKVxuICAgICAgICAgIC5jdXN0b21QVVQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRCRVByb2R1Y3RDb3VudCA9IGZ1bmN0aW9uIChiZV9pZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGJ1c2luZXNzZW50aXR5LyR7YmVfaWR9L3Byb2R1Y3RDb3VudGAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiYnVzaW5lc3NlbnRpdHlcIiwgYmVfaWQpXG4gICAgICAgICAgLmFsbChcInByb2R1Y3RDb3VudFwiKVxuICAgICAgICAgIC5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZpcm9ubWVudFN1bW1hcnkgPSBmdW5jdGlvbiAoZW52SWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9zdW1tYXJ5L01vbnRoYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAuYWxsKFwic3VtbWFyeVwiKVxuICAgICAgICAgIC5hbGwoXCJNb250aFwiKVxuICAgICAgICAgIC5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRUYXNrTW9uaXRvciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgdGFzay9zdW1tYXJ5L01vbnRoYCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwidGFza1wiKS5hbGwoXCJtb25pdG9yXCIpLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBzdG9wRXhlY3V0aW9uID0gZnVuY3Rpb24gKGV4ZWN1dGlvbikge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRhc2tleGVjdXRpb24vc3RvcGV4ZWN1dGlvbmAsXG4gICAgICAgICAgZXhlY3V0aW9uLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwidGFza2V4ZWN1dGlvblwiKVxuICAgICAgICAgIC5hbGwoXCJzdG9wZXhlY3V0aW9uXCIpXG4gICAgICAgICAgLnBvc3QoZXhlY3V0aW9uKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFRpbWVab25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoYGRidGltZXpvbmVgLCBudWxsLCBcIkdFVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJkYnRpbWV6b25lXCIpLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldE51bVByb2Nlc3NlZENvcGllZEZhaWxlZEVudGl0aWVzID0gZnVuY3Rpb24gKGludGVydmFsKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgbnVtb2Zwcm9jZXNzZWRjb3BpZWRmYWlsZWRlbnRpdGllcy8ke2ludGVydmFsfWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFxuICAgICAgICAgIFwibnVtb2Zwcm9jZXNzZWRjb3BpZWRmYWlsZWRlbnRpdGllc1wiLFxuICAgICAgICAgIGludGVydmFsXG4gICAgICAgICkuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0TnVtQ29waWVkRmFpbGVkRW50aXRpZXNQZXJMVSA9IGZ1bmN0aW9uIChpbnRlcnZhbCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYG51bW9mY29waWVkZmFpbGVkZW50aXRpZXNwZXJsdS8ke2ludGVydmFsfWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwibnVtb2Zjb3BpZWRmYWlsZWRlbnRpdGllc3Blcmx1XCIsIGludGVydmFsKS5nZXQoXG4gICAgICAgICAgXCJcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVsZXRlVGFza0ZvckJFID0gZnVuY3Rpb24gKGJlX2lkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgYnVzaW5lc3NlbnRpdHkvJHtiZV9pZH0vdGFza2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkRFTEVURVwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiYnVzaW5lc3NlbnRpdHlcIiwgYmVfaWQpXG4gICAgICAgICAgLmFsbChcInRhc2tcIilcbiAgICAgICAgICAuY3VzdG9tREVMRVRFKFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0RW52RXhjbHVzaW9uTGlzdHMgPSBmdW5jdGlvbiAoZW52SWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9leGNsdXNpb25MaXN0c2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpXG4gICAgICAgICAgLmFsbChcImV4Y2x1c2lvbkxpc3RzXCIpXG4gICAgICAgICAgLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEVudkV4Y2x1c2lvbkxpc3QgPSBmdW5jdGlvbiAoZW52SWQsIGVsSWQpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9leGNsdXNpb25MaXN0cy8ke2VsSWR9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAub25lKFwiZXhjbHVzaW9uTGlzdHNcIiwgZWxJZClcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcG9zdEVudkV4Y2x1c2lvbkxpc3QgPSBmdW5jdGlvbiAoZW52SWQsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9leGNsdXNpb25MaXN0cy9gLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAuYWxsKFwiZXhjbHVzaW9uTGlzdHNcIilcbiAgICAgICAgICAucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHB1dEVudkV4Y2x1c2lvbkxpc3QgPSBmdW5jdGlvbiAoZW52SWQsIGVsSWQsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS9leGNsdXNpb25MaXN0cy8ke2VsSWR9YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAub25lKFwiZXhjbHVzaW9uTGlzdHNcIiwgZWxJZClcbiAgICAgICAgICAuY3VzdG9tUFVUKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVsZXRlRW52RXhjbHVzaW9uTGlzdCA9IGZ1bmN0aW9uIChlbnZJZCwgZWxJZCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGVudmlyb25tZW50LyR7ZW52SWR9L2V4Y2x1c2lvbkxpc3RzLyR7ZWxJZH1gLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgXCJERUxFVEVcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShcImVudmlyb25tZW50XCIsIGVudklkKVxuICAgICAgICAgIC5vbmUoXCJleGNsdXNpb25MaXN0c1wiLCBlbElkKVxuICAgICAgICAgIC5jdXN0b21ERUxFVEUoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0RW52RXhjbHVzaW9uTGlzdFZhbGlkYXRlUmVxdWVzdGVkQnkgPSBmdW5jdGlvbiAoZW52SWQsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS92YWxpZGF0ZVJlcXVlc3RlZEJ5YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpXG4gICAgICAgICAgLmFsbChcInZhbGlkYXRlUmVxdWVzdGVkQnlcIilcbiAgICAgICAgICAucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHBvc3RFbnZFeGNsdXNpb25MaXN0VmFsaWRhdGVMaXN0ID0gZnVuY3Rpb24gKGVudklkLCBkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvJHtlbnZJZH0vdmFsaWRhdGVMaXN0YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpXG4gICAgICAgICAgLmFsbChcInZhbGlkYXRlTGlzdFwiKVxuICAgICAgICAgIC5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcG9zdEVudkV4Y2x1c2lvbkxpc3RWYWxpZGF0ZUxpc3RCZWZvcmVVcGRhdGUgPSBmdW5jdGlvbiAoZW52SWQsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBlbnZpcm9ubWVudC8ke2VudklkfS92YWxpZGF0ZUxpc3RCZWZvcmVVcGRhdGVgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJlbnZpcm9ubWVudFwiLCBlbnZJZClcbiAgICAgICAgICAuYWxsKFwidmFsaWRhdGVMaXN0QmVmb3JlVXBkYXRlXCIpXG4gICAgICAgICAgLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZUZXN0ZXJzID0gZnVuY3Rpb24gKGVudklkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvJHtlbnZJZH0vZW52VGVzdGVyc2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiZW52aXJvbm1lbnRcIiwgZW52SWQpLmFsbChcImVudlRlc3RlcnNcIikuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QWRtaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoYGdldEFkbWluc2AsIG51bGwsIFwiR0VUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcImdldEFkbWluc1wiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRURE1TdGF0cyA9IGZ1bmN0aW9uIChib2R5KSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihgdGFza1N0YXRzYCwgYm9keSwgXCJQT1NUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcInRhc2tTdGF0c1wiKS5wb3N0KGJvZHkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0THVUcmVlID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xuICAgICAgICAgICBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihgd3NHZXRUYXNrRXhlU3RhdHNGb3JFbnRpdHlgLCBib2R5LCBcIkdFVFwiKS50aGVuKHJlc3AgPT4ge1xuICAgICAgICAgICAgICBpZiAocmVzcCAmJiByZXNwLmVycm9yQ29kZSA9PT0gJ0ZBSUxFRCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogXCJGQUlMRURcIixcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3AubWVzc2FnZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gKHJlc3AgJiYgcmVzcC5yZXN1bHQgIT09IHVuZGVmaW5lZCkgPyByZXNwLnJlc3VsdCA6IFtdO1xuICAgICAgICAgICAgICB2YXIgdHJlZUl0ZXJhdGVXaXRoTWFwID0gZnVuY3Rpb24oY3VycmVudCxyb290TFUpe1xuICAgICAgICAgICAgICAgIGN1cnJlbnQubHVfbmFtZSA9IGN1cnJlbnQubHVOYW1lO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQubHVfc3RhdHVzID0gY3VycmVudC5sdVN0YXR1cyB8fCAnY29tcGxldGVkJztcbiAgICAgICAgICAgICAgICBkZWxldGUgY3VycmVudC5lbnRpdHlTdGF0dXM7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGN1cnJlbnQubHVTdGF0dXM7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGN1cnJlbnQubHVOYW1lO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQuY29sbGFwc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnQuaXNSb290KXtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC5wYXJlbnRSb290THVOYW1lID0gcm9vdExVO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50LmNvdW50ID0gY3VycmVudC5jaGlsZHJlbiAmJiBjdXJyZW50LmNoaWxkcmVuLmxlbmd0aCB8fCAwO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQuaGFzQ2hpbGRyZW4gPSBjdXJyZW50LmNoaWxkcmVuICYmIGN1cnJlbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnQuY2hpbGRyZW4gfHwgY3VycmVudC5jaGlsZHJlbi5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmlzUm9vdCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Lmx1X3N0YXR1cyA9IGN1cnJlbnQubHVTdGF0dXMgfHwgJ2NvbXBsZXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC5jaGlsZHJlbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJyZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZWVJdGVyYXRlV2l0aE1hcChjdXJyZW50LmNoaWxkcmVuW2ldLHJvb3RMVSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB2YXIgdHJlZSA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSl7XG4gICAgICAgICAgICAgICAgICBkYXRhW2tleV0uaXNSb290ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIGRhdGFba2V5XS5lcnJvckluUGF0aCA9IGRhdGFba2V5XS5sdVN0YXR1cyA9PT0gJ2ZhaWxlZCc7XG4gICAgICAgICAgICAgICAgICB0cmVlLnB1c2goZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgICAgIHRyZWVJdGVyYXRlV2l0aE1hcChkYXRhW2tleV0sZGF0YVtrZXldLmx1TmFtZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IFwiU1VDQ0VTU1wiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbnVsbCxcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDogdHJlZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICBlcnJvckNvZGU6IFwiRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoYGx1VHJlZWAsIGJvZHksIFwiUE9TVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJsdVRyZWVcIikucG9zdChib2R5KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldExVQ2hpbGRyZW4gPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoYGx1Q2hpbGRyZW5gLCBib2R5LCBcIlBPU1RcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwibHVDaGlsZHJlblwiKS5wb3N0KGJvZHkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0UnVubmluZ1Rhc2tzID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoYHJ1bm5pbmdUYXNrc2AsIG51bGwsIFwiR0VUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcInJ1bm5pbmdUYXNrc1wiKS5nZXQoXCJcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXREYkludGVyZmFjZXNCeVByb2R1Y3RMVXMgPSBmdW5jdGlvbiAocHJvZHVjdElkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZW52aXJvbm1lbnQvcHJvZHVjdC8ke3Byb2R1Y3RJZH0vZGJJbnRlcmZhY2VzYCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJlbnZpcm9ubWVudFwiKVxuICAgICAgICAgIC5vbmUoXCJwcm9kdWN0XCIsIHByb2R1Y3RJZClcbiAgICAgICAgICAuYWxsKFwiZGJJbnRlcmZhY2VzXCIpXG4gICAgICAgICAgLmdldChcIlwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHRlc3RJbnRlcmZhY2VEYkNvbm5lY3Rpb24gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYHRlc3REYkNvbm5lY3Rpb25gLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoXCJ0ZXN0RGJDb25uZWN0aW9uXCIpLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwb3N0RXhlY3V0aW9uUHJvY2VzcyA9IGZ1bmN0aW9uIChiZUlkLCBiZU5hbWUsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlSWR9L2JlbmFtZS8ke2JlTmFtZX0vcG9zdGV4ZWN1dGlvbnByb2Nlc3NgLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgXCJQT1NUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJidXNpbmVzc2VudGl0eVwiLCBiZUlkKVxuICAgICAgICAgIC5vbmUoXCJiZW5hbWVcIiwgYmVOYW1lKVxuICAgICAgICAgIC5hbGwoXCJwb3N0ZXhlY3V0aW9ucHJvY2Vzc1wiKVxuICAgICAgICAgIC5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcHV0RXhlY3V0aW9uUHJvY2VzcyA9IGZ1bmN0aW9uIChiZUlkLCBiZU5hbWUsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGBidXNpbmVzc2VudGl0eS8ke2JlSWR9L2JlbmFtZS8ke2JlTmFtZX0vcG9zdGV4ZWN1dGlvbnByb2Nlc3MvJHtkYXRhLnByb2Nlc3NfaWR9YCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUFVUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJidXNpbmVzc2VudGl0eVwiLCBiZUlkKVxuICAgICAgICAgIC5vbmUoXCJiZW5hbWVcIiwgYmVOYW1lKVxuICAgICAgICAgIC5vbmUoXCJwb3N0ZXhlY3V0aW9ucHJvY2Vzc1wiLCBkYXRhLnByb2Nlc3NfaWQpXG4gICAgICAgICAgLmN1c3RvbVBVVChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGRlbGV0ZUV4ZWN1dGlvblByb2Nlc3MgPSBmdW5jdGlvbiAoXG4gICAgICBiZUlkLFxuICAgICAgYmVOYW1lLFxuICAgICAgcHJvY2Vzc19pZCxcbiAgICAgIHByb2Nlc3NfbmFtZVxuICAgICkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgYGJ1c2luZXNzZW50aXR5LyR7YmVJZH0vYmVuYW1lLyR7YmVOYW1lfS9wb3N0ZXhlY3V0aW9ucHJvY2Vzcy8ke3Byb2Nlc3NfaWR9LyR7cHJvY2Vzc19uYW1lfWAsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkRFTEVURVwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiYnVzaW5lc3NlbnRpdHlcIiwgYmVJZClcbiAgICAgICAgICAub25lKFwiYmVuYW1lXCIsIGJlTmFtZSlcbiAgICAgICAgICAub25lKFwicG9zdGV4ZWN1dGlvbnByb2Nlc3NcIiwgcHJvY2Vzc19pZClcbiAgICAgICAgICAuYWxsKHByb2Nlc3NfbmFtZSlcbiAgICAgICAgICAuY3VzdG9tREVMRVRFKFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QkVQb3N0RXhlY3V0aW9uUHJvY2VzcyA9IGZ1bmN0aW9uIChiZUlkKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgYnVzaW5lc3NlbnRpdHkvJHtiZUlkfS9wb3N0ZXhlY3V0aW9ucHJvY2Vzc2AsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBcIkdFVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIub25lKFwiYnVzaW5lc3NlbnRpdHlcIiwgYmVJZClcbiAgICAgICAgICAuYWxsKFwicG9zdGV4ZWN1dGlvbnByb2Nlc3NcIilcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgdGVzdEludGVyZmFjZURiQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgdGVzdERiQ29ubmVjdGlvbmAsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBcIlBPU1RcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChcInRlc3REYkNvbm5lY3Rpb25cIikucG9zdChkYXRhKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGRlY3J5cHRJbnRlcmZhY2VQYXNzd29yZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICBgZGVjcnlwdEludGVyZmFjZVBhc3N3b3JkYCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIFwiUE9TVFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKFwiZGVjcnlwdEludGVyZmFjZVBhc3N3b3JkXCIpLnBvc3QoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRTdW1tYXJ5UmVwb3J0ID0gZnVuY3Rpb24gKGV4ZWN1dGlvbklkLCBsdU5hbWUpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgIGB0YXNrU3VtbWFyeVJlcG9ydC8ke2V4ZWN1dGlvbklkfS9sdU5hbWUvJHtsdU5hbWV9YCxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIFwiR0VUXCJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5vbmUoXCJ0YXNrU3VtbWFyeVJlcG9ydFwiLCBleGVjdXRpb25JZClcbiAgICAgICAgICAub25lKFwibHVOYW1lXCIsIGx1TmFtZSlcbiAgICAgICAgICAuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0QWN0aXZlQnVzaW5lc3NlbnRpdGllc0FQSSAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICAnZ2V0QWN0aXZlQnVzaW5lc3NlbnRpdGllcycsIHt9LCBcIkdFVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoZ2V0QWN0aXZlQnVzaW5lc3NlbnRpdGllcykuZ2V0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbnZpcm9ubWVudHNCeVVzZXJhbmRCZSAgPSBmdW5jdGlvbiAoYmVfbmFtZSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgJ2Vudmlyb25tZW50c2J5dXNlcmFuZGJlJywge2JlX25hbWV9LCBcIkdFVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoZW52aXJvbm1lbnRzYnl1c2VyYW5kYmUpLmdldChiZV9uYW1lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldFJldGVudGlvblBlcmlvZCAgPSBmdW5jdGlvbiAoYmVfbmFtZSkge1xuICAgICAgaWYgKHdpbmRvdy5rMmFwaSAmJiB3aW5kb3cuazJhcGkuaW52b2tlRmFicmljV2ViU2VydmljZSkge1xuICAgICAgICByZXR1cm4gaW52b2tlRmFicmljV2ViU2VydmljZVdyYXBwZXIoXG4gICAgICAgICAgJ3JldGVudGlvbnBlcmlvZGluZm8nLCB7fSwgXCJHRVRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKGVudmlyb25tZW50c2J5dXNlcmFuZGJlKS5nZXQoYmVfbmFtZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRDdXN0b21Mb2dpY0Zsb3dzICA9IGZ1bmN0aW9uIChsdUxpc3QpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgICdnZXRjdXN0b21sb2dpY2Zsb3dzJywge2x1TGlzdH0sIFwiR0VUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChlbnZpcm9ubWVudHNieXVzZXJhbmRiZSkuZ2V0KGJlX25hbWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0Q3VzdG9tTG9naWNQYXJhbXMgID0gZnVuY3Rpb24gKGx1TmFtZSwgZmxvd05hbWUpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKFxuICAgICAgICAgICdnZXRDdXN0b21Mb2dpY1BhcmFtcycsIHtsdU5hbWUsZmxvd05hbWUgfSwgXCJHRVRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKGVudmlyb25tZW50c2J5dXNlcmFuZGJlKS5nZXQoYmVfbmFtZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXREYXRlVGltZUZvcm1hdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcihcbiAgICAgICAgICAnZ2V0RGF0ZVRpbWVGb3JtYXQnLCB7IH0sIFwiR0VUXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChlbnZpcm9ubWVudHNieXVzZXJhbmRiZSkuZ2V0KGJlX25hbWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0R2VuZXJpY0FQSSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKHVybCwgbnVsbCwgXCJHRVRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKHVybCkuZ2V0KFwiXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcG9zdEdlbmVyaWNBUEkgPSBmdW5jdGlvbiAodXJsLCBkYXRhKSB7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcih1cmwsIGRhdGEsIFwiUE9TVFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwodXJsKS5wb3N0KGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgcHV0R2VuZXJpY0FQSSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKHVybCwgZGF0YSwgXCJQVVRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKHVybCkuY3VzdG9tUFVUKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGVsZXRlR2VuZXJpY0FQSSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEpIHtcbiAgICAgIGlmICh3aW5kb3cuazJhcGkgJiYgd2luZG93LmsyYXBpLmludm9rZUZhYnJpY1dlYlNlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUZhYnJpY1dlYlNlcnZpY2VXcmFwcGVyKHVybCwgZGF0YSwgXCJERUxFVEVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKHVybCkuY3VzdG9tREVMRVRFKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0UGFyYW1zRGF0YSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZiAod2luZG93LmsyYXBpICYmIHdpbmRvdy5rMmFwaS5pbnZva2VGYWJyaWNXZWJTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VGYWJyaWNXZWJTZXJ2aWNlV3JhcHBlcignZ2V0VGRtR3VpUGFyYW1zJywgbnVsbCwgXCJHRVRcIik7XG4gICAgICB9IFxuICAgICAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xuICAgICAgLy8gICByZXNvbHZlKHtcbiAgICAgIC8vICAgICBlcnJvckNvZGU6ICdTVUNDRVNTJyxcbiAgICAgIC8vICAgICByZXN1bHQgOiB7XG4gICAgICAvLyAgICAgICBcInBlcm1pc3Npb25Hcm91cHNcIjogWydhZG1pbicsICdvd25lcicsICd0ZXN0ZXInXVxuICAgICAgLy8gICB9XG4gICAgICAvLyAgIH0pXG4gICAgICAvLyB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGVsZXRlR2VuZXJpY0FQSTogZGVsZXRlR2VuZXJpY0FQSSxcbiAgICAgIHB1dEdlbmVyaWNBUEk6IHB1dEdlbmVyaWNBUEksXG4gICAgICBwb3N0R2VuZXJpY0FQSTogcG9zdEdlbmVyaWNBUEksXG4gICAgICBnZXRHZW5lcmljQVBJOiBnZXRHZW5lcmljQVBJLFxuICAgICAgZ2V0Q3VzdG9tTG9naWNGbG93czogZ2V0Q3VzdG9tTG9naWNGbG93cyxcbiAgICAgIGdldEN1c3RvbUxvZ2ljUGFyYW1zOiBnZXRDdXN0b21Mb2dpY1BhcmFtcyxcbiAgICAgIGdldERhdGVUaW1lRm9ybWF0OiBnZXREYXRlVGltZUZvcm1hdCxcbiAgICAgIGRlY3J5cHRJbnRlcmZhY2VQYXNzd29yZDogZGVjcnlwdEludGVyZmFjZVBhc3N3b3JkLFxuICAgICAgZ2V0U3VtbWFyeVJlcG9ydDogZ2V0U3VtbWFyeVJlcG9ydCxcbiAgICAgIHRlc3RJbnRlcmZhY2VEYkNvbm5lY3Rpb246IHRlc3RJbnRlcmZhY2VEYkNvbm5lY3Rpb24sXG4gICAgICBnZXREYkludGVyZmFjZXNCeVByb2R1Y3RMVXM6IGdldERiSW50ZXJmYWNlc0J5UHJvZHVjdExVcyxcbiAgICAgIGdldFN1cHBvcnRlZERiVHlwZXM6IGdldFN1cHBvcnRlZERiVHlwZXMsXG4gICAgICBzYXZlREJUeXBlczogc2F2ZURCVHlwZXMsXG4gICAgICBnZXREQlR5cGVzOiBnZXREQlR5cGVzLFxuICAgICAgZ2V0RW52aXJvbm1lbnRzOiBnZXRFbnZpcm9ubWVudHMsXG4gICAgICBnZXRFbnZpcm9ubWVudDogZ2V0RW52aXJvbm1lbnQsXG4gICAgICBnZXRQcm9kdWN0czogZ2V0UHJvZHVjdHMsXG4gICAgICBnZXRQcm9kdWN0c1dpdGhMVXM6IGdldFByb2R1Y3RzV2l0aExVcyxcbiAgICAgIGdldFByb2R1Y3Q6IGdldFByb2R1Y3QsXG4gICAgICB1cGRhdGVFbnZpcm9ubWVudDogdXBkYXRlRW52aXJvbm1lbnQsXG4gICAgICBhZGRFbnZpcm9ubWVudDogYWRkRW52aXJvbm1lbnQsXG4gICAgICBkZWxldGVFbnZpcm9ubWVudDogZGVsZXRlRW52aXJvbm1lbnQsXG4gICAgICB1cGRhdGVQcm9kdWN0OiB1cGRhdGVQcm9kdWN0LFxuICAgICAgY3JlYXRlUHJvZHVjdDogY3JlYXRlUHJvZHVjdCxcbiAgICAgIGRlbGV0ZVByb2R1Y3Q6IGRlbGV0ZVByb2R1Y3QsXG4gICAgICBjcmVhdGVEYXRhQ2VudGVyOiBjcmVhdGVEYXRhQ2VudGVyLFxuICAgICAgZ2V0RGF0YUNlbnRlcnM6IGdldERhdGFDZW50ZXJzLFxuICAgICAgdXBkYXRlRGF0YUNlbnRlcjogdXBkYXRlRGF0YUNlbnRlcixcbiAgICAgIGRlbGV0ZURhdGFDZW50ZXI6IGRlbGV0ZURhdGFDZW50ZXIsXG4gICAgICBnZXRQcm9kdWN0SW50ZXJmYWNlczogZ2V0UHJvZHVjdEludGVyZmFjZXMsXG4gICAgICBwb3N0UHJvZHVjdEludGVyZmFjZTogcG9zdFByb2R1Y3RJbnRlcmZhY2UsXG4gICAgICBwdXRQcm9kdWN0SW50ZXJmYWNlOiBwdXRQcm9kdWN0SW50ZXJmYWNlLFxuICAgICAgZGVsZXRlUHJvZHVjdEludGVyZmFjZTogZGVsZXRlUHJvZHVjdEludGVyZmFjZSxcbiAgICAgIGdldExvZ2ljYWxVbml0czogZ2V0TG9naWNhbFVuaXRzLFxuICAgICAgZ2V0UHJvZHVjdExvZ2ljYWxVbml0czogZ2V0UHJvZHVjdExvZ2ljYWxVbml0cyxcbiAgICAgIGdldEJFTG9naWNhbFVuaXRzOiBnZXRCRUxvZ2ljYWxVbml0cyxcbiAgICAgIGdldExvZ2ljYWxVbml0c1dpdGhvdXRQcm9kdWN0OiBnZXRMb2dpY2FsVW5pdHNXaXRob3V0UHJvZHVjdCxcbiAgICAgIHBvc3RMb2dpY2FsVW5pdHM6IHBvc3RMb2dpY2FsVW5pdHMsXG4gICAgICBwdXRMb2dpY2FsVW5pdDogcHV0TG9naWNhbFVuaXQsXG4gICAgICBwdXRMb2dpY2FsVW5pdHM6IHB1dExvZ2ljYWxVbml0cyxcbiAgICAgIGRlbGV0ZUxvZ2ljYWxVbml0OiBkZWxldGVMb2dpY2FsVW5pdCxcbiAgICAgIGdldEJ1c2luZXNzRW50aXRpZXM6IGdldEJ1c2luZXNzRW50aXRpZXMsXG4gICAgICBjcmVhdGVCdXNpbmVzc0VudGl0eTogY3JlYXRlQnVzaW5lc3NFbnRpdHksXG4gICAgICB1cGRhdGVCdXNpbmVzc0VudGl0eTogdXBkYXRlQnVzaW5lc3NFbnRpdHksXG4gICAgICBkZWxldGVCdXNpbmVzc0VudGl0eTogZGVsZXRlQnVzaW5lc3NFbnRpdHksXG4gICAgICBnZXRUYXNrczogZ2V0VGFza3MsXG4gICAgICBjcmVhdGVUYXNrOiBjcmVhdGVUYXNrLFxuICAgICAgdXBkYXRlVGFzazogdXBkYXRlVGFzayxcbiAgICAgIGRlbGV0ZVRhc2s6IGRlbGV0ZVRhc2ssXG4gICAgICBnZXRFbnZpcm9ubWVudFJvbGVzOiBnZXRFbnZpcm9ubWVudFJvbGVzLFxuICAgICAgcG9zdEVudmlyb25tZW50Um9sZTogcG9zdEVudmlyb25tZW50Um9sZSxcbiAgICAgIHVwZGF0ZUVudmlyb25tZW50Um9sZTogdXBkYXRlRW52aXJvbm1lbnRSb2xlLFxuICAgICAgZGVsZXRlRW52aXJvbm1lbnRSb2xlOiBkZWxldGVFbnZpcm9ubWVudFJvbGUsXG4gICAgICBnZXRUZXN0ZXJzOiBnZXRUZXN0ZXJzLFxuICAgICAgZ2V0T3duZXJzOiBnZXRPd25lcnMsXG4gICAgICBnZXRFbnZpcm9ubWVudFJvbGVUZXN0ZXJzOiBnZXRFbnZpcm9ubWVudFJvbGVUZXN0ZXJzLFxuICAgICAgcG9zdEVudmlyb25tZW50Um9sZVRlc3RlcnM6IHBvc3RFbnZpcm9ubWVudFJvbGVUZXN0ZXJzLFxuICAgICAgZ2V0UHJvZHVjdHNGb3JCdXNpbmVzc0VudGl0eUFuZEVudjogZ2V0UHJvZHVjdHNGb3JCdXNpbmVzc0VudGl0eUFuZEVudixcbiAgICAgIGdldExvZ2ljYWxVbml0c0ZvckJ1c2luZXNzRW50aXR5QW5kRW52OiBnZXRMb2dpY2FsVW5pdHNGb3JCdXNpbmVzc0VudGl0eUFuZEVudixcbiAgICAgIGdldFRhc2tQcm9kdWN0czogZ2V0VGFza1Byb2R1Y3RzLFxuICAgICAgZ2V0VGFza0xvZ2ljYWxVbml0czogZ2V0VGFza0xvZ2ljYWxVbml0cyxcbiAgICAgIGdldFRhc2tQb3N0RXhlY3V0aW9uUHJvY2Vzc2VzOiBnZXRUYXNrUG9zdEV4ZWN1dGlvblByb2Nlc3NlcyxcbiAgICAgIHBvc3RUYXNrUHJvZHVjdHM6IHBvc3RUYXNrUHJvZHVjdHMsXG4gICAgICBwb3N0VGFza0xvZ2ljYWxVbml0czogcG9zdFRhc2tMb2dpY2FsVW5pdHMsXG4gICAgICBwb3N0VGFza1Bvc3RFeGVjdXRpb25Qcm9jZXNzOiBwb3N0VGFza1Bvc3RFeGVjdXRpb25Qcm9jZXNzLFxuICAgICAgZ2V0Um9sZUZvclVzZXJJbkVudjogZ2V0Um9sZUZvclVzZXJJbkVudixcbiAgICAgIGdldEVudlByb2R1Y3RzOiBnZXRFbnZQcm9kdWN0cyxcbiAgICAgIGdldEVudkdsb2JhbHM6IGdldEVudkdsb2JhbHMsXG4gICAgICBwb3N0RW52UHJvZHVjdDogcG9zdEVudlByb2R1Y3QsXG4gICAgICBwb3N0RW52R2xvYmFsOiBwb3N0RW52R2xvYmFsLFxuICAgICAgZ2V0QWxsR2xvYmFsczogZ2V0QWxsR2xvYmFscyxcbiAgICAgIHB1dEVudlByb2R1Y3Q6IHB1dEVudlByb2R1Y3QsXG4gICAgICBwdXRFbnZHbG9iYWw6IHB1dEVudkdsb2JhbCxcbiAgICAgIGRlbGV0ZUVudkdsb2JhbDogZGVsZXRlRW52R2xvYmFsLFxuICAgICAgZGVsZXRlRW52UHJvZHVjdDogZGVsZXRlRW52UHJvZHVjdCxcbiAgICAgIGdldEVudmlyb25tZW50T3duZXJzOiBnZXRFbnZpcm9ubWVudE93bmVycyxcbiAgICAgIGdldEVudmlyb25tZW50c0ZvclVzZXI6IGdldEVudmlyb25tZW50c0ZvclVzZXIsXG4gICAgICBnZXRCdXNpbmVzc0VudGl0eVBhcmFtZXRlcnM6IGdldEJ1c2luZXNzRW50aXR5UGFyYW1ldGVycyxcbiAgICAgIGdldEFuYWx5c2lzQ291bnQ6IGdldEFuYWx5c2lzQ291bnQsXG4gICAgICBnZXRUYXNrSGlzdG9yeTogZ2V0VGFza0hpc3RvcnksXG4gICAgICBnZXRTdW1tYXJ5VGFza0hpc3Rvcnk6IGdldFN1bW1hcnlUYXNrSGlzdG9yeSxcbiAgICAgIGdldEFjdGl2aXRpZXM6IGdldEFjdGl2aXRpZXMsXG4gICAgICBnZXROdW1PZlRhc2tzUGVyTW9udGg6IGdldE51bU9mVGFza3NQZXJNb250aCxcbiAgICAgIGdldE51bU9mQ29waWVkRW50aXRpZXNQZXJNb250aDogZ2V0TnVtT2ZDb3BpZWRFbnRpdGllc1Blck1vbnRoLFxuICAgICAgZ2V0TnVtT2ZUYXNrRXhlY3V0aW9uc1Blck1vbnRoOiBnZXROdW1PZlRhc2tFeGVjdXRpb25zUGVyTW9udGgsXG4gICAgICBnZXROdW1PZlByb2Nlc3NlZEVudGl0aWVzUGVyRW52OiBnZXROdW1PZlByb2Nlc3NlZEVudGl0aWVzUGVyRW52LFxuICAgICAgZ2V0TnVtT2ZUYXNrc1BlckVudjogZ2V0TnVtT2ZUYXNrc1BlckVudixcbiAgICAgIGdldEJ1c2luZXNzRW50aXRpZXNGb3JFbnZQcm9kdWN0czogZ2V0QnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzLFxuICAgICAgZXhlY3V0ZVRhc2s6IGV4ZWN1dGVUYXNrLFxuICAgICAgZ2V0UHJvZHVjdEVudkNvdW50OiBnZXRQcm9kdWN0RW52Q291bnQsXG4gICAgICBnZXRFbnZUYXNrQ291bnQ6IGdldEVudlRhc2tDb3VudCxcbiAgICAgIGdldFRhc2tzRXhlY3V0aW9uc1N0YXR1czogZ2V0VGFza3NFeGVjdXRpb25zU3RhdHVzLFxuICAgICAgZ2V0VGFza3NQZXJCRTogZ2V0VGFza3NQZXJCRSxcbiAgICAgIGdldERhdGFDZW50ZXJFbnZpcm9ubWVudENvdW50OiBnZXREYXRhQ2VudGVyRW52aXJvbm1lbnRDb3VudCxcbiAgICAgIGhvbGRUYXNrOiBob2xkVGFzayxcbiAgICAgIGFjdGl2YXRlVGFzazogYWN0aXZhdGVUYXNrLFxuICAgICAgZ2V0QkVQcm9kdWN0Q291bnQ6IGdldEJFUHJvZHVjdENvdW50LFxuICAgICAgZ2V0RW52aXJvbm1lbnRTdW1tYXJ5OiBnZXRFbnZpcm9ubWVudFN1bW1hcnksXG4gICAgICBnZXRUYXNrTW9uaXRvcjogZ2V0VGFza01vbml0b3IsXG4gICAgICBzdG9wRXhlY3V0aW9uOiBzdG9wRXhlY3V0aW9uLFxuICAgICAgZ2V0VGltZVpvbmU6IGdldFRpbWVab25lLFxuICAgICAgZ2V0TnVtUHJvY2Vzc2VkQ29waWVkRmFpbGVkRW50aXRpZXM6IGdldE51bVByb2Nlc3NlZENvcGllZEZhaWxlZEVudGl0aWVzLFxuICAgICAgZ2V0TnVtQ29waWVkRmFpbGVkRW50aXRpZXNQZXJMVTogZ2V0TnVtQ29waWVkRmFpbGVkRW50aXRpZXNQZXJMVSxcbiAgICAgIGRlbGV0ZVRhc2tGb3JCRTogZGVsZXRlVGFza0ZvckJFLFxuICAgICAgZ2V0RW52RXhjbHVzaW9uTGlzdHM6IGdldEVudkV4Y2x1c2lvbkxpc3RzLFxuICAgICAgZ2V0RW52RXhjbHVzaW9uTGlzdDogZ2V0RW52RXhjbHVzaW9uTGlzdCxcbiAgICAgIHBvc3RFbnZFeGNsdXNpb25MaXN0OiBwb3N0RW52RXhjbHVzaW9uTGlzdCxcbiAgICAgIHB1dEVudkV4Y2x1c2lvbkxpc3Q6IHB1dEVudkV4Y2x1c2lvbkxpc3QsXG4gICAgICBkZWxldGVFbnZFeGNsdXNpb25MaXN0OiBkZWxldGVFbnZFeGNsdXNpb25MaXN0LFxuICAgICAgcG9zdEVudkV4Y2x1c2lvbkxpc3RWYWxpZGF0ZVJlcXVlc3RlZEJ5OiBwb3N0RW52RXhjbHVzaW9uTGlzdFZhbGlkYXRlUmVxdWVzdGVkQnksXG4gICAgICBwb3N0RW52RXhjbHVzaW9uTGlzdFZhbGlkYXRlTGlzdDogcG9zdEVudkV4Y2x1c2lvbkxpc3RWYWxpZGF0ZUxpc3QsXG4gICAgICBwb3N0RW52RXhjbHVzaW9uTGlzdFZhbGlkYXRlTGlzdEJlZm9yZVVwZGF0ZTogcG9zdEVudkV4Y2x1c2lvbkxpc3RWYWxpZGF0ZUxpc3RCZWZvcmVVcGRhdGUsXG4gICAgICBnZXRFbnZUZXN0ZXJzOiBnZXRFbnZUZXN0ZXJzLFxuICAgICAgZ2V0QWRtaW5zOiBnZXRBZG1pbnMsXG4gICAgICBnZXRURE1TdGF0czogZ2V0VERNU3RhdHMsXG4gICAgICBnZXRMdVRyZWU6IGdldEx1VHJlZSxcbiAgICAgIGdldExVQ2hpbGRyZW46IGdldExVQ2hpbGRyZW4sXG4gICAgICBnZXRSdW5uaW5nVGFza3M6IGdldFJ1bm5pbmdUYXNrcyxcbiAgICAgIHBvc3RFeGVjdXRpb25Qcm9jZXNzOiBwb3N0RXhlY3V0aW9uUHJvY2VzcyxcbiAgICAgIHB1dEV4ZWN1dGlvblByb2Nlc3M6IHB1dEV4ZWN1dGlvblByb2Nlc3MsXG4gICAgICBkZWxldGVFeGVjdXRpb25Qcm9jZXNzOiBkZWxldGVFeGVjdXRpb25Qcm9jZXNzLFxuICAgICAgZ2V0QkVQb3N0RXhlY3V0aW9uUHJvY2VzczogZ2V0QkVQb3N0RXhlY3V0aW9uUHJvY2VzcyxcbiAgICAgIGdldFVzZXJSb2xlOiBnZXRVc2VyUm9sZSxcbiAgICAgIGRlbGV0ZVJvbGVGcm9tUGVybWlzc2lvbkdyb3VwOiBkZWxldGVSb2xlRnJvbVBlcm1pc3Npb25Hcm91cCxcbiAgICAgIGdldFRETVZlcnNpb246IGdldFRETVZlcnNpb24sXG4gICAgICBnZXRGYWJyaWNSb2xlc2ZvclVzZXI6IGdldEZhYnJpY1JvbGVzZm9yVXNlcixcbiAgICAgIGdldFVzZXJzQnlQZXJtc3Npb25Hcm91cHM6IGdldFVzZXJzQnlQZXJtc3Npb25Hcm91cHMsXG4gICAgICBnZXRGYWJyaWNSb2xlczogZ2V0RmFicmljUm9sZXMsXG4gICAgICBhdHRhY2hSb2xlVG9QZXJtaXNzaW9uR3JvdXA6IGF0dGFjaFJvbGVUb1Blcm1pc3Npb25Hcm91cCxcbiAgICAgIHVwZGF0ZVJvbGVUb1Blcm1pc3Npb25Hcm91cDogdXBkYXRlUm9sZVRvUGVybWlzc2lvbkdyb3VwLFxuICAgICAgZ2V0UGVybWlzc2lvbkdyb3VwczogZ2V0UGVybWlzc2lvbkdyb3VwcyxcbiAgICAgIGdldFJlc2VydmVkRW50aXRpZXM6IGdldFJlc2VydmVkRW50aXRpZXMsXG4gICAgICBhZGROb3RlOiBhZGROb3RlLFxuICAgICAgcmVsZWFzZUVudGl0aWVzOiByZWxlYXNlRW50aXRpZXMsXG4gICAgICBleHRlbmRSZXNlcnZlZEVudGl0aWVzOiBleHRlbmRSZXNlcnZlZEVudGl0aWVzLFxuICAgICAgZ2V0UGFyYW1zRGF0YTogZ2V0UGFyYW1zRGF0YSxcbiAgICAgIGdldEFjdGl2ZUJ1c2luZXNzZW50aXRpZXNBUEk6IGdldEFjdGl2ZUJ1c2luZXNzZW50aXRpZXNBUEksXG4gICAgICBnZXRFbnZpcm9ubWVudHNCeVVzZXJhbmRCZTogZ2V0RW52aXJvbm1lbnRzQnlVc2VyYW5kQmUsXG4gICAgICBnZXRSZXRlbnRpb25QZXJpb2Q6IGdldFJldGVudGlvblBlcmlvZCxcbiAgICB9O1xuICB9KVxuICAuZmFjdG9yeShcbiAgICBcIkF1dGhTZXJ2aWNlXCIsXG4gICAgZnVuY3Rpb24gKFJlc3Rhbmd1bGFyLCAkc2Vzc2lvblN0b3JhZ2UsIFVTRVJfUk9MRVMsIFNlc3Npb24sVERNU2VydmljZSwkcm9vdFNjb3BlLCB0b2FzdHIpIHtcbiAgICAgIHZhciB1c2VyQXV0aCA9IG51bGw7XG4gICAgICBURE1TZXJ2aWNlLmdldFVzZXJSb2xlKCkudGhlbigocmVzcCkgPT4ge1xuICAgICAgICBpZiAocmVzcC5lcnJvckNvZGUgIT09ICdTVUNDRVNTJyB8fCAhcmVzcC5yZXN1bHQgfHwgWydhZG1pbicsJ293bmVyJywndGVzdGVyJ10uaW5kZXhPZihyZXNwLnJlc3VsdCkgPCAwKSB7XG4gICAgICAgICAgdG9hc3RyLmVycm9yKHJlc3AubWVzc2FnZSB8fCAnVXNlciBOb3QgQWxsb3dlZCB0byB0byB1c2UgVERNIEFQUCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb2xlcyA9IHtcbiAgICAgICAgICAnYWRtaW4nOiAwLFxuICAgICAgICAgICdvd25lcic6IDEsXG4gICAgICAgICAgJ3Rlc3Rlcic6IDIsXG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm9sZU9iaiA9IHtcbiAgICAgICAgICB0eXBlOiByZXNwLnJlc3VsdCxcbiAgICAgICAgICBpZDogcm9sZXNbcmVzcC5yZXN1bHRdLFxuICAgICAgICB9O1xuICAgICAgICBURE1TZXJ2aWNlLmdldFBhcmFtc0RhdGEoKS50aGVuKChyZXNwKSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3AuZXJyb3JDb2RlICE9PSAnU1VDQ0VTUycpIHtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihyZXNwLm1lc3NhZ2UgfHwgJ1VzZXIgTm90IEFsbG93ZWQgdG8gdG8gdXNlIFRETSBBUFAnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXNlckF1dGggPSB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogXCJ0ZG0tV1NcIixcbiAgICAgICAgICAgIHVzZXJOYW1lOiBcIlwiLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IFwiXCIsXG4gICAgICAgICAgICB1c2VyUm9sZTogcm9sZU9iaixcbiAgICAgICAgICAgIHVzZXJJRDogXCJcIixcbiAgICAgICAgICAgIHRkbVJlcHJvdHNVcmw6IFwiaHR0cDovL1tldGxJcEFkZHJlc3NdOjM1MTAvdGRtX3JlcG9ydHMvXCIsXG4gICAgICAgICAgICBmbHV4TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgIHBlcm1pc3Npb25Hcm91cHM6IHJlc3AucmVzdWx0ICYmIHJlc3AucmVzdWx0LnBlcm1pc3Npb25Hcm91cHMgfHwgW10sXG4gICAgICAgICAgICB0aW1lem9uZTogMCxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGsyYXBpLmludm9rZUZhYnJpY0NvbW1hbmRzKCdzZXQgdXNlcm5hbWU7JykudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHVzZXJBdXRoLnVzZXJJRCA9ICBkYXRhLnJlc3VsdHNbMF0ucmVzdWx0U2V0LnJvd3NbMF1bMF07XG4gICAgICAgICAgICB1c2VyQXV0aC5kaXNwbGF5TmFtZSA9ICBkYXRhLnJlc3VsdHNbMF0ucmVzdWx0U2V0LnJvd3NbMF1bMF07XG4gICAgICAgICAgICB1c2VyQXV0aC51c2VyTmFtZSA9ICBkYXRhLnJlc3VsdHNbMF0ucmVzdWx0U2V0LnJvd3NbMF1bMF07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJHNlc3Npb25TdG9yYWdlLnVzZXJBdXRoZW50aWNhdGVkID0gdXNlckF1dGg7XG4gICAgICAgICAgU2Vzc2lvbi5jcmVhdGUodXNlckF1dGgpO1xuICAgICAgICAgICRyb290U2NvcGUuYWxsb3dlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgdG9hc3RyLmVycm9yKGVyciAmJiBlcnIubWVzc2FnZSB8fCAnVXNlciBOb3QgQWxsb3dlZCB0byB0byB1c2UgVERNIEFQUCcpO1xuICAgICAgfSk7XG4gICAgICB2YXIgZ2V0RGlzcGxheU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh1c2VyQXV0aCAmJiB1c2VyQXV0aC5kaXNwbGF5TmFtZSkgcmV0dXJuIHVzZXJBdXRoLmRpc3BsYXlOYW1lO1xuICAgICAgICByZXR1cm4gXCJVbmtub3duIFVzZXJcIjtcbiAgICAgIH07XG5cbiAgICAgIHZhciBnZXRVc2VybmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJBdXRoICYmIHVzZXJBdXRoLnVzZXJOYW1lKSByZXR1cm4gdXNlckF1dGgudXNlck5hbWU7XG4gICAgICAgIHJldHVybiBcIlVua25vd24gVXNlclwiO1xuICAgICAgfTtcblxuICAgICAgdmFyIGdldFRETVJlcG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgKHVzZXJBdXRoICYmIHVzZXJBdXRoLnRkbVJlcHJvdHNVcmwpIHx8XG4gICAgICAgICAgXCJodHRwOi8vW2V0bElwQWRkcmVzc106MzIxMC90ZG1fcmVwb3J0cy9cIlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFNlc3Npb24gJiYgU2Vzc2lvbi51c2VyQXV0aGVudGljYXRlZClcbiAgICAgICAgICByZXR1cm4gISFTZXNzaW9uLnVzZXJBdXRoZW50aWNhdGVkO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICB2YXIgaXNBdXRob3JpemVkID0gZnVuY3Rpb24gKGF1dGhvcml6ZWRSb2xlcykge1xuICAgICAgICBpZiAoIWFuZ3VsYXIuaXNBcnJheShhdXRob3JpemVkUm9sZXMpKSB7XG4gICAgICAgICAgYXV0aG9yaXplZFJvbGVzID0gW2F1dGhvcml6ZWRSb2xlc107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQoKSAmJlxuICAgICAgICAgIGF1dGhvcml6ZWRSb2xlcy5pbmRleE9mKFxuICAgICAgICAgICAgVVNFUl9ST0xFU1tTZXNzaW9uLnVzZXJBdXRoZW50aWNhdGVkLnVzZXJSb2xlLnR5cGVdXG4gICAgICAgICAgKSAhPT0gLTFcbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBnZXRSb2xlID0gZnVuY3Rpb24gKCkgeztcbiAgICAgICAgcmV0dXJuIHVzZXJBdXRoLnVzZXJSb2xlO1xuICAgICAgfTtcblxuICAgICAgdmFyIGdldFVzZXJJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJBdXRoLnVzZXJJRDtcbiAgICAgIH07XG5cbiAgICAgIHZhciBhdXRob3JpemVkVG9FZGl0ID0gZnVuY3Rpb24gKHJvbGUpIHtcbiAgICAgICAgaWYgKFVTRVJfUk9MRVNbdXNlckF1dGgudXNlclJvbGUudHlwZV0gPD0gcm9sZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgaXNGbHV4TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJBdXRoICYmIHVzZXJBdXRoLmZsdXhNb2RlID09IHRydWU7XG4gICAgICB9O1xuXG4gICAgICB2YXIgZ2V0UmV0ZW50aW9uUGVyaW9kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdXNlckF1dGgucmV0ZW50aW9uUGVyaW9kO1xuICAgICAgfTtcblxuICAgICAgdmFyIGdldFBlcm1pc3Npb25Hcm91cHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB1c2VyQXV0aC5wZXJtaXNzaW9uR3JvdXBzO1xuICAgICAgfTtcblxuICAgICAgdmFyIGdldFRpbWVab25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdXNlckF1dGgudGltZXpvbmU7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0ZsdXhNb2RlOiBpc0ZsdXhNb2RlLFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGlzQXV0aGVudGljYXRlZCxcbiAgICAgICAgaXNBdXRob3JpemVkOiBpc0F1dGhvcml6ZWQsXG4gICAgICAgIGdldFVzZXJuYW1lOiBnZXRVc2VybmFtZSxcbiAgICAgICAgZ2V0Um9sZTogZ2V0Um9sZSxcbiAgICAgICAgYXV0aG9yaXplZFRvRWRpdDogYXV0aG9yaXplZFRvRWRpdCxcbiAgICAgICAgZ2V0VXNlcklkOiBnZXRVc2VySWQsXG4gICAgICAgIGdldERpc3BsYXlOYW1lOiBnZXREaXNwbGF5TmFtZSxcbiAgICAgICAgZ2V0VERNUmVwb3J0czogZ2V0VERNUmVwb3J0cyxcbiAgICAgICAgZ2V0UmV0ZW50aW9uUGVyaW9kOiBnZXRSZXRlbnRpb25QZXJpb2QsXG4gICAgICAgIGdldFRpbWVab25lOiBnZXRUaW1lWm9uZSxcbiAgICAgICAgZ2V0UGVybWlzc2lvbkdyb3VwczogZ2V0UGVybWlzc2lvbkdyb3VwcyxcbiAgICAgIH07XG4gICAgfVxuICApXG4gIC5mYWN0b3J5KFwiQnJlYWRDcnVtYnNTZXJ2aWNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IFtdO1xuICAgIHZhciBjdXJyZW50SUQgPSAwO1xuICAgIHJldHVybiB7XG4gICAgICBwdXNoOiBmdW5jdGlvbiAodHJhbnNsYXRpb25EYXRhLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBkYXRhLnB1c2goe1xuICAgICAgICAgIGNsaWNrOiBjdXJyZW50SUQsXG4gICAgICAgICAgdHJhbnNsYXRpb25EYXRhOiB0cmFuc2xhdGlvbkRhdGEsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgIH0pO1xuICAgICAgICBjdXJyZW50SUQrKztcbiAgICAgIH0sXG4gICAgICBnZXRBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9LFxuICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBkYXRhID0gW107XG4gICAgICAgIGN1cnJlbnRJRCA9IDA7XG4gICAgICB9LFxuICAgICAgYnJlYWRDcnVtYkNoYW5nZTogZnVuY3Rpb24gKGNsaWNrKSB7XG4gICAgICAgIF8ucmVtb3ZlKGRhdGEsIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgaWYgKG4uY2xpY2sgPiBjbGljaykge1xuICAgICAgICAgICAgY3VycmVudElELS07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfSk7XG4iXX0=
