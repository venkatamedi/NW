function businessEntityDirective(){return{restrict:"E",templateUrl:"views/businessEntities/businessEntity.html",scope:{content:"="},controller:function($scope,TDMService,BreadCrumbsService,SweetAlert,$uibModal,toastr,$timeout,AuthService,DTColumnBuilder,DTOptionsBuilder,$q,$compile){var businessEntityCtrl=this;businessEntityCtrl.businessEntityData=$scope.content.businessEntity,businessEntityCtrl.disableChange="Inactive"==businessEntityCtrl.businessEntityData.be_status||!AuthService.authorizedToEdit(0),TDMService.getBEProductCount(businessEntityCtrl.businessEntityData.be_id).then((function(response){"SUCCESS"==response.errorCode?businessEntityCtrl.productCount=response.result:businessEntityCtrl.productCount=0})),businessEntityCtrl.saveChanges=function(){TDMService.updateBusinessEntity(businessEntityCtrl.businessEntityData.be_id,businessEntityCtrl.businessEntityData).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Business Entity # "+businessEntityCtrl.businessEntityData.be_name,"Updated Successfully"),$timeout((function(){$scope.content.openBusinessEntities()}),400)):toastr.error("Business Entity # "+businessEntityCtrl.businessEntityData.be_name,"failed to Update : "+response.message)}))},businessEntityCtrl.deleteBusinessEntity=function(){businessEntityCtrl.productCount>0?SweetAlert.swal({title:"Business Entity "+businessEntityCtrl.businessEntityData.be_name+" will be removed from related products. Active tasks which associated to  "+businessEntityCtrl.businessEntityData.be_name+" will be set to Inactive. Are you sure to want to delete the BE?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"No",cancelButtonText:"Yes",closeOnConfirm:!0,closeOnCancel:!0,animation:"false",customClass:"animated fadeInUp"},(function(isConfirm){isConfirm||TDMService.deleteBusinessEntity(businessEntityCtrl.businessEntityData.be_id).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Business Entity # "+businessEntityCtrl.businessEntityData.be_name,"deleted Successfully"),$timeout((function(){$scope.content.openBusinessEntities()}),400)):toastr.error("Business Entity # "+businessEntityCtrl.businessEntityData.be_name,"failed to delete")}))})):TDMService.deleteBusinessEntity(businessEntityCtrl.businessEntityData.be_id).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Business Entity # "+businessEntityCtrl.businessEntityData.be_name,"deleted Successfully"),$timeout((function(){$scope.content.openBusinessEntities()}),400)):toastr.error("Business Entity # "+businessEntityCtrl.businessEntityData.be_name,"failed to delete")}))},businessEntityCtrl.addLogicalUnit=function(){$uibModal.open({template:'<new-logical-units-directive data="logicalUnitCtrl.data" logical-units="logicalUnitCtrl.logicalUnits"></new-logical-units-directive>',size:"modal-lg",windowClass:"LogicalUnitWindow",resolve:{beId:businessEntityCtrl.businessEntityData.be_id,beName:function(){return businessEntityCtrl.businessEntityData.be_name}},controller:function($scope,$uibModalInstance,TDMService,beId,beName){this.logicalUnits=businessEntityCtrl.logicalUnitsData,this.beId=beId,this.beName=beName,this.close=function(){$uibModalInstance.close()},this.data={close:this.close,beId:beId,beName:beName,reloadData:function(){businessEntityCtrl.dtInstance.reloadData((function(data){}),!0)}}},controllerAs:"logicalUnitCtrl"})},businessEntityCtrl.PostExecutionProcessActions=function(add,index){$uibModal.open({template:'<post-execution-process data="data" post-execution-process="postExecutionData"></post-execution-process>',size:"modal-lg",windowClass:"LogicalUnitWindow",resolve:{beId:businessEntityCtrl.businessEntityData.be_id,beName:function(){return businessEntityCtrl.businessEntityData.be_name},postExecutionData:function(){return add?null:businessEntityCtrl.postExecutionData[index]}},controller:function($scope,$uibModalInstance,beId,beName,postExecutionData){$scope.beId=beId,$scope.beName=beName,$scope.postExecutionData=postExecutionData,$scope.close=function(){$uibModalInstance.close()},$scope.data={close:$scope.close,beId:beId,beName:beName,postExecutionData:businessEntityCtrl.postExecutionData,reloadData:function(){businessEntityCtrl.dtInstancePE.reloadData((function(data){}),!0)}}}})},businessEntityCtrl.updateLogicalUnit=function(index){$uibModal.open({template:'<update-logical-units-directive data="logicalUnitCtrl.data" logical-units="logicalUnitCtrl.logicalUnits" logical-unit-index="logicalUnitCtrl.logicalUnitIndex"></update-logical-units-directive>',size:"modal-lg",resolve:{beId:businessEntityCtrl.businessEntityData.be_id,beName:function(){return businessEntityCtrl.businessEntityData.be_name}},controller:function($scope,$uibModalInstance,TDMService,beId,beName){this.logicalUnits=businessEntityCtrl.logicalUnitsData,this.logicalUnitIndex=index,this.close=function(){$uibModalInstance.close()},this.data={close:this.close,reloadData:function(){businessEntityCtrl.dtInstance.reloadData((function(data){}),!0)}}},controllerAs:"logicalUnitCtrl"})},businessEntityCtrl.removeLogicalUnitErrorMessage=function(index){toastr.error("LU appears as Parent LU – can’t be removed")},businessEntityCtrl.removeLogicalUnit=function(index){TDMService.getLogicalUnits().then((function(response){var luToRemove=businessEntityCtrl.logicalUnitsData[index];if("SUCCESS"==response.errorCode){var childLU=_.find(response.result,{lu_parent_id:luToRemove.lu_id});childLU||(childLU=_.find(businessEntityCtrl.logicalUnitsData,{lu_parent_id:luToRemove.lu_id})),childLU?toastr.error("Logical Unit "+businessEntityCtrl.logicalUnitsData[index].lu_name+" is a parent for lu "+childLU.lu_name):TDMService.deleteLogicalUnit(businessEntityCtrl.businessEntityData.be_id,businessEntityCtrl.businessEntityData.be_name,luToRemove.lu_id,luToRemove.lu_name).then((function(response){"SUCCESS"==response.errorCode?(businessEntityCtrl.logicalUnitsData.splice(index,1),businessEntityCtrl.dtInstance.reloadData((function(data){}),!0),0==businessEntityCtrl.logicalUnitsData.length&&TDMService.deleteTaskForBE(businessEntityCtrl.businessEntityData.be_id).then((function(response){}))):toastr.error("Logical Unit "+businessEntityCtrl.logicalUnitsData[index].lu_name,"Failed to delete : "+response.message)}))}else toastr.error("Failed to delete logical Unit  "+luToRemove.lu_name)}))},businessEntityCtrl.loadingTable=!0,TDMService.getBELogicalUnits(businessEntityCtrl.businessEntityData.be_id).then((function(response){if("SUCCESS"==response.errorCode){if(businessEntityCtrl.logicalUnitsData=response.result,"SUCCESS"!=response.errorCode)return;businessEntityCtrl.dtInstance={},businessEntityCtrl.dtColumns=[],businessEntityCtrl.dtColumnDefs=[],businessEntityCtrl.headers=[{column:"lu_name",name:"Name"},{column:"lu_description",name:"Description"},{column:"lu_parent_name",name:"Parent LU"},{column:"product_name",name:"System Name",clickAble:!1}],businessEntityCtrl.disableChange||businessEntityCtrl.headers.unshift({column:"actions",name:""});for(var actionsColumn=function(data,type,full,meta){return'<div style="display: flex;justify-content: space-around;max-width: 100px;"><div ><img src="icons/edit.svg" uib-tooltip="Edit Logical Unit" tooltip-placement="right" tooltip-append-to-body="true"role-handler="" role="0" ng-if="!businessEntityCtrl.disableChange" ng-click="businessEntityCtrl.updateLogicalUnit('+meta.row+')"></div><div><img src="icons/delete-icon.svg" ng-show="!(businessEntityCtrl.logicalUnitsData | checkIfLogicalUnitIsParent:'+meta.row+')" uib-tooltip="Delete Logical Unit" tooltip-placement="right" tooltip-append-to-body="true"ng-click="businessEntityCtrl.removeLogicalUnitErrorMessage('+meta.row+')"role-handler="" role="0" ng-if="!businessEntityCtrl.disableChange" ></img><img  src="icons/delete-icon.svg" ng-show="businessEntityCtrl.logicalUnitsData | checkIfLogicalUnitIsParent:'+meta.row+'" uib-tooltip="Delete Logical Unit" tooltip-placement="right" tooltip-append-to-body="true"mwl-confirm message="{{businessEntityCtrl.logicalUnitsData['+meta.row+"].product_id == '-1' ? ' LU must be linked to a BE to enable its execution using the TDM GUI. Are you sure you want to delete this LU?' : 'Logical unit "+businessEntityCtrl.logicalUnitsData[meta.row].lu_name+" will be removed from related products. Active tasks which associated to "+businessEntityCtrl.logicalUnitsData[meta.row].lu_name+' may be set to Inactive. Are you sure you want to delete the this LU?\'}}" confirm-text="Yes <i class=\'glyphicon glyphicon-ok\'</i>" cancel-text="No <i class=\'glyphicon glyphicon-remove\'></i>"  placement="right"  tooltip-append-to-body="true" on-confirm="businessEntityCtrl.removeLogicalUnit('+meta.row+')" on-cancel="cancelClicked = true" confirm-button-type="danger" cancel-button-type="default"role-handler="" role="0" ng-if="!businessEntityCtrl.disableChange" ></img></div></div>'},i=0;i<businessEntityCtrl.headers.length;i++)"actions"==businessEntityCtrl.headers[i].column?businessEntityCtrl.dtColumns.push(DTColumnBuilder.newColumn(businessEntityCtrl.headers[i].column).withTitle(businessEntityCtrl.headers[i].name).renderWith(actionsColumn)):businessEntityCtrl.dtColumns.push(DTColumnBuilder.newColumn(businessEntityCtrl.headers[i].column).withTitle(businessEntityCtrl.headers[i].name));businessEntityCtrl.getTableData=function(){var deferred=$q.defer();return deferred.resolve(businessEntityCtrl.logicalUnitsData),deferred.promise},businessEntityCtrl.dtOptions=DTOptionsBuilder.fromFnPromise((function(){return businessEntityCtrl.getTableData()})).withDOM('<"html5buttons"B>lTfgitp').withOption("createdRow",(function(row){$compile(angular.element(row).contents())($scope)})).withOption("scrollX",!1).withButtons([]).withOption("caseInsensitive",!0).withOption("search",{caseInsensitive:!1}),businessEntityCtrl.logicalUnitsData&&businessEntityCtrl.logicalUnitsData.length>0&&businessEntityCtrl.dtOptions.withLightColumnFilter({1:{type:"text"},2:{type:"text"},3:{type:"select",values:_.map(_.filter(_.unique(_.map(businessEntityCtrl.logicalUnitsData,"lu_parent_name")),(function(el2){return!(!el2||null==el2||""==el2)})),(function(el){return{value:el,label:el}}))},4:{type:"select",values:_.map(_.filter(_.unique(_.map(businessEntityCtrl.logicalUnitsData,"product_name")),(function(el2){return!(!el2||null==el2||""==el2)})),(function(el){return{value:el,label:el}}))},5:{type:"select",values:_.map(_.filter(_.unique(_.map(businessEntityCtrl.logicalUnitsData,"lu_dc_name")),(function(el2){return!(!el2||null==el2||""==el2)})),(function(el){return{value:el,label:el}}))}}),businessEntityCtrl.dtInstanceCallback=function(dtInstance){angular.isFunction(businessEntityCtrl.dtInstance)?businessEntityCtrl.dtInstance(dtInstance):angular.isDefined(businessEntityCtrl.dtInstance)&&(businessEntityCtrl.dtInstance=dtInstance)},null!=businessEntityCtrl.dtInstance.changeData&&businessEntityCtrl.dtInstance.changeData(businessEntityCtrl.getTableData()),$timeout(()=>{businessEntityCtrl.loadingTable=!1})}else toastr.error("Business entity # "+businessEntityCtrl.businessEntityData.be_name,"Failed to get Logical Units")})),businessEntityCtrl.removePostExecutionProcess=function(index){var postExecutionProcessToRemove=businessEntityCtrl.postExecutionData[index];TDMService.deleteExecutionProcess(businessEntityCtrl.businessEntityData.be_id,businessEntityCtrl.businessEntityData.be_name,postExecutionProcessToRemove.process_id,postExecutionProcessToRemove.process_name).then((function(response){"SUCCESS"==response.errorCode?(businessEntityCtrl.postExecutionData.splice(index,1),businessEntityCtrl.dtInstancePE.reloadData((function(data){}),!0)):toastr.error("Post Execution Process "+businessEntityCtrl.postExecutionData[index].process_name,"Failed to delete : "+response.message)}))},businessEntityCtrl.loadingTablePE=!0,TDMService.getBEPostExecutionProcess(businessEntityCtrl.businessEntityData.be_id).then((function(response){if("SUCCESS"==response.errorCode){if(businessEntityCtrl.postExecutionData=response.result,"SUCCESS"!=response.errorCode)return;businessEntityCtrl.dtInstancePE={},businessEntityCtrl.dtColumnsPE=[],businessEntityCtrl.dtColumnDefsPE=[],businessEntityCtrl.headersPE=[{column:"process_name",name:"Process Name"},{column:"execution_order",name:"Execution Order"},{column:"process_description",name:"Description"}],businessEntityCtrl.disableChange||businessEntityCtrl.headersPE.unshift({column:"actions",name:""});for(var actionsColumnPE=function(data,type,full,meta){return'<div style="display: flex;justify-content: space-around;max-width: 100px;"><div><img src="icons/edit.svg" alt="edit" uib-tooltip="Edit Post Execution Process" tooltip-placement="top" tooltip-append-to-body="true" role-handler="" role="0" ng-if="!businessEntityCtrl.disableChange" ng-click="businessEntityCtrl.PostExecutionProcessActions(false, '+meta.row+')"></div><div><img src="icons/delete-icon.svg" uib-tooltip="Delete Entity Group Query" tooltip-placement="top" tooltip-append-to-body="true"mwl-confirm message="Process name '+businessEntityCtrl.postExecutionData[meta.row].process_name+" will be removed from the Business Entity. Active tasks which associated to "+businessEntityCtrl.postExecutionData[meta.row].process_name+' will be set to Inactive. Are you sure that you want to delete this process?" confirm-text="Yes <i class=\'glyphicon glyphicon-ok\'</i>" cancel-text="No <i class=\'glyphicon glyphicon-remove\'></i>"  placement="right" on-confirm="businessEntityCtrl.removePostExecutionProcess('+meta.row+')" on-cancel="cancelClicked = true" confirm-button-type="danger" cancel-button-type="default"role-handler="" role="0" ng-if="!businessEntityCtrl.disableChange"></img><div></div>'},i=0;i<businessEntityCtrl.headersPE.length;i++)"actions"==businessEntityCtrl.headersPE[i].column?businessEntityCtrl.dtColumnsPE.push(DTColumnBuilder.newColumn(businessEntityCtrl.headersPE[i].column).withTitle(businessEntityCtrl.headersPE[i].name).renderWith(actionsColumnPE)):businessEntityCtrl.dtColumnsPE.push(DTColumnBuilder.newColumn(businessEntityCtrl.headersPE[i].column).withTitle(businessEntityCtrl.headersPE[i].name));businessEntityCtrl.getTableDataPE=function(){var deferred=$q.defer();return deferred.resolve(businessEntityCtrl.postExecutionData),deferred.promise},businessEntityCtrl.dtOptionsPE=DTOptionsBuilder.fromFnPromise((function(){return businessEntityCtrl.getTableDataPE()})).withDOM('<"html5buttons"B>lTfgitp').withOption("createdRow",(function(row){$compile(angular.element(row).contents())($scope)})).withOption("scrollX",!1).withButtons([]).withOption("caseInsensitive",!0).withOption("search",{caseInsensitive:!1}),businessEntityCtrl.postExecutionData&&businessEntityCtrl.postExecutionData.length>0&&businessEntityCtrl.dtOptionsPE.withLightColumnFilter({1:{type:"text"},2:{type:"text"},3:{type:"text"}}),businessEntityCtrl.dtInstanceCallbackPE=function(dtInstance){angular.isFunction(businessEntityCtrl.dtInstancePE)?businessEntityCtrl.dtInstancePE(dtInstance):angular.isDefined(businessEntityCtrl.dtInstancePE)&&(businessEntityCtrl.dtInstancePE=dtInstance)},null!=businessEntityCtrl.dtInstancePE.changeData&&businessEntityCtrl.dtInstancePE.changeData(businessEntityCtrl.getTableDataPE()),$timeout(()=>{businessEntityCtrl.loadingTablePE=!1})}else toastr.error("Business entity # "+businessEntityCtrl.businessEntityData.be_name,"Failed to get Entities Group Query")})),BreadCrumbsService.push({be_name:businessEntityCtrl.businessEntityData.be_name},"BUSINESS_ENTITY_BREADCRUMB",(function(){}))},controllerAs:"businessEntityCtrl"}}angular.module("TDM-FE").directive("businessEntityDirective",businessEntityDirective);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpcmVjdGl2ZXMvYnVzaW5lc3NFbnRpdGllcy9idXNpbmVzc0VudGl0eURpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJidXNpbmVzc0VudGl0eURpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJzY29wZSIsImNvbnRlbnQiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiVERNU2VydmljZSIsIkJyZWFkQ3J1bWJzU2VydmljZSIsIlN3ZWV0QWxlcnQiLCIkdWliTW9kYWwiLCJ0b2FzdHIiLCIkdGltZW91dCIsIkF1dGhTZXJ2aWNlIiwiRFRDb2x1bW5CdWlsZGVyIiwiRFRPcHRpb25zQnVpbGRlciIsIiRxIiwiJGNvbXBpbGUiLCJidXNpbmVzc0VudGl0eUN0cmwiLCJ0aGlzIiwiYnVzaW5lc3NFbnRpdHlEYXRhIiwiYnVzaW5lc3NFbnRpdHkiLCJkaXNhYmxlQ2hhbmdlIiwiYmVfc3RhdHVzIiwiYXV0aG9yaXplZFRvRWRpdCIsImdldEJFUHJvZHVjdENvdW50IiwiYmVfaWQiLCJ0aGVuIiwicmVzcG9uc2UiLCJlcnJvckNvZGUiLCJwcm9kdWN0Q291bnQiLCJyZXN1bHQiLCJzYXZlQ2hhbmdlcyIsInVwZGF0ZUJ1c2luZXNzRW50aXR5Iiwic3VjY2VzcyIsImJlX25hbWUiLCJvcGVuQnVzaW5lc3NFbnRpdGllcyIsImVycm9yIiwibWVzc2FnZSIsImRlbGV0ZUJ1c2luZXNzRW50aXR5Iiwic3dhbCIsInRpdGxlIiwidHlwZSIsInNob3dDYW5jZWxCdXR0b24iLCJjb25maXJtQnV0dG9uQ29sb3IiLCJjb25maXJtQnV0dG9uVGV4dCIsImNhbmNlbEJ1dHRvblRleHQiLCJjbG9zZU9uQ29uZmlybSIsImNsb3NlT25DYW5jZWwiLCJhbmltYXRpb24iLCJjdXN0b21DbGFzcyIsImlzQ29uZmlybSIsImFkZExvZ2ljYWxVbml0Iiwib3BlbiIsInRlbXBsYXRlIiwic2l6ZSIsIndpbmRvd0NsYXNzIiwicmVzb2x2ZSIsImJlSWQiLCJiZU5hbWUiLCIkdWliTW9kYWxJbnN0YW5jZSIsImxvZ2ljYWxVbml0cyIsImxvZ2ljYWxVbml0c0RhdGEiLCJjbG9zZSIsImRhdGEiLCJyZWxvYWREYXRhIiwiZHRJbnN0YW5jZSIsImNvbnRyb2xsZXJBcyIsIlBvc3RFeGVjdXRpb25Qcm9jZXNzQWN0aW9ucyIsImFkZCIsImluZGV4IiwicG9zdEV4ZWN1dGlvbkRhdGEiLCJkdEluc3RhbmNlUEUiLCJ1cGRhdGVMb2dpY2FsVW5pdCIsImxvZ2ljYWxVbml0SW5kZXgiLCJyZW1vdmVMb2dpY2FsVW5pdEVycm9yTWVzc2FnZSIsInJlbW92ZUxvZ2ljYWxVbml0IiwiZ2V0TG9naWNhbFVuaXRzIiwibHVUb1JlbW92ZSIsImNoaWxkTFUiLCJfIiwiZmluZCIsImx1X3BhcmVudF9pZCIsImx1X2lkIiwibHVfbmFtZSIsImRlbGV0ZUxvZ2ljYWxVbml0Iiwic3BsaWNlIiwibGVuZ3RoIiwiZGVsZXRlVGFza0ZvckJFIiwibG9hZGluZ1RhYmxlIiwiZ2V0QkVMb2dpY2FsVW5pdHMiLCJkdENvbHVtbnMiLCJkdENvbHVtbkRlZnMiLCJoZWFkZXJzIiwiY29sdW1uIiwibmFtZSIsImNsaWNrQWJsZSIsInVuc2hpZnQiLCJhY3Rpb25zQ29sdW1uIiwiZnVsbCIsIm1ldGEiLCJyb3ciLCJpIiwicHVzaCIsIm5ld0NvbHVtbiIsIndpdGhUaXRsZSIsInJlbmRlcldpdGgiLCJnZXRUYWJsZURhdGEiLCJkZWZlcnJlZCIsImRlZmVyIiwicHJvbWlzZSIsImR0T3B0aW9ucyIsImZyb21GblByb21pc2UiLCJ3aXRoRE9NIiwid2l0aE9wdGlvbiIsImFuZ3VsYXIiLCJlbGVtZW50IiwiY29udGVudHMiLCJ3aXRoQnV0dG9ucyIsImNhc2VJbnNlbnNpdGl2ZSIsIndpdGhMaWdodENvbHVtbkZpbHRlciIsIjEiLCIyIiwiMyIsInZhbHVlcyIsIm1hcCIsImZpbHRlciIsInVuaXF1ZSIsImVsMiIsImVsIiwidmFsdWUiLCJsYWJlbCIsIjQiLCI1IiwiZHRJbnN0YW5jZUNhbGxiYWNrIiwiaXNGdW5jdGlvbiIsImlzRGVmaW5lZCIsImNoYW5nZURhdGEiLCJyZW1vdmVQb3N0RXhlY3V0aW9uUHJvY2VzcyIsInBvc3RFeGVjdXRpb25Qcm9jZXNzVG9SZW1vdmUiLCJkZWxldGVFeGVjdXRpb25Qcm9jZXNzIiwicHJvY2Vzc19pZCIsInByb2Nlc3NfbmFtZSIsImxvYWRpbmdUYWJsZVBFIiwiZ2V0QkVQb3N0RXhlY3V0aW9uUHJvY2VzcyIsImR0Q29sdW1uc1BFIiwiZHRDb2x1bW5EZWZzUEUiLCJoZWFkZXJzUEUiLCJhY3Rpb25zQ29sdW1uUEUiLCJnZXRUYWJsZURhdGFQRSIsImR0T3B0aW9uc1BFIiwiZHRJbnN0YW5jZUNhbGxiYWNrUEUiLCJtb2R1bGUiLCJkaXJlY3RpdmUiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLDBCQXVoQkwsTUFBTyxDQUNIQyxTQUFVLElBQ1ZDLFlBdmhCVyw2Q0F3aEJYQyxNQUFPLENBQ0hDLFFBQVMsS0FFYkMsV0F6aEJhLFNBQVVDLE9BQVFDLFdBQVlDLG1CQUFvQkMsV0FBWUMsVUFBV0MsT0FBUUMsU0FBVUMsWUFBWUMsZ0JBQWdCQyxpQkFBaUJDLEdBQUdDLFVBQ3hKLElBQUlDLG1CQUFxQkMsS0FDekJELG1CQUFtQkUsbUJBQXFCZCxPQUFPRixRQUFRaUIsZUFFdkRILG1CQUFtQkksY0FBb0UsWUFBbkRKLG1CQUFtQkUsbUJBQW1CRyxZQUE0QlYsWUFBWVcsaUJBQWlCLEdBRW5JakIsV0FBV2tCLGtCQUFrQlAsbUJBQW1CRSxtQkFBbUJNLE9BQU9DLE1BQUssU0FBU0MsVUFDMUQsV0FBdEJBLFNBQVNDLFVBQ1RYLG1CQUFtQlksYUFBZUYsU0FBU0csT0FHM0NiLG1CQUFtQlksYUFBZSxLQUkxQ1osbUJBQW1CYyxZQUFjLFdBQzdCekIsV0FBVzBCLHFCQUFxQmYsbUJBQW1CRSxtQkFBbUJNLE1BQU9SLG1CQUFtQkUsb0JBQW9CTyxNQUFLLFNBQVVDLFVBQ3JHLFdBQXRCQSxTQUFTQyxXQUNUbEIsT0FBT3VCLFFBQVEscUJBQXVCaEIsbUJBQW1CRSxtQkFBbUJlLFFBQVMsd0JBQ3JGdkIsVUFBUyxXQUNMTixPQUFPRixRQUFRZ0MseUJBQ2hCLE1BR0h6QixPQUFPMEIsTUFBTSxxQkFBdUJuQixtQkFBbUJFLG1CQUFtQmUsUUFBUyxzQkFBd0JQLFNBQVNVLGFBS2hJcEIsbUJBQW1CcUIscUJBQXVCLFdBQ2xDckIsbUJBQW1CWSxhQUFlLEVBQ2xDckIsV0FBVytCLEtBQUssQ0FDUkMsTUFBTyxtQkFBcUJ2QixtQkFBbUJFLG1CQUFtQmUsUUFBM0QsNkVBQ0RqQixtQkFBbUJFLG1CQUFtQmUsUUFBVSxtRUFDdERPLEtBQU0sVUFDTkMsa0JBQWtCLEVBQ2xCQyxtQkFBb0IsVUFDcEJDLGtCQUFtQixLQUNuQkMsaUJBQWtCLE1BQ2xCQyxnQkFBZ0IsRUFDaEJDLGVBQWUsRUFDZkMsVUFBVyxRQUNYQyxZQUFhLHNCQUVqQixTQUFVQyxXQUNEQSxXQUNENUMsV0FBV2dDLHFCQUFxQnJCLG1CQUFtQkUsbUJBQW1CTSxPQUFPQyxNQUFLLFNBQVVDLFVBQzlELFdBQXRCQSxTQUFTQyxXQUNUbEIsT0FBT3VCLFFBQVEscUJBQXVCaEIsbUJBQW1CRSxtQkFBbUJlLFFBQVMsd0JBQ3JGdkIsVUFBUyxXQUNMTixPQUFPRixRQUFRZ0MseUJBQ2hCLE1BR0h6QixPQUFPMEIsTUFBTSxxQkFBdUJuQixtQkFBbUJFLG1CQUFtQmUsUUFBUywwQkFPdkc1QixXQUFXZ0MscUJBQXFCckIsbUJBQW1CRSxtQkFBbUJNLE9BQU9DLE1BQUssU0FBVUMsVUFDOUQsV0FBdEJBLFNBQVNDLFdBQ1RsQixPQUFPdUIsUUFBUSxxQkFBdUJoQixtQkFBbUJFLG1CQUFtQmUsUUFBUyx3QkFDckZ2QixVQUFTLFdBQ0xOLE9BQU9GLFFBQVFnQyx5QkFDaEIsTUFHSHpCLE9BQU8wQixNQUFNLHFCQUF1Qm5CLG1CQUFtQkUsbUJBQW1CZSxRQUFTLHdCQU1uR2pCLG1CQUFtQmtDLGVBQWlCLFdBQ0QxQyxVQUFVMkMsS0FBSyxDQUcxQ0MsU0FBVSx1SUFDVkMsS0FBTyxXQUNQQyxZQUFjLG9CQUNkQyxRQUFTLENBQ0xDLEtBQU14QyxtQkFBbUJFLG1CQUFtQk0sTUFDNUNpQyxPQUFRLFdBQ0osT0FBT3pDLG1CQUFtQkUsbUJBQW1CZSxVQUdyRDlCLFdBQVksU0FBVUMsT0FBUXNELGtCQUFtQnJELFdBQVltRCxLQUFNQyxRQUN6Q3hDLEtBQ04wQyxhQUFnQjNDLG1CQUFtQjRDLGlCQUQ3QjNDLEtBRU51QyxLQUFPQSxLQUZEdkMsS0FHTndDLE9BQVNBLE9BSEh4QyxLQUlONEMsTUFBUSxXQUNwQkgsa0JBQWtCRyxTQUxBNUMsS0FTTjZDLEtBQU8sQ0FDbkJELE1BVmtCNUMsS0FVTTRDLE1BQ3hCTCxLQUFNQSxLQUNOQyxPQUFRQSxPQUNSTSxXQUFhLFdBQ1QvQyxtQkFBbUJnRCxXQUFXRCxZQUFXLFNBQVNELFVBQVMsTUFNdkVHLGFBQWMscUJBSXRCakQsbUJBQW1Ca0QsNEJBQThCLFNBQVVDLElBQUlDLE9BQzNENUQsVUFBVTJDLEtBQUssQ0FHWEMsU0FBVSwyR0FDVkMsS0FBTyxXQUNQQyxZQUFjLG9CQUNkQyxRQUFTLENBQ0xDLEtBQU14QyxtQkFBbUJFLG1CQUFtQk0sTUFDNUNpQyxPQUFRLFdBQ0osT0FBT3pDLG1CQUFtQkUsbUJBQW1CZSxTQUVqRG9DLGtCQUFtQixXQUNmLE9BQUtGLElBR0UsS0FGSW5ELG1CQUFtQnFELGtCQUFrQkQsU0FLeERqRSxXQUFZLFNBQVVDLE9BQVFzRCxrQkFBbUJGLEtBQU1DLE9BQVFZLG1CQUMzRGpFLE9BQU9vRCxLQUFPQSxLQUNkcEQsT0FBT3FELE9BQVNBLE9BQ2hCckQsT0FBT2lFLGtCQUFvQkEsa0JBQzNCakUsT0FBT3lELE1BQVEsV0FDWEgsa0JBQWtCRyxTQUl0QnpELE9BQU8wRCxLQUFPLENBQ1ZELE1BQVF6RCxPQUFPeUQsTUFDZkwsS0FBTUEsS0FDTkMsT0FBUUEsT0FDUlksa0JBQW1CckQsbUJBQW1CcUQsa0JBQ3RDTixXQUFhLFdBQ1QvQyxtQkFBbUJzRCxhQUFhUCxZQUFXLFNBQVNELFVBQVMsU0FTakY5QyxtQkFBbUJ1RCxrQkFBb0IsU0FBU0gsT0FDYjVELFVBQVUyQyxLQUFLLENBRzFDQyxTQUFVLG1NQUNWQyxLQUFPLFdBQ1BFLFFBQVMsQ0FDTEMsS0FBTXhDLG1CQUFtQkUsbUJBQW1CTSxNQUM1Q2lDLE9BQVEsV0FDSixPQUFPekMsbUJBQW1CRSxtQkFBbUJlLFVBR3JEOUIsV0FBWSxTQUFVQyxPQUFRc0Qsa0JBQW1CckQsV0FBWW1ELEtBQU1DLFFBQ3pDeEMsS0FDTjBDLGFBQWdCM0MsbUJBQW1CNEMsaUJBRDdCM0MsS0FFTnVELGlCQUFvQkosTUFGZG5ELEtBR040QyxNQUFRLFdBQ3BCSCxrQkFBa0JHLFNBSkE1QyxLQU1ONkMsS0FBTyxDQUNuQkQsTUFQa0I1QyxLQU9NNEMsTUFDeEJFLFdBQWEsV0FDVC9DLG1CQUFtQmdELFdBQVdELFlBQVcsU0FBU0QsVUFBUyxNQU12RUcsYUFBYyxxQkFJdEJqRCxtQkFBbUJ5RCw4QkFBZ0MsU0FBU0wsT0FDeEQzRCxPQUFPMEIsTUFBTSwrQ0FHakJuQixtQkFBbUIwRCxrQkFBb0IsU0FBVU4sT0FDN0MvRCxXQUFXc0Usa0JBQWtCbEQsTUFBSyxTQUFVQyxVQUN4QyxJQUFJa0QsV0FBYTVELG1CQUFtQjRDLGlCQUFpQlEsT0FDckQsR0FBMEIsV0FBdEIxQyxTQUFTQyxVQUF3QixDQUNqQyxJQUFJa0QsUUFBVUMsRUFBRUMsS0FBS3JELFNBQVNHLE9BQVEsQ0FBQ21ELGFBQWNKLFdBQVdLLFFBQzNESixVQUNEQSxRQUFVQyxFQUFFQyxLQUFLL0QsbUJBQW1CNEMsaUJBQWtCLENBQUNvQixhQUFjSixXQUFXSyxTQUUvRUosUUFnQkRwRSxPQUFPMEIsTUFBTSxnQkFBa0JuQixtQkFBbUI0QyxpQkFBaUJRLE9BQU9jLFFBQVUsdUJBQXlCTCxRQUFRSyxTQWZySDdFLFdBQVc4RSxrQkFBa0JuRSxtQkFBbUJFLG1CQUFtQk0sTUFBT1IsbUJBQW1CRSxtQkFBbUJlLFFBQVMyQyxXQUFXSyxNQUFPTCxXQUFXTSxTQUFTekQsTUFBSyxTQUFVQyxVQUNoSixXQUF0QkEsU0FBU0MsV0FDVFgsbUJBQW1CNEMsaUJBQWlCd0IsT0FBT2hCLE1BQU8sR0FDbERwRCxtQkFBbUJnRCxXQUFXRCxZQUFXLFNBQVNELFVBQVMsR0FDVCxHQUE5QzlDLG1CQUFtQjRDLGlCQUFpQnlCLFFBQ3BDaEYsV0FBV2lGLGdCQUFnQnRFLG1CQUFtQkUsbUJBQW1CTSxPQUFPQyxNQUFLLFNBQVNDLGVBTTFGakIsT0FBTzBCLE1BQU0sZ0JBQWtCbkIsbUJBQW1CNEMsaUJBQWlCUSxPQUFPYyxRQUFTLHNCQUF3QnhELFNBQVNVLGlCQVFoSTNCLE9BQU8wQixNQUFNLGtDQUFvQ3lDLFdBQVdNLGFBS3hFbEUsbUJBQW1CdUUsY0FBZSxFQUNsQ2xGLFdBQVdtRixrQkFBa0J4RSxtQkFBbUJFLG1CQUFtQk0sT0FBT0MsTUFBSyxTQUFVQyxVQUNyRixHQUEwQixXQUF0QkEsU0FBU0MsVUFBd0IsQ0FFakMsR0FEQVgsbUJBQW1CNEMsaUJBQW1CbEMsU0FBU0csT0FDckIsV0FBdEJILFNBQVNDLFVBRVQsT0FFSlgsbUJBQW1CZ0QsV0FBYSxHQUNoQ2hELG1CQUFtQnlFLFVBQVksR0FDL0J6RSxtQkFBbUIwRSxhQUFlLEdBQ2xDMUUsbUJBQW1CMkUsUUFBVSxDQUN6QixDQUNJQyxPQUFTLFVBQ1RDLEtBQU8sUUFFWCxDQUNJRCxPQUFTLGlCQUNUQyxLQUFPLGVBRVgsQ0FDSUQsT0FBUyxpQkFDVEMsS0FBTyxhQUVYLENBQ0lELE9BQVMsZUFDVEMsS0FBTyxjQUNQQyxXQUFZLElBU2Y5RSxtQkFBbUJJLGVBQ3BCSixtQkFBbUIyRSxRQUFRSSxRQUFRLENBQy9CSCxPQUFTLFVBQ1RDLEtBQU8sS0F3QmYsSUFwQkEsSUFBSUcsY0FBZ0IsU0FBU2xDLEtBQU10QixLQUFNeUQsS0FBTUMsTUFDM0MsTUFBTyx1VEFHa0hBLEtBQUtDLElBSHZILDhIQUsrR0QsS0FBS0MsSUFMcEgsMEpBTTRERCxLQUFLQyxJQU5qRSwyTEFROEdELEtBQUtDLElBUm5ILHlKQVVnREQsS0FBS0MsSUFWckQsMkpBV2dCbkYsbUJBQW1CNEMsaUJBQWlCc0MsS0FBS0MsS0FBS2pCLFFBQVUsNEVBQTZFbEUsbUJBQW1CNEMsaUJBQWlCc0MsS0FBS0MsS0FBS2pCLFFBWG5NLDBTQWFpRGdCLEtBQUtDLElBYnRELHVMQW1CRkMsRUFBSSxFQUFHQSxFQUFLcEYsbUJBQW1CMkUsUUFBUU4sT0FBU2UsSUFDVCxXQUF4Q3BGLG1CQUFtQjJFLFFBQVFTLEdBQUdSLE9BQzlCNUUsbUJBQW1CeUUsVUFBVVksS0FBS3pGLGdCQUFnQjBGLFVBQVV0RixtQkFBbUIyRSxRQUFRUyxHQUFHUixRQUFRVyxVQUFVdkYsbUJBQW1CMkUsUUFBUVMsR0FBR1AsTUFBTVcsV0FBV1IsZ0JBRzNKaEYsbUJBQW1CeUUsVUFBVVksS0FBS3pGLGdCQUFnQjBGLFVBQVV0RixtQkFBbUIyRSxRQUFRUyxHQUFHUixRQUFRVyxVQUFVdkYsbUJBQW1CMkUsUUFBUVMsR0FBR1AsT0FJbEo3RSxtQkFBbUJ5RixhQUFlLFdBQzlCLElBQUlDLFNBQVc1RixHQUFHNkYsUUFFbEIsT0FEQUQsU0FBU25ELFFBQVF2QyxtQkFBbUI0QyxrQkFDN0I4QyxTQUFTRSxTQUdwQjVGLG1CQUFtQjZGLFVBQVloRyxpQkFBaUJpRyxlQUFjLFdBQ3RELE9BQU85RixtQkFBbUJ5RixrQkFFN0JNLFFBQVEsNEJBQ1JDLFdBQVcsY0FBYyxTQUFVYixLQUVoQ3BGLFNBQVNrRyxRQUFRQyxRQUFRZixLQUFLZ0IsV0FBOUJwRyxDQUEwQ1gsV0FFN0M0RyxXQUFXLFdBQVcsR0FDdEJJLFlBQVksSUFFWkosV0FBVyxtQkFBa0IsR0FDN0JBLFdBQVcsU0FBUyxDQUNqQkssaUJBQW1CLElBR25CckcsbUJBQW1CNEMsa0JBQW9CNUMsbUJBQW1CNEMsaUJBQWlCeUIsT0FBUyxHQUNwRnJFLG1CQUFtQjZGLFVBQVVTLHNCQUFzQixDQUMvQ0MsRUFBSSxDQUNBL0UsS0FBTSxRQUVWZ0YsRUFBSSxDQUNBaEYsS0FBTSxRQUVWaUYsRUFBSSxDQUNBakYsS0FBTSxTQUNOa0YsT0FBUTVDLEVBQUU2QyxJQUFJN0MsRUFBRThDLE9BQU85QyxFQUFFK0MsT0FBTy9DLEVBQUU2QyxJQUFJM0csbUJBQW1CNEMsaUJBQWtCLG9CQUFtQixTQUFTa0UsS0FDbkcsU0FBSUEsS0FBYyxNQUFQQSxLQUFzQixJQUFQQSxTQUkzQixTQUFTQyxJQUNSLE1BQU8sQ0FBQ0MsTUFBUUQsR0FBR0UsTUFBT0YsUUFHbENHLEVBQUksQ0FDQTFGLEtBQU0sU0FDTmtGLE9BQVE1QyxFQUFFNkMsSUFBSTdDLEVBQUU4QyxPQUFPOUMsRUFBRStDLE9BQU8vQyxFQUFFNkMsSUFBSTNHLG1CQUFtQjRDLGlCQUFrQixrQkFBaUIsU0FBU2tFLEtBQ2pHLFNBQUlBLEtBQWMsTUFBUEEsS0FBc0IsSUFBUEEsU0FJM0IsU0FBU0MsSUFDUixNQUFPLENBQUNDLE1BQVFELEdBQUdFLE1BQU9GLFFBR2xDSSxFQUFJLENBQ0EzRixLQUFNLFNBQ05rRixPQUFRNUMsRUFBRTZDLElBQUk3QyxFQUFFOEMsT0FBTzlDLEVBQUUrQyxPQUFPL0MsRUFBRTZDLElBQUkzRyxtQkFBbUI0QyxpQkFBa0IsZ0JBQWUsU0FBU2tFLEtBQy9GLFNBQUlBLEtBQWMsTUFBUEEsS0FBc0IsSUFBUEEsU0FJM0IsU0FBU0MsSUFDUixNQUFPLENBQUNDLE1BQVFELEdBQUdFLE1BQU9GLFVBTTlDL0csbUJBQW1Cb0gsbUJBQXFCLFNBQVVwRSxZQUMxQ2lELFFBQVFvQixXQUFXckgsbUJBQW1CZ0QsWUFDdENoRCxtQkFBbUJnRCxXQUFXQSxZQUN2QmlELFFBQVFxQixVQUFVdEgsbUJBQW1CZ0QsY0FDNUNoRCxtQkFBbUJnRCxXQUFhQSxhQUdRLE1BQTVDaEQsbUJBQW1CZ0QsV0FBV3VFLFlBQzlCdkgsbUJBQW1CZ0QsV0FBV3VFLFdBQVd2SCxtQkFBbUJ5RixnQkFHNUQvRixTQUFTLEtBQ0xNLG1CQUFtQnVFLGNBQWUsU0FNMUM5RSxPQUFPMEIsTUFBTSxxQkFBdUJuQixtQkFBbUJFLG1CQUFtQmUsUUFBUyxrQ0FLM0ZqQixtQkFBbUJ3SCwyQkFBNkIsU0FBVXBFLE9BQ3RELElBQUlxRSw2QkFBK0J6SCxtQkFBbUJxRCxrQkFBa0JELE9BQ3hFL0QsV0FBV3FJLHVCQUF1QjFILG1CQUFtQkUsbUJBQW1CTSxNQUFPUixtQkFBbUJFLG1CQUFtQmUsUUFBU3dHLDZCQUE2QkUsV0FBWUYsNkJBQTZCRyxjQUFjbkgsTUFBSyxTQUFVQyxVQUNuTSxXQUF0QkEsU0FBU0MsV0FDVFgsbUJBQW1CcUQsa0JBQWtCZSxPQUFPaEIsTUFBTyxHQUNuRHBELG1CQUFtQnNELGFBQWFQLFlBQVcsU0FBU0QsVUFBUyxJQUc3RHJELE9BQU8wQixNQUFNLDBCQUE0Qm5CLG1CQUFtQnFELGtCQUFrQkQsT0FBT3dFLGFBQWMsc0JBQXdCbEgsU0FBU1UsYUFLaEpwQixtQkFBbUI2SCxnQkFBaUIsRUFDcEN4SSxXQUFXeUksMEJBQTBCOUgsbUJBQW1CRSxtQkFBbUJNLE9BQU9DLE1BQUssU0FBVUMsVUFDN0YsR0FBMEIsV0FBdEJBLFNBQVNDLFVBQXdCLENBR2pDLEdBREFYLG1CQUFtQnFELGtCQUFvQjNDLFNBQVNHLE9BQ3RCLFdBQXRCSCxTQUFTQyxVQUVULE9BRUpYLG1CQUFtQnNELGFBQWUsR0FDbEN0RCxtQkFBbUIrSCxZQUFjLEdBQ2pDL0gsbUJBQW1CZ0ksZUFBaUIsR0FDcENoSSxtQkFBbUJpSSxVQUFZLENBQzNCLENBQ0lyRCxPQUFTLGVBQ1RDLEtBQU8sZ0JBRVgsQ0FDSUQsT0FBUyxrQkFDVEMsS0FBTyxtQkFFWCxDQUNJRCxPQUFTLHNCQUNUQyxLQUFPLGdCQUlWN0UsbUJBQW1CSSxlQUNwQkosbUJBQW1CaUksVUFBVWxELFFBQVEsQ0FDakNILE9BQVMsVUFDVEMsS0FBTyxLQWdDZixJQTVCQSxJQUFJcUQsZ0JBQWtCLFNBQVNwRixLQUFNdEIsS0FBTXlELEtBQU1DLE1BQzdDLE1BQU8sMlZBR3NJQSxLQUFLQyxJQUgzSSxpTEFPdUJuRixtQkFBbUJxRCxrQkFBa0I2QixLQUFLQyxLQUFLeUMsYUFBZSwrRUFBZ0Y1SCxtQkFBbUJxRCxrQkFBa0I2QixLQUFLQyxLQUFLeUMsYUFQcE4sdVJBUzJEMUMsS0FBS0MsSUFUaEUscUxBMkJGQyxFQUFJLEVBQUdBLEVBQUtwRixtQkFBbUJpSSxVQUFVNUQsT0FBU2UsSUFDVCxXQUExQ3BGLG1CQUFtQmlJLFVBQVU3QyxHQUFHUixPQUNoQzVFLG1CQUFtQitILFlBQVkxQyxLQUFLekYsZ0JBQWdCMEYsVUFBVXRGLG1CQUFtQmlJLFVBQVU3QyxHQUFHUixRQUFRVyxVQUFVdkYsbUJBQW1CaUksVUFBVTdDLEdBQUdQLE1BQU1XLFdBQVcwQyxrQkFHaktsSSxtQkFBbUIrSCxZQUFZMUMsS0FBS3pGLGdCQUFnQjBGLFVBQVV0RixtQkFBbUJpSSxVQUFVN0MsR0FBR1IsUUFBUVcsVUFBVXZGLG1CQUFtQmlJLFVBQVU3QyxHQUFHUCxPQUl4SjdFLG1CQUFtQm1JLGVBQWlCLFdBQ2hDLElBQUl6QyxTQUFXNUYsR0FBRzZGLFFBRWxCLE9BREFELFNBQVNuRCxRQUFRdkMsbUJBQW1CcUQsbUJBQzdCcUMsU0FBU0UsU0FHcEI1RixtQkFBbUJvSSxZQUFjdkksaUJBQWlCaUcsZUFBYyxXQUN4RCxPQUFPOUYsbUJBQW1CbUksb0JBRTdCcEMsUUFBUSw0QkFDUkMsV0FBVyxjQUFjLFNBQVViLEtBRWhDcEYsU0FBU2tHLFFBQVFDLFFBQVFmLEtBQUtnQixXQUE5QnBHLENBQTBDWCxXQUU3QzRHLFdBQVcsV0FBVyxHQUN0QkksWUFBWSxJQUVaSixXQUFXLG1CQUFrQixHQUM3QkEsV0FBVyxTQUFTLENBQ2pCSyxpQkFBbUIsSUFHdkJyRyxtQkFBbUJxRCxtQkFBcUJyRCxtQkFBbUJxRCxrQkFBa0JnQixPQUFTLEdBQ3RGckUsbUJBQW1Cb0ksWUFBWTlCLHNCQUFzQixDQUNqREMsRUFBSSxDQUNBL0UsS0FBTSxRQUVWZ0YsRUFBSSxDQUNBaEYsS0FBTSxRQUVWaUYsRUFBSSxDQUNBakYsS0FBTSxVQUtsQnhCLG1CQUFtQnFJLHFCQUF1QixTQUFVckYsWUFDNUNpRCxRQUFRb0IsV0FBV3JILG1CQUFtQnNELGNBQ3RDdEQsbUJBQW1Cc0QsYUFBYU4sWUFDekJpRCxRQUFRcUIsVUFBVXRILG1CQUFtQnNELGdCQUM1Q3RELG1CQUFtQnNELGFBQWVOLGFBR1EsTUFBOUNoRCxtQkFBbUJzRCxhQUFhaUUsWUFDaEN2SCxtQkFBbUJzRCxhQUFhaUUsV0FBV3ZILG1CQUFtQm1JLGtCQUU5RHpJLFNBQVMsS0FDTE0sbUJBQW1CNkgsZ0JBQWlCLFNBSzVDcEksT0FBTzBCLE1BQU0scUJBQXVCbkIsbUJBQW1CRSxtQkFBbUJlLFFBQVMseUNBSTNGM0IsbUJBQW1CK0YsS0FBSyxDQUFDcEUsUUFBU2pCLG1CQUFtQkUsbUJBQW1CZSxTQUFVLDhCQUE4QixnQkFZaEhnQyxhQUFjLHNCQUt0QmdELFFBQ0txQyxPQUFPLFVBQ1BDLFVBQVUsMEJBQTJCekoiLCJmaWxlIjoiZGlyZWN0aXZlcy9idXNpbmVzc0VudGl0aWVzL2J1c2luZXNzRW50aXR5RGlyZWN0aXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYnVzaW5lc3NFbnRpdHlEaXJlY3RpdmUoKSB7XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBcInZpZXdzL2J1c2luZXNzRW50aXRpZXMvYnVzaW5lc3NFbnRpdHkuaHRtbFwiO1xuXG4gICAgdmFyIGNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBURE1TZXJ2aWNlLCBCcmVhZENydW1ic1NlcnZpY2UsIFN3ZWV0QWxlcnQsICR1aWJNb2RhbCwgdG9hc3RyLCAkdGltZW91dCwgQXV0aFNlcnZpY2UsRFRDb2x1bW5CdWlsZGVyLERUT3B0aW9uc0J1aWxkZXIsJHEsJGNvbXBpbGUpIHtcbiAgICAgICAgdmFyIGJ1c2luZXNzRW50aXR5Q3RybCA9IHRoaXM7XG4gICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEgPSAkc2NvcGUuY29udGVudC5idXNpbmVzc0VudGl0eTtcblxuICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZGlzYWJsZUNoYW5nZSA9IChidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX3N0YXR1cyA9PSAnSW5hY3RpdmUnIHx8ICFBdXRoU2VydmljZS5hdXRob3JpemVkVG9FZGl0KDApKTtcblxuICAgICAgICBURE1TZXJ2aWNlLmdldEJFUHJvZHVjdENvdW50KGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5wcm9kdWN0Q291bnQgPSByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwucHJvZHVjdENvdW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLnNhdmVDaGFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgVERNU2VydmljZS51cGRhdGVCdXNpbmVzc0VudGl0eShidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX2lkLCBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJCdXNpbmVzcyBFbnRpdHkgIyBcIiArIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZSwgXCJVcGRhdGVkIFN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnQub3BlbkJ1c2luZXNzRW50aXRpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNDAwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiQnVzaW5lc3MgRW50aXR5ICMgXCIgKyBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWUsIFwiZmFpbGVkIHRvIFVwZGF0ZSA6IFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmRlbGV0ZUJ1c2luZXNzRW50aXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGJ1c2luZXNzRW50aXR5Q3RybC5wcm9kdWN0Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgU3dlZXRBbGVydC5zd2FsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1c2luZXNzIEVudGl0eSBcIiArIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZSArXCIgd2lsbCBiZSByZW1vdmVkIGZyb20gcmVsYXRlZCBwcm9kdWN0cy4gQWN0aXZlIHRhc2tzIHdoaWNoIGFzc29jaWF0ZWQgdG8gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIgXCIgKyBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWUgKyBcIiB3aWxsIGJlIHNldCB0byBJbmFjdGl2ZS4gQXJlIHlvdSBzdXJlIHRvIHdhbnQgdG8gZGVsZXRlIHRoZSBCRT9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogXCIjREQ2QjU1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJOb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogXCJZZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M6IFwiYW5pbWF0ZWQgZmFkZUluVXBcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoaXNDb25maXJtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ29uZmlybSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZGVsZXRlQnVzaW5lc3NFbnRpdHkoYnVzaW5lc3NFbnRpdHlDdHJsLmJ1c2luZXNzRW50aXR5RGF0YS5iZV9pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJCdXNpbmVzcyBFbnRpdHkgIyBcIiArIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZSwgXCJkZWxldGVkIFN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29udGVudC5vcGVuQnVzaW5lc3NFbnRpdGllcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiQnVzaW5lc3MgRW50aXR5ICMgXCIgKyBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWUsIFwiZmFpbGVkIHRvIGRlbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgVERNU2VydmljZS5kZWxldGVCdXNpbmVzc0VudGl0eShidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhcIkJ1c2luZXNzIEVudGl0eSAjIFwiICsgYnVzaW5lc3NFbnRpdHlDdHJsLmJ1c2luZXNzRW50aXR5RGF0YS5iZV9uYW1lLCBcImRlbGV0ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250ZW50Lm9wZW5CdXNpbmVzc0VudGl0aWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA0MDApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJCdXNpbmVzcyBFbnRpdHkgIyBcIiArIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZSwgXCJmYWlsZWQgdG8gZGVsZXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmFkZExvZ2ljYWxVbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGxvZ2ljYWxVbml0TW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcblxuICAgICAgICAgICAgICAgIC8vIHRlbXBsYXRlVXJsOiAndmlld3MvYnVzaW5lc3NFbnRpdGllcy9sb2dpY2FsVW5pdE1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPG5ldy1sb2dpY2FsLXVuaXRzLWRpcmVjdGl2ZSBkYXRhPVwibG9naWNhbFVuaXRDdHJsLmRhdGFcIiBsb2dpY2FsLXVuaXRzPVwibG9naWNhbFVuaXRDdHJsLmxvZ2ljYWxVbml0c1wiPjwvbmV3LWxvZ2ljYWwtdW5pdHMtZGlyZWN0aXZlPicsXG4gICAgICAgICAgICAgICAgc2l6ZSA6IFwibW9kYWwtbGdcIixcbiAgICAgICAgICAgICAgICB3aW5kb3dDbGFzcyA6ICdMb2dpY2FsVW5pdFdpbmRvdycsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBiZUlkOiBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX2lkLFxuICAgICAgICAgICAgICAgICAgICBiZU5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWxJbnN0YW5jZSwgVERNU2VydmljZSwgYmVJZCwgYmVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2dpY2FsVW5pdEN0cmwgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBsb2dpY2FsVW5pdEN0cmwubG9naWNhbFVuaXRzID0gIGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhO1xuICAgICAgICAgICAgICAgICAgICBsb2dpY2FsVW5pdEN0cmwuYmVJZCA9IGJlSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2ljYWxVbml0Q3RybC5iZU5hbWUgPSBiZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2ljYWxVbml0Q3RybC5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgICAgICBsb2dpY2FsVW5pdEN0cmwuZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlIDogbG9naWNhbFVuaXRDdHJsLmNsb3NlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVJZCA6YmVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlTmFtZSA6YmVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkRGF0YSA6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0SW5zdGFuY2UucmVsb2FkRGF0YShmdW5jdGlvbihkYXRhKXt9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2xvZ2ljYWxVbml0Q3RybCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5Qb3N0RXhlY3V0aW9uUHJvY2Vzc0FjdGlvbnMgPSBmdW5jdGlvbiAoYWRkLGluZGV4KSB7XG4gICAgICAgICAgICAkdWliTW9kYWwub3Blbih7XG5cbiAgICAgICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2J1c2luZXNzRW50aXRpZXMvbG9naWNhbFVuaXRNb2RhbC5odG1sJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxwb3N0LWV4ZWN1dGlvbi1wcm9jZXNzIGRhdGE9XCJkYXRhXCIgcG9zdC1leGVjdXRpb24tcHJvY2Vzcz1cInBvc3RFeGVjdXRpb25EYXRhXCI+PC9wb3N0LWV4ZWN1dGlvbi1wcm9jZXNzPicsXG4gICAgICAgICAgICAgICAgc2l6ZSA6IFwibW9kYWwtbGdcIixcbiAgICAgICAgICAgICAgICB3aW5kb3dDbGFzcyA6ICdMb2dpY2FsVW5pdFdpbmRvdycsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBiZUlkOiBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX2lkLFxuICAgICAgICAgICAgICAgICAgICBiZU5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBvc3RFeGVjdXRpb25EYXRhOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnVzaW5lc3NFbnRpdHlDdHJsLnBvc3RFeGVjdXRpb25EYXRhW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsSW5zdGFuY2UsIGJlSWQsIGJlTmFtZSwgcG9zdEV4ZWN1dGlvbkRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJlSWQgPSBiZUlkO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmVOYW1lID0gYmVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9zdEV4ZWN1dGlvbkRhdGEgPSBwb3N0RXhlY3V0aW9uRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2UgOiAkc2NvcGUuY2xvc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBiZUlkIDpiZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVOYW1lIDpiZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0RXhlY3V0aW9uRGF0YTogYnVzaW5lc3NFbnRpdHlDdHJsLnBvc3RFeGVjdXRpb25EYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkRGF0YSA6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0SW5zdGFuY2VQRS5yZWxvYWREYXRhKGZ1bmN0aW9uKGRhdGEpe30sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC51cGRhdGVMb2dpY2FsVW5pdCA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgICAgIHZhciBsb2dpY2FsVW5pdE1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cbiAgICAgICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2J1c2luZXNzRW50aXRpZXMvbG9naWNhbFVuaXRNb2RhbC5odG1sJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzx1cGRhdGUtbG9naWNhbC11bml0cy1kaXJlY3RpdmUgZGF0YT1cImxvZ2ljYWxVbml0Q3RybC5kYXRhXCIgbG9naWNhbC11bml0cz1cImxvZ2ljYWxVbml0Q3RybC5sb2dpY2FsVW5pdHNcIiBsb2dpY2FsLXVuaXQtaW5kZXg9XCJsb2dpY2FsVW5pdEN0cmwubG9naWNhbFVuaXRJbmRleFwiPjwvdXBkYXRlLWxvZ2ljYWwtdW5pdHMtZGlyZWN0aXZlPicsXG4gICAgICAgICAgICAgICAgc2l6ZSA6IFwibW9kYWwtbGdcIixcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgIGJlSWQ6IGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfaWQsXG4gICAgICAgICAgICAgICAgICAgIGJlTmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbEluc3RhbmNlLCBURE1TZXJ2aWNlLCBiZUlkLCBiZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2ljYWxVbml0Q3RybCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2ljYWxVbml0Q3RybC5sb2dpY2FsVW5pdHMgPSAgYnVzaW5lc3NFbnRpdHlDdHJsLmxvZ2ljYWxVbml0c0RhdGE7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2ljYWxVbml0Q3RybC5sb2dpY2FsVW5pdEluZGV4ID0gIGluZGV4O1xuICAgICAgICAgICAgICAgICAgICBsb2dpY2FsVW5pdEN0cmwuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBsb2dpY2FsVW5pdEN0cmwuZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlIDogbG9naWNhbFVuaXRDdHJsLmNsb3NlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkRGF0YSA6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0SW5zdGFuY2UucmVsb2FkRGF0YShmdW5jdGlvbihkYXRhKXt9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2xvZ2ljYWxVbml0Q3RybCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLnJlbW92ZUxvZ2ljYWxVbml0RXJyb3JNZXNzYWdlID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdMVSBhcHBlYXJzIGFzIFBhcmVudCBMVSDigJMgY2Fu4oCZdCBiZSByZW1vdmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwucmVtb3ZlTG9naWNhbFVuaXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0TG9naWNhbFVuaXRzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbHVUb1JlbW92ZSA9IGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZExVID0gXy5maW5kKHJlc3BvbnNlLnJlc3VsdCwge2x1X3BhcmVudF9pZDogbHVUb1JlbW92ZS5sdV9pZH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkTFUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTFUgPSBfLmZpbmQoYnVzaW5lc3NFbnRpdHlDdHJsLmxvZ2ljYWxVbml0c0RhdGEsIHtsdV9wYXJlbnRfaWQ6IGx1VG9SZW1vdmUubHVfaWR9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkTFUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZGVsZXRlTG9naWNhbFVuaXQoYnVzaW5lc3NFbnRpdHlDdHJsLmJ1c2luZXNzRW50aXR5RGF0YS5iZV9pZCwgYnVzaW5lc3NFbnRpdHlDdHJsLmJ1c2luZXNzRW50aXR5RGF0YS5iZV9uYW1lLCBsdVRvUmVtb3ZlLmx1X2lkLCBsdVRvUmVtb3ZlLmx1X25hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwubG9naWNhbFVuaXRzRGF0YS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZS5yZWxvYWREYXRhKGZ1bmN0aW9uKGRhdGEpe30sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVzaW5lc3NFbnRpdHlDdHJsLmxvZ2ljYWxVbml0c0RhdGEubGVuZ3RoID09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVERNU2VydmljZS5kZWxldGVUYXNrRm9yQkUoYnVzaW5lc3NFbnRpdHlDdHJsLmJ1c2luZXNzRW50aXR5RGF0YS5iZV9pZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJMb2dpY2FsIFVuaXQgXCIgKyBidXNpbmVzc0VudGl0eUN0cmwubG9naWNhbFVuaXRzRGF0YVtpbmRleF0ubHVfbmFtZSwgXCJGYWlsZWQgdG8gZGVsZXRlIDogXCIgKyByZXNwb25zZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiTG9naWNhbCBVbml0IFwiICsgYnVzaW5lc3NFbnRpdHlDdHJsLmxvZ2ljYWxVbml0c0RhdGFbaW5kZXhdLmx1X25hbWUgKyBcIiBpcyBhIHBhcmVudCBmb3IgbHUgXCIgKyBjaGlsZExVLmx1X25hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIGxvZ2ljYWwgVW5pdCAgXCIgKyBsdVRvUmVtb3ZlLmx1X25hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5sb2FkaW5nVGFibGUgPSB0cnVlO1xuICAgICAgICBURE1TZXJ2aWNlLmdldEJFTG9naWNhbFVuaXRzKGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmxvZ2ljYWxVbml0c0RhdGEgPSByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSAhPSAnU1VDQ0VTUycpe1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gc2hvdyBFcnJvclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlID0ge307XG4gICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0Q29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5kdENvbHVtbkRlZnMgPSBbXTtcbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVycyA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uIDogJ2x1X25hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6ICdOYW1lJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gOiAnbHVfZGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6ICdEZXNjcmlwdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uIDogJ2x1X3BhcmVudF9uYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiAnUGFyZW50IExVJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gOiAncHJvZHVjdF9uYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiAnU3lzdGVtIE5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tBYmxlIDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29sdW1uIDogJ2x1X2RjX25hbWUnLFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgbmFtZSA6ICdEYXRhIENlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjbGlja0FibGUgOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgIGlmICghYnVzaW5lc3NFbnRpdHlDdHJsLmRpc2FibGVDaGFuZ2Upe1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVycy51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiA6ICdhY3Rpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBhY3Rpb25zQ29sdW1uID0gZnVuY3Rpb24oZGF0YSwgdHlwZSwgZnVsbCwgbWV0YSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7anVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7bWF4LXdpZHRoOiAxMDBweDtcIj4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgPjxpbWcgc3JjPVwiaWNvbnMvZWRpdC5zdmdcIiB1aWItdG9vbHRpcD1cIkVkaXQgTG9naWNhbCBVbml0XCIgdG9vbHRpcC1wbGFjZW1lbnQ9XCJyaWdodFwiIHRvb2x0aXAtYXBwZW5kLXRvLWJvZHk9XCJ0cnVlXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdyb2xlLWhhbmRsZXI9XCJcIiByb2xlPVwiMFwiIG5nLWlmPVwiIWJ1c2luZXNzRW50aXR5Q3RybC5kaXNhYmxlQ2hhbmdlXCIgbmctY2xpY2s9XCJidXNpbmVzc0VudGl0eUN0cmwudXBkYXRlTG9naWNhbFVuaXQoJyttZXRhLnJvdysnKVwiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCJpY29ucy9kZWxldGUtaWNvbi5zdmdcIiBuZy1zaG93PVwiIShidXNpbmVzc0VudGl0eUN0cmwubG9naWNhbFVuaXRzRGF0YSB8IGNoZWNrSWZMb2dpY2FsVW5pdElzUGFyZW50OicgKyBtZXRhLnJvdyArICcpXCIgdWliLXRvb2x0aXA9XCJEZWxldGUgTG9naWNhbCBVbml0XCIgdG9vbHRpcC1wbGFjZW1lbnQ9XCJyaWdodFwiIHRvb2x0aXAtYXBwZW5kLXRvLWJvZHk9XCJ0cnVlXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZy1jbGljaz1cImJ1c2luZXNzRW50aXR5Q3RybC5yZW1vdmVMb2dpY2FsVW5pdEVycm9yTWVzc2FnZSgnKyBtZXRhLnJvdyArJylcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3JvbGUtaGFuZGxlcj1cIlwiIHJvbGU9XCIwXCIgbmctaWY9XCIhYnVzaW5lc3NFbnRpdHlDdHJsLmRpc2FibGVDaGFuZ2VcIiA+PC9pbWc+JytcbiAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nICBzcmM9XCJpY29ucy9kZWxldGUtaWNvbi5zdmdcIiBuZy1zaG93PVwiYnVzaW5lc3NFbnRpdHlDdHJsLmxvZ2ljYWxVbml0c0RhdGEgfCBjaGVja0lmTG9naWNhbFVuaXRJc1BhcmVudDonICsgbWV0YS5yb3cgKyAnXCIgdWliLXRvb2x0aXA9XCJEZWxldGUgTG9naWNhbCBVbml0XCIgdG9vbHRpcC1wbGFjZW1lbnQ9XCJyaWdodFwiIHRvb2x0aXAtYXBwZW5kLXRvLWJvZHk9XCJ0cnVlXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtd2wtY29uZmlybSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlPVwie3tidXNpbmVzc0VudGl0eUN0cmwubG9naWNhbFVuaXRzRGF0YVsnKyBtZXRhLnJvdyArJ10ucHJvZHVjdF9pZCA9PSBcXCctMVxcJyA/IFxcJyBMVSBtdXN0IGJlIGxpbmtlZCB0byBhIEJFIHRvIGVuYWJsZSBpdHMgZXhlY3V0aW9uIHVzaW5nIHRoZSBURE0gR1VJLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgTFU/XFwnIDogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnXFwnTG9naWNhbCB1bml0ICcrIGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhW21ldGEucm93XS5sdV9uYW1lICsgJyB3aWxsIGJlIHJlbW92ZWQgZnJvbSByZWxhdGVkIHByb2R1Y3RzLiBBY3RpdmUgdGFza3Mgd2hpY2ggYXNzb2NpYXRlZCB0byAnKyBidXNpbmVzc0VudGl0eUN0cmwubG9naWNhbFVuaXRzRGF0YVttZXRhLnJvd10ubHVfbmFtZSsgJyBtYXkgYmUgc2V0IHRvIEluYWN0aXZlLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSB0aGlzIExVP1xcJ319XCIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29uZmlybS10ZXh0PVwiWWVzIDxpIGNsYXNzPVxcJ2dseXBoaWNvbiBnbHlwaGljb24tb2tcXCc8L2k+XCIgY2FuY2VsLXRleHQ9XCJObyA8aSBjbGFzcz1cXCdnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVxcJz48L2k+XCIgIHBsYWNlbWVudD1cInJpZ2h0XCIgIHRvb2x0aXAtYXBwZW5kLXRvLWJvZHk9XCJ0cnVlXCIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb24tY29uZmlybT1cImJ1c2luZXNzRW50aXR5Q3RybC5yZW1vdmVMb2dpY2FsVW5pdCgnK21ldGEucm93KycpXCIgb24tY2FuY2VsPVwiY2FuY2VsQ2xpY2tlZCA9IHRydWVcIiBjb25maXJtLWJ1dHRvbi10eXBlPVwiZGFuZ2VyXCIgY2FuY2VsLWJ1dHRvbi10eXBlPVwiZGVmYXVsdFwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAncm9sZS1oYW5kbGVyPVwiXCIgcm9sZT1cIjBcIiBuZy1pZj1cIiFidXNpbmVzc0VudGl0eUN0cmwuZGlzYWJsZUNoYW5nZVwiID48L2ltZz48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nKyAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgIGJ1c2luZXNzRW50aXR5Q3RybC5oZWFkZXJzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnVzaW5lc3NFbnRpdHlDdHJsLmhlYWRlcnNbaV0uY29sdW1uID09ICdhY3Rpb25zJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0Q29sdW1ucy5wdXNoKERUQ29sdW1uQnVpbGRlci5uZXdDb2x1bW4oYnVzaW5lc3NFbnRpdHlDdHJsLmhlYWRlcnNbaV0uY29sdW1uKS53aXRoVGl0bGUoYnVzaW5lc3NFbnRpdHlDdHJsLmhlYWRlcnNbaV0ubmFtZSkucmVuZGVyV2l0aChhY3Rpb25zQ29sdW1uKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRDb2x1bW5zLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVyc1tpXS5jb2x1bW4pLndpdGhUaXRsZShidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVyc1tpXS5uYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZ2V0VGFibGVEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5kdE9wdGlvbnMgPSBEVE9wdGlvbnNCdWlsZGVyLmZyb21GblByb21pc2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1c2luZXNzRW50aXR5Q3RybC5nZXRUYWJsZURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhET00oJzxcImh0bWw1YnV0dG9uc1wiQj5sVGZnaXRwJylcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oJ2NyZWF0ZWRSb3cnLCBmdW5jdGlvbiAocm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWNvbXBpbGluZyBzbyB3ZSBjYW4gYmluZCBBbmd1bGFyIGRpcmVjdGl2ZSB0byB0aGUgRFRcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb21waWxlKGFuZ3VsYXIuZWxlbWVudChyb3cpLmNvbnRlbnRzKCkpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzY3JvbGxYJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC53aXRoQnV0dG9ucyhbXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKFwiY2FzZUluc2Vuc2l0aXZlXCIsdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oJ3NlYXJjaCcse1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXNlSW5zZW5zaXRpdmVcIjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhICYmIGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0T3B0aW9ucy53aXRoTGlnaHRDb2x1bW5GaWx0ZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMiA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBfLm1hcChfLmZpbHRlcihfLnVuaXF1ZShfLm1hcChidXNpbmVzc0VudGl0eUN0cmwubG9naWNhbFVuaXRzRGF0YSwgJ2x1X3BhcmVudF9uYW1lJykpLGZ1bmN0aW9uKGVsMil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwyICYmIGVsMiAhPSBudWxsICYmIGVsMiAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksZnVuY3Rpb24oZWwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZSA6IGVsLGxhYmVsIDplbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKF8uZmlsdGVyKF8udW5pcXVlKF8ubWFwKGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhLCAncHJvZHVjdF9uYW1lJykpLGZ1bmN0aW9uKGVsMil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwyICYmIGVsMiAhPSBudWxsICYmIGVsMiAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksZnVuY3Rpb24oZWwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZSA6IGVsLGxhYmVsIDplbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKF8uZmlsdGVyKF8udW5pcXVlKF8ubWFwKGJ1c2luZXNzRW50aXR5Q3RybC5sb2dpY2FsVW5pdHNEYXRhLCAnbHVfZGNfbmFtZScpKSxmdW5jdGlvbihlbDIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsMiAmJiBlbDIgIT0gbnVsbCAmJiBlbDIgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLGZ1bmN0aW9uKGVsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7dmFsdWUgOiBlbCxsYWJlbCA6ZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZHRJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0SW5zdGFuY2UoZHRJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc0RlZmluZWQoYnVzaW5lc3NFbnRpdHlDdHJsLmR0SW5zdGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZSA9IGR0SW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZS5jaGFuZ2VEYXRhICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlLmNoYW5nZURhdGEoYnVzaW5lc3NFbnRpdHlDdHJsLmdldFRhYmxlRGF0YSgpKTtcblxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmxvYWRpbmdUYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiQnVzaW5lc3MgZW50aXR5ICMgXCIgKyBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWUsIFwiRmFpbGVkIHRvIGdldCBMb2dpY2FsIFVuaXRzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5yZW1vdmVQb3N0RXhlY3V0aW9uUHJvY2VzcyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgdmFyIHBvc3RFeGVjdXRpb25Qcm9jZXNzVG9SZW1vdmUgPSBidXNpbmVzc0VudGl0eUN0cmwucG9zdEV4ZWN1dGlvbkRhdGFbaW5kZXhdO1xuICAgICAgICAgICAgVERNU2VydmljZS5kZWxldGVFeGVjdXRpb25Qcm9jZXNzKGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfaWQsIGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZSwgcG9zdEV4ZWN1dGlvblByb2Nlc3NUb1JlbW92ZS5wcm9jZXNzX2lkLCBwb3N0RXhlY3V0aW9uUHJvY2Vzc1RvUmVtb3ZlLnByb2Nlc3NfbmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5wb3N0RXhlY3V0aW9uRGF0YS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZVBFLnJlbG9hZERhdGEoZnVuY3Rpb24oZGF0YSl7fSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJQb3N0IEV4ZWN1dGlvbiBQcm9jZXNzIFwiICsgYnVzaW5lc3NFbnRpdHlDdHJsLnBvc3RFeGVjdXRpb25EYXRhW2luZGV4XS5wcm9jZXNzX25hbWUsIFwiRmFpbGVkIHRvIGRlbGV0ZSA6IFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmxvYWRpbmdUYWJsZVBFID0gdHJ1ZTtcbiAgICAgICAgVERNU2VydmljZS5nZXRCRVBvc3RFeGVjdXRpb25Qcm9jZXNzKGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG5cbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwucG9zdEV4ZWN1dGlvbkRhdGEgPSByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSAhPSAnU1VDQ0VTUycpe1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gc2hvdyBFcnJvclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlUEUgPSB7fTtcbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRDb2x1bW5zUEUgPSBbXTtcbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRDb2x1bW5EZWZzUEUgPSBbXTtcbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVyc1BFID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gOiAncHJvY2Vzc19uYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiAnUHJvY2VzcyBOYW1lJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gOiAnZXhlY3V0aW9uX29yZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiAnRXhlY3V0aW9uIE9yZGVyJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gOiAncHJvY2Vzc19kZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogJ0Rlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICBpZiAoIWJ1c2luZXNzRW50aXR5Q3RybC5kaXNhYmxlQ2hhbmdlKXtcbiAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmhlYWRlcnNQRS51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiA6ICdhY3Rpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBhY3Rpb25zQ29sdW1uUEUgPSBmdW5jdGlvbihkYXRhLCB0eXBlLCBmdWxsLCBtZXRhKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7anVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7bWF4LXdpZHRoOiAxMDBweDtcIj4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXY+PGltZyBzcmM9XCJpY29ucy9lZGl0LnN2Z1wiIGFsdD1cImVkaXRcIiB1aWItdG9vbHRpcD1cIkVkaXQgUG9zdCBFeGVjdXRpb24gUHJvY2Vzc1wiIHRvb2x0aXAtcGxhY2VtZW50PVwidG9wXCIgdG9vbHRpcC1hcHBlbmQtdG8tYm9keT1cInRydWVcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyByb2xlLWhhbmRsZXI9XCJcIiByb2xlPVwiMFwiIG5nLWlmPVwiIWJ1c2luZXNzRW50aXR5Q3RybC5kaXNhYmxlQ2hhbmdlXCIgbmctY2xpY2s9XCJidXNpbmVzc0VudGl0eUN0cmwuUG9zdEV4ZWN1dGlvblByb2Nlc3NBY3Rpb25zKGZhbHNlLCAnICsgbWV0YS5yb3cgKyAnKVwiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCJpY29ucy9kZWxldGUtaWNvbi5zdmdcIiB1aWItdG9vbHRpcD1cIkRlbGV0ZSBFbnRpdHkgR3JvdXAgUXVlcnlcIiB0b29sdGlwLXBsYWNlbWVudD1cInRvcFwiIHRvb2x0aXAtYXBwZW5kLXRvLWJvZHk9XCJ0cnVlXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtd2wtY29uZmlybSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlPVwiUHJvY2VzcyBuYW1lICcrIGJ1c2luZXNzRW50aXR5Q3RybC5wb3N0RXhlY3V0aW9uRGF0YVttZXRhLnJvd10ucHJvY2Vzc19uYW1lICsgJyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgQnVzaW5lc3MgRW50aXR5LiBBY3RpdmUgdGFza3Mgd2hpY2ggYXNzb2NpYXRlZCB0byAnKyBidXNpbmVzc0VudGl0eUN0cmwucG9zdEV4ZWN1dGlvbkRhdGFbbWV0YS5yb3ddLnByb2Nlc3NfbmFtZSArICcgd2lsbCBiZSBzZXQgdG8gSW5hY3RpdmUuIEFyZSB5b3Ugc3VyZSB0aGF0IHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHByb2Nlc3M/XCIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29uZmlybS10ZXh0PVwiWWVzIDxpIGNsYXNzPVxcJ2dseXBoaWNvbiBnbHlwaGljb24tb2tcXCc8L2k+XCIgY2FuY2VsLXRleHQ9XCJObyA8aSBjbGFzcz1cXCdnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVxcJz48L2k+XCIgIHBsYWNlbWVudD1cInJpZ2h0XCIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb24tY29uZmlybT1cImJ1c2luZXNzRW50aXR5Q3RybC5yZW1vdmVQb3N0RXhlY3V0aW9uUHJvY2VzcygnKyBtZXRhLnJvdyArJylcIiBvbi1jYW5jZWw9XCJjYW5jZWxDbGlja2VkID0gdHJ1ZVwiIGNvbmZpcm0tYnV0dG9uLXR5cGU9XCJkYW5nZXJcIiBjYW5jZWwtYnV0dG9uLXR5cGU9XCJkZWZhdWx0XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdyb2xlLWhhbmRsZXI9XCJcIiByb2xlPVwiMFwiIG5nLWlmPVwiIWJ1c2luZXNzRW50aXR5Q3RybC5kaXNhYmxlQ2hhbmdlXCI+PC9pbWc+PGRpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIHJldHVybiAnJyArXG4gICAgICAgICAgICAgICAgLy8gJzxkaXYgY2xhc3M9XCJjb2wtbGctNlwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIHVpYi10b29sdGlwPVwiRWRpdCBFbnRpdHkgU2VsZWN0aW9uIFF1ZXJ5XCIgdG9vbHRpcC1wbGFjZW1lbnQ9XCJ0b3BcIicgK1xuICAgICAgICAgICAgICAgIC8vICdjbGFzcz1cImJ0biBidG4tY2lyY2xlIGJ0bi1wcmltYXJ5XCIgcm9sZS1oYW5kbGVyPVwiXCIgcm9sZT1cIjBcIiBuZy1pZj1cIiFidXNpbmVzc0VudGl0eUN0cmwuZGlzYWJsZUNoYW5nZVwiIG5nLWNsaWNrPVwiYnVzaW5lc3NFbnRpdHlDdHJsLkVudGl0eVNlbGVjdGlvblF1ZXJ5QWN0aW9ucyhmYWxzZSwgJyArIG1ldGEucm93ICsgJylcIj48aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2J1dHRvbj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAvLyAnPGRpdiBjbGFzcz1cImNvbC1sZy02XCI+JyArXG4gICAgICAgICAgICAgICAgLy8gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIHVpYi10b29sdGlwPVwiRGVsZXRlIEVudGl0eSBTZWxlY3Rpb24gUXVlcnlcIiB0b29sdGlwLXBsYWNlbWVudD1cInRvcFwiJyArXG4gICAgICAgICAgICAgICAgLy8gJ2NsYXNzPVwiYnRuIGJ0bi1jaXJjbGUgYnRuLWRhbmdlclwiIG13bC1jb25maXJtICcgK1xuICAgICAgICAgICAgICAgIC8vICdtZXNzYWdlPVwiRW50aXR5IFNlbGVjdGlvbiBRdWVyeSBbJysgYnVzaW5lc3NFbnRpdHlDdHJsLmVudGl0eVNlbGVjdGlvbkRhdGFbbWV0YS5yb3ddLmVudGl0eV9zZWxlY3Rpb25fbmFtZSArICddIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHJlbGF0ZWQgRW50aXRpZXMgU2VsZWN0aW9uIFF1ZXJpZXMuIEFjdGl2ZSB0YXNrcyB3aGljaCBhc3NvY2lhdGVkIHRvIFsnKyBidXNpbmVzc0VudGl0eUN0cmwuZW50aXR5U2VsZWN0aW9uRGF0YVttZXRhLnJvd10uZW50aXR5X3NlbGVjdGlvbl9uYW1lICsgJ10gbWF5IGJlIHNldCB0byBJbmFjdGl2ZS4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgdGhpcyBFbnRpdHkgU2VsZWN0aW9uIFF1ZXJ5P1wiICcgK1xuICAgICAgICAgICAgICAgIC8vICdjb25maXJtLXRleHQ9XCJZZXMgPGkgY2xhc3M9XFwnZ2x5cGhpY29uIGdseXBoaWNvbi1va1xcJzwvaT5cIiBjYW5jZWwtdGV4dD1cIk5vIDxpIGNsYXNzPVxcJ2dseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXFwnPjwvaT5cIiAgcGxhY2VtZW50PVwiXCIgJyArXG4gICAgICAgICAgICAgICAgLy8gJ29uLWNvbmZpcm09XCJidXNpbmVzc0VudGl0eUN0cmwucmVtb3ZlRW50aXR5U2VsZWN0aW9uUXVlcnkoJysgbWV0YS5yb3cgKycpXCIgb24tY2FuY2VsPVwiY2FuY2VsQ2xpY2tlZCA9IHRydWVcIiBjb25maXJtLWJ1dHRvbi10eXBlPVwiZGFuZ2VyXCIgY2FuY2VsLWJ1dHRvbi10eXBlPVwiZGVmYXVsdFwiJyArXG4gICAgICAgICAgICAgICAgLy8gJ3JvbGUtaGFuZGxlcj1cIlwiIHJvbGU9XCIwXCIgbmctaWY9XCIhYnVzaW5lc3NFbnRpdHlDdHJsLmRpc2FibGVDaGFuZ2VcIj48aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvYnV0dG9uPjxkaXY+JyArXG4gICAgICAgICAgICAgICAgLy8gJyc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICBidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVyc1BFLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnVzaW5lc3NFbnRpdHlDdHJsLmhlYWRlcnNQRVtpXS5jb2x1bW4gPT0gJ2FjdGlvbnMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRDb2x1bW5zUEUucHVzaChEVENvbHVtbkJ1aWxkZXIubmV3Q29sdW1uKGJ1c2luZXNzRW50aXR5Q3RybC5oZWFkZXJzUEVbaV0uY29sdW1uKS53aXRoVGl0bGUoYnVzaW5lc3NFbnRpdHlDdHJsLmhlYWRlcnNQRVtpXS5uYW1lKS5yZW5kZXJXaXRoKGFjdGlvbnNDb2x1bW5QRSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmR0Q29sdW1uc1BFLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihidXNpbmVzc0VudGl0eUN0cmwuaGVhZGVyc1BFW2ldLmNvbHVtbikud2l0aFRpdGxlKGJ1c2luZXNzRW50aXR5Q3RybC5oZWFkZXJzUEVbaV0ubmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnVzaW5lc3NFbnRpdHlDdHJsLmdldFRhYmxlRGF0YVBFID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJ1c2luZXNzRW50aXR5Q3RybC5wb3N0RXhlY3V0aW9uRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRPcHRpb25zUEUgPSBEVE9wdGlvbnNCdWlsZGVyLmZyb21GblByb21pc2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1c2luZXNzRW50aXR5Q3RybC5nZXRUYWJsZURhdGFQRSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAud2l0aERPTSgnPFwiaHRtbDVidXR0b25zXCJCPmxUZmdpdHAnKVxuICAgICAgICAgICAgICAgICAgICAud2l0aE9wdGlvbignY3JlYXRlZFJvdycsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY29tcGlsaW5nIHNvIHdlIGNhbiBiaW5kIEFuZ3VsYXIgZGlyZWN0aXZlIHRvIHRoZSBEVFxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUoYW5ndWxhci5lbGVtZW50KHJvdykuY29udGVudHMoKSkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oJ3Njcm9sbFgnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhCdXR0b25zKFtcbiAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oXCJjYXNlSW5zZW5zaXRpdmVcIix0cnVlKVxuICAgICAgICAgICAgICAgICAgICAud2l0aE9wdGlvbignc2VhcmNoJyx7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNhc2VJbnNlbnNpdGl2ZVwiOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChidXNpbmVzc0VudGl0eUN0cmwucG9zdEV4ZWN1dGlvbkRhdGEgJiYgYnVzaW5lc3NFbnRpdHlDdHJsLnBvc3RFeGVjdXRpb25EYXRhLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRPcHRpb25zUEUud2l0aExpZ2h0Q29sdW1uRmlsdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIDEgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgMiA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAzIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZUNhbGxiYWNrUEUgPSBmdW5jdGlvbiAoZHRJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlUEUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZVBFKGR0SW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlUEUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZVBFID0gZHRJbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGJ1c2luZXNzRW50aXR5Q3RybC5kdEluc3RhbmNlUEUuY2hhbmdlRGF0YSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0VudGl0eUN0cmwuZHRJbnN0YW5jZVBFLmNoYW5nZURhdGEoYnVzaW5lc3NFbnRpdHlDdHJsLmdldFRhYmxlRGF0YVBFKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzRW50aXR5Q3RybC5sb2FkaW5nVGFibGVQRSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiQnVzaW5lc3MgZW50aXR5ICMgXCIgKyBidXNpbmVzc0VudGl0eUN0cmwuYnVzaW5lc3NFbnRpdHlEYXRhLmJlX25hbWUsIFwiRmFpbGVkIHRvIGdldCBFbnRpdGllcyBHcm91cCBRdWVyeVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgQnJlYWRDcnVtYnNTZXJ2aWNlLnB1c2goe2JlX25hbWU6IGJ1c2luZXNzRW50aXR5Q3RybC5idXNpbmVzc0VudGl0eURhdGEuYmVfbmFtZX0sICdCVVNJTkVTU19FTlRJVFlfQlJFQURDUlVNQicsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6IFwiRVwiLFxuICAgICAgICB0ZW1wbGF0ZVVybDogdGVtcGxhdGUsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlcjogY29udHJvbGxlcixcbiAgICAgICAgY29udHJvbGxlckFzOiAnYnVzaW5lc3NFbnRpdHlDdHJsJ1xuICAgIH07XG59XG5cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ1RETS1GRScpXG4gICAgLmRpcmVjdGl2ZSgnYnVzaW5lc3NFbnRpdHlEaXJlY3RpdmUnLCBidXNpbmVzc0VudGl0eURpcmVjdGl2ZSk7Il19
