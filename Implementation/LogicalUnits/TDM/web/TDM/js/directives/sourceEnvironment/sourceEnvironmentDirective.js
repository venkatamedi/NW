function sourceEnvironmentDirective(){return{restrict:"E",templateUrl:"views/soruceEnvrionments/sourceEnvironment.html",scope:{content:"="},controller:function($scope,TDMService,BreadCrumbsService,toastr,SweetAlert,$timeout,AuthService,DTColumnBuilder,DTOptionsBuilder,$q,$compile,$uibModal,$http){this._scope=$scope;var sourceEnvironmentCtrl=this;sourceEnvironmentCtrl.environmentData=$scope.content.environmentData,sourceEnvironmentCtrl.pageDisplay="environment",$scope.userRole=AuthService.getRole(),sourceEnvironmentCtrl.showEnvironment=!0,sourceEnvironmentCtrl.disableOwnersChange="Inactive"==sourceEnvironmentCtrl.environmentData.environment_status||!AuthService.authorizedToEdit(0),sourceEnvironmentCtrl.tabClicked=function(newTab){return sourceEnvironmentCtrl.roleForm&&sourceEnvironmentCtrl.roleForm.$dirty&&sourceEnvironmentCtrl.askToSaveChanges("Role",newTab),sourceEnvironmentCtrl.activityPanel="newRole",newTab},sourceEnvironmentCtrl.askToSaveChanges=function(form,newTab){swal({title:"You have unsaved changes.",text:"Do you want to save changes before close?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"No",cancelButtonText:"Yes",closeOnConfirm:!0,closeOnCancel:!0,animation:"false",customClass:"animated fadeInUp"},(function(isConfirm){if(isConfirm)swal("Discard!","Your changes have not been saved!","error");else{switch(form){case"Role":sourceEnvironmentCtrl.saveRoleChanges()}swal("Saved!","Your changes have been saved.","success")}sourceEnvironmentCtrl.activityPanel="empty",sourceEnvironmentCtrl.newTab=newTab}))},sourceEnvironmentCtrl.getSummaryData=function(){sourceEnvironmentCtrl.activityPanel="empty"},sourceEnvironmentCtrl.saveChanges=function(){TDMService.putGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id,sourceEnvironmentCtrl.environmentData).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Source Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"Updated Successfully"),$scope.content.openEnvironments()):toastr.error("Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"failed to Update : "+response.message)}))};var deleteEnvironmentTemp=function(){TDMService.deleteGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/envname/"+sourceEnvironmentCtrl.environmentData.source_environment_name).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Source Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"deleted Successfully"),$timeout((function(){$scope.content.openEnvironments()}),400)):toastr.error("Source Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"failed to delete")}))};sourceEnvironmentCtrl.deleteEnvironment=function(){1==sourceEnvironmentCtrl.tasksCount?SweetAlert.swal({title:"Source Environment will be deleted from all releated tasks. Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"No",cancelButtonText:"Yes",closeOnConfirm:!0,closeOnCancel:!0,animation:"false",customClass:"animated fadeInUp"},(function(isConfirm){isConfirm||deleteEnvironmentTemp()})):deleteEnvironmentTemp()},BreadCrumbsService.breadCrumbChange(1),BreadCrumbsService.push({environmentID:sourceEnvironmentCtrl.environmentData.source_environment_name},"SOURCE_ENVIRONMENT_BREADCRUMB",(function(){$scope.content.openEnvironment(sourceEnvironmentCtrl.environmentData)})),sourceEnvironmentCtrl.openRolesManagement=function(){$scope.content.openRoles(sourceEnvironmentCtrl.environmentData)},sourceEnvironmentCtrl.loadingTableRoles=!0,TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/roles").then((function(response){if("SUCCESS"==response.errorCode){sourceEnvironmentCtrl.roles=_.sortBy(response.result,(function(value){return new Date(value.role_creation_date)})),sourceEnvironmentCtrl.roles.reverse(),sourceEnvironmentCtrl.dtInstanceRoles={},sourceEnvironmentCtrl.dtColumnsRoles=[],sourceEnvironmentCtrl.dtColumnDefsRoles=[],sourceEnvironmentCtrl.headersRoles=[{column:"role_name",name:"Name",clickAble:!0},{column:"role_description",name:"Description",clickAble:!1},{column:"role_creation_date",name:"Creation Date",clickAble:!1,type:"date"},{column:"role_created_by",name:"Created By",clickAble:!1},{column:"role_last_updated_date",name:"Last Update Date",clickAble:!1,type:"date"},{column:"role_last_updated_by",name:"Updated By",clickAble:!1},{column:"role_status",name:"Status",clickAble:!1}];for(var clickAbleColumn=function(data,type,full,meta){return'<a ng-click="sourceEnvironmentCtrl.openRole('+meta.row+')">'+data+"</a>"},changeToLocalDate=function(data,type,full,meta){return moment(data).format("D MMM YYYY, HH:mm")},i=0;i<sourceEnvironmentCtrl.headersRoles.length;i++)1==sourceEnvironmentCtrl.headersRoles[i].clickAble?sourceEnvironmentCtrl.dtColumnsRoles.push(DTColumnBuilder.newColumn(sourceEnvironmentCtrl.headersRoles[i].column).withTitle(sourceEnvironmentCtrl.headersRoles[i].name).renderWith(clickAbleColumn)):"date"==sourceEnvironmentCtrl.headersRoles[i].type?sourceEnvironmentCtrl.dtColumnsRoles.push(DTColumnBuilder.newColumn(sourceEnvironmentCtrl.headersRoles[i].column).withTitle(sourceEnvironmentCtrl.headersRoles[i].name).renderWith(changeToLocalDate)):sourceEnvironmentCtrl.dtColumnsRoles.push(DTColumnBuilder.newColumn(sourceEnvironmentCtrl.headersRoles[i].column).withTitle(sourceEnvironmentCtrl.headersRoles[i].name));var getTableData=function(){var deferred=$q.defer();return deferred.resolve(sourceEnvironmentCtrl.roles),deferred.promise};sourceEnvironmentCtrl.dtOptionsRoles=DTOptionsBuilder.fromFnPromise((function(){return getTableData()})).withDOM("lTfgitp").withOption("createdRow",(function(row){$compile(angular.element(row).contents())($scope)})).withOption("scrollX",!1).withOption("aaSorting",[6,"asc"]).withOption("lengthChange",!1).withOption("paging",!1).withOption("searching",!1).withOption("info",!1).withOption("caseInsensitive",!0).withOption("search",{caseInsensitive:!1}),sourceEnvironmentCtrl.dtInstanceCallbackRoles=function(dtInstance){angular.isFunction(sourceEnvironmentCtrl.dtInstanceRoles)?sourceEnvironmentCtrl.dtInstanceRoles(dtInstance):angular.isDefined(sourceEnvironmentCtrl.dtInstanceRoles)&&(sourceEnvironmentCtrl.dtInstanceRoles=dtInstance)},null!=sourceEnvironmentCtrl.dtInstanceRoles.changeData&&sourceEnvironmentCtrl.dtInstanceRoles.changeData(getTableData()),sourceEnvironmentCtrl.loadingTableRoles=!1}})),TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/users").then((function(response){"SUCCESS"==response.errorCode?(sourceEnvironmentCtrl.allTesters=response.result,sourceEnvironmentCtrl.openRole(0)):(sourceEnvironmentCtrl.hideUsersInput=!0,toastr.error("Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"failed to get All Testers : "+response.message))})),sourceEnvironmentCtrl.openRole=function(index){sourceEnvironmentCtrl.roleData=angular.copy(sourceEnvironmentCtrl.roles[index]),sourceEnvironmentCtrl.roleData.indexInRoles=index,sourceEnvironmentCtrl.roleData.role_type="ALL"==sourceEnvironmentCtrl.roleData.role_type,sourceEnvironmentCtrl.disableChangeRole=sourceEnvironmentCtrl.disableChange||"Inactive"==sourceEnvironmentCtrl.roleData.role_status||!AuthService.authorizedToEdit(1),TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/role/"+sourceEnvironmentCtrl.roleData.role_id+"/users").then((function(response){"SUCCESS"==response.errorCode?(sourceEnvironmentCtrl.testers=response.result,sourceEnvironmentCtrl.allTesters||(sourceEnvironmentCtrl.allTesters=[]),sourceEnvironmentCtrl.allTestersRole=sourceEnvironmentCtrl.allTesters.concat(sourceEnvironmentCtrl.testers),sourceEnvironmentCtrl.allTestersRole.unshift({user_id:-1,username:"ALL"})):(sourceEnvironmentCtrl.hideUsersInput=!0,toastr.error("Role # "+sourceEnvironmentCtrl.roleData.role_name,"failed to get Role Users : "+response.message))})),sourceEnvironmentCtrl.activityPanel="empty",$timeout((function(){sourceEnvironmentCtrl.activityPanel="Role"}),200)},sourceEnvironmentCtrl.deleteRole=function(){TDMService.deleteGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/envname/"+sourceEnvironmentCtrl.environmentData.source_environment_name+"/role/"+sourceEnvironmentCtrl.roleData.role_id+"/rolename/"+sourceEnvironmentCtrl.roleData.role_name).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Role # "+sourceEnvironmentCtrl.roleData.role_name,"deleted Successfully"),sourceEnvironmentCtrl.roleData.role_status="Inactive",sourceEnvironmentCtrl.roles[sourceEnvironmentCtrl.roleData.indexInRoles].role_status="Inactive",sourceEnvironmentCtrl.dtInstanceRoles.reloadData((function(data){}),!0),TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/testers").then((function(response){"SUCCESS"==response.errorCode?sourceEnvironmentCtrl.allTesters=response.result:(sourceEnvironmentCtrl.hideUsersInput=!0,toastr.error("Source Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"failed to get All Testers : "+response.message))})),sourceEnvironmentCtrl.getSummaryData()):toastr.error("Role # "+sourceEnvironmentCtrl.roleData.role_name,"failed to delete")}))},sourceEnvironmentCtrl.saveRoleChanges=function(){TDMService.postGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/envname/"+sourceEnvironmentCtrl.environmentData.source_environment_name+"/role/"+sourceEnvironmentCtrl.roleData.role_id+"/rolename/"+sourceEnvironmentCtrl.roleData.role_name+"/users",sourceEnvironmentCtrl.testers).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Role Users # "+sourceEnvironmentCtrl.roleData.role_name,"Updated Successfully"),TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/testers").then((function(response){"SUCCESS"==response.errorCode?sourceEnvironmentCtrl.allTesters=response.result:(sourceEnvironmentCtrl.hideUsersInput=!0,toastr.error("Source Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"failed to get All Testers : "+response.message))})),sourceEnvironmentCtrl.getSummaryData()):toastr.error("Role Users # "+sourceEnvironmentCtrl.roleData.role_name,"failed to Update : "+response.message)})),sourceEnvironmentCtrl.testers.length>0?sourceEnvironmentCtrl.roleData.role_type="SPECIFIC":sourceEnvironmentCtrl.roleData.role_type?sourceEnvironmentCtrl.roleData.role_type="ALL":sourceEnvironmentCtrl.roleData.role_type="SPECIFIC",TDMService.putGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/envname/"+sourceEnvironmentCtrl.environmentData.source_environment_name+"/role/"+sourceEnvironmentCtrl.roleData.role_id,sourceEnvironmentCtrl.roleData).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Role # "+sourceEnvironmentCtrl.roleData.role_name,"Updated Successfully"),TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/roles").then((function(response){"SUCCESS"==response.errorCode&&(sourceEnvironmentCtrl.roles=response.result,sourceEnvironmentCtrl.dtInstanceRoles.reloadData((function(data){}),!0))}))):toastr.error("Role # "+sourceEnvironmentCtrl.roleData.role_name,"failed to Update : "+response.message)}))},sourceEnvironmentCtrl.openNewRole=function(){deleteEnvironmentTemp(),sourceEnvironmentCtrl.roleData={allowed_creation_of_synthetic_data:!1,allowed_delete_before_load:!1,allowed_random_entity_selection:!1,allowed_request_of_fresh_data:!1,allowed_task_scheduling:!1,allowed_replace_sequences:!1,allowed_refresh_reference_data:!1,allowed_number_of_entities_to_copy:0,role_description:"",role_name:"",role_type:!1},sourceEnvironmentCtrl.activityPanel="newRole",sourceEnvironmentCtrl.testers=[],sourceEnvironmentCtrl.allTesters||(sourceEnvironmentCtrl.allTesters=[])},sourceEnvironmentCtrl.addNewRole=function(){if(_.find(sourceEnvironmentCtrl.roles,{role_name:sourceEnvironmentCtrl.roleData.role_name,role_status:"Active"}))return toastr.error("Role # "+sourceEnvironmentCtrl.roleData.role_name+" Already Exists");TDMService.postGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/envname/"+sourceEnvironmentCtrl.environmentData.source_environment_name+"/role",sourceEnvironmentCtrl.roleData).then((function(response){"SUCCESS"==response.errorCode?(TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/roles").then((function(response){"SUCCESS"==response.errorCode&&(sourceEnvironmentCtrl.roles=response.result,sourceEnvironmentCtrl.dtInstanceRoles.reloadData((function(data){}),!0))})),toastr.success("Role # "+sourceEnvironmentCtrl.roleData.role_name,"Created Successfully"),sourceEnvironmentCtrl.getSummaryData(),TDMService.postGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/envname/"+sourceEnvironmentCtrl.environmentData.source_environment_name+"/role/"+response.result.id+"/rolename/"+sourceEnvironmentCtrl.roleData.role_name+"/users",sourceEnvironmentCtrl.testers).then((function(response){"SUCCESS"==response.errorCode?(toastr.success("Role Users # "+sourceEnvironmentCtrl.roleData.role_name,"Updated Successfully"),TDMService.getGenericAPI("sourceEnvironment/"+sourceEnvironmentCtrl.environmentData.source_environment_id+"/testers").then((function(response){"SUCCESS"==response.errorCode?sourceEnvironmentCtrl.allTesters=response.result:(sourceEnvironmentCtrl.hideUsersInput=!0,toastr.error("Source Environment # "+sourceEnvironmentCtrl.environmentData.source_environment_name,"failed to get All Testers : "+response.message))}))):toastr.error("Role Users # "+sourceEnvironmentCtrl.roleData.role_name,"failed to Update : "+response.message)}))):toastr.error("Role # "+sourceEnvironmentCtrl.roleData.role_name,"Unable to Create : "+response.message)}))}},controllerAs:"sourceEnvironmentCtrl"}}angular.module("TDM-FE").directive("sourceEnvironmentDirective",sourceEnvironmentDirective);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpcmVjdGl2ZXMvc291cmNlRW52aXJvbm1lbnQvc291cmNlRW52aXJvbm1lbnREaXJlY3RpdmUuanMiXSwibmFtZXMiOlsic291cmNlRW52aXJvbm1lbnREaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwic2NvcGUiLCJjb250ZW50IiwiY29udHJvbGxlciIsIiRzY29wZSIsIlRETVNlcnZpY2UiLCJCcmVhZENydW1ic1NlcnZpY2UiLCJ0b2FzdHIiLCJTd2VldEFsZXJ0IiwiJHRpbWVvdXQiLCJBdXRoU2VydmljZSIsIkRUQ29sdW1uQnVpbGRlciIsIkRUT3B0aW9uc0J1aWxkZXIiLCIkcSIsIiRjb21waWxlIiwiJHVpYk1vZGFsIiwiJGh0dHAiLCJ0aGlzIiwiX3Njb3BlIiwic291cmNlRW52aXJvbm1lbnRDdHJsIiwiZW52aXJvbm1lbnREYXRhIiwicGFnZURpc3BsYXkiLCJ1c2VyUm9sZSIsImdldFJvbGUiLCJzaG93RW52aXJvbm1lbnQiLCJkaXNhYmxlT3duZXJzQ2hhbmdlIiwiZW52aXJvbm1lbnRfc3RhdHVzIiwiYXV0aG9yaXplZFRvRWRpdCIsInRhYkNsaWNrZWQiLCJuZXdUYWIiLCJyb2xlRm9ybSIsIiRkaXJ0eSIsImFza1RvU2F2ZUNoYW5nZXMiLCJhY3Rpdml0eVBhbmVsIiwiZm9ybSIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJ0eXBlIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25Db2xvciIsImNvbmZpcm1CdXR0b25UZXh0IiwiY2FuY2VsQnV0dG9uVGV4dCIsImNsb3NlT25Db25maXJtIiwiY2xvc2VPbkNhbmNlbCIsImFuaW1hdGlvbiIsImN1c3RvbUNsYXNzIiwiaXNDb25maXJtIiwic2F2ZVJvbGVDaGFuZ2VzIiwiZ2V0U3VtbWFyeURhdGEiLCJzYXZlQ2hhbmdlcyIsInB1dEdlbmVyaWNBUEkiLCJzb3VyY2VfZW52aXJvbm1lbnRfaWQiLCJ0aGVuIiwicmVzcG9uc2UiLCJlcnJvckNvZGUiLCJzdWNjZXNzIiwic291cmNlX2Vudmlyb25tZW50X25hbWUiLCJvcGVuRW52aXJvbm1lbnRzIiwiZXJyb3IiLCJtZXNzYWdlIiwiZGVsZXRlRW52aXJvbm1lbnRUZW1wIiwiZGVsZXRlR2VuZXJpY0FQSSIsImRlbGV0ZUVudmlyb25tZW50IiwidGFza3NDb3VudCIsImJyZWFkQ3J1bWJDaGFuZ2UiLCJwdXNoIiwiZW52aXJvbm1lbnRJRCIsIm9wZW5FbnZpcm9ubWVudCIsIm9wZW5Sb2xlc01hbmFnZW1lbnQiLCJvcGVuUm9sZXMiLCJsb2FkaW5nVGFibGVSb2xlcyIsImdldEdlbmVyaWNBUEkiLCJyb2xlcyIsIl8iLCJzb3J0QnkiLCJyZXN1bHQiLCJ2YWx1ZSIsIkRhdGUiLCJyb2xlX2NyZWF0aW9uX2RhdGUiLCJyZXZlcnNlIiwiZHRJbnN0YW5jZVJvbGVzIiwiZHRDb2x1bW5zUm9sZXMiLCJkdENvbHVtbkRlZnNSb2xlcyIsImhlYWRlcnNSb2xlcyIsImNvbHVtbiIsIm5hbWUiLCJjbGlja0FibGUiLCJjbGlja0FibGVDb2x1bW4iLCJkYXRhIiwiZnVsbCIsIm1ldGEiLCJyb3ciLCJjaGFuZ2VUb0xvY2FsRGF0ZSIsIm1vbWVudCIsImZvcm1hdCIsImkiLCJsZW5ndGgiLCJuZXdDb2x1bW4iLCJ3aXRoVGl0bGUiLCJyZW5kZXJXaXRoIiwiZ2V0VGFibGVEYXRhIiwiZGVmZXJyZWQiLCJkZWZlciIsInJlc29sdmUiLCJwcm9taXNlIiwiZHRPcHRpb25zUm9sZXMiLCJmcm9tRm5Qcm9taXNlIiwid2l0aERPTSIsIndpdGhPcHRpb24iLCJhbmd1bGFyIiwiZWxlbWVudCIsImNvbnRlbnRzIiwiY2FzZUluc2Vuc2l0aXZlIiwiZHRJbnN0YW5jZUNhbGxiYWNrUm9sZXMiLCJkdEluc3RhbmNlIiwiaXNGdW5jdGlvbiIsImlzRGVmaW5lZCIsImNoYW5nZURhdGEiLCJhbGxUZXN0ZXJzIiwib3BlblJvbGUiLCJoaWRlVXNlcnNJbnB1dCIsImluZGV4Iiwicm9sZURhdGEiLCJjb3B5IiwiaW5kZXhJblJvbGVzIiwicm9sZV90eXBlIiwiZGlzYWJsZUNoYW5nZVJvbGUiLCJkaXNhYmxlQ2hhbmdlIiwicm9sZV9zdGF0dXMiLCJyb2xlX2lkIiwidGVzdGVycyIsImFsbFRlc3RlcnNSb2xlIiwiY29uY2F0IiwidW5zaGlmdCIsInVzZXJfaWQiLCJ1c2VybmFtZSIsInJvbGVfbmFtZSIsImRlbGV0ZVJvbGUiLCJyZWxvYWREYXRhIiwicG9zdEdlbmVyaWNBUEkiLCJvcGVuTmV3Um9sZSIsImFsbG93ZWRfY3JlYXRpb25fb2Zfc3ludGhldGljX2RhdGEiLCJhbGxvd2VkX2RlbGV0ZV9iZWZvcmVfbG9hZCIsImFsbG93ZWRfcmFuZG9tX2VudGl0eV9zZWxlY3Rpb24iLCJhbGxvd2VkX3JlcXVlc3Rfb2ZfZnJlc2hfZGF0YSIsImFsbG93ZWRfdGFza19zY2hlZHVsaW5nIiwiYWxsb3dlZF9yZXBsYWNlX3NlcXVlbmNlcyIsImFsbG93ZWRfcmVmcmVzaF9yZWZlcmVuY2VfZGF0YSIsImFsbG93ZWRfbnVtYmVyX29mX2VudGl0aWVzX3RvX2NvcHkiLCJyb2xlX2Rlc2NyaXB0aW9uIiwiYWRkTmV3Um9sZSIsImZpbmQiLCJpZCIsImNvbnRyb2xsZXJBcyIsIm1vZHVsZSIsImRpcmVjdGl2ZSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsNkJBbWJMLE1BQU8sQ0FDSEMsU0FBVSxJQUNWQyxZQW5iVyxrREFvYlhDLE1BQU8sQ0FDSEMsUUFBUyxLQUViQyxXQXJiYSxTQUFVQyxPQUFRQyxXQUFZQyxtQkFBb0JDLE9BQVFDLFdBQVlDLFNBQVVDLFlBQWFDLGdCQUFpQkMsaUJBQWtCQyxHQUFJQyxTQUFVQyxVQUFXQyxPQUV0S0MsS0FBS0MsT0FBU2QsT0FFZCxJQUFJZSxzQkFBd0JGLEtBQzVCRSxzQkFBc0JDLGdCQUFrQmhCLE9BQU9GLFFBQVFrQixnQkFDdkRELHNCQUFzQkUsWUFBYyxjQUVwQ2pCLE9BQU9rQixTQUFXWixZQUFZYSxVQUM5Qkosc0JBQXNCSyxpQkFBa0IsRUFDeENMLHNCQUFzQk0sb0JBQW1GLFlBQTVETixz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QUc1Q3pELHNCQUFzQnNHLGdCQUFpQixFQUN2Q2xILE9BQU9vRCxNQUFNLHdCQUEwQnhDLHNCQUFzQkMsZ0JBQWdCcUMsd0JBQXlCLCtCQUFpQ0gsU0FBU00sY0FLeEpyRCxPQUFPb0QsTUFBTSxnQkFBa0J4QyxzQkFBc0J3RyxTQUFTYyxVQUFXLHNCQUF3Qm5GLFNBQVNNLGFBS2xIckQsT0FBT29ELE1BQU0sVUFBWXhDLHNCQUFzQndHLFNBQVNjLFVBQVcsc0JBQXdCbkYsU0FBU00sY0FjaEg4RixhQUFjLHlCQUt0QjVDLFFBQ0s2QyxPQUFPLFVBQ1BDLFVBQVUsNkJBQThCOUoiLCJmaWxlIjoiZGlyZWN0aXZlcy9zb3VyY2VFbnZpcm9ubWVudC9zb3VyY2VFbnZpcm9ubWVudERpcmVjdGl2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNvdXJjZUVudmlyb25tZW50RGlyZWN0aXZlKCkge1xuXG4gICAgdmFyIHRlbXBsYXRlID0gXCJ2aWV3cy9zb3J1Y2VFbnZyaW9ubWVudHMvc291cmNlRW52aXJvbm1lbnQuaHRtbFwiO1xuXG4gICAgdmFyIGNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBURE1TZXJ2aWNlLCBCcmVhZENydW1ic1NlcnZpY2UsIHRvYXN0ciwgU3dlZXRBbGVydCwgJHRpbWVvdXQsIEF1dGhTZXJ2aWNlLCBEVENvbHVtbkJ1aWxkZXIsIERUT3B0aW9uc0J1aWxkZXIsICRxLCAkY29tcGlsZSwgJHVpYk1vZGFsLCAkaHR0cCkge1xuXG4gICAgICAgIHRoaXMuX3Njb3BlID0gJHNjb3BlO1xuXG4gICAgICAgIHZhciBzb3VyY2VFbnZpcm9ubWVudEN0cmwgPSB0aGlzO1xuICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhID0gJHNjb3BlLmNvbnRlbnQuZW52aXJvbm1lbnREYXRhO1xuICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwucGFnZURpc3BsYXkgPSAnZW52aXJvbm1lbnQnO1xuXG4gICAgICAgICRzY29wZS51c2VyUm9sZSA9IEF1dGhTZXJ2aWNlLmdldFJvbGUoKTtcbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnNob3dFbnZpcm9ubWVudCA9IHRydWU7XG4gICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kaXNhYmxlT3duZXJzQ2hhbmdlID0gKHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuZW52aXJvbm1lbnRfc3RhdHVzID09ICdJbmFjdGl2ZScgfHwgIUF1dGhTZXJ2aWNlLmF1dGhvcml6ZWRUb0VkaXQoMCkpO1xuXG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnRhYkNsaWNrZWQgPSBmdW5jdGlvbiAobmV3VGFiKSB7XG5cbiAgICAgICAgICAgIGlmIChzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZUZvcm0pIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVGb3JtLiRkaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYXNrVG9TYXZlQ2hhbmdlcygnUm9sZScsIG5ld1RhYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWN0aXZpdHlQYW5lbCA9ICduZXdSb2xlJztcbiAgICAgICAgICAgIHJldHVybiBuZXdUYWI7XG4gICAgICAgIH07XG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmFza1RvU2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoZm9ybSwgbmV3VGFiKSB7XG4gICAgICAgICAgICBzd2FsKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzLlwiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkRvIHlvdSB3YW50IHRvIHNhdmUgY2hhbmdlcyBiZWZvcmUgY2xvc2U/XCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJOb1wiLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBcIlllc1wiLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VPbkNhbmNlbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzOiBcImFuaW1hdGVkIGZhZGVJblVwXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpc0NvbmZpcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NvbmZpcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZm9ybSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUm9sZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnNhdmVSb2xlQ2hhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2FsKFwiU2F2ZWQhXCIsIFwiWW91ciBjaGFuZ2VzIGhhdmUgYmVlbiBzYXZlZC5cIiwgXCJzdWNjZXNzXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2FsKFwiRGlzY2FyZCFcIiwgXCJZb3VyIGNoYW5nZXMgaGF2ZSBub3QgYmVlbiBzYXZlZCFcIiwgXCJlcnJvclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWN0aXZpdHlQYW5lbCA9ICdlbXB0eSc7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5uZXdUYWIgPSBuZXdUYWI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmdldFN1bW1hcnlEYXRhID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5hY3Rpdml0eVBhbmVsID0gJ2VtcHR5JztcbiAgICAgICAgfVxuXG4gICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5zYXZlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFRETVNlcnZpY2UucHV0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkLCBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJTb3VyY2UgRW52aXJvbm1lbnQgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X25hbWUsIFwiVXBkYXRlZCBTdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250ZW50Lm9wZW5FbnZpcm9ubWVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIkVudmlyb25tZW50ICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lLCBcImZhaWxlZCB0byBVcGRhdGUgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkZWxldGVFbnZpcm9ubWVudFRlbXAgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgVERNU2VydmljZS5kZWxldGVHZW5lcmljQVBJKCdzb3VyY2VFbnZpcm9ubWVudC8nKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZCArJy9lbnZuYW1lLycgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJTb3VyY2UgRW52aXJvbm1lbnQgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X25hbWUsIFwiZGVsZXRlZCBTdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb250ZW50Lm9wZW5FbnZpcm9ubWVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNDAwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiU291cmNlIEVudmlyb25tZW50ICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lLCBcImZhaWxlZCB0byBkZWxldGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmRlbGV0ZUVudmlyb25tZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZUVudmlyb25tZW50Q3RybC50YXNrc0NvdW50ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBTd2VldEFsZXJ0LnN3YWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiU291cmNlIEVudmlyb25tZW50IHdpbGwgYmUgZGVsZXRlZCBmcm9tIGFsbCByZWxlYXRlZCB0YXNrcy4gQXJlIHlvdSBzdXJlP1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiBcIiNERDZCNTVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIk5vXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBcIlllc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VPbkNvbmZpcm06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU9uQ2FuY2VsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21DbGFzczogXCJhbmltYXRlZCBmYWRlSW5VcFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpc0NvbmZpcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNDb25maXJtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlRW52aXJvbm1lbnRUZW1wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlRW52aXJvbm1lbnRUZW1wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQnJlYWRDcnVtYnNTZXJ2aWNlLmJyZWFkQ3J1bWJDaGFuZ2UoMSk7XG4gICAgICAgIEJyZWFkQ3J1bWJzU2VydmljZS5wdXNoKHtlbnZpcm9ubWVudElEOiBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lfSwgJ1NPVVJDRV9FTlZJUk9OTUVOVF9CUkVBRENSVU1CJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnQub3BlbkVudmlyb25tZW50KHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwub3BlblJvbGVzTWFuYWdlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5jb250ZW50Lm9wZW5Sb2xlcyhzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5sb2FkaW5nVGFibGVSb2xlcyA9IHRydWU7XG4gICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgJy9yb2xlcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPIFNVQ0NFU1NcblxuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlcyA9IF8uc29ydEJ5KHJlc3BvbnNlLnJlc3VsdCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZS5yb2xlX2NyZWF0aW9uX2RhdGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlcy5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmR0SW5zdGFuY2VSb2xlcyA9IHt9O1xuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdENvbHVtbnNSb2xlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdENvbHVtbkRlZnNSb2xlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5oZWFkZXJzUm9sZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogJ3JvbGVfbmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja0FibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiAncm9sZV9kZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46ICdyb2xlX2NyZWF0aW9uX2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0NyZWF0aW9uIERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYXRlJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46ICdyb2xlX2NyZWF0ZWRfYnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZWQgQnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46ICdyb2xlX2xhc3RfdXBkYXRlZF9kYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdMYXN0IFVwZGF0ZSBEYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrQWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiAncm9sZV9sYXN0X3VwZGF0ZWRfYnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1VwZGF0ZWQgQnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46ICdyb2xlX3N0YXR1cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU3RhdHVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrQWJsZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICB2YXIgY2xpY2tBYmxlQ29sdW1uID0gZnVuY3Rpb24gKGRhdGEsIHR5cGUsIGZ1bGwsIG1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8YSBuZy1jbGljaz1cInNvdXJjZUVudmlyb25tZW50Q3RybC5vcGVuUm9sZSgnICsgbWV0YS5yb3cgKyAnKVwiPicgKyBkYXRhICsgJzwvYT4nO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlVG9Mb2NhbERhdGUgPSBmdW5jdGlvbiAoZGF0YSwgdHlwZSwgZnVsbCwgbWV0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGRhdGEpLmZvcm1hdCgnRCBNTU0gWVlZWSwgSEg6bW0nKVxuICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlRW52aXJvbm1lbnRDdHJsLmhlYWRlcnNSb2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlRW52aXJvbm1lbnRDdHJsLmhlYWRlcnNSb2xlc1tpXS5jbGlja0FibGUgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmR0Q29sdW1uc1JvbGVzLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihzb3VyY2VFbnZpcm9ubWVudEN0cmwuaGVhZGVyc1JvbGVzW2ldLmNvbHVtbikud2l0aFRpdGxlKHNvdXJjZUVudmlyb25tZW50Q3RybC5oZWFkZXJzUm9sZXNbaV0ubmFtZSkucmVuZGVyV2l0aChjbGlja0FibGVDb2x1bW4pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VFbnZpcm9ubWVudEN0cmwuaGVhZGVyc1JvbGVzW2ldLnR5cGUgPT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZHRDb2x1bW5zUm9sZXMucHVzaChEVENvbHVtbkJ1aWxkZXIubmV3Q29sdW1uKHNvdXJjZUVudmlyb25tZW50Q3RybC5oZWFkZXJzUm9sZXNbaV0uY29sdW1uKS53aXRoVGl0bGUoc291cmNlRW52aXJvbm1lbnRDdHJsLmhlYWRlcnNSb2xlc1tpXS5uYW1lKS5yZW5kZXJXaXRoKGNoYW5nZVRvTG9jYWxEYXRlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZHRDb2x1bW5zUm9sZXMucHVzaChEVENvbHVtbkJ1aWxkZXIubmV3Q29sdW1uKHNvdXJjZUVudmlyb25tZW50Q3RybC5oZWFkZXJzUm9sZXNbaV0uY29sdW1uKS53aXRoVGl0bGUoc291cmNlRW52aXJvbm1lbnRDdHJsLmhlYWRlcnNSb2xlc1tpXS5uYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZ2V0VGFibGVEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZHRPcHRpb25zUm9sZXMgPSBEVE9wdGlvbnNCdWlsZGVyLmZyb21GblByb21pc2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VGFibGVEYXRhKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhET00oJ2xUZmdpdHAnKVxuICAgICAgICAgICAgICAgICAgICAud2l0aE9wdGlvbignY3JlYXRlZFJvdycsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY29tcGlsaW5nIHNvIHdlIGNhbiBiaW5kIEFuZ3VsYXIgZGlyZWN0aXZlIHRvIHRoZSBEVFxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBpbGUoYW5ndWxhci5lbGVtZW50KHJvdykuY29udGVudHMoKSkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oJ3Njcm9sbFgnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oJ2FhU29ydGluZycsIFs2LCAnYXNjJ10pXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKCdsZW5ndGhDaGFuZ2UnLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgLndpdGhPcHRpb24oJ3BhZ2luZycsIGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAud2l0aE9wdGlvbignc2VhcmNoaW5nJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKCdpbmZvJywgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKFwiY2FzZUluc2Vuc2l0aXZlXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzZWFyY2gnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNhc2VJbnNlbnNpdGl2ZVwiOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdEluc3RhbmNlQ2FsbGJhY2tSb2xlcyA9IGZ1bmN0aW9uIChkdEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oc291cmNlRW52aXJvbm1lbnRDdHJsLmR0SW5zdGFuY2VSb2xlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdEluc3RhbmNlUm9sZXMoZHRJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc0RlZmluZWQoc291cmNlRW52aXJvbm1lbnRDdHJsLmR0SW5zdGFuY2VSb2xlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdEluc3RhbmNlUm9sZXMgPSBkdEluc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlRW52aXJvbm1lbnRDdHJsLmR0SW5zdGFuY2VSb2xlcy5jaGFuZ2VEYXRhICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdEluc3RhbmNlUm9sZXMuY2hhbmdlRGF0YShnZXRUYWJsZURhdGEoKSk7XG5cbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwubG9hZGluZ1RhYmxlUm9sZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vVE9ETyBFUlJPUlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgVERNU2VydmljZS5nZXRHZW5lcmljQVBJKCdzb3VyY2VFbnZpcm9ubWVudC8nICsgc291cmNlRW52aXJvbm1lbnRDdHJsLmVudmlyb25tZW50RGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfaWQgKyAnL3VzZXJzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVycyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwub3BlblJvbGUoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuaGlkZVVzZXJzSW5wdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIkVudmlyb25tZW50ICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lLCBcImZhaWxlZCB0byBnZXQgQWxsIFRlc3RlcnMgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwub3BlblJvbGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YSA9IGFuZ3VsYXIuY29weShzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZXNbaW5kZXhdKTtcbiAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5pbmRleEluUm9sZXMgPSBpbmRleDtcbiAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX3R5cGUgPSBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV90eXBlID09ICdBTEwnO1xuICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmRpc2FibGVDaGFuZ2VSb2xlID0gKHNvdXJjZUVudmlyb25tZW50Q3RybC5kaXNhYmxlQ2hhbmdlIHx8XG4gICAgICAgICAgICAoc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVEYXRhLnJvbGVfc3RhdHVzID09ICdJbmFjdGl2ZScgfHwgIUF1dGhTZXJ2aWNlLmF1dGhvcml6ZWRUb0VkaXQoMSkpKTtcbiAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgXG4gICAgICAgICAgICAnL3JvbGUvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX2lkICsgJy91c2VycycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwudGVzdGVycyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmFsbFRlc3RlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVyc1JvbGUgPSBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVycy5jb25jYXQoc291cmNlRW52aXJvbm1lbnRDdHJsLnRlc3RlcnMpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVyc1JvbGUudW5zaGlmdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkIDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA6IFwiQUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuaGlkZVVzZXJzSW5wdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJSb2xlICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcImZhaWxlZCB0byBnZXQgUm9sZSBVc2VycyA6IFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWN0aXZpdHlQYW5lbCA9ICdlbXB0eSc7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmFjdGl2aXR5UGFuZWwgPSAnUm9sZSc7XG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmRlbGV0ZVJvbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBURE1TZXJ2aWNlLmRlbGV0ZUdlbmVyaWNBUEkoJ3NvdXJjZUVudmlyb25tZW50LycgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZCArIFxuICAgICAgICAgICAgJy9lbnZuYW1lLycgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lICsgXG4gICAgICAgICAgICAnL3JvbGUvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX2lkICsgXG4gICAgICAgICAgICAnL3JvbGVuYW1lLycgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJSb2xlICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcImRlbGV0ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9zdGF0dXMgPSAnSW5hY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZXNbc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVEYXRhLmluZGV4SW5Sb2xlc10ucm9sZV9zdGF0dXMgPSAnSW5hY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZHRJbnN0YW5jZVJvbGVzLnJlbG9hZERhdGEoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgJy90ZXN0ZXJzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVycyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5oaWRlVXNlcnNJbnB1dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiU291cmNlIEVudmlyb25tZW50ICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lLCBcImZhaWxlZCB0byBnZXQgQWxsIFRlc3RlcnMgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmdldFN1bW1hcnlEYXRhKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJSb2xlICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcImZhaWxlZCB0byBkZWxldGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnNhdmVSb2xlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgVERNU2VydmljZS5wb3N0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgXG4gICAgICAgICAgICAgICAgICAgICcvZW52bmFtZS8nICsgc291cmNlRW52aXJvbm1lbnRDdHJsLmVudmlyb25tZW50RGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfbmFtZSArIFxuICAgICAgICAgICAgICAgICAgICAnL3JvbGUvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX2lkICsgXG4gICAgICAgICAgICAgICAgICAgICcvcm9sZW5hbWUvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUgKyBcbiAgICAgICAgICAgICAgICAgICAgJy91c2Vycycsc291cmNlRW52aXJvbm1lbnRDdHJsLnRlc3RlcnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhcIlJvbGUgVXNlcnMgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUsIFwiVXBkYXRlZCBTdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgJy90ZXN0ZXJzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVycyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5oaWRlVXNlcnNJbnB1dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiU291cmNlIEVudmlyb25tZW50ICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lLCBcImZhaWxlZCB0byBnZXQgQWxsIFRlc3RlcnMgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmdldFN1bW1hcnlEYXRhKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJSb2xlIFVzZXJzICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcImZhaWxlZCB0byBVcGRhdGUgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHNvdXJjZUVudmlyb25tZW50Q3RybC50ZXN0ZXJzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX3R5cGUgPSAnU1BFQ0lGSUMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVEYXRhLnJvbGVfdHlwZSl7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX3R5cGUgPSAnQUxMJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVEYXRhLnJvbGVfdHlwZSA9ICdTUEVDSUZJQyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVERNU2VydmljZS5wdXRHZW5lcmljQVBJKCdzb3VyY2VFbnZpcm9ubWVudC8nICsgc291cmNlRW52aXJvbm1lbnRDdHJsLmVudmlyb25tZW50RGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfaWQgKyBcbiAgICAgICAgICAgICcvZW52bmFtZS8nICsgc291cmNlRW52aXJvbm1lbnRDdHJsLmVudmlyb25tZW50RGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfbmFtZSArIFxuICAgICAgICAgICAgJy9yb2xlLycgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9pZCxzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhcIlJvbGUgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUsIFwiVXBkYXRlZCBTdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgJy9yb2xlcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVzID0gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdEluc3RhbmNlUm9sZXMucmVsb2FkRGF0YShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIlJvbGUgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUsIFwiZmFpbGVkIHRvIFVwZGF0ZSA6IFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLm9wZW5OZXdSb2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVsZXRlRW52aXJvbm1lbnRUZW1wKCk7XG5cbiAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhbGxvd2VkX2NyZWF0aW9uX29mX3N5bnRoZXRpY19kYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX2RlbGV0ZV9iZWZvcmVfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF9yYW5kb21fZW50aXR5X3NlbGVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF9yZXF1ZXN0X29mX2ZyZXNoX2RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdGFza19zY2hlZHVsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3JlcGxhY2Vfc2VxdWVuY2VzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3JlZnJlc2hfcmVmZXJlbmNlX2RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfbnVtYmVyX29mX2VudGl0aWVzX3RvX2NvcHk6IDAsXG4gICAgICAgICAgICAgICAgcm9sZV9kZXNjcmlwdGlvbjogXCJcIixcbiAgICAgICAgICAgICAgICByb2xlX25hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgcm9sZV90eXBlOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5hY3Rpdml0eVBhbmVsID0gJ25ld1JvbGUnO1xuICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnRlc3RlcnMgPSBbXTtcbiAgICAgICAgICAgIGlmICghc291cmNlRW52aXJvbm1lbnRDdHJsLmFsbFRlc3RlcnMpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuYWxsVGVzdGVycyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5hZGROZXdSb2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF8uZmluZChzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZXMsIHtyb2xlX25hbWU6IHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUsIHJvbGVfc3RhdHVzOiAnQWN0aXZlJ30pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0ci5lcnJvcihcIlJvbGUgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUgKyBcIiBBbHJlYWR5IEV4aXN0c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFRETVNlcnZpY2UucG9zdEdlbmVyaWNBUEkoJ3NvdXJjZUVudmlyb25tZW50LycgKyBcbiAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZCArIFxuICAgICAgICAgICAgICAgICcvZW52bmFtZS8nICsgc291cmNlRW52aXJvbm1lbnRDdHJsLmVudmlyb25tZW50RGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfbmFtZSArICcvcm9sZScgLFxuICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgJy9yb2xlcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLnJvbGVzID0gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudmlyb25tZW50Q3RybC5kdEluc3RhbmNlUm9sZXMucmVsb2FkRGF0YShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJSb2xlICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcIkNyZWF0ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZ2V0U3VtbWFyeURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgVERNU2VydmljZS5wb3N0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgXG4gICAgICAgICAgICAgICAgICAgICcvZW52bmFtZS8nICsgc291cmNlRW52aXJvbm1lbnRDdHJsLmVudmlyb25tZW50RGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfbmFtZSArIFxuICAgICAgICAgICAgICAgICAgICAnL3JvbGUvJyArIHJlc3BvbnNlLnJlc3VsdC5pZCArICcvcm9sZW5hbWUvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUgKyBcbiAgICAgICAgICAgICAgICAgICAgJy91c2Vycycsc291cmNlRW52aXJvbm1lbnRDdHJsLnRlc3RlcnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoXCJSb2xlIFVzZXJzICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcIlVwZGF0ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnc291cmNlRW52aXJvbm1lbnQvJyArIHNvdXJjZUVudmlyb25tZW50Q3RybC5lbnZpcm9ubWVudERhdGEuc291cmNlX2Vudmlyb25tZW50X2lkICsgJy90ZXN0ZXJzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRW52aXJvbm1lbnRDdHJsLmFsbFRlc3RlcnMgPSByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VFbnZpcm9ubWVudEN0cmwuaGlkZVVzZXJzSW5wdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiU291cmNlIEVudmlyb25tZW50ICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwuZW52aXJvbm1lbnREYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9uYW1lLCBcImZhaWxlZCB0byBnZXQgQWxsIFRlc3RlcnMgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJSb2xlIFVzZXJzICMgXCIgKyBzb3VyY2VFbnZpcm9ubWVudEN0cmwucm9sZURhdGEucm9sZV9uYW1lLCBcImZhaWxlZCB0byBVcGRhdGUgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIlJvbGUgIyBcIiArIHNvdXJjZUVudmlyb25tZW50Q3RybC5yb2xlRGF0YS5yb2xlX25hbWUsIFwiVW5hYmxlIHRvIENyZWF0ZSA6IFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6IHRlbXBsYXRlLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgY29udGVudDogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6IGNvbnRyb2xsZXIsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3NvdXJjZUVudmlyb25tZW50Q3RybCdcbiAgICB9O1xufVxuXG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdURE0tRkUnKVxuICAgIC5kaXJlY3RpdmUoJ3NvdXJjZUVudmlyb25tZW50RGlyZWN0aXZlJywgc291cmNlRW52aXJvbm1lbnREaXJlY3RpdmUpOyJdfQ==
