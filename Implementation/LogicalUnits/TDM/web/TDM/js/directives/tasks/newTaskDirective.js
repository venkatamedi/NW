function newTaskDirective(){return{restrict:"E",templateUrl:"views/tasks/newTask.html",scope:{content:"="},controller:function($scope,TDMService,BreadCrumbsService,toastr,$timeout,AuthService,$state,DTOptionsBuilder,DTColumnBuilder,$q,$compile){var newTaskCtrl=this;if(newTaskCtrl.minDate=new Date,newTaskCtrl.minDate=moment(newTaskCtrl.minDate),newTaskCtrl.minDate.milliseconds(0),newTaskCtrl.minDate.seconds(0),newTaskCtrl.minDate.minutes(0),newTaskCtrl.minDate.hours(0),newTaskCtrl.minDate.add(1,"days"),newTaskCtrl.schedulerOptions={formInputClass:"form-control1 cron-gen-input",formSelectClass:"form-control1 cron-gen-select",formRadioClass:"cron-gen-radio",formCheckboxClass:"cron-gen-checkbox",hideMinutesTab:!1,hideHourlyTab:!1,hideDailyTab:!1,hideWeeklyTab:!1,hideMonthlyTab:!1,hideYearlyTab:!1,hideAdvancedTab:!1,use24HourTime:!0,hideSeconds:!1},newTaskCtrl.tasks=$scope.content.tasks,newTaskCtrl.isFluxMode=AuthService.isFluxMode(),newTaskCtrl.retentionPeriod=AuthService.getRetentionPeriod(),TDMService.getFabricRolesforUser(AuthService.getUserId()).then(response=>{newTaskCtrl.userFabricRoles=response.result||[]}),newTaskCtrl.timeZoneOffset=AuthService.getTimeZone(),_.remove(newTaskCtrl.retentionPeriod.availableOptions,(function(period){if(period.units>newTaskCtrl.retentionPeriod.maxRetentionPeriod)return!0})),newTaskCtrl.referenceDropDown=[{text:"None",value:null},{text:"Reference Only",value:"refernceOnly"},{text:"Both - reference and entities",value:"both"}],newTaskCtrl.step=1,newTaskCtrl.taskData={globals:[],reference:null},newTaskCtrl.versionForLoadTo=new Date,newTaskCtrl.versionForLoadFrom=new Date,newTaskCtrl.versionForLoadFrom.setDate(newTaskCtrl.versionForLoadFrom.getDate()-30),newTaskCtrl.retentionPeriod&&newTaskCtrl.retentionPeriod.defaultPeriod&&newTaskCtrl.retentionPeriod.defaultPeriod.unit){var defaultRetintion=_.find(newTaskCtrl.retentionPeriod.availableOptions,{name:newTaskCtrl.retentionPeriod.defaultPeriod.unit});defaultRetintion&&(newTaskCtrl.retention_period_type=defaultRetintion,newTaskCtrl.taskData.retention_period_type=newTaskCtrl.retention_period_type.name,newTaskCtrl.taskData.retention_period_value=newTaskCtrl.retentionPeriod.defaultPeriod.value)}newTaskCtrl.retentionPeriodTypeChanged=function(){newTaskCtrl.taskData.retention_period_type=newTaskCtrl.retention_period_type.name},newTaskCtrl.taskData.task_type="LOAD",newTaskCtrl.param={},newTaskCtrl.requestedEntities={},newTaskCtrl.selectFieldType="given",newTaskCtrl.taskTitlePattern=/^((?![_,.,#,;,%,?,/,\\,[,\]]).)*$/,newTaskCtrl.entitiesPattern=new RegExp("^((\\w|-)+(?:,(\\w|-)+){0,})?$"),newTaskCtrl.excultionPattern=new RegExp("^((\\w|-)+(?:,(\\w|-)+){0,})?$"),newTaskCtrl.syntheticPattern="^[a-zA-Z0-9._-]+$",newTaskCtrl.updateEntitiesPattern=function(){newTaskCtrl.taskData.number_of_entities_to_copy&&(newTaskCtrl.entitiesPattern=new RegExp("^((\\w|-)+(?:,(\\w|-)+){"+(newTaskCtrl.taskData.number_of_entities_to_copy-1)+"})?$"))};var userRole=AuthService.getRole();console.log(userRole.type),newTaskCtrl.userRoleType=userRole.type,newTaskCtrl.userRole={},newTaskCtrl.userRole.allowed_random_entity_selection=!0,newTaskCtrl.userRole.allowed_creation_of_synthetic_data=!0,newTaskCtrl.userRole.allowed_refresh_reference_data=!0,newTaskCtrl.userRole.allowed_request_of_fresh_data=!0,newTaskCtrl.userRole.allowed_delete_before_load=!0,newTaskCtrl.userRole.allowed_task_scheduling=!0,newTaskCtrl.userRole.allowed_replace_sequences=!0,newTaskCtrl.sourceUserRole={},newTaskCtrl.sourceUserRole.allowed_random_entity_selection=!0,newTaskCtrl.sourceUserRole.allowed_creation_of_synthetic_data=!0,newTaskCtrl.sourceUserRole.allowed_refresh_reference_data=!0,newTaskCtrl.sourceUserRole.allowed_request_of_fresh_data=!0,newTaskCtrl.sourceUserRole.allowed_delete_before_load=!0,newTaskCtrl.sourceUserRole.allowed_task_scheduling=!0,newTaskCtrl.sourceUserRole.allowed_replace_sequences=!0,newTaskCtrl.sourceEnvOwner=!0,newTaskCtrl.targetEnvOwner=!0,TDMService.getTimeZone().then((function(response){"SUCCESS"==response.errorCode?newTaskCtrl.timeZoneMessage="Task execution time will be based on "+response.result.current_setting+" time zone":newTaskCtrl.timeZoneMessage="Task execution time will be based on DB time zone"})),"admin"==userRole.type?TDMService.getEnvironments().then((function(response){"SUCCESS"==response.errorCode?(newTaskCtrl.allEnvironments=_.filter(angular.copy(response.result),(function(env){return!(!env.allow_write||"Active"!==env.environment_status)})),newTaskCtrl.allSourceEnvironments=_.filter(angular.copy(response.result),(function(env){return!(!env.allow_read||"Active"!==env.environment_status)}))):toastr.error("Faild to get Environments for user "+AuthService.getUsername())})):TDMService.getEnvironmentsForUser().then((function(response){"SUCCESS"==response.errorCode?(newTaskCtrl.allEnvironments=_.filter(angular.copy(response.result),(function(env){return!(!env.allow_write||"Active"!==env.environment_status)})),newTaskCtrl.allSourceEnvironments=_.filter(angular.copy(response.result),(function(env){return!(!env.allow_read||"Active"!==env.environment_status)})),newTaskCtrl.allSourceEnvironments=_.unique(newTaskCtrl.allSourceEnvironments,"environment_name")):toastr.error("Faild to get Target Environments for user "+AuthService.getUsername())})),newTaskCtrl.entitiesListChange=function(){newTaskCtrl.entitiesListChangeTimeout&&$timeout.cancel(newTaskCtrl.entitiesListChangeTimeout),"LOAD"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.version_ind&&!newTaskCtrl.taskData.selectAllEntites&&(newTaskCtrl.entitiesListChangeTimeout=$timeout((function(){newTaskCtrl.getVersionsForLoad()}),1e3))},newTaskCtrl.referenceChange=function(){"refernceOnly"==newTaskCtrl.taskData.reference&&(newTaskCtrl.taskData.selectAllEntites=!1)},newTaskCtrl.taskModeChange=function(task_type){if(newTaskCtrl.taskData.version_ind&&(newTaskCtrl.taskData.number_of_entities_to_copy=void 0),task_type&&(newTaskCtrl.taskData.source_environment_id=null,newTaskCtrl.taskData.environment_id=null,newTaskCtrl.taskData.source_env_name=null,newTaskCtrl.maxToCopy=null),newTaskCtrl.taskData.version_ind&&"LOAD"==newTaskCtrl.taskData.task_type)newTaskCtrl.logicalUnits=[],newTaskCtrl.logicalUnit=null,newTaskCtrl.taskData.be_id=null;else if("EXTRACT"==newTaskCtrl.taskData.task_type){if(newTaskCtrl.logicalUnits=[],newTaskCtrl.logicalUnit=null,newTaskCtrl.taskData.be_id=null,task_type&&!newTaskCtrl.taskData.version_ind)newTaskCtrl.taskData.retention_period_value=0;else if(newTaskCtrl.taskData.version_ind&&!newTaskCtrl.taskData.retention_period_value&&newTaskCtrl.retentionPeriod&&newTaskCtrl.retentionPeriod.defaultPeriod&&newTaskCtrl.retentionPeriod.defaultPeriod.unit){var defaultRetintion=_.find(newTaskCtrl.retentionPeriod.availableOptions,{name:newTaskCtrl.retentionPeriod.defaultPeriod.unit});defaultRetintion&&(newTaskCtrl.retention_period_type=defaultRetintion,newTaskCtrl.taskData.retention_period_type=newTaskCtrl.retention_period_type.name,newTaskCtrl.taskData.retention_period_value=newTaskCtrl.retentionPeriod.defaultPeriod.value)}}else newTaskCtrl.taskData.selectAllEntites=!1,newTaskCtrl.logicalUnit=null;newTaskCtrl.taskData.selectAllEntites||(newTaskCtrl.selectFieldType="given")},newTaskCtrl.getAllLogicalUnitsForEnv=function(source_environment_id,environment_id){source_environment_id&&environment_id&&(newTaskCtrl.allSingleLogicalUnits=[],TDMService.getGenericAPI("sourceenvid/"+source_environment_id+"/targetendid/"+environment_id+"/logicalUnits").then((function(response){"SUCCESS"==response.errorCode?newTaskCtrl.allSingleLogicalUnits=response.result:toastr.error("Faild to get Logical units")})))},newTaskCtrl.sourceEnvironmentChange=function(getRoles){var sourceEnv=_.find(newTaskCtrl.allSourceEnvironments,{environment_id:newTaskCtrl.taskData.source_environment_id});sourceEnv&&(newTaskCtrl.taskData.source_env_name=sourceEnv.environment_name),getRoles&&newTaskCtrl.environmentChange(newTaskCtrl.taskData.source_environment_id,!0)},newTaskCtrl.checkReferenceIfAllowed=function(){newTaskCtrl.userRole&&newTaskCtrl.userRole.allowed_refresh_reference_data||newTaskCtrl.sourceUserRole&&newTaskCtrl.sourceUserRole.allowed_refresh_reference_data||(newTaskCtrl.taskData.reference=null)},newTaskCtrl.environmentChange=function(environment_id,source){"admin"==userRole.type?(newTaskCtrl.userRole={},newTaskCtrl.userRole.allowed_random_entity_selection=!0,newTaskCtrl.userRole.allowed_creation_of_synthetic_data=!0,newTaskCtrl.userRole.allowed_refresh_reference_data=!0,newTaskCtrl.userRole.allowed_request_of_fresh_data=!0,newTaskCtrl.userRole.allowed_delete_before_load=!0,newTaskCtrl.userRole.allowed_task_scheduling=!0,newTaskCtrl.userRole.allowed_replace_sequences=!0):TDMService.getEnvironmentOwners(environment_id||newTaskCtrl.taskData.environment_id).then((function(response){if("SUCCESS"==response.errorCode){var ownerFound=_.find(response.result,{user_id:AuthService.getUserId()});if(!ownerFound)for(let i=0;i<newTaskCtrl.userFabricRoles.length&&!(ownerFound=_.find(response.result,{user_type:"GROUP",user_id:newTaskCtrl.userFabricRoles[i]}));i++);ownerFound?(newTaskCtrl.userRole={},newTaskCtrl.userRole.allowed_random_entity_selection=!0,newTaskCtrl.userRole.allowed_creation_of_synthetic_data=!0,newTaskCtrl.userRole.allowed_refresh_reference_data=!0,newTaskCtrl.userRole.allowed_request_of_fresh_data=!0,newTaskCtrl.userRole.allowed_delete_before_load=!0,newTaskCtrl.userRole.allowed_task_scheduling=!0,newTaskCtrl.userRole.allowed_replace_sequences=!0,environment_id?newTaskCtrl.sourceEnvOwner=!0:newTaskCtrl.targetEnvOwner=!0):(environment_id?newTaskCtrl.sourceEnvOwner=!1:newTaskCtrl.targetEnvOwner=!1,TDMService.getRoleForUserInEnv(environment_id||newTaskCtrl.taskData.environment_id).then((function(response){if("SUCCESS"==response.errorCode){environment_id?newTaskCtrl.sourceUserRole=response.result.userRole:newTaskCtrl.userRole=response.result.userRole,"LOAD"==newTaskCtrl.taskData.task_type&&newTaskCtrl.userRole.allowed_entity_versioning&&newTaskCtrl.sourceUserRole.allowed_entity_versioning||"EXTRACT"==newTaskCtrl.taskData.task_type&&newTaskCtrl.sourceUserRole.allowed_entity_versioning?newTaskCtrl.allowed_entity_versioning=!0:(newTaskCtrl.allowed_entity_versioning=!1,newTaskCtrl.taskData.version_ind=!1),newTaskCtrl.checkReferenceIfAllowed();var minRead=response.result.minRead,minWrite=response.result.minWrite;(minRead>-1||minWrite>-1)&&(minWrite=parseInt(minWrite||"0"),minRead=parseInt(minRead||"0"),environment_id?(newTaskCtrl.sourceMaxToCopy=minRead,newTaskCtrl.maxToCopy>minRead?newTaskCtrl.maxToCopy=minRead:newTaskCtrl.maxToCopy||(newTaskCtrl.maxToCopy=minRead)):(newTaskCtrl.targetMaxToCopy=minWrite,newTaskCtrl.maxToCopy>minWrite?newTaskCtrl.maxToCopy=minWrite:newTaskCtrl.maxToCopy||(newTaskCtrl.maxToCopy=minWrite)))}else toastr.error("Task # "+newTaskCtrl.taskData.task_id,"Faild to get Role for user ")})))}else toastr.error("Environment # "+newTaskCtrl.taskData.environment_id,"failed to get owners : "+response.message)})),source&&"EXTRACT"!==newTaskCtrl.taskData.task_type||!environment_id&&!newTaskCtrl.taskData.environment_id||TDMService.getBusinessEntitiesForEnvProducts(environment_id||newTaskCtrl.taskData.environment_id).then((function(response){"SUCCESS"==response.errorCode?newTaskCtrl.businessEntities=response.result:toastr.error("Task # "+newTaskCtrl.taskData.task_id,"Faild to get Business Entities")})),newTaskCtrl.taskData.be_id=void 0,newTaskCtrl.logicalUnits=[],newTaskCtrl.allLogicalUnits=[],newTaskCtrl.products=[]},newTaskCtrl.updateParams=cb=>{TDMService.getGenericAPI("businessentity/"+newTaskCtrl.taskData.be_id+"/sourceEnv/"+newTaskCtrl.taskData.source_env_name+"/parameters").then((function(response){if("SUCCESS"==response.errorCode){newTaskCtrl.parameters=response.result;let parametersKeys=Object.keys(newTaskCtrl.parameters);var chosenLUs=_.map(newTaskCtrl.logicalUnits,(function(lu){return lu.lu_name.toLowerCase()}));for(let i=0;i<parametersKeys.length;i++)chosenLUs.indexOf(parametersKeys[i].split(".")[0].toLowerCase())<0&&delete newTaskCtrl.parameters[parametersKeys[i]];newTaskCtrl.parameters=_.map(newTaskCtrl.parameters,(function(value,key){return"number"!==value.PARAM_TYPE&&value.PARAM_TYPE,{param_name:key,name:value.PARAM_NAME,param_type:value.PARAM_TYPE,valid_values:value.VALID_VALUES,min_value:"number"==value.PARAM_TYPE?parseFloat(value.MIN_VALUE):0,max_value:"number"==value.PARAM_TYPE?parseFloat(value.MAX_VALUE):0}})),console.log(1111),cb&&cb.apply()}else toastr.error("Business entity # "+newTaskCtrl.taskData.be_id,"Failed to get business entity parameters")}))},newTaskCtrl.businessEntityChange=function(){newTaskCtrl.taskData.selection_param_value=null,newTaskCtrl.taskData.parameters=null,newTaskCtrl.filter&&newTaskCtrl.filter.group&&(newTaskCtrl.filter.group.rules=[]);var be=_.find(newTaskCtrl.businessEntities,{be_id:newTaskCtrl.taskData.be_id});be&&(newTaskCtrl.be_name=be.be_name);var environmentId="EXTRACT"===newTaskCtrl.taskData.task_type?newTaskCtrl.taskData.source_environment_id:newTaskCtrl.taskData.environment_id;environmentId&&newTaskCtrl.taskData.be_id&&TDMService.getLogicalUnitsForBusinessEntityAndEnv(newTaskCtrl.taskData.be_id,environmentId).then((function(response){if("SUCCESS"==response.errorCode){newTaskCtrl.logicalUnits=[],newTaskCtrl.allLogicalUnits=response.result;for(var i=0;i<newTaskCtrl.allLogicalUnits.length;i++)newTaskCtrl.logicalUnits.push(newTaskCtrl.allLogicalUnits[i])}else toastr.error("Business entity # "+newTaskCtrl.taskData.be_id,"Failed to get products")})),newTaskCtrl.taskData.be_id&&TDMService.getBEPostExecutionProcess(newTaskCtrl.taskData.be_id).then((function(response){"SUCCESS"==response.errorCode?(newTaskCtrl.postExecutionProcesses=[],newTaskCtrl.allPostExecutionProcess=response.result,newTaskCtrl.allPostExecutionProcessIds=_.map(response.result,"process_id"),newTaskCtrl.postExecutionProcesses=newTaskCtrl.allPostExecutionProcessIds):toastr.error("Business entity # "+newTaskCtrl.taskData.be_id,"Failed to get Post Execution Processes")}))},newTaskCtrl.selectSchedule="immediate",newTaskCtrl.addTask=function(){if(1!=newTaskCtrl.createTaskInProgress){if(newTaskCtrl.createTaskInProgress=!0,!newTaskCtrl.taskData.selectAllEntites&&"refernceOnly"!==newTaskCtrl.taskData.reference)if("given"==newTaskCtrl.selectFieldType){if(newTaskCtrl.requestedEntities&&newTaskCtrl.taskData.entity_exclusion_list==newTaskCtrl.requestedEntities.entities_list)return newTaskCtrl.errorList=!0,newTaskCtrl.step=2,void(newTaskCtrl.createTaskInProgress=!1);newTaskCtrl.taskData.selection_method="L",newTaskCtrl.taskData.selection_param_value=newTaskCtrl.requestedEntities.entities_list}else if("random"==newTaskCtrl.selectFieldType)newTaskCtrl.taskData.selection_method="R",newTaskCtrl.taskData.selection_param_value=null;else if("synthetic"==newTaskCtrl.selectFieldType)newTaskCtrl.taskData.selection_method="S",newTaskCtrl.taskData.selection_param_value=newTaskCtrl.requestedEntities.synthetic;else{if(!newTaskCtrl.requestedEntities.query_parameters||"()"==newTaskCtrl.requestedEntities.query_parameters)return newTaskCtrl.parametersError=!0,newTaskCtrl.step=2,void(newTaskCtrl.createTaskInProgress=!1);1==newTaskCtrl.parametersRandom?newTaskCtrl.taskData.selection_method="PR":newTaskCtrl.taskData.selection_method="P",newTaskCtrl.taskData.selection_param_value=newTaskCtrl.requestedEntities.query_parameters,newTaskCtrl.taskData.parameters=newTaskCtrl.requestedEntities.parameters}if("immediate"==newTaskCtrl.selectSchedule?(newTaskCtrl.taskData.scheduler=newTaskCtrl.selectSchedule,newTaskCtrl.taskData.scheduling_end_date=null):(newTaskCtrl.taskData.scheduler=newTaskCtrl.scheduleData,"endBy"!==newTaskCtrl.scheduleEndBy?newTaskCtrl.taskData.scheduling_end_date=null:newTaskCtrl.taskData.scheduling_end_date.hours(12)),_.find(newTaskCtrl.tasks,{task_title:newTaskCtrl.taskData.task_title,task_status:"Active"}))return newTaskCtrl.createTaskInProgress=!1,toastr.error("Task # "+newTaskCtrl.taskData.task_title+" Already Exists");if("LOAD"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.version_ind&&(newTaskCtrl.taskData.operationMode="delete_and_load_entity"),"delete_and_load_entity"==newTaskCtrl.taskData.operationMode?(newTaskCtrl.taskData.replace_sequences=!1,newTaskCtrl.taskData.load_entity=!0,newTaskCtrl.taskData.delete_before_load=!0):"insert_entity_without_delete"==newTaskCtrl.taskData.operationMode?(newTaskCtrl.taskData.load_entity=!0,newTaskCtrl.taskData.delete_before_load=!1):"delete_without_load_entity"==newTaskCtrl.taskData.operationMode?(newTaskCtrl.taskData.replace_sequences=!1,newTaskCtrl.taskData.load_entity=!1,newTaskCtrl.taskData.delete_before_load=!0):(newTaskCtrl.taskData.load_entity=!0,newTaskCtrl.taskData.delete_before_load=!1),newTaskCtrl.taskData.request_of_fresh_data||(newTaskCtrl.taskData.sync_mode=null),"LOAD"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.version_ind&&"refernceOnly"!==newTaskCtrl.taskData.reference){if(!newTaskCtrl.selectedVersionToLoad&&"refernceOnly"!==newTaskCtrl.taskData.reference)return newTaskCtrl.step=2,void(newTaskCtrl.createTaskInProgress=!1);if(selectedVersionToLoad=_.find(newTaskCtrl.versionsForLoad,{fabric_execution_id:newTaskCtrl.selectedVersionToLoad})){newTaskCtrl.taskData.selected_version_task_name=selectedVersionToLoad.version_name;var localTimeZone=(version_datetime=new Date(selectedVersionToLoad.version_datetime)).getTimezoneOffset();version_datetime=version_datetime.getTime(),newTaskCtrl.taskData.selected_version_datetime=moment(version_datetime).format("YYYYMMDDHHmmss"),newTaskCtrl.taskData.selected_version_task_exe_id=selectedVersionToLoad.task_execution_id}}if("LOAD"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.version_ind&&("refernceOnly"==newTaskCtrl.taskData.reference||"both"==newTaskCtrl.taskData.reference)){if(!newTaskCtrl.taskData.refLoadVersions)return newTaskCtrl.step=6,void(newTaskCtrl.createTaskInProgress=!1);var selectedVersionToLoad;if(selectedVersionToLoad=_.find(newTaskCtrl.taskData.refLoadVersions,{task_execution_id:parseInt(newTaskCtrl.taskData.selectedRefVersionToLoad)})){newTaskCtrl.taskData.selected_ref_version_task_name=selectedVersionToLoad.version_name;var version_datetime;localTimeZone=(version_datetime=new Date(selectedVersionToLoad.version_datetime)).getTimezoneOffset();version_datetime=version_datetime.getTime()+6e4*localTimeZone,newTaskCtrl.taskData.selected_ref_version_datetime=moment(version_datetime-6e4*newTaskCtrl.timeZoneOffset).format("YYYYMMDDHHmmss"),newTaskCtrl.taskData.selected_ref_version_task_exe_id=selectedVersionToLoad.task_execution_id}}"EXTRACT"==newTaskCtrl.taskData.task_type&&(newTaskCtrl.taskData.load_entity=!1,newTaskCtrl.taskData.environment_id=newTaskCtrl.taskData.source_environment_id),"EXTRACT"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.version_ind||newTaskCtrl.taskData.retention_period_value||(delete newTaskCtrl.taskData.retention_period_type,delete newTaskCtrl.taskData.retention_period_value),newTaskCtrl.taskData.selectAllEntites||"LOAD"==newTaskCtrl.taskData.task_type&&!newTaskCtrl.taskData.version_ind||"refernceOnly"===newTaskCtrl.taskData.reference||(newTaskCtrl.taskData.number_of_entities_to_copy=newTaskCtrl.requestedEntities.entities_list.split(",").length),newTaskCtrl.taskData.globals&&0==newTaskCtrl.taskData.globals.length&&(newTaskCtrl.taskData.task_globals=!1),newTaskCtrl.taskData.reference||(newTaskCtrl.taskData.refList=[]),newTaskCtrl.taskData.refList&&newTaskCtrl.taskData.refList.length>0&&(newTaskCtrl.taskData.refresh_reference_data=!1),"EXTRACT"==newTaskCtrl.taskData.task_type&&(!newTaskCtrl.taskData.version_ind&&newTaskCtrl.taskData.request_of_fresh_data?newTaskCtrl.taskData.sync_mode="FORCE":delete newTaskCtrl.taskData.sync_mode),TDMService.createTask(newTaskCtrl.taskData).then((function(response){if("SUCCESS"==response.errorCode){var createTaskResult=response.result;TDMService.postTaskLogicalUnits(response.result.id,newTaskCtrl.taskData.task_title,{logicalUnits:newTaskCtrl.logicalUnits}).then((function(response){"SUCCESS"==response.errorCode?toastr.success("Task # "+createTaskResult.id," Is Created Successfully"):toastr.error("Task # "+createTaskResult.id," Failed to Update : "+response.message),$timeout((function(){$state.go("tasks",{},{reload:!0})}),300)})),newTaskCtrl.postExecutionProcesses.length>0&&TDMService.postTaskPostExecutionProcess(response.result.id,newTaskCtrl.taskData.task_title,{postexecutionprocesses:_.filter(newTaskCtrl.allPostExecutionProcess,v=>newTaskCtrl.postExecutionProcesses.indexOf(v.process_id)>=0)}).then((function(response){"SUCCESS"!==response.errorCode&&toastr.error("Task # "+createTaskResult.id," Failed to Update Post Execution Processes: "+response.message)}))}else toastr.error("Task # "+newTaskCtrl.taskData.task_id,"Unable to Create : "+response.message),newTaskCtrl.createTaskInProgress=!1}))}};function buildSubQuery(rule){var field='"'+rule.field+'"';let condition=rule.condition;var data="'"+rule.data+"'";return"number"==rule.type&&(field+="::numeric[] ",data=rule.data),"Is null"===rule.condition||"Is not null"===rule.condition?"( "+field+" "+condition+" )":"( "+data+" "+condition+" ANY("+field+") )"}function computed(group){if(!group)return"";for(var str="(",i=0;i<group.rules.length;i++)if(group.rules[i].group)i==group.rules.length-1?str+=computed(group.rules[i].group):str+=computed(group.rules[i].group)+" "+group.rules[i].group.operator+" ";else{var data;if(void 0===group.rules[i].data&&"Is null"!=group.rules[i].condition&&"Is not null"!=group.rules[i].condition)return;if("real"==group.rules[i].type)data=group.rules[i].data.toLocaleString().indexOf(".")<=0?group.rules[i].data.toFixed(1):group.rules[i].data;else if("integer"==group.rules[i].type)data=Math.floor(group.rules[i].data);else if("combo"==group.rules[i].type){if(group.rules[i].validValues.indexOf(group.rules[i].data)<0&&"Is null"!=group.rules[i].condition&&"Is not null"!=group.rules[i].condition)return;data=group.rules[i].data}else data=group.rules[i].data;null==data&&(data=""),i==group.rules.length-1?str+=buildSubQuery(group.rules[i]):(str+=buildSubQuery(group.rules[i]),str+=" "+group.rules[i].operator+" ")}return str+")"}newTaskCtrl.filter=JSON.parse('{"group": {"operator": "AND","rules": []}}'),newTaskCtrl.parametersCount=0,newTaskCtrl.perviousQueryParams=null,$scope.getEntitesCount=function(force){if("()"!=newTaskCtrl.requestedEntities.query_parameters)if(newTaskCtrl.requestedEntities.query_parameters){if(force||newTaskCtrl.requestedEntities.query_parameters!==newTaskCtrl.perviousQueryParams){newTaskCtrl.parametersError=!1;newTaskCtrl.requestedEntities.query_parameters,newTaskCtrl.taskData.source_env_name,newTaskCtrl.taskData.be_id;newTaskCtrl.parametersCount="inprogress",TDMService.postGenericAPI("businessentity/"+newTaskCtrl.taskData.be_id+"/sourceEnv/"+newTaskCtrl.taskData.source_env_name+"/analysiscount",{where:newTaskCtrl.requestedEntities.query_parameters}).then((function(response){"SUCCESS"==response.errorCode?(newTaskCtrl.perviousQueryParams=newTaskCtrl.requestedEntities.query_parameters,newTaskCtrl.parametersCount=response.result):newTaskCtrl.parametersCount=0}))}}else newTaskCtrl.parametersCount=0;else newTaskCtrl.parametersCount=0},$scope.$watch("newTaskCtrl.filter",(function(newValue){newTaskCtrl.analysisCountTimeout&&$timeout.cancel(newTaskCtrl.analysisCountTimeout),newTaskCtrl.analysisCountTimeout=$timeout((function(){if(newTaskCtrl.taskData.be_id){var checkGroup=function(group){if(""==group.operator)return!1;for(var i=0;i<group.rules.length;i++)if(0==((rule=group.rules[i]).group?checkGroup(rule.group):""!==rule.condition&&null!==rule.data&&""!==rule.field))return!1;var rule;return!0};if(1==checkGroup(newValue.group)){newTaskCtrl.requestedEntities.parameters=JSON.stringify(newValue);var query={query:computed(newValue.group)};newTaskCtrl.requestedEntities.query_parameters=query.query}$scope.getEntitesCount()}}),500)}),!0),newTaskCtrl.checkMigrateStatus=function(){if(!newTaskCtrl.requestedEntities.entities_list||!newTaskCtrl.selectedVersionToLoad)return newTaskCtrl.requestedEntitiesForm=$scope.requestedEntitiesForm,void($scope.requestedEntitiesForm.submitted=!0);var selectedVersionToLoad=_.find(newTaskCtrl.versionsForLoad,{fabric_execution_id:newTaskCtrl.selectedVersionToLoad}),taskExecutionId="",luNames="";selectedVersionToLoad&&(taskExecutionId=selectedVersionToLoad.task_execution_id,luNames=selectedVersionToLoad.lu_name);var version_datetime=new Date(selectedVersionToLoad.version_datetime),localTimeZone=version_datetime.getTimezoneOffset();version_datetime=version_datetime.getTime()+6e4*localTimeZone,TDMService.postGenericAPI("checkMigrateStatusForEntitiesList",{entitlesList:newTaskCtrl.requestedEntities.entities_list,taskExecutionId:taskExecutionId,luList:luNames}).then((function(response){if("SUCCESS"==response.errorCode){var failedEntities=[];for(var key in response.result)"false"==response.result[key]&&failedEntities.push(key);failedEntities.length>0?toastr.error("Entities "+failedEntities+" were not migrated successfully into the TDM storage by the selected version. Please remove them from the Entities List or select another version "):newTaskCtrl.requestedEntitiesNext($scope.requestedEntitiesForm,!0)}else toastr.error("Failed to check Migrate Status For Entites List")}))},newTaskCtrl.getStepsArray=function(){var stepsArray=[];return stepsArray.push(1),null!=newTaskCtrl.taskData.reference&&stepsArray.push(6),"EXTRACT"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.selectAllEntites||"refernceOnly"===newTaskCtrl.taskData.reference||stepsArray.push(2),newTaskCtrl.taskData.task_globals&&stepsArray.push(5),("LOAD"==newTaskCtrl.taskData.task_type&&!newTaskCtrl.taskData.version_ind||"EXTRACT"==newTaskCtrl.taskData.task_type&&!newTaskCtrl.taskData.version_ind&&(newTaskCtrl.sourceUserRole&&newTaskCtrl.sourceUserRole.allowed_request_of_fresh_data||newTaskCtrl.userRole&&newTaskCtrl.userRole.allowed_request_of_fresh_data))&&"refernceOnly"!==newTaskCtrl.taskData.reference&&stepsArray.push(3),stepsArray.push(4),stepsArray},newTaskCtrl.submitForm=function(step,nextStep){const steps=newTaskCtrl.getStepsArray();if(step!==nextStep)if(steps.indexOf(step)>steps.indexOf(nextStep))newTaskCtrl.openStep(nextStep);else switch(step){case 1:$scope.generalForm.$setSubmitted(),newTaskCtrl.generalNext($scope.generalForm,nextStep);break;case 2:$scope.requestedEntitiesForm.$setSubmitted(),newTaskCtrl.requestedEntitiesNext($scope.requestedEntitiesForm,void 0,nextStep);break;case 3:$scope.requestParametersForm.$setSubmitted(),newTaskCtrl.requestParametersNext($scope.requestParametersForm);break;case 4:$scope.executionTimingForm.$setSubmitted(),newTaskCtrl.executionTimingFinish($scope.executionTimingForm);break;case 5:$scope.AddGlobalForm.$setSubmitted(),newTaskCtrl.globalsNext(nextStep);break;case 6:$scope.ReferenceForm.$setSubmitted(),newTaskCtrl.referenceNext(nextStep)}},newTaskCtrl.openStep=function(step,type){if("admin"==newTaskCtrl.userRoleType||newTaskCtrl.sourceEnvOwner&&newTaskCtrl.targetEnvOwner||(newTaskCtrl.taskData.selectAllEntites=!1),2==newTaskCtrl.step&&"LOAD"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.version_ind&&!newTaskCtrl.taskData.selectAllEntites)return"back"==type&&null!=newTaskCtrl.taskData.reference?newTaskCtrl.step=6:1==step?newTaskCtrl.step=1:void newTaskCtrl.checkMigrateStatus();var arraySteps=newTaskCtrl.getStepsArray(),nextStep=step,currentIndex=arraySteps.indexOf(newTaskCtrl.step),nextIndex=arraySteps.indexOf(step);if(nextIndex<currentIndex&&nextIndex>=0)return nextStep=arraySteps[nextIndex],void(newTaskCtrl.step=nextStep);if("next"==type){if(currentIndex==arraySteps.length-1)return void console.log("there is no next");nextStep=arraySteps[currentIndex+1]}else if("back"==type)return 0==currentIndex?void console.log("there is no back"):(nextStep=arraySteps[currentIndex-1],void(newTaskCtrl.step=nextStep));return 1==newTaskCtrl.step?$scope.generalForm.$valid?void newTaskCtrl.generalNext($scope.generalForm,nextStep):(newTaskCtrl.generalForm=$scope.generalForm,void($scope.generalForm.submitted=!0)):2==newTaskCtrl.step?$scope.requestedEntitiesForm.$valid?(newTaskCtrl.requestedEntitiesNext($scope.requestedEntitiesForm,!1,nextStep),void($scope.requestedEntitiesForm.submitted=!0)):(newTaskCtrl.requestedEntitiesForm=$scope.requestedEntitiesForm,void($scope.requestedEntitiesForm.submitted=!0)):3!=newTaskCtrl.step||$scope.requestParametersForm.$valid?4!=newTaskCtrl.step||$scope.executionTimingForm.$valid?void(6!=newTaskCtrl.step?5!=newTaskCtrl.step?(newTaskCtrl.step=nextStep,1==newTaskCtrl.step?$scope.generalForm.submitted=!0:2==newTaskCtrl.step?$scope.requestedEntitiesForm.submitted=!0:3==newTaskCtrl.step?$scope.requestParametersForm.submitted=!0:4==newTaskCtrl.step&&($scope.executionTimingForm.submitted=!0)):newTaskCtrl.globalsNext(nextStep):newTaskCtrl.referenceNext(nextStep)):(newTaskCtrl.executionTimingForm=$scope.executionTimingForm,void($scope.executionTimingForm.submitted=!0)):(newTaskCtrl.requestParametersForm=$scope.requestParametersForm,void($scope.requestParametersForm.submitted=!0))},newTaskCtrl.generalNext=function(form,nextStep){if(newTaskCtrl.isFluxMode){$scope.generalForm.taskLogicalUnit.$setValidity("gap",!0),$scope.generalForm.taskLogicalUnit.$setValidity("missingParent",!0);let isSelectedLU=lu_name=>_.find(newTaskCtrl.logicalUnits,{lu_name:lu_name}),checkGap=lu=>{if(lu.lu_parent_name&&!isSelectedLU(lu.lu_parent_name)){const luParent=_.find(newTaskCtrl.allLogicalUnits,{lu_name:lu.lu_parent_name});luParent&&luParent.lu_parent_name&&isSelectedLU(luParent.lu_parent_name)&&($scope.generalForm.taskLogicalUnit.$setValidity("gap",!1),newTaskCtrl.missingUnitInGap=luParent.lu_name)}},checkIfRootIsMissing=()=>{for(lu of($scope.generalForm.taskLogicalUnit.$setValidity("missingParent",!0),newTaskCtrl.missingRootLU=[],newTaskCtrl.logicalUnits))if(lu.lu_parent_name){const luParent=_.find(newTaskCtrl.allLogicalUnits,{lu_name:lu.lu_parent_name});luParent&&(luParent.lu_parent_name||isSelectedLU(luParent.lu_name)||($scope.generalForm.taskLogicalUnit.$setValidity("missingParent",!1),newTaskCtrl.missingRootLU.push(luParent.lu_name)))}};newTaskCtrl.logicalUnits&&newTaskCtrl.logicalUnits.length>0&&newTaskCtrl.logicalUnits.forEach(lu=>{"refernceOnly"!==newTaskCtrl.taskData.reference&&(checkGap(lu),checkIfRootIsMissing(lu))})}if(form.$valid){let cb=()=>{newTaskCtrl.step=nextStep||2,"admin"==newTaskCtrl.userRoleType||newTaskCtrl.sourceEnvOwner&&newTaskCtrl.targetEnvOwner||(newTaskCtrl.taskData.selectAllEntites=!1);var sourceEnv=_.find(newTaskCtrl.allSourceEnvironments,{environment_id:newTaskCtrl.taskData.source_environment_id});sourceEnv&&(newTaskCtrl.taskData.source_env_name=sourceEnv.environment_name),newTaskCtrl.taskData.selectAllEntites&&(newTaskCtrl.requestedEntities.entities_list=void 0,"EXTRACT"==newTaskCtrl.taskData.task_type&&(newTaskCtrl.taskData.task_globals?newTaskCtrl.step=nextStep||5:!newTaskCtrl.taskData.version_ind&&(newTaskCtrl.taskData.version_ind||newTaskCtrl.userRole&&newTaskCtrl.userRole.allowed_request_of_fresh_data||newTaskCtrl.sourceUserRole&&newTaskCtrl.sourceUserRole.allowed_request_of_fresh_data)?newTaskCtrl.step=nextStep||3:newTaskCtrl.step=nextStep||4)),null!=newTaskCtrl.taskData.reference&&(newTaskCtrl.step=nextStep||6)};"LOAD"===newTaskCtrl.taskData.task_type?newTaskCtrl.updateParams(cb):cb.apply()}else form.submitted=!0;newTaskCtrl.generalForm=form},newTaskCtrl.referenceNext=function(nextStep){if(0!=_.filter(newTaskCtrl.taskData.refList,{selected:!0}).length){if(newTaskCtrl.referenceTabError="","LOAD"!=newTaskCtrl.taskData.task_type||!newTaskCtrl.taskData.version_ind||_.find(newTaskCtrl.taskData.refLoadVersions,{task_execution_id:parseInt(newTaskCtrl.taskData.selectedRefVersionToLoad)}))return newTaskCtrl.taskData.task_globals?newTaskCtrl.step=nextStep||5:"refernceOnly"!==newTaskCtrl.taskData.reference?"EXTRACT"==newTaskCtrl.taskData.task_type&&newTaskCtrl.taskData.selectAllEntites?newTaskCtrl.step=nextStep||3:newTaskCtrl.step=nextStep||2:newTaskCtrl.step=nextStep||4}else newTaskCtrl.referenceTabError="Please Select Reference Table"},newTaskCtrl.requestedEntitiesNext=function(form,migrated,nextStep){if("LOAD"!=newTaskCtrl.taskData.task_type||!newTaskCtrl.taskData.version_ind||newTaskCtrl.taskData.selectAllEntites||migrated){if(newTaskCtrl.isFluxMode&&"LOAD"==newTaskCtrl.taskData.task_type&&!newTaskCtrl.taskData.version_ind&&("synthetic"==newTaskCtrl.selectFieldType||"parameters"==newTaskCtrl.selectFieldType)){for(lu of($scope.LUsMissingParent=[],newTaskCtrl.logicalUnits))lu.lu_parent_name&&!_.find(newTaskCtrl.logicalUnits,{lu_name:lu.lu_parent_name})&&$scope.LUsMissingParent.push(lu.lu_name);if($scope.requestedEntitiesForm.$setValidity("missingParent",!0),$scope.LUsMissingParent.length>0)return void $scope.requestedEntitiesForm.$setValidity("missingParent",!1)}if("given"==newTaskCtrl.selectFieldType&&newTaskCtrl.requestedEntities&&"string"==typeof newTaskCtrl.requestedEntities.entities_list&&newTaskCtrl.taskData.entity_exclusion_list==newTaskCtrl.requestedEntities.entities_list)return newTaskCtrl.errorList=!0,void(form.$valid||(form.submitted=!0,newTaskCtrl.requestedEntitiesForm=form));if(newTaskCtrl.enititesListNotPassedExclusionList=!1,newTaskCtrl.enititesListFailedPatternTest=!1,"LOAD"==newTaskCtrl.taskData.task_type&&!newTaskCtrl.taskData.version_ind&&newTaskCtrl.requestedEntities.entities_list&&"string"==typeof newTaskCtrl.taskData.entity_exclusion_list&&newTaskCtrl.requestedEntities.entities_list.length>0&&(newTaskCtrl.taskData.entity_exclusion_list=newTaskCtrl.taskData.entity_exclusion_list.replace(/\s/g,""),newTaskCtrl.taskData.entity_exclusion_list=newTaskCtrl.taskData.entity_exclusion_list.replace(/\r?\n|\r/g,""),newTaskCtrl.entitiesPattern.test(newTaskCtrl.taskData.entity_exclusion_list)||(newTaskCtrl.enititesExclusionListPatternTest=!0)),"given"==newTaskCtrl.selectFieldType&&"string"==typeof newTaskCtrl.requestedEntities.entities_list&&newTaskCtrl.requestedEntities.entities_list.length>0){newTaskCtrl.requestedEntities.entities_list=newTaskCtrl.requestedEntities.entities_list.replace(/\s/g,""),newTaskCtrl.requestedEntities.entities_list=newTaskCtrl.requestedEntities.entities_list.replace(/\r?\n|\r/g,"");var entitiesPattern=newTaskCtrl.entitiesPattern;if(("LOAD"!=newTaskCtrl.taskData.task_type||newTaskCtrl.taskData.version_ind)&&(entitiesPattern=new RegExp("^((\\w|-)+(?:,(\\w|-)+){0,"+((newTaskCtrl.maxToCopy||1e9)-1)+"})?$")),entitiesPattern.test(newTaskCtrl.requestedEntities.entities_list))if("LOAD"!=newTaskCtrl.taskData.task_type||newTaskCtrl.taskData.version_ind)newTaskCtrl.errorList=!1,form.$valid||1==newTaskCtrl.disableChange?newTaskCtrl.taskData.task_globals?newTaskCtrl.step=nextStep||5:("EXTRACT"!=newTaskCtrl.taskData.task_type&&"LOAD"!=newTaskCtrl.taskData.task_type||!newTaskCtrl.taskData.version_ind)&&("EXTRACT"!=newTaskCtrl.taskData.task_type||newTaskCtrl.taskData.version_ind||newTaskCtrl.userRole&&newTaskCtrl.userRole.allowed_request_of_fresh_data||newTaskCtrl.sourceUserRole&&newTaskCtrl.sourceUserRole.allowed_request_of_fresh_data)?newTaskCtrl.step=nextStep||3:newTaskCtrl.step=nextStep||4:form.submitted=!0,newTaskCtrl.requestedEntitiesForm=form;else(dataForValidation={}).exclusion_list=newTaskCtrl.requestedEntities.entities_list,dataForValidation.be_id=newTaskCtrl.taskData.be_id,TDMService.postEnvExclusionListValidateList(newTaskCtrl.taskData.environment_id,dataForValidation).then((function(response){if("SUCCESS"==response.errorCode){if(response.result.length>0){newTaskCtrl.enititesListNotPassedExclusionList=!0,newTaskCtrl.existingEntitiesInExclusionListMembers=[];for(var i=0;i<response.result.length;i++)newTaskCtrl.existingEntitiesInExclusionListMembers.push(response.result[i].unnest);return}newTaskCtrl.errorList=!1,form.$valid||1==newTaskCtrl.disableChange?newTaskCtrl.taskData.task_globals?newTaskCtrl.step=nextStep||5:newTaskCtrl.step=nextStep||3:form.submitted=!0,newTaskCtrl.requestedEntitiesForm=form}else toastr.error("Unable to execute validation against Exclusion List"+response.message)}));else newTaskCtrl.enititesListFailedPatternTest=!0}else if("synthetic"==newTaskCtrl.selectFieldType&&newTaskCtrl.requestedEntities.synthetic){var dataForValidation;(dataForValidation={}).exclusion_list=newTaskCtrl.requestedEntities.synthetic,dataForValidation.be_id=newTaskCtrl.taskData.be_id,TDMService.postEnvExclusionListValidateList(newTaskCtrl.taskData.environment_id,dataForValidation).then((function(response){if("SUCCESS"==response.errorCode){if(response.result.length>0){newTaskCtrl.enititesListNotPassedExclusionList=!0,newTaskCtrl.existingEntitiesInExclusionListMembers=[];for(var i=0;i<response.result.length;i++)newTaskCtrl.existingEntitiesInExclusionListMembers.push(response.result[i].unnest);return}newTaskCtrl.errorList=!1,form.$valid||1==newTaskCtrl.disableChange?newTaskCtrl.taskData.task_globals?newTaskCtrl.step=nextStep||5:newTaskCtrl.step=nextStep||3:form.submitted=!0,newTaskCtrl.requestedEntitiesForm=form}else toastr.error("Unable to execute validation against Exclusion List"+response.message)}))}else newTaskCtrl.errorList=!1,form.$valid||1==newTaskCtrl.disableChange?newTaskCtrl.taskData.task_globals?newTaskCtrl.step=nextStep||5:("EXTRACT"!=newTaskCtrl.taskData.task_type&&"LOAD"!=newTaskCtrl.taskData.task_type||!newTaskCtrl.taskData.version_ind)&&("EXTRACT"!=newTaskCtrl.taskData.task_type||newTaskCtrl.taskData.version_ind||newTaskCtrl.userRole&&newTaskCtrl.userRole.allowed_request_of_fresh_data||newTaskCtrl.sourceUserRole&&newTaskCtrl.sourceUserRole.allowed_request_of_fresh_data)?newTaskCtrl.step=nextStep||3:newTaskCtrl.step=nextStep||4:form.submitted=!0,newTaskCtrl.requestedEntitiesForm=form}else newTaskCtrl.checkMigrateStatus()},newTaskCtrl.globalsNext=function(nextStep){newTaskCtrl.taskData.version_ind||"refernceOnly"===newTaskCtrl.taskData.reference?newTaskCtrl.step=nextStep||4:newTaskCtrl.step=nextStep||3},newTaskCtrl.requestParametersNext=function(form){form.$valid?newTaskCtrl.step=4:form.submitted=!0,newTaskCtrl.requestParametersForm=form},newTaskCtrl.executionTimingFinish=function(form){if(form.$valid){if(!$scope.generalForm.$valid)return void(newTaskCtrl.step=1);if(newTaskCtrl.taskData.reference&&0==_.filter(newTaskCtrl.taskData.refList,{selected:!0}).length)return void(newTaskCtrl.step=6);if("refernceOnly"!==newTaskCtrl.taskData.reference&&!$scope.requestedEntitiesForm.$valid)return void(newTaskCtrl.step=2);if(!$scope.requestParametersForm.$valid)return void(newTaskCtrl.step=3);newTaskCtrl.addTask()}else form.submitted=!0;newTaskCtrl.executionTimingForm=form},newTaskCtrl.cronTabConfig={allowMultiple:!0},newTaskCtrl.toggleVersion=function(task_execution_id){newTaskCtrl.versionsToggle[task_execution_id]=!newTaskCtrl.versionsToggle[task_execution_id],newTaskCtrl.dtInstanceVersions&&newTaskCtrl.dtInstanceVersions.reloadData&&newTaskCtrl.dtInstanceVersions.reloadData((function(){}))},newTaskCtrl.versionsToggle={},newTaskCtrl.versionsForLoad=[],newTaskCtrl.dtInstanceVersions={},newTaskCtrl.dtColumnsVersions=[],newTaskCtrl.dtColumnDefsVersions=[],newTaskCtrl.headersVersions=[{column:"collapse",name:"",clickAble:!1},{column:"actions",name:"",clickAble:!1},{column:"version_name",name:"Version Name",clickAble:!0},{column:"task_id",name:"Task Id",clickAble:!1},{column:"task_last_updated_by",name:"Last Updated By",clickAble:!1},{column:"version_type",name:"Version Type",clickAble:!1},{column:"version_datetime",name:"Date Time",type:"date",clickAble:!1},{column:"lu_name",name:"Logical Unit Name",clickAble:!1},{column:"number_of_extracted_entities",name:"Number of Extracted Entities",clickAble:!1},{column:"rootIndicator",name:"Root LU",clickAble:!1}];for(var changeToLocalDate=function(data,type,full,meta){return moment(data).format("DD MMM YYYY, HH:mm")},renderSelectionColumn=function(data,type,full,meta){return full.isRoot?'<input type="radio" ng-value="\''+full.fabric_execution_id+'\'" name="versionsTableSelection" ng-model="newTaskCtrl.selectedVersionToLoad" style="display:block !importnant; opacity:1 !importnant;">':""},renderCollapseColumn=function(data,type,full,meta){return full.isRoot?'<a class="toggleVersions '+(newTaskCtrl.versionsToggle[full.task_execution_id]?"active":"")+'" ng-click="newTaskCtrl.toggleVersion('+full.task_execution_id+')"><i class="fa arrow"></i> </a>':""},i=0;i<newTaskCtrl.headersVersions.length;i++)"actions"==newTaskCtrl.headersVersions[i].column?newTaskCtrl.dtColumnsVersions.push(DTColumnBuilder.newColumn(newTaskCtrl.headersVersions[i].column).withTitle(newTaskCtrl.headersVersions[i].name).renderWith(renderSelectionColumn).notSortable()):"collapse"==newTaskCtrl.headersVersions[i].column?newTaskCtrl.dtColumnsVersions.push(DTColumnBuilder.newColumn(newTaskCtrl.headersVersions[i].column).withTitle(newTaskCtrl.headersVersions[i].name).renderWith(renderCollapseColumn).notSortable()):"date"==newTaskCtrl.headersVersions[i].type?newTaskCtrl.dtColumnsVersions.push(DTColumnBuilder.newColumn(newTaskCtrl.headersVersions[i].column).withTitle(newTaskCtrl.headersVersions[i].name).renderWith(changeToLocalDate).notSortable()):"task_id"==newTaskCtrl.headersVersions[i].column||"version_name"==newTaskCtrl.headersVersions[i].column?newTaskCtrl.dtColumnsVersions.push(DTColumnBuilder.newColumn(newTaskCtrl.headersVersions[i].column).withTitle(newTaskCtrl.headersVersions[i].name).notSortable()):"rootIndicator"==newTaskCtrl.headersVersions[i].column?newTaskCtrl.dtColumnsVersions.push(DTColumnBuilder.newColumn(newTaskCtrl.headersVersions[i].column).withTitle(newTaskCtrl.headersVersions[i].name).notSortable().notVisible()):newTaskCtrl.dtColumnsVersions.push(DTColumnBuilder.newColumn(newTaskCtrl.headersVersions[i].column).withTitle(newTaskCtrl.headersVersions[i].name).notSortable());newTaskCtrl.dtOptionsVersions=DTOptionsBuilder.fromFnPromise((function(){return deferred=$q.defer(),versionsForLoad=[],rootLUs=_.filter(newTaskCtrl.logicalUnits,{lu_parent_name:null}),newTaskCtrl.versionsForLoad.forEach((function(versionForLoad){if(_.find(rootLUs,{lu_name:versionForLoad.lu_name})?versionForLoad.rootIndicator=!0:versionForLoad.rootIndicator=!1,versionForLoad.rootIndicator&&_.findIndex(versionsForLoad,{task_execution_id:versionForLoad.task_execution_id,isRoot:!0})<0)return versionForLoad.isRoot=!0,versionForLoad.rootIndicator=!0,void versionsForLoad.push(versionForLoad);newTaskCtrl.versionsToggle[versionForLoad.task_execution_id]&&(versionForLoad.isRoot=!1,versionsForLoad.push(versionForLoad))})),console.log(versionsForLoad),deferred.resolve(versionsForLoad),deferred.promise;var deferred,versionsForLoad,rootLUs})).withDOM('<"html5buttons"B>lTfgitp').withOption("createdRow",(function(row){$compile(angular.element(row).contents())($scope)})).withOption("scrollX",!1).withOption("lengthChange",!1).withOption("paging",!1).withButtons([]).withOption("caseInsensitive",!0).withOption("order",[[6,"desc"],[9,"desc"]]).withOption("search",{caseInsensitive:!1}),newTaskCtrl.dtOptionsVersions.withLightColumnFilter({2:{type:"text"},3:{type:"text"},4:{type:"text"},5:{type:"text"},6:{type:"text"},7:{type:"text"},8:{type:"text"}}),newTaskCtrl.getVersionsForLoad=function(){var entitiesPassed=!0;newTaskCtrl.requestedEntities.entities_list&&newTaskCtrl.maxToCopy&&(entitiesPassed=new RegExp("^((\\w|-)+(?:,(\\w|-)+){0,"+((newTaskCtrl.maxToCopy||1e9)-1)+"})?$").test(newTaskCtrl.requestedEntities.entities_list),newTaskCtrl.enititesListFailedPatternTest=!1);if(newTaskCtrl.versionForLoadFrom&&newTaskCtrl.versionForLoadTo&&newTaskCtrl.logicalUnits&&newTaskCtrl.taskData.source_env_name&&(newTaskCtrl.taskData.selectAllEntites||newTaskCtrl.requestedEntities.entities_list&&entitiesPassed)){newTaskCtrl.loadingTableVersions=!0;var from=new Date(newTaskCtrl.versionForLoadFrom);from.setHours(0),from.setMinutes(0),from.setSeconds(0);var to=new Date(newTaskCtrl.versionForLoadTo);to.setHours(23),to.setMinutes(59),to.setSeconds(59),TDMService.postGenericAPI("tasks/versionsForLoad",{fromDate:from,toDate:to,entitiesList:newTaskCtrl.taskData.selectAllEntites?"":newTaskCtrl.requestedEntities.entities_list,lu_list:newTaskCtrl.logicalUnits,source_env_name:newTaskCtrl.taskData.source_env_name,be_id:newTaskCtrl.taskData.be_id}).then((function(response){if("SUCCESS"==response.errorCode){let overrideRootIndicators=data=>{for(item of(executionIdsSet=new Set,data))executionIdsSet.has(item.task_execution_id)||"Y"!=item.root_indicator||(item.root_indicator="YY",executionIdsSet.add(item.task_execution_id))};(data=>{})(response.result),overrideRootIndicators(response.result),newTaskCtrl.versionsForLoad=response.result,newTaskCtrl.versionsForLoad=_.sortBy(newTaskCtrl.versionsForLoad,version=>-1*new Date(version.version_datetime)),$timeout((function(){newTaskCtrl.dtInstanceVersions&&newTaskCtrl.dtInstanceVersions.reloadData&&newTaskCtrl.dtInstanceVersions.reloadData((function(){}))}),100),newTaskCtrl.loadingTableVersions=!1}else toastr.error("New Task # Failed to get Versions for Load")}))}else newTaskCtrl.requestedEntities.entities_list||newTaskCtrl.taskData.selectAllEntites?entitiesPassed||(newTaskCtrl.enititesListFailedPatternTest=!0):(newTaskCtrl.versionsForLoad=[],newTaskCtrl.dtInstanceVersions&&newTaskCtrl.dtInstanceVersions.reloadData&&newTaskCtrl.dtInstanceVersions.reloadData((function(){})))},newTaskCtrl.initReferenceForm=ReferenceForm=>{$scope.ReferenceForm=ReferenceForm},newTaskCtrl.requestParametersPrev=function(){newTaskCtrl.taskData.task_globals?newTaskCtrl.step=5:newTaskCtrl.step=2},BreadCrumbsService.push({},"NEW_TASK",(function(){}))},controllerAs:"newTaskCtrl"}}function queryBuilder($compile){return{restrict:"E",scope:{group:"=",params:"=",disablechange:"=",lastindex:"=",form:"=",index:"="},templateUrl:"views/tasks/queryBuilderDirective.html",compile:function(element,attrs){var content,directive;return content=element.contents().remove(),function(scope,element,attrs){scope.operators=[{name:"AND"},{name:"OR"}],scope.conditions=[{name:"=",id:"="},{name:"<>",id:"<>"},{name:"<",id:">"},{name:"<=",id:">="},{name:">",id:"<"},{name:">=",id:"<="},{name:"Is null",id:"Is null"},{name:"Is not null",id:"Is not null"}],scope.comboConditions=[{name:"="},{name:"<>"},{name:"Is null",id:"Is null"},{name:"Is not null",id:"Is not null"}],scope.changeParam=function(rule,field){rule.data=void 0,scope.data=void 0;var param=_.find(scope.params,{param_name:field});param&&(rule.type=param.param_type,"integer"==rule.type||"real"==rule.type||"number"==rule.type?(rule.min=parseFloat(param.min_value),rule.max=parseFloat(param.max_value)):rule.validValues=param.valid_values),rule.field=field},scope.changeCondition=function(rule,condition){rule.condition=condition},scope.changeData=function(rule,data){rule.data=void 0!==data?data:void 0},scope.addCondition=function(){scope.group.rules.push({condition:"",field:"",data:void 0,operator:"AND"})},scope.disableIfNull=function(rule,condition){"Is null"===condition||"Is not null"===condition?(rule.disableThird=!0,rule.data=void 0):rule.disableThird=!1},scope.removeCondition=function(index){scope.group.rules.splice(index,1)},scope.addGroup=function(){scope.group.rules.push({group:{operator:"AND",rules:[]}})},scope.removeGroup=function(){"group"in scope.$parent&&scope.$parent.group.rules.splice(scope.$parent.$index,1)},directive||(directive=$compile(content)),element.append(directive(scope,(function($compile){return $compile})))}}}}angular.module("TDM-FE").directive("newTaskDirective",newTaskDirective);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpcmVjdGl2ZXMvdGFza3MvbmV3VGFza0RpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJuZXdUYXNrRGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsInNjb3BlIiwiY29udGVudCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJURE1TZXJ2aWNlIiwiQnJlYWRDcnVtYnNTZXJ2aWNlIiwidG9hc3RyIiwiJHRpbWVvdXQiLCJBdXRoU2VydmljZSIsIiRzdGF0ZSIsIkRUT3B0aW9uc0J1aWxkZXIiLCJEVENvbHVtbkJ1aWxkZXIiLCIkcSIsIiRjb21waWxlIiwibmV3VGFza0N0cmwiLCJ0aGlzIiwibWluRGF0ZSIsIkRhdGUiLCJtb21lbnQiLCJtaWxsaXNlY29uZHMiLCJzZWNvbmRzIiwibWludXRlcyIsImhvdXJzIiwiYWRkIiwic2NoZWR1bGVyT3B0aW9ucyIsImZvcm1JbnB1dENsYXNzIiwiZm9ybVNlbGVjdENsYXNzIiwiZm9ybVJhZGlvQ2xhc3MiLCJmb3JtQ2hlY2tib3hDbGFzcyIsImhpZGVNaW51dGVzVGFiIiwiaGlkZUhvdXJseVRhYiIsImhpZGVEYWlseVRhYiIsImhpZGVXZWVrbHlUYWIiLCJoaWRlTW9udGhseVRhYiIsImhpZGVZZWFybHlUYWIiLCJoaWRlQWR2YW5jZWRUYWIiLCJ1c2UyNEhvdXJUaW1lIiwiaGlkZVNlY29uZHMiLCJ0YXNrcyIsImlzRmx1eE1vZGUiLCJyZXRlbnRpb25QZXJpb2QiLCJnZXRSZXRlbnRpb25QZXJpb2QiLCJnZXRGYWJyaWNSb2xlc2ZvclVzZXIiLCJnZXRVc2VySWQiLCJ0aGVuIiwicmVzcG9uc2UiLCJ1c2VyRmFicmljUm9sZXMiLCJyZXN1bHQiLCJ0aW1lWm9uZU9mZnNldCIsImdldFRpbWVab25lIiwiXyIsInJlbW92ZSIsImF2YWlsYWJsZU9wdGlvbnMiLCJwZXJpb2QiLCJ1bml0cyIsIm1heFJldGVudGlvblBlcmlvZCIsInJlZmVyZW5jZURyb3BEb3duIiwidGV4dCIsInZhbHVlIiwic3RlcCIsInRhc2tEYXRhIiwiZ2xvYmFscyIsInJlZmVyZW5jZSIsInZlcnNpb25Gb3JMb2FkVG8iLCJ2ZXJzaW9uRm9yTG9hZEZyb20iLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImRlZmF1bHRQZXJpb2QiLCJ1bml0IiwiZGVmYXVsdFJldGludGlvbiIsImZpbmQiLCJuYW1lIiwicmV0ZW50aW9uX3BlcmlvZF90eXBlIiwicmV0ZW50aW9uX3BlcmlvZF92YWx1ZSIsInJldGVudGlvblBlcmlvZFR5cGVDaGFuZ2VkIiwidGFza190eXBlIiwicGFyYW0iLCJyZXF1ZXN0ZWRFbnRpdGllcyIsInNlbGVjdEZpZWxkVHlwZSIsInRhc2tUaXRsZVBhdHRlcm4iLCJlbnRpdGllc1BhdHRlcm4iLCJSZWdFeHAiLCJleGN1bHRpb25QYXR0ZXJuIiwic3ludGhldGljUGF0dGVybiIsInVwZGF0ZUVudGl0aWVzUGF0dGVybiIsIm51bWJlcl9vZl9lbnRpdGllc190b19jb3B5IiwidXNlclJvbGUiLCJnZXRSb2xlIiwiY29uc29sZSIsImxvZyIsInR5cGUiLCJ1c2VyUm9sZVR5cGUiLCJhbGxvd2VkX3JhbmRvbV9lbnRpdHlfc2VsZWN0aW9uIiwiYWxsb3dlZF9jcmVhdGlvbl9vZl9zeW50aGV0aWNfZGF0YSIsImFsbG93ZWRfcmVmcmVzaF9yZWZlcmVuY2VfZGF0YSIsImFsbG93ZWRfcmVxdWVzdF9vZl9mcmVzaF9kYXRhIiwiYWxsb3dlZF9kZWxldGVfYmVmb3JlX2xvYWQiLCJhbGxvd2VkX3Rhc2tfc2NoZWR1bGluZyIsImFsbG93ZWRfcmVwbGFjZV9zZXF1ZW5jZXMiLCJzb3VyY2VVc2VyUm9sZSIsInNvdXJjZUVudk93bmVyIiwidGFyZ2V0RW52T3duZXIiLCJlcnJvckNvZGUiLCJ0aW1lWm9uZU1lc3NhZ2UiLCJjdXJyZW50X3NldHRpbmciLCJnZXRFbnZpcm9ubWVudHMiLCJhbGxFbnZpcm9ubWVudHMiLCJmaWx0ZXIiLCJhbmd1bGFyIiwiY29weSIsImVudiIsImFsbG93X3dyaXRlIiwiZW52aXJvbm1lbnRfc3RhdHVzIiwiYWxsU291cmNlRW52aXJvbm1lbnRzIiwiYWxsb3dfcmVhZCIsImVycm9yIiwiZ2V0VXNlcm5hbWUiLCJnZXRFbnZpcm9ubWVudHNGb3JVc2VyIiwidW5pcXVlIiwiZW50aXRpZXNMaXN0Q2hhbmdlIiwiZW50aXRpZXNMaXN0Q2hhbmdlVGltZW91dCIsImNhbmNlbCIsInZlcnNpb25faW5kIiwic2VsZWN0QWxsRW50aXRlcyIsImdldFZlcnNpb25zRm9yTG9hZCIsInJlZmVyZW5jZUNoYW5nZSIsInRhc2tNb2RlQ2hhbmdlIiwidW5kZWZpbmVkIiwic291cmNlX2Vudmlyb25tZW50X2lkIiwiZW52aXJvbm1lbnRfaWQiLCJzb3VyY2VfZW52X25hbWUiLCJtYXhUb0NvcHkiLCJsb2dpY2FsVW5pdHMiLCJsb2dpY2FsVW5pdCIsImJlX2lkIiwiZ2V0QWxsTG9naWNhbFVuaXRzRm9yRW52IiwiYWxsU2luZ2xlTG9naWNhbFVuaXRzIiwiZ2V0R2VuZXJpY0FQSSIsInNvdXJjZUVudmlyb25tZW50Q2hhbmdlIiwiZ2V0Um9sZXMiLCJzb3VyY2VFbnYiLCJlbnZpcm9ubWVudF9uYW1lIiwiZW52aXJvbm1lbnRDaGFuZ2UiLCJjaGVja1JlZmVyZW5jZUlmQWxsb3dlZCIsInNvdXJjZSIsImdldEVudmlyb25tZW50T3duZXJzIiwib3duZXJGb3VuZCIsInVzZXJfaWQiLCJpIiwibGVuZ3RoIiwidXNlcl90eXBlIiwiZ2V0Um9sZUZvclVzZXJJbkVudiIsImFsbG93ZWRfZW50aXR5X3ZlcnNpb25pbmciLCJtaW5SZWFkIiwibWluV3JpdGUiLCJwYXJzZUludCIsInNvdXJjZU1heFRvQ29weSIsInRhcmdldE1heFRvQ29weSIsInRhc2tfaWQiLCJtZXNzYWdlIiwiZ2V0QnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzIiwiYnVzaW5lc3NFbnRpdGllcyIsImFsbExvZ2ljYWxVbml0cyIsInByb2R1Y3RzIiwidXBkYXRlUGFyYW1zIiwiY2IiLCJwYXJhbWV0ZXJzIiwicGFyYW1ldGVyc0tleXMiLCJPYmplY3QiLCJrZXlzIiwiY2hvc2VuTFVzIiwibWFwIiwibHUiLCJsdV9uYW1lIiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwic3BsaXQiLCJrZXkiLCJQQVJBTV9UWVBFIiwicGFyYW1fbmFtZSIsIlBBUkFNX05BTUUiLCJwYXJhbV90eXBlIiwidmFsaWRfdmFsdWVzIiwibWluX3ZhbHVlIiwicGFyc2VGbG9hdCIsIm1heF92YWx1ZSIsImFwcGx5IiwiYnVzaW5lc3NFbnRpdHlDaGFuZ2UiLCJzZWxlY3Rpb25fcGFyYW1fdmFsdWUiLCJncm91cCIsInJ1bGVzIiwiYmUiLCJiZV9uYW1lIiwiZW52aXJvbm1lbnRJZCIsImdldExvZ2ljYWxVbml0c0ZvckJ1c2luZXNzRW50aXR5QW5kRW52IiwicHVzaCIsImdldEJFUG9zdEV4ZWN1dGlvblByb2Nlc3MiLCJwb3N0RXhlY3V0aW9uUHJvY2Vzc2VzIiwiYWxsUG9zdEV4ZWN1dGlvblByb2Nlc3MiLCJhbGxQb3N0RXhlY3V0aW9uUHJvY2Vzc0lkcyIsInNlbGVjdFNjaGVkdWxlIiwiYWRkVGFzayIsImNyZWF0ZVRhc2tJblByb2dyZXNzIiwiZW50aXR5X2V4Y2x1c2lvbl9saXN0IiwiZW50aXRpZXNfbGlzdCIsImVycm9yTGlzdCIsInNlbGVjdGlvbl9tZXRob2QiLCJzeW50aGV0aWMiLCJxdWVyeV9wYXJhbWV0ZXJzIiwicGFyYW1ldGVyc0Vycm9yIiwicGFyYW1ldGVyc1JhbmRvbSIsInNjaGVkdWxlciIsInNjaGVkdWxpbmdfZW5kX2RhdGUiLCJzY2hlZHVsZURhdGEiLCJzY2hlZHVsZUVuZEJ5IiwidGFza190aXRsZSIsInRhc2tfc3RhdHVzIiwib3BlcmF0aW9uTW9kZSIsInJlcGxhY2Vfc2VxdWVuY2VzIiwibG9hZF9lbnRpdHkiLCJkZWxldGVfYmVmb3JlX2xvYWQiLCJyZXF1ZXN0X29mX2ZyZXNoX2RhdGEiLCJzeW5jX21vZGUiLCJzZWxlY3RlZFZlcnNpb25Ub0xvYWQiLCJ2ZXJzaW9uc0ZvckxvYWQiLCJmYWJyaWNfZXhlY3V0aW9uX2lkIiwic2VsZWN0ZWRfdmVyc2lvbl90YXNrX25hbWUiLCJ2ZXJzaW9uX25hbWUiLCJsb2NhbFRpbWVab25lIiwidmVyc2lvbl9kYXRldGltZSIsImdldFRpbWV6b25lT2Zmc2V0IiwiZ2V0VGltZSIsInNlbGVjdGVkX3ZlcnNpb25fZGF0ZXRpbWUiLCJmb3JtYXQiLCJzZWxlY3RlZF92ZXJzaW9uX3Rhc2tfZXhlX2lkIiwidGFza19leGVjdXRpb25faWQiLCJyZWZMb2FkVmVyc2lvbnMiLCJzZWxlY3RlZFJlZlZlcnNpb25Ub0xvYWQiLCJzZWxlY3RlZF9yZWZfdmVyc2lvbl90YXNrX25hbWUiLCJzZWxlY3RlZF9yZWZfdmVyc2lvbl9kYXRldGltZSIsInNlbGVjdGVkX3JlZl92ZXJzaW9uX3Rhc2tfZXhlX2lkIiwidGFza19nbG9iYWxzIiwicmVmTGlzdCIsInJlZnJlc2hfcmVmZXJlbmNlX2RhdGEiLCJjcmVhdGVUYXNrIiwiY3JlYXRlVGFza1Jlc3VsdCIsInBvc3RUYXNrTG9naWNhbFVuaXRzIiwiaWQiLCJzdWNjZXNzIiwiZ28iLCJyZWxvYWQiLCJwb3N0VGFza1Bvc3RFeGVjdXRpb25Qcm9jZXNzIiwicG9zdGV4ZWN1dGlvbnByb2Nlc3NlcyIsInYiLCJwcm9jZXNzX2lkIiwiYnVpbGRTdWJRdWVyeSIsInJ1bGUiLCJmaWVsZCIsImNvbmRpdGlvbiIsImRhdGEiLCJjb21wdXRlZCIsInN0ciIsIm9wZXJhdG9yIiwidG9Mb2NhbGVTdHJpbmciLCJ0b0ZpeGVkIiwiTWF0aCIsImZsb29yIiwidmFsaWRWYWx1ZXMiLCJKU09OIiwicGFyc2UiLCJwYXJhbWV0ZXJzQ291bnQiLCJwZXJ2aW91c1F1ZXJ5UGFyYW1zIiwiZ2V0RW50aXRlc0NvdW50IiwiZm9yY2UiLCJwb3N0R2VuZXJpY0FQSSIsIndoZXJlIiwiJHdhdGNoIiwibmV3VmFsdWUiLCJhbmFseXNpc0NvdW50VGltZW91dCIsImNoZWNrR3JvdXAiLCJzdHJpbmdpZnkiLCJxdWVyeSIsImNoZWNrTWlncmF0ZVN0YXR1cyIsInJlcXVlc3RlZEVudGl0aWVzRm9ybSIsInN1Ym1pdHRlZCIsInRhc2tFeGVjdXRpb25JZCIsImx1TmFtZXMiLCJlbnRpdGxlc0xpc3QiLCJsdUxpc3QiLCJmYWlsZWRFbnRpdGllcyIsInJlcXVlc3RlZEVudGl0aWVzTmV4dCIsImdldFN0ZXBzQXJyYXkiLCJzdGVwc0FycmF5Iiwic3VibWl0Rm9ybSIsIm5leHRTdGVwIiwic3RlcHMiLCJvcGVuU3RlcCIsImdlbmVyYWxGb3JtIiwiJHNldFN1Ym1pdHRlZCIsImdlbmVyYWxOZXh0IiwicmVxdWVzdFBhcmFtZXRlcnNGb3JtIiwicmVxdWVzdFBhcmFtZXRlcnNOZXh0IiwiZXhlY3V0aW9uVGltaW5nRm9ybSIsImV4ZWN1dGlvblRpbWluZ0ZpbmlzaCIsIkFkZEdsb2JhbEZvcm0iLCJnbG9iYWxzTmV4dCIsIlJlZmVyZW5jZUZvcm0iLCJyZWZlcmVuY2VOZXh0IiwiYXJyYXlTdGVwcyIsImN1cnJlbnRJbmRleCIsIm5leHRJbmRleCIsIiR2YWxpZCIsImZvcm0iLCJ0YXNrTG9naWNhbFVuaXQiLCIkc2V0VmFsaWRpdHkiLCJpc1NlbGVjdGVkTFUiLCJjaGVja0dhcCIsImx1X3BhcmVudF9uYW1lIiwibHVQYXJlbnQiLCJtaXNzaW5nVW5pdEluR2FwIiwiY2hlY2tJZlJvb3RJc01pc3NpbmciLCJtaXNzaW5nUm9vdExVIiwiZm9yRWFjaCIsInNlbGVjdGVkIiwicmVmZXJlbmNlVGFiRXJyb3IiLCJtaWdyYXRlZCIsIkxVc01pc3NpbmdQYXJlbnQiLCJlbml0aXRlc0xpc3ROb3RQYXNzZWRFeGNsdXNpb25MaXN0IiwiZW5pdGl0ZXNMaXN0RmFpbGVkUGF0dGVyblRlc3QiLCJyZXBsYWNlIiwidGVzdCIsImVuaXRpdGVzRXhjbHVzaW9uTGlzdFBhdHRlcm5UZXN0IiwiZGlzYWJsZUNoYW5nZSIsImRhdGFGb3JWYWxpZGF0aW9uIiwiZXhjbHVzaW9uX2xpc3QiLCJwb3N0RW52RXhjbHVzaW9uTGlzdFZhbGlkYXRlTGlzdCIsImV4aXN0aW5nRW50aXRpZXNJbkV4Y2x1c2lvbkxpc3RNZW1iZXJzIiwidW5uZXN0IiwiY3JvblRhYkNvbmZpZyIsImFsbG93TXVsdGlwbGUiLCJ0b2dnbGVWZXJzaW9uIiwidmVyc2lvbnNUb2dnbGUiLCJkdEluc3RhbmNlVmVyc2lvbnMiLCJyZWxvYWREYXRhIiwiZHRDb2x1bW5zVmVyc2lvbnMiLCJkdENvbHVtbkRlZnNWZXJzaW9ucyIsImhlYWRlcnNWZXJzaW9ucyIsImNvbHVtbiIsImNsaWNrQWJsZSIsImNoYW5nZVRvTG9jYWxEYXRlIiwiZnVsbCIsIm1ldGEiLCJyZW5kZXJTZWxlY3Rpb25Db2x1bW4iLCJpc1Jvb3QiLCJyZW5kZXJDb2xsYXBzZUNvbHVtbiIsIm5ld0NvbHVtbiIsIndpdGhUaXRsZSIsInJlbmRlcldpdGgiLCJub3RTb3J0YWJsZSIsIm5vdFZpc2libGUiLCJkdE9wdGlvbnNWZXJzaW9ucyIsImZyb21GblByb21pc2UiLCJkZWZlcnJlZCIsImRlZmVyIiwicm9vdExVcyIsInZlcnNpb25Gb3JMb2FkIiwicm9vdEluZGljYXRvciIsImZpbmRJbmRleCIsInJlc29sdmUiLCJwcm9taXNlIiwid2l0aERPTSIsIndpdGhPcHRpb24iLCJyb3ciLCJlbGVtZW50IiwiY29udGVudHMiLCJ3aXRoQnV0dG9ucyIsImNhc2VJbnNlbnNpdGl2ZSIsIndpdGhMaWdodENvbHVtbkZpbHRlciIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCJlbnRpdGllc1Bhc3NlZCIsImxvYWRpbmdUYWJsZVZlcnNpb25zIiwiZnJvbSIsInNldEhvdXJzIiwic2V0TWludXRlcyIsInNldFNlY29uZHMiLCJ0byIsImZyb21EYXRlIiwidG9EYXRlIiwiZW50aXRpZXNMaXN0IiwibHVfbGlzdCIsIm92ZXJyaWRlUm9vdEluZGljYXRvcnMiLCJpdGVtIiwiZXhlY3V0aW9uSWRzU2V0IiwiU2V0IiwiaGFzIiwicm9vdF9pbmRpY2F0b3IiLCJtYWtlUm9vdExVc09uVG9wRm9yRWFjaEV4ZWN1dGlvbiIsInNvcnRCeSIsInZlcnNpb24iLCJpbml0UmVmZXJlbmNlRm9ybSIsInJlcXVlc3RQYXJhbWV0ZXJzUHJldiIsImNvbnRyb2xsZXJBcyIsInF1ZXJ5QnVpbGRlciIsInBhcmFtcyIsImRpc2FibGVjaGFuZ2UiLCJsYXN0aW5kZXgiLCJpbmRleCIsImNvbXBpbGUiLCJhdHRycyIsImRpcmVjdGl2ZSIsIm9wZXJhdG9ycyIsImNvbmRpdGlvbnMiLCJjb21ib0NvbmRpdGlvbnMiLCJjaGFuZ2VQYXJhbSIsIm1pbiIsIm1heCIsImNoYW5nZUNvbmRpdGlvbiIsImNoYW5nZURhdGEiLCJhZGRDb25kaXRpb24iLCJkaXNhYmxlSWZOdWxsIiwiZGlzYWJsZVRoaXJkIiwicmVtb3ZlQ29uZGl0aW9uIiwic3BsaWNlIiwiYWRkR3JvdXAiLCJyZW1vdmVHcm91cCIsIiRwYXJlbnQiLCIkaW5kZXgiLCJhcHBlbmQiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLG1CQWlwREwsTUFBTyxDQUNIQyxTQUFVLElBQ1ZDLFlBanBEVywyQkFrcERYQyxNQUFPLENBQ0hDLFFBQVMsS0FFYkMsV0FucERhLFNBQVVDLE9BQVFDLFdBQVlDLG1CQUFvQkMsT0FBUUMsU0FDaERDLFlBQWFDLE9BQVFDLGlCQUFrQkMsZ0JBQWlCQyxHQUFJQyxVQUNuRixJQUFJQyxZQUFjQyxLQWlFbEIsR0FoRUFELFlBQVlFLFFBQVUsSUFBSUMsS0FDMUJILFlBQVlFLFFBQVVFLE9BQU9KLFlBQVlFLFNBQ3pDRixZQUFZRSxRQUFRRyxhQUFhLEdBQ2pDTCxZQUFZRSxRQUFRSSxRQUFRLEdBQzVCTixZQUFZRSxRQUFRSyxRQUFRLEdBQzVCUCxZQUFZRSxRQUFRTSxNQUFNLEdBQzFCUixZQUFZRSxRQUFRTyxJQUFJLEVBQUcsUUFFM0JULFlBQVlVLGlCQUFtQixDQUMzQkMsZUFBZ0IsK0JBQ2hCQyxnQkFBaUIsZ0NBQ2pCQyxlQUFnQixpQkFDaEJDLGtCQUFtQixvQkFDbkJDLGdCQUFnQixFQUNoQkMsZUFBZSxFQUNmQyxjQUFjLEVBQ2RDLGVBQWUsRUFDZkMsZ0JBQWdCLEVBQ2hCQyxlQUFlLEVBQ2ZD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QVcsR0FDWEQsTUFBTyxHQUNQRSxVQUFNcEksRUFDTnVJLFNBQVUsU0FJbEJ0USxNQUFNeWEsY0FBZ0IsU0FBVXpLLEtBQU1FLFdBRWhCLFlBQWRBLFdBQXlDLGdCQUFkQSxXQUUzQkYsS0FBSzBLLGNBQWUsRUFDcEIxSyxLQUFLRyxVQUFPcEksR0FFWmlJLEtBQUswSyxjQUFlLEdBSTVCMWEsTUFBTTJhLGdCQUFrQixTQUFVZixPQUM5QjVaLE1BQU02TCxNQUFNQyxNQUFNOE8sT0FBT2hCLE1BQU8sSUFHcEM1WixNQUFNNmEsU0FBVyxXQUNiN2EsTUFBTTZMLE1BQU1DLE1BQU1LLEtBQUssQ0FDbkJOLE1BQU8sQ0FDSHlFLFNBQVUsTUFDVnhFLE1BQU8sT0FLbkI5TCxNQUFNOGEsWUFBYyxXQUNoQixVQUFXOWEsTUFBTSthLFNBQVcvYSxNQUFNK2EsUUFBUWxQLE1BQU1DLE1BQU04TyxPQUFPNWEsTUFBTSthLFFBQVFDLE9BQVEsSUFHdkZqQixZQUFjQSxVQUFZbFosU0FBU1osVUFFbkNvWCxRQUFRNEQsT0FBT2xCLFVBQVUvWixPQUFPLFNBQVVhLFVBQ3RDLE9BQU9BLGdCQVEzQitGLFFBQ0tzVSxPQUFPLFVBQ1BuQixVQUFVLG1CQUFvQmxhIiwiZmlsZSI6ImRpcmVjdGl2ZXMvdGFza3MvbmV3VGFza0RpcmVjdGl2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG5ld1Rhc2tEaXJlY3RpdmUoKSB7XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBcInZpZXdzL3Rhc2tzL25ld1Rhc2suaHRtbFwiO1xuXG4gICAgdmFyIGNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBURE1TZXJ2aWNlLCBCcmVhZENydW1ic1NlcnZpY2UsIHRvYXN0ciwgJHRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UsICRzdGF0ZSwgRFRPcHRpb25zQnVpbGRlciwgRFRDb2x1bW5CdWlsZGVyLCAkcSwgJGNvbXBpbGUpIHtcbiAgICAgICAgdmFyIG5ld1Rhc2tDdHJsID0gdGhpcztcbiAgICAgICAgbmV3VGFza0N0cmwubWluRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIG5ld1Rhc2tDdHJsLm1pbkRhdGUgPSBtb21lbnQobmV3VGFza0N0cmwubWluRGF0ZSk7XG4gICAgICAgIG5ld1Rhc2tDdHJsLm1pbkRhdGUubWlsbGlzZWNvbmRzKDApO1xuICAgICAgICBuZXdUYXNrQ3RybC5taW5EYXRlLnNlY29uZHMoMCk7XG4gICAgICAgIG5ld1Rhc2tDdHJsLm1pbkRhdGUubWludXRlcygwKTtcbiAgICAgICAgbmV3VGFza0N0cmwubWluRGF0ZS5ob3VycygwKTtcbiAgICAgICAgbmV3VGFza0N0cmwubWluRGF0ZS5hZGQoMSwgJ2RheXMnKTtcblxuICAgICAgICBuZXdUYXNrQ3RybC5zY2hlZHVsZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgZm9ybUlucHV0Q2xhc3M6ICdmb3JtLWNvbnRyb2wxIGNyb24tZ2VuLWlucHV0JywgLy8gRm9ybSBpbnB1dCBjbGFzcyBvdmVycmlkZVxuICAgICAgICAgICAgZm9ybVNlbGVjdENsYXNzOiAnZm9ybS1jb250cm9sMSBjcm9uLWdlbi1zZWxlY3QnLCAvLyBTZWxlY3QgY2xhc3Mgb3ZlcnJpZGVcbiAgICAgICAgICAgIGZvcm1SYWRpb0NsYXNzOiAnY3Jvbi1nZW4tcmFkaW8nLCAvLyBSYWRpbyBjbGFzcyBvdmVycmlkZVxuICAgICAgICAgICAgZm9ybUNoZWNrYm94Q2xhc3M6ICdjcm9uLWdlbi1jaGVja2JveCcsIC8vIFJhZGlvIGNsYXNzIG92ZXJyaWRlXG4gICAgICAgICAgICBoaWRlTWludXRlc1RhYjogZmFsc2UsIC8vIFdoZXRoZXIgdG8gaGlkZSB0aGUgbWludXRlcyB0YWJcbiAgICAgICAgICAgIGhpZGVIb3VybHlUYWI6IGZhbHNlLCAvLyBXaGV0aGVyIHRvIGhpZGUgdGhlIGhvdXJseSB0YWJcbiAgICAgICAgICAgIGhpZGVEYWlseVRhYjogZmFsc2UsIC8vIFdoZXRoZXIgdG8gaGlkZSB0aGUgZGFpbHkgdGFiXG4gICAgICAgICAgICBoaWRlV2Vla2x5VGFiOiBmYWxzZSwgLy8gV2hldGhlciB0byBoaWRlIHRoZSB3ZWVrbHkgdGFiXG4gICAgICAgICAgICBoaWRlTW9udGhseVRhYjogZmFsc2UsIC8vIFdoZXRoZXIgdG8gaGlkZSB0aGUgbW9udGhseSB0YWJcbiAgICAgICAgICAgIGhpZGVZZWFybHlUYWI6IGZhbHNlLCAvLyBXaGV0aGVyIHRvIGhpZGUgdGhlIHllYXJseSB0YWJcbiAgICAgICAgICAgIGhpZGVBZHZhbmNlZFRhYjogZmFsc2UsIC8vIFdoZXRoZXIgdG8gaGlkZSB0aGUgYWR2YW5jZWQgdGFiXG4gICAgICAgICAgICB1c2UyNEhvdXJUaW1lOiB0cnVlLCAvLyBXaGV0aGVyIHRvIHNob3cgQU0vUE0gb24gdGhlIHRpbWUgc2VsZWN0b3JzXG4gICAgICAgICAgICBoaWRlU2Vjb25kczogZmFsc2UgLy8gV2hldGhlciB0byBzaG93L2hpZGUgdGhlIHNlY29uZHMgdGltZSBwaWNrZXJcbiAgICAgICAgfTtcbiAgICAgICAgbmV3VGFza0N0cmwudGFza3MgPSAkc2NvcGUuY29udGVudC50YXNrcztcbiAgICAgICAgbmV3VGFza0N0cmwuaXNGbHV4TW9kZSA9IEF1dGhTZXJ2aWNlLmlzRmx1eE1vZGUoKTtcbiAgICAgICAgbmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kID0gQXV0aFNlcnZpY2UuZ2V0UmV0ZW50aW9uUGVyaW9kKCk7XG5cbiAgICAgICAgVERNU2VydmljZS5nZXRGYWJyaWNSb2xlc2ZvclVzZXIoQXV0aFNlcnZpY2UuZ2V0VXNlcklkKCkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC51c2VyRmFicmljUm9sZXMgPSByZXNwb25zZS5yZXN1bHQgfHwgW107XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbmV3VGFza0N0cmwudGltZVpvbmVPZmZzZXQgPSBBdXRoU2VydmljZS5nZXRUaW1lWm9uZSgpO1xuXG4gICAgICAgIF8ucmVtb3ZlKG5ld1Rhc2tDdHJsLnJldGVudGlvblBlcmlvZC5hdmFpbGFibGVPcHRpb25zLCBmdW5jdGlvbiAocGVyaW9kKSB7XG4gICAgICAgICAgICBpZiAocGVyaW9kLnVuaXRzID4gbmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kLm1heFJldGVudGlvblBlcmlvZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBuZXdUYXNrQ3RybC5yZWZlcmVuY2VEcm9wRG93biA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIk5vbmVcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlJlZmVyZW5jZSBPbmx5XCIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwicmVmZXJuY2VPbmx5XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJCb3RoIC0gcmVmZXJlbmNlIGFuZCBlbnRpdGllc1wiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcImJvdGhcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSAxO1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhID0ge1xuICAgICAgICAgICAgZ2xvYmFsczogW10sXG4gICAgICAgICAgICByZWZlcmVuY2U6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgbmV3VGFza0N0cmwudmVyc2lvbkZvckxvYWRUbyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnZlcnNpb25Gb3JMb2FkRnJvbSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnZlcnNpb25Gb3JMb2FkRnJvbS5zZXREYXRlKG5ld1Rhc2tDdHJsLnZlcnNpb25Gb3JMb2FkRnJvbS5nZXREYXRlKCkgLSAzMCk7XG5cbiAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnJldGVudGlvblBlcmlvZCAmJiBuZXdUYXNrQ3RybC5yZXRlbnRpb25QZXJpb2QuZGVmYXVsdFBlcmlvZCAmJlxuICAgICAgICAgICAgbmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kLmRlZmF1bHRQZXJpb2QudW5pdCkge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRSZXRpbnRpb24gPSBfLmZpbmQobmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kLmF2YWlsYWJsZU9wdGlvbnMsIHtuYW1lOiBuZXdUYXNrQ3RybC5yZXRlbnRpb25QZXJpb2QuZGVmYXVsdFBlcmlvZC51bml0fSk7XG4gICAgICAgICAgICBpZiAoZGVmYXVsdFJldGludGlvbikge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJldGVudGlvbl9wZXJpb2RfdHlwZSA9IGRlZmF1bHRSZXRpbnRpb247XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEucmV0ZW50aW9uX3BlcmlvZF90eXBlID0gbmV3VGFza0N0cmwucmV0ZW50aW9uX3BlcmlvZF90eXBlLm5hbWU7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEucmV0ZW50aW9uX3BlcmlvZF92YWx1ZSA9IG5ld1Rhc2tDdHJsLnJldGVudGlvblBlcmlvZC5kZWZhdWx0UGVyaW9kLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kVHlwZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5yZXRlbnRpb25fcGVyaW9kX3R5cGUgPSBuZXdUYXNrQ3RybC5yZXRlbnRpb25fcGVyaW9kX3R5cGUubmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9ICdMT0FEJztcblxuICAgICAgICBuZXdUYXNrQ3RybC5wYXJhbSA9IHt9O1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzID0ge307XG5cbiAgICAgICAgbmV3VGFza0N0cmwuc2VsZWN0RmllbGRUeXBlID0gJ2dpdmVuJztcblxuICAgICAgICBuZXdUYXNrQ3RybC50YXNrVGl0bGVQYXR0ZXJuID0gL14oKD8hW18sLiwjLDssJSw/LC8sXFxcXCxbLFxcXV0pLikqJC87XG5cbiAgICAgICAgbmV3VGFza0N0cmwuZW50aXRpZXNQYXR0ZXJuID0gbmV3IFJlZ0V4cChcIl4oKFxcXFx3fC0pKyg/OiwoXFxcXHd8LSkrKXswLH0pPyRcIik7XG4gICAgICAgIG5ld1Rhc2tDdHJsLmV4Y3VsdGlvblBhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXigoXFxcXHd8LSkrKD86LChcXFxcd3wtKSspezAsfSk/JFwiKTtcbiAgICAgICAgbmV3VGFza0N0cmwuc3ludGhldGljUGF0dGVybiA9IFwiXlthLXpBLVowLTkuXy1dKyRcIjtcblxuICAgICAgICBuZXdUYXNrQ3RybC51cGRhdGVFbnRpdGllc1BhdHRlcm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEubnVtYmVyX29mX2VudGl0aWVzX3RvX2NvcHkpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5lbnRpdGllc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXigoXFxcXHd8LSkrKD86LChcXFxcd3wtKSspe1wiICsgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLm51bWJlcl9vZl9lbnRpdGllc190b19jb3B5IC0gMSkgKyBcIn0pPyRcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdXNlclJvbGUgPSBBdXRoU2VydmljZS5nZXRSb2xlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXJSb2xlLnR5cGUpO1xuICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZVR5cGUgPSB1c2VyUm9sZS50eXBlO1xuICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZSA9IHt9O1xuICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JhbmRvbV9lbnRpdHlfc2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9jcmVhdGlvbl9vZl9zeW50aGV0aWNfZGF0YSA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfcmVmcmVzaF9yZWZlcmVuY2VfZGF0YSA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfcmVxdWVzdF9vZl9mcmVzaF9kYXRhID0gdHJ1ZTtcbiAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9kZWxldGVfYmVmb3JlX2xvYWQgPSB0cnVlO1xuICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3Rhc2tfc2NoZWR1bGluZyA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfcmVwbGFjZV9zZXF1ZW5jZXMgPSB0cnVlO1xuICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZSA9IHt9O1xuICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZS5hbGxvd2VkX3JhbmRvbV9lbnRpdHlfc2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgbmV3VGFza0N0cmwuc291cmNlVXNlclJvbGUuYWxsb3dlZF9jcmVhdGlvbl9vZl9zeW50aGV0aWNfZGF0YSA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlLmFsbG93ZWRfcmVmcmVzaF9yZWZlcmVuY2VfZGF0YSA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlLmFsbG93ZWRfcmVxdWVzdF9vZl9mcmVzaF9kYXRhID0gdHJ1ZTtcbiAgICAgICAgbmV3VGFza0N0cmwuc291cmNlVXNlclJvbGUuYWxsb3dlZF9kZWxldGVfYmVmb3JlX2xvYWQgPSB0cnVlO1xuICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZS5hbGxvd2VkX3Rhc2tfc2NoZWR1bGluZyA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlLmFsbG93ZWRfcmVwbGFjZV9zZXF1ZW5jZXMgPSB0cnVlO1xuICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VFbnZPd25lciA9IHRydWU7XG4gICAgICAgIG5ld1Rhc2tDdHJsLnRhcmdldEVudk93bmVyID0gdHJ1ZTtcblxuICAgICAgICBURE1TZXJ2aWNlLmdldFRpbWVab25lKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50aW1lWm9uZU1lc3NhZ2UgPSAnVGFzayBleGVjdXRpb24gdGltZSB3aWxsIGJlIGJhc2VkIG9uICcgKyByZXNwb25zZS5yZXN1bHQuY3VycmVudF9zZXR0aW5nICsgJyB0aW1lIHpvbmUnXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRpbWVab25lTWVzc2FnZSA9ICdUYXNrIGV4ZWN1dGlvbiB0aW1lIHdpbGwgYmUgYmFzZWQgb24gREIgdGltZSB6b25lJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodXNlclJvbGUudHlwZSA9PSAnYWRtaW4nKSB7XG4gICAgICAgICAgICBURE1TZXJ2aWNlLmdldEVudmlyb25tZW50cygpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5hbGxFbnZpcm9ubWVudHMgPSBfLmZpbHRlcihhbmd1bGFyLmNvcHkocmVzcG9uc2UucmVzdWx0KSwgZnVuY3Rpb24gKGVudikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudi5hbGxvd193cml0ZSAmJiBlbnYuZW52aXJvbm1lbnRfc3RhdHVzID09PSAnQWN0aXZlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuYWxsU291cmNlRW52aXJvbm1lbnRzID0gXy5maWx0ZXIoYW5ndWxhci5jb3B5KHJlc3BvbnNlLnJlc3VsdCksIGZ1bmN0aW9uIChlbnYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnYuYWxsb3dfcmVhZCAmJiBlbnYuZW52aXJvbm1lbnRfc3RhdHVzID09PSAnQWN0aXZlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJGYWlsZCB0byBnZXQgRW52aXJvbm1lbnRzIGZvciB1c2VyIFwiICsgQXV0aFNlcnZpY2UuZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBURE1TZXJ2aWNlLmdldEVudmlyb25tZW50c0ZvclVzZXIoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuYWxsRW52aXJvbm1lbnRzID0gXy5maWx0ZXIoYW5ndWxhci5jb3B5KHJlc3BvbnNlLnJlc3VsdCksIGZ1bmN0aW9uIChlbnYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnYuYWxsb3dfd3JpdGUgJiYgZW52LmVudmlyb25tZW50X3N0YXR1cyA9PT0gJ0FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmFsbFNvdXJjZUVudmlyb25tZW50cyA9IF8uZmlsdGVyKGFuZ3VsYXIuY29weShyZXNwb25zZS5yZXN1bHQpLCBmdW5jdGlvbiAoZW52KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW52LmFsbG93X3JlYWQgJiYgZW52LmVudmlyb25tZW50X3N0YXR1cyA9PT0gJ0FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmFsbFNvdXJjZUVudmlyb25tZW50cyA9IF8udW5pcXVlKG5ld1Rhc2tDdHJsLmFsbFNvdXJjZUVudmlyb25tZW50cywgJ2Vudmlyb25tZW50X25hbWUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJGYWlsZCB0byBnZXQgVGFyZ2V0IEVudmlyb25tZW50cyBmb3IgdXNlciBcIiArIEF1dGhTZXJ2aWNlLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3VGFza0N0cmwuZW50aXRpZXNMaXN0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLmVudGl0aWVzTGlzdENoYW5nZVRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwobmV3VGFza0N0cmwuZW50aXRpZXNMaXN0Q2hhbmdlVGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJyAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCAmJiAhbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmVudGl0aWVzTGlzdENoYW5nZVRpbWVvdXQgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmdldFZlcnNpb25zRm9yTG9hZCgpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnJlZmVyZW5jZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZlcmVuY2UgPT0gJ3JlZmVybmNlT25seScpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RBbGxFbnRpdGVzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbmV3VGFza0N0cmwudGFza01vZGVDaGFuZ2UgPSBmdW5jdGlvbiAodGFza190eXBlKSB7XG5cbiAgICAgICAgICAgIGxldCBjbGVhck51bWJlck9mRW50aXRpZXNUb0NvcHkgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLm51bWJlcl9vZl9lbnRpdGllc190b19jb3B5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xlYXJOdW1iZXJPZkVudGl0aWVzVG9Db3B5KCk7XG5cbiAgICAgICAgICAgIGlmICh0YXNrX3R5cGUpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfaWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zb3VyY2VfZW52X25hbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLm1heFRvQ29weSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQgJiYgbmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJykge1xuICAgICAgICAgICAgICAgIC8vbmV3VGFza0N0cmwuZ2V0QWxsTG9naWNhbFVuaXRzRm9yRW52KG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZCwgbmV3VGFza0N0cmwudGFza0RhdGEuZW52aXJvbm1lbnRfaWQpO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cyA9IFtdO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5iZV9pZCA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSAnRVhUUkFDVCcpIHtcbiAgICAgICAgICAgICAgICAvL25ld1Rhc2tDdHJsLmdldEFsbExvZ2ljYWxVbml0c0ZvckVudihuZXdUYXNrQ3RybC50YXNrRGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfaWQsIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZCk7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubG9naWNhbFVuaXRzID0gW107XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubG9naWNhbFVuaXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGFza190eXBlICYmICFuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5yZXRlbnRpb25fcGVyaW9kX3ZhbHVlID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kICYmICFuZXdUYXNrQ3RybC50YXNrRGF0YS5yZXRlbnRpb25fcGVyaW9kX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5yZXRlbnRpb25QZXJpb2QgJiYgbmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kLmRlZmF1bHRQZXJpb2QgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJldGVudGlvblBlcmlvZC5kZWZhdWx0UGVyaW9kLnVuaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0UmV0aW50aW9uID0gXy5maW5kKG5ld1Rhc2tDdHJsLnJldGVudGlvblBlcmlvZC5hdmFpbGFibGVPcHRpb25zLCB7bmFtZTogbmV3VGFza0N0cmwucmV0ZW50aW9uUGVyaW9kLmRlZmF1bHRQZXJpb2QudW5pdH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRSZXRpbnRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXRlbnRpb25fcGVyaW9kX3R5cGUgPSBkZWZhdWx0UmV0aW50aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJldGVudGlvbl9wZXJpb2RfdHlwZSA9IG5ld1Rhc2tDdHJsLnJldGVudGlvbl9wZXJpb2RfdHlwZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJldGVudGlvbl9wZXJpb2RfdmFsdWUgPSBuZXdUYXNrQ3RybC5yZXRlbnRpb25QZXJpb2QuZGVmYXVsdFBlcmlvZC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnNlbGVjdEZpZWxkVHlwZSA9IFwiZ2l2ZW5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5ld1Rhc2tDdHJsLmdldEFsbExvZ2ljYWxVbml0c0ZvckVudiA9IGZ1bmN0aW9uIChzb3VyY2VfZW52aXJvbm1lbnRfaWQsIGVudmlyb25tZW50X2lkKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlX2Vudmlyb25tZW50X2lkICYmIGVudmlyb25tZW50X2lkKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuYWxsU2luZ2xlTG9naWNhbFVuaXRzID0gW107XG4gICAgICAgICAgICAgICAgVERNU2VydmljZS5nZXRHZW5lcmljQVBJKCdzb3VyY2VlbnZpZC8nICsgc291cmNlX2Vudmlyb25tZW50X2lkICtcbiAgICAgICAgICAgICAgICAgICAgJy90YXJnZXRlbmRpZC8nICsgZW52aXJvbm1lbnRfaWQgKyAnL2xvZ2ljYWxVbml0cycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmFsbFNpbmdsZUxvZ2ljYWxVbml0cyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIkZhaWxkIHRvIGdldCBMb2dpY2FsIHVuaXRzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gbmV3VGFza0N0cmwuZ2V0RW52SWQgPSAoKSA9PiBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0xPQUQnID8gbmV3VGFza0N0cmwudGFza0RhdGEuZW52aXJvbm1lbnRfaWQgOiBuZXdUYXNrQ3RybC50YXNrRGF0YS5zb3VyY2VfZW52aXJvbm1lbnRfaWQ7XG5cbiAgICAgICAgbmV3VGFza0N0cmwuc291cmNlRW52aXJvbm1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAoZ2V0Um9sZXMpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFbnYgPSBfLmZpbmQobmV3VGFza0N0cmwuYWxsU291cmNlRW52aXJvbm1lbnRzLCB7ZW52aXJvbm1lbnRfaWQ6IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZH0pO1xuICAgICAgICAgICAgaWYgKHNvdXJjZUVudikge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZfbmFtZSA9IHNvdXJjZUVudi5lbnZpcm9ubWVudF9uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdldFJvbGVzKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZW52aXJvbm1lbnRDaGFuZ2UobmV3VGFza0N0cmwudGFza0RhdGEuc291cmNlX2Vudmlyb25tZW50X2lkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5ld1Rhc2tDdHJsLmNoZWNrUmVmZXJlbmNlSWZBbGxvd2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCghbmV3VGFza0N0cmwudXNlclJvbGUgfHwgIW5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfcmVmcmVzaF9yZWZlcmVuY2VfZGF0YSkgJiYgXG4gICAgICAgICAgICAgICAgKCFuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZSB8fCAhbmV3VGFza0N0cmwuc291cmNlVXNlclJvbGUuYWxsb3dlZF9yZWZyZXNoX3JlZmVyZW5jZV9kYXRhKSkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuZXdUYXNrQ3RybC5lbnZpcm9ubWVudENoYW5nZSA9IGZ1bmN0aW9uIChlbnZpcm9ubWVudF9pZCxzb3VyY2UpIHtcblxuICAgICAgICAgICAgaWYgKHVzZXJSb2xlLnR5cGUgPT0gJ2FkbWluJykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlID0ge307XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9yYW5kb21fZW50aXR5X3NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9jcmVhdGlvbl9vZl9zeW50aGV0aWNfZGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9yZWZyZXNoX3JlZmVyZW5jZV9kYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcXVlc3Rfb2ZfZnJlc2hfZGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9kZWxldGVfYmVmb3JlX2xvYWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfdGFza19zY2hlZHVsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcGxhY2Vfc2VxdWVuY2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgVERNU2VydmljZS5nZXRFbnZpcm9ubWVudE93bmVycyhlbnZpcm9ubWVudF9pZCB8fCBuZXdUYXNrQ3RybC50YXNrRGF0YS5lbnZpcm9ubWVudF9pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG93bmVyRm91bmQgPSBfLmZpbmQocmVzcG9uc2UucmVzdWx0LCB7dXNlcl9pZDogQXV0aFNlcnZpY2UuZ2V0VXNlcklkKCl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3duZXJGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aSA8IG5ld1Rhc2tDdHJsLnVzZXJGYWJyaWNSb2xlcy5sZW5ndGggO2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lckZvdW5kID0gXy5maW5kKHJlc3BvbnNlLnJlc3VsdCx7dXNlcl90eXBlOiAnR1JPVVAnLCB1c2VyX2lkOiBuZXdUYXNrQ3RybC51c2VyRmFicmljUm9sZXNbaV19KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG93bmVyRm91bmQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3duZXJGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9yYW5kb21fZW50aXR5X3NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9jcmVhdGlvbl9vZl9zeW50aGV0aWNfZGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9yZWZyZXNoX3JlZmVyZW5jZV9kYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcXVlc3Rfb2ZfZnJlc2hfZGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXNlclJvbGUuYWxsb3dlZF9kZWxldGVfYmVmb3JlX2xvYWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfdGFza19zY2hlZHVsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcGxhY2Vfc2VxdWVuY2VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW52aXJvbm1lbnRfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc291cmNlRW52T3duZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhcmdldEVudk93bmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnZpcm9ubWVudF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VFbnZPd25lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhcmdldEVudk93bmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0Um9sZUZvclVzZXJJbkVudihlbnZpcm9ubWVudF9pZCB8fCBuZXdUYXNrQ3RybC50YXNrRGF0YS5lbnZpcm9ubWVudF9pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbnZpcm9ubWVudF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnVzZXJSb2xlID0gcmVzcG9uc2UucmVzdWx0LnVzZXJSb2xlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZSA9IHJlc3BvbnNlLnJlc3VsdC51c2VyUm9sZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0xPQUQnICYmIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfZW50aXR5X3ZlcnNpb25pbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZS5hbGxvd2VkX2VudGl0eV92ZXJzaW9uaW5nKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0VYVFJBQ1QnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlLmFsbG93ZWRfZW50aXR5X3ZlcnNpb25pbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuYWxsb3dlZF9lbnRpdHlfdmVyc2lvbmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmFsbG93ZWRfZW50aXR5X3ZlcnNpb25pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5jaGVja1JlZmVyZW5jZUlmQWxsb3dlZCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWluUmVhZCA9IHJlc3BvbnNlLnJlc3VsdC5taW5SZWFkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1pbldyaXRlID0gcmVzcG9uc2UucmVzdWx0Lm1pbldyaXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pblJlYWQgPiAtMSB8fCBtaW5Xcml0ZSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluV3JpdGUgPSBwYXJzZUludChtaW5Xcml0ZSB8fCBcIjBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluUmVhZCA9IHBhcnNlSW50KG1pblJlYWQgfHwgXCIwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnZpcm9ubWVudF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zb3VyY2VNYXhUb0NvcHkgPSBtaW5SZWFkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwubWF4VG9Db3B5ID4gbWluUmVhZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubWF4VG9Db3B5ID0gbWluUmVhZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbmV3VGFza0N0cmwubWF4VG9Db3B5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5tYXhUb0NvcHkgPSBtaW5SZWFkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFyZ2V0TWF4VG9Db3B5ID0gbWluV3JpdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5tYXhUb0NvcHkgPiBtaW5Xcml0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubWF4VG9Db3B5ID0gbWluV3JpdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW5ld1Rhc2tDdHJsLm1heFRvQ29weSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubWF4VG9Db3B5ID0gbWluV3JpdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJUYXNrICMgXCIgKyBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX2lkLCBcIkZhaWxkIHRvIGdldCBSb2xlIGZvciB1c2VyIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiRW52aXJvbm1lbnQgIyBcIiArIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkLCBcImZhaWxlZCB0byBnZXQgb3duZXJzIDogXCIgKyByZXNwb25zZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCghc291cmNlIHx8IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PT0gJ0VYVFJBQ1QnICkgJiYgKGVudmlyb25tZW50X2lkIHx8IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkKSkge1xuICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0QnVzaW5lc3NFbnRpdGllc0ZvckVudlByb2R1Y3RzKGVudmlyb25tZW50X2lkIHx8IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5idXNpbmVzc0VudGl0aWVzID0gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiVGFzayAjIFwiICsgbmV3VGFza0N0cmwudGFza0RhdGEudGFza19pZCwgXCJGYWlsZCB0byBnZXQgQnVzaW5lc3MgRW50aXRpZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbmV3VGFza0N0cmwubG9naWNhbFVuaXRzID0gW107XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC5hbGxMb2dpY2FsVW5pdHMgID0gW107XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC5wcm9kdWN0cyA9IFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnVwZGF0ZVBhcmFtcyA9IGNiID0+IHtcbiAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgnYnVzaW5lc3NlbnRpdHkvJyArIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkICsgJy9zb3VyY2VFbnYvJyArIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZfbmFtZSArICcvcGFyYW1ldGVycycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5wYXJhbWV0ZXJzID0gcmVzcG9uc2UucmVzdWx0O1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbWV0ZXJzS2V5cyA9IE9iamVjdC5rZXlzKG5ld1Rhc2tDdHJsLnBhcmFtZXRlcnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaG9zZW5MVXMgPSBfLm1hcChuZXdUYXNrQ3RybC5sb2dpY2FsVW5pdHMsZnVuY3Rpb24obHUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGx1Lmx1X25hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtZXRlcnNLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hvc2VuTFVzLmluZGV4T2YocGFyYW1ldGVyc0tleXNbaV0uc3BsaXQoXCIuXCIpWzBdLnRvTG93ZXJDYXNlKCkpIDwgMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld1Rhc2tDdHJsLnBhcmFtZXRlcnNbcGFyYW1ldGVyc0tleXNbaV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnBhcmFtZXRlcnMgPSBfLm1hcChuZXdUYXNrQ3RybC5wYXJhbWV0ZXJzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLlBBUkFNX1RZUEUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlLlBBUkFNX1RZUEU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtX25hbWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5QQVJBTV9OQU1FLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtX3R5cGU6IHZhbHVlLlBBUkFNX1RZUEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRfdmFsdWVzOiB2YWx1ZVsnVkFMSURfVkFMVUVTJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluX3ZhbHVlOiB2YWx1ZS5QQVJBTV9UWVBFID09ICdudW1iZXInID8gcGFyc2VGbG9hdCh2YWx1ZVsnTUlOX1ZBTFVFJ10pIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfdmFsdWU6IHZhbHVlLlBBUkFNX1RZUEUgPT0gJ251bWJlcicgPyBwYXJzZUZsb2F0KHZhbHVlWydNQVhfVkFMVUUnXSkgOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxMTExKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5hcHBseSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJCdXNpbmVzcyBlbnRpdHkgIyBcIiArIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkLCBcIkZhaWxlZCB0byBnZXQgYnVzaW5lc3MgZW50aXR5IHBhcmFtZXRlcnNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbmV3VGFza0N0cmwuYnVzaW5lc3NFbnRpdHlDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGlvbl9wYXJhbV92YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5wYXJhbWV0ZXJzID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwuZmlsdGVyLmdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmZpbHRlci5ncm91cC5ydWxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiZSA9IF8uZmluZChuZXdUYXNrQ3RybC5idXNpbmVzc0VudGl0aWVzLCB7YmVfaWQ6IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkfSk7XG4gICAgICAgICAgICBpZiAoYmUpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5iZV9uYW1lID0gYmUuYmVfbmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVudmlyb25tZW50SWQgPSBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT09ICdFWFRSQUNUJyA/IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZCA6IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkO1xuICAgICAgICAgICAgaWYgKGVudmlyb25tZW50SWQgJiYgbmV3VGFza0N0cmwudGFza0RhdGEuYmVfaWQpIHtcbiAgICAgICAgICAgICAgICBURE1TZXJ2aWNlLmdldExvZ2ljYWxVbml0c0ZvckJ1c2luZXNzRW50aXR5QW5kRW52KG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkLCBlbnZpcm9ubWVudElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5sb2dpY2FsVW5pdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmFsbExvZ2ljYWxVbml0cyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3VGFza0N0cmwuYWxsTG9naWNhbFVuaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubG9naWNhbFVuaXRzLnB1c2gobmV3VGFza0N0cmwuYWxsTG9naWNhbFVuaXRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cyA9IF8ubWFwKG5ld1Rhc2tDdHJsLmFsbExvZ2ljYWxVbml0cywnbHVfaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIkJ1c2luZXNzIGVudGl0eSAjIFwiICsgbmV3VGFza0N0cmwudGFza0RhdGEuYmVfaWQsIFwiRmFpbGVkIHRvIGdldCBwcm9kdWN0c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZfbmFtZSkge1xuICAgICAgICAgICAgICAgIC8vICAgICBuZXdUYXNrQ3RybC51cGRhdGVQYXJhbXMoKTtcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5iZV9pZCkge1xuICAgICAgICAgICAgICAgIFRETVNlcnZpY2UuZ2V0QkVQb3N0RXhlY3V0aW9uUHJvY2VzcyhuZXdUYXNrQ3RybC50YXNrRGF0YS5iZV9pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucG9zdEV4ZWN1dGlvblByb2Nlc3NlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuYWxsUG9zdEV4ZWN1dGlvblByb2Nlc3MgPSByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5hbGxQb3N0RXhlY3V0aW9uUHJvY2Vzc0lkcyA9IF8ubWFwKHJlc3BvbnNlLnJlc3VsdCwncHJvY2Vzc19pZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucG9zdEV4ZWN1dGlvblByb2Nlc3NlcyA9IG5ld1Rhc2tDdHJsLmFsbFBvc3RFeGVjdXRpb25Qcm9jZXNzSWRzO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiQnVzaW5lc3MgZW50aXR5ICMgXCIgKyBuZXdUYXNrQ3RybC50YXNrRGF0YS5iZV9pZCwgXCJGYWlsZWQgdG8gZ2V0IFBvc3QgRXhlY3V0aW9uIFByb2Nlc3Nlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnNlbGVjdFNjaGVkdWxlID0gJ2ltbWVkaWF0ZSc7XG5cbiAgICAgICAgbmV3VGFza0N0cmwuYWRkVGFzayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5jcmVhdGVUYXNrSW5Qcm9ncmVzcyA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VGFza0N0cmwuY3JlYXRlVGFza0luUHJvZ3Jlc3MgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdEFsbEVudGl0ZXMgJiYgbmV3VGFza0N0cmwudGFza0RhdGEucmVmZXJlbmNlICE9PSAncmVmZXJuY2VPbmx5Jykge1xuICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5zZWxlY3RGaWVsZFR5cGUgPT0gJ2dpdmVuJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMgJiYgbmV3VGFza0N0cmwudGFza0RhdGEuZW50aXR5X2V4Y2x1c2lvbl9saXN0ID09IG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmVycm9yTGlzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmNyZWF0ZVRhc2tJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0aW9uX21ldGhvZCA9ICdMJztcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0aW9uX3BhcmFtX3ZhbHVlID0gbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMuZW50aXRpZXNfbGlzdDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLnNlbGVjdEZpZWxkVHlwZSA9PSAncmFuZG9tJykge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3Rpb25fbWV0aG9kID0gJ1InO1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3Rpb25fcGFyYW1fdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VGFza0N0cmwuc2VsZWN0RmllbGRUeXBlID09ICdzeW50aGV0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGlvbl9tZXRob2QgPSAnUyc7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGlvbl9wYXJhbV92YWx1ZSA9IG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnN5bnRoZXRpYztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnF1ZXJ5X3BhcmFtZXRlcnMgfHwgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMucXVlcnlfcGFyYW1ldGVycyA9PSAnKCknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5wYXJhbWV0ZXJzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5jcmVhdGVUYXNrSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnBhcmFtZXRlcnNSYW5kb20gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0aW9uX21ldGhvZCA9ICdQUic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3Rpb25fbWV0aG9kID0gJ1AnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGlvbl9wYXJhbV92YWx1ZSA9IG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnF1ZXJ5X3BhcmFtZXRlcnM7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnBhcmFtZXRlcnMgPSBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5wYXJhbWV0ZXJzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnNlbGVjdFNjaGVkdWxlID09ICdpbW1lZGlhdGUnKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2NoZWR1bGVyID0gbmV3VGFza0N0cmwuc2VsZWN0U2NoZWR1bGU7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2NoZWR1bGluZ19lbmRfZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNjaGVkdWxlciA9IG5ld1Rhc2tDdHJsLnNjaGVkdWxlRGF0YTtcbiAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwuc2NoZWR1bGVFbmRCeSAhPT0gXCJlbmRCeVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNjaGVkdWxpbmdfZW5kX2RhdGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2NoZWR1bGluZ19lbmRfZGF0ZS5ob3VycygxMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF8uZmluZChuZXdUYXNrQ3RybC50YXNrcywge3Rhc2tfdGl0bGU6IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdGl0bGUsIHRhc2tfc3RhdHVzOiAnQWN0aXZlJ30pKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuY3JlYXRlVGFza0luUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RyLmVycm9yKFwiVGFzayAjIFwiICsgbmV3VGFza0N0cmwudGFza0RhdGEudGFza190aXRsZSArIFwiIEFscmVhZHkgRXhpc3RzXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJyAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLm9wZXJhdGlvbk1vZGUgPSAnZGVsZXRlX2FuZF9sb2FkX2VudGl0eSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5vcGVyYXRpb25Nb2RlID09ICdkZWxldGVfYW5kX2xvYWRfZW50aXR5Jykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlcGxhY2Vfc2VxdWVuY2VzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEubG9hZF9lbnRpdHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmRlbGV0ZV9iZWZvcmVfbG9hZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLm9wZXJhdGlvbk1vZGUgPT0gJ2luc2VydF9lbnRpdHlfd2l0aG91dF9kZWxldGUnKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEubG9hZF9lbnRpdHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmRlbGV0ZV9iZWZvcmVfbG9hZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5vcGVyYXRpb25Nb2RlID09ICdkZWxldGVfd2l0aG91dF9sb2FkX2VudGl0eScpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5yZXBsYWNlX3NlcXVlbmNlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmxvYWRfZW50aXR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuZGVsZXRlX2JlZm9yZV9sb2FkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEubG9hZF9lbnRpdHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmRlbGV0ZV9iZWZvcmVfbG9hZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJyAmJiAhbmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQpe1xuXG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIGlmICghbmV3VGFza0N0cmwudGFza0RhdGEucmVxdWVzdF9vZl9mcmVzaF9kYXRhKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc3luY19tb2RlID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSAnTE9BRCcgJiYgbmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQgJiYgbmV3VGFza0N0cmwudGFza0RhdGEucmVmZXJlbmNlICE9PSBcInJlZmVybmNlT25seVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdUYXNrQ3RybC5zZWxlY3RlZFZlcnNpb25Ub0xvYWQgJiYgbmV3VGFza0N0cmwudGFza0RhdGEucmVmZXJlbmNlICE9PSBcInJlZmVybmNlT25seVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSAyO1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5jcmVhdGVUYXNrSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmVyc2lvblRvTG9hZCA9IF8uZmluZChuZXdUYXNrQ3RybC52ZXJzaW9uc0ZvckxvYWQsIHtmYWJyaWNfZXhlY3V0aW9uX2lkOiBuZXdUYXNrQ3RybC5zZWxlY3RlZFZlcnNpb25Ub0xvYWR9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVmVyc2lvblRvTG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0ZWRfdmVyc2lvbl90YXNrX25hbWUgPSBzZWxlY3RlZFZlcnNpb25Ub0xvYWQudmVyc2lvbl9uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnNpb25fZGF0ZXRpbWUgPSBuZXcgRGF0ZShzZWxlY3RlZFZlcnNpb25Ub0xvYWQudmVyc2lvbl9kYXRldGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxUaW1lWm9uZSA9IHZlcnNpb25fZGF0ZXRpbWUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25fZGF0ZXRpbWUgPSB2ZXJzaW9uX2RhdGV0aW1lLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGVkX3ZlcnNpb25fZGF0ZXRpbWUgPSBtb21lbnQodmVyc2lvbl9kYXRldGltZSkuZm9ybWF0KFwiWVlZWU1NRERISG1tc3NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RlZF92ZXJzaW9uX3Rhc2tfZXhlX2lkID0gc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkLnRhc2tfZXhlY3V0aW9uX2lkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJyAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCAmJlxuICAgICAgICAgICAgICAgIChuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZlcmVuY2UgPT0gXCJyZWZlcm5jZU9ubHlcIiB8fCBuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZlcmVuY2UgPT0gXCJib3RoXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZMb2FkVmVyc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IDY7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmNyZWF0ZVRhc2tJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkID0gXy5maW5kKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZkxvYWRWZXJzaW9ucywge3Rhc2tfZXhlY3V0aW9uX2lkOiBwYXJzZUludChuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RlZFJlZlZlcnNpb25Ub0xvYWQpfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFZlcnNpb25Ub0xvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGVkX3JlZl92ZXJzaW9uX3Rhc2tfbmFtZSA9IHNlbGVjdGVkVmVyc2lvblRvTG9hZC52ZXJzaW9uX25hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVyc2lvbl9kYXRldGltZSA9IG5ldyBEYXRlKHNlbGVjdGVkVmVyc2lvblRvTG9hZC52ZXJzaW9uX2RhdGV0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbFRpbWVab25lID0gdmVyc2lvbl9kYXRldGltZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl9kYXRldGltZSA9IHZlcnNpb25fZGF0ZXRpbWUuZ2V0VGltZSgpICsgbG9jYWxUaW1lWm9uZSAqIDYwMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0ZWRfcmVmX3ZlcnNpb25fZGF0ZXRpbWUgPSBtb21lbnQodmVyc2lvbl9kYXRldGltZSAtIG5ld1Rhc2tDdHJsLnRpbWVab25lT2Zmc2V0ICogNjAwMDApLmZvcm1hdChcIllZWVlNTURESEhtbXNzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0ZWRfcmVmX3ZlcnNpb25fdGFza19leGVfaWQgPSBzZWxlY3RlZFZlcnNpb25Ub0xvYWQudGFza19leGVjdXRpb25faWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0VYVFJBQ1QnKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEubG9hZF9lbnRpdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5lbnZpcm9ubWVudF9pZCA9IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZpcm9ubWVudF9pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdFWFRSQUNUJyAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCkgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJldGVudGlvbl9wZXJpb2RfdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgbmV3VGFza0N0cmwudGFza0RhdGEucmV0ZW50aW9uX3BlcmlvZF90eXBlO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdUYXNrQ3RybC50YXNrRGF0YS5yZXRlbnRpb25fcGVyaW9kX3ZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiAoIShuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0xPQUQnICYmICFuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCkpe1xuICAgICAgICAgICAgLy8gICAgIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cyA9IFtuZXdUYXNrQ3RybC5sb2dpY2FsVW5pdF07XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIGlmICghbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcyAmJiAhKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSAnTE9BRCcgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kKVxuICAgICAgICAgICAgICAgICYmIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSAhPT0gJ3JlZmVybmNlT25seScpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5udW1iZXJfb2ZfZW50aXRpZXNfdG9fY29weSA9IG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3Quc3BsaXQoXCIsXCIpLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmdsb2JhbHMgJiYgbmV3VGFza0N0cmwudGFza0RhdGEuZ2xvYmFscy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfZ2xvYmFscyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZkxpc3QgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZkxpc3QgJiYgbmV3VGFza0N0cmwudGFza0RhdGEucmVmTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEucmVmcmVzaF9yZWZlcmVuY2VfZGF0YSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdFWFRSQUNUJykge1xuICAgICAgICAgICAgICAgIGlmICghbmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQgJiYgbmV3VGFza0N0cmwudGFza0RhdGEucmVxdWVzdF9vZl9mcmVzaF9kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnN5bmNfbW9kZSA9ICdGT1JDRSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3VGFza0N0cmwudGFza0RhdGEuc3luY19tb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbmV3VGFza0N0cmwudGFza0RhdGEubG9naWNhbFVuaXRzID0gXy5tYXAobmV3VGFza0N0cmwubG9naWNhbFVuaXRzLGl0ID0+IHtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gICAgICAgICBcImx1X3BhcmVudF9uYW1lXCI6IGl0Lmx1X3BhcmVudF9uYW1lLFxuICAgICAgICAgICAgLy8gICAgICAgICBcImx1X25hbWVcIjogaXQubHVfbmFtZSxcbiAgICAgICAgICAgIC8vICAgICAgICAgXCJsdV9pZFwiOiBpdC5sdV9pZCwgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIC8vIGlmIChuZXdUYXNrQ3RybC5wb3N0RXhlY3V0aW9uUHJvY2Vzc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5wb3N0RXhlY3V0aW9uUHJvY2Vzc2VzID0gXy5tYXAoXy5maWx0ZXIobmV3VGFza0N0cmwuYWxsUG9zdEV4ZWN1dGlvblByb2Nlc3MsIHYgPT4gbmV3VGFza0N0cmwucG9zdEV4ZWN1dGlvblByb2Nlc3Nlcy5pbmRleE9mKHYucHJvY2Vzc19pZCkgPj0gMCksaXQgPT4ge1xuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgXCJwcm9jZXNzX2lkXCI6IGl0LnByb2Nlc3NfaWQsXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBcInByb2Nlc3NfbmFtZVwiOiBpdC5wcm9jZXNzX25hbWUsXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBcImV4ZWN1dGlvbl9vcmRlclwiOiBpdC5leGVjdXRpb25fb3JkZXIgICAgICAgIFxuICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5wb3N0RXhlY3V0aW9uUHJvY2Vzc2VzID0gW107XG4gICAgICAgICAgICAvLyB9XG5cblxuICAgICAgICAgICAgVERNU2VydmljZS5jcmVhdGVUYXNrKG5ld1Rhc2tDdHJsLnRhc2tEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gXCJTVUNDRVNTXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNyZWF0ZVRhc2tSZXN1bHQgPSByZXNwb25zZS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UucG9zdFRhc2tMb2dpY2FsVW5pdHMocmVzcG9uc2UucmVzdWx0LmlkLCBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3RpdGxlLCB7bG9naWNhbFVuaXRzOiBuZXdUYXNrQ3RybC5sb2dpY2FsVW5pdHN9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKFwiVGFzayAjIFwiICsgY3JlYXRlVGFza1Jlc3VsdC5pZCwgXCIgSXMgQ3JlYXRlZCBTdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIlRhc2sgIyBcIiArIGNyZWF0ZVRhc2tSZXN1bHQuaWQsIFwiIEZhaWxlZCB0byBVcGRhdGUgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndGFza3MnLCB7fSwge3JlbG9hZDogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5wb3N0RXhlY3V0aW9uUHJvY2Vzc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRETVNlcnZpY2UucG9zdFRhc2tQb3N0RXhlY3V0aW9uUHJvY2VzcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXN1bHQuaWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdGl0bGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwb3N0ZXhlY3V0aW9ucHJvY2Vzc2VzIDogXy5maWx0ZXIobmV3VGFza0N0cmwuYWxsUG9zdEV4ZWN1dGlvblByb2Nlc3MsIHYgPT4gbmV3VGFza0N0cmwucG9zdEV4ZWN1dGlvblByb2Nlc3Nlcy5pbmRleE9mKHYucHJvY2Vzc19pZCkgPj0gMCl9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgIT09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIlRhc2sgIyBcIiArIGNyZWF0ZVRhc2tSZXN1bHQuaWQsIFwiIEZhaWxlZCB0byBVcGRhdGUgUG9zdCBFeGVjdXRpb24gUHJvY2Vzc2VzOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJUYXNrICMgXCIgKyBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX2lkLCBcIlVuYWJsZSB0byBDcmVhdGUgOiBcIiArIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5jcmVhdGVUYXNrSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkYXRhID0gJ3tcImdyb3VwXCI6IHtcIm9wZXJhdG9yXCI6IFwiQU5EXCIsXCJydWxlc1wiOiBbXX19JztcblxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkU3ViUXVlcnkocnVsZSkge1xuICAgICAgICAgICAgdmFyIGZpZWxkID0gXCJcXFwiXCIgKyBydWxlLmZpZWxkICsgXCJcXFwiXCI7XG4gICAgICAgICAgICBsZXQgY29uZGl0aW9uID0gcnVsZS5jb25kaXRpb247XG4gICAgICAgICAgICB2YXIgZGF0YSA9IFwiJ1wiICsgcnVsZS5kYXRhICsgXCInXCI7XG4gICAgICAgICAgICBpZiAocnVsZS50eXBlID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBmaWVsZCA9IGZpZWxkICsgXCI6Om51bWVyaWNbXSBcIjtcbiAgICAgICAgICAgICAgICBkYXRhID0gcnVsZS5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bGUuY29uZGl0aW9uID09PSAnSXMgbnVsbCcgfHwgcnVsZS5jb25kaXRpb24gPT09ICdJcyBub3QgbnVsbCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIoIFwiICsgZmllbGQgKyBcIiBcIiArIGNvbmRpdGlvbiArIFwiIClcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiKCBcIiArIGRhdGEgKyBcIiBcIiArIGNvbmRpdGlvbiArIFwiIEFOWShcIiArIGZpZWxkICsgXCIpIClcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVkKGdyb3VwKSB7XG4gICAgICAgICAgICBpZiAoIWdyb3VwKSByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIGZvciAodmFyIHN0ciA9IFwiKFwiLCBpID0gMDsgaSA8IGdyb3VwLnJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLnJ1bGVzW2ldLmdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IGdyb3VwLnJ1bGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBjb21wdXRlZChncm91cC5ydWxlc1tpXS5ncm91cCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gY29tcHV0ZWQoZ3JvdXAucnVsZXNbaV0uZ3JvdXApICsgXCIgXCIgKyBncm91cC5ydWxlc1tpXS5ncm91cC5vcGVyYXRvciArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cC5ydWxlc1tpXS5kYXRhID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGdyb3VwLnJ1bGVzW2ldLmNvbmRpdGlvbiAhPSBcIklzIG51bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgZ3JvdXAucnVsZXNbaV0uY29uZGl0aW9uICE9IFwiSXMgbm90IG51bGxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cC5ydWxlc1tpXS50eXBlID09ICdyZWFsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwLnJ1bGVzW2ldLmRhdGEudG9Mb2NhbGVTdHJpbmcoKS5pbmRleE9mKCcuJykgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBncm91cC5ydWxlc1tpXS5kYXRhLnRvRml4ZWQoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBncm91cC5ydWxlc1tpXS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdyb3VwLnJ1bGVzW2ldLnR5cGUgPT0gJ2ludGVnZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gTWF0aC5mbG9vcihncm91cC5ydWxlc1tpXS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChncm91cC5ydWxlc1tpXS50eXBlID09ICdjb21ibycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncm91cC5ydWxlc1tpXS52YWxpZFZhbHVlcy5pbmRleE9mKGdyb3VwLnJ1bGVzW2ldLmRhdGEpIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGdyb3VwLnJ1bGVzW2ldLmNvbmRpdGlvbiAhPSBcIklzIG51bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGdyb3VwLnJ1bGVzW2ldLmNvbmRpdGlvbiAhPSBcIklzIG5vdCBudWxsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZ3JvdXAucnVsZXNbaV0uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBncm91cC5ydWxlc1tpXS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IGdyb3VwLnJ1bGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBidWlsZFN1YlF1ZXJ5KGdyb3VwLnJ1bGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBidWlsZFN1YlF1ZXJ5KGdyb3VwLnJ1bGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBcIiBcIiArIGdyb3VwLnJ1bGVzW2ldLm9wZXJhdG9yICsgXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyICsgXCIpXCI7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdUYXNrQ3RybC5maWx0ZXIgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBuZXdUYXNrQ3RybC5wYXJhbWV0ZXJzQ291bnQgPSAwO1xuICAgICAgICBuZXdUYXNrQ3RybC5wZXJ2aW91c1F1ZXJ5UGFyYW1zID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmdldEVudGl0ZXNDb3VudCA9IGZ1bmN0aW9uIChmb3JjZSkge1xuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnF1ZXJ5X3BhcmFtZXRlcnMgPT0gXCIoKVwiKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucGFyYW1ldGVyc0NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnF1ZXJ5X3BhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5wYXJhbWV0ZXJzQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZm9yY2UgJiYgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMucXVlcnlfcGFyYW1ldGVycyA9PT0gbmV3VGFza0N0cmwucGVydmlvdXNRdWVyeVBhcmFtcyl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VGFza0N0cmwucGFyYW1ldGVyc0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMucXVlcnlfcGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBzb3VyY2VfZW52X25hbWU6IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZfbmFtZSxcbiAgICAgICAgICAgICAgICBiZUlkOiBuZXdUYXNrQ3RybC50YXNrRGF0YS5iZV9pZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnBhcmFtZXRlcnNDb3VudCA9IFwiaW5wcm9ncmVzc1wiO1xuICAgICAgICAgICAgVERNU2VydmljZS5wb3N0R2VuZXJpY0FQSSgnYnVzaW5lc3NlbnRpdHkvJyArIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkICsgJy9zb3VyY2VFbnYvJyArIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZfbmFtZSArICcvYW5hbHlzaXNjb3VudCcsIHt3aGVyZTogbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMucXVlcnlfcGFyYW1ldGVyc30pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5wZXJ2aW91c1F1ZXJ5UGFyYW1zID0gbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMucXVlcnlfcGFyYW1ldGVycztcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucGFyYW1ldGVyc0NvdW50ID0gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnBhcmFtZXRlcnNDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbmV3VGFza0N0cmwuZmlsdGVyJywgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwuYW5hbHlzaXNDb3VudFRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwobmV3VGFza0N0cmwuYW5hbHlzaXNDb3VudFRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VGFza0N0cmwuYW5hbHlzaXNDb3VudFRpbWVvdXQgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja1J1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tHcm91cChydWxlLmdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuY29uZGl0aW9uID09PSBcIlwiIHx8IHJ1bGUuZGF0YSA9PT0gbnVsbCB8fCBydWxlLmZpZWxkID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja0dyb3VwID0gZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXAub3BlcmF0b3IgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAucnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tSdWxlKGdyb3VwLnJ1bGVzW2ldKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrR3JvdXAobmV3VmFsdWUuZ3JvdXApID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnBhcmFtZXRlcnMgPSBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGNvbXB1dGVkKG5ld1ZhbHVlLmdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLnF1ZXJ5X3BhcmFtZXRlcnMgPSBxdWVyeS5xdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0RW50aXRlc0NvdW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgbmV3VGFza0N0cmwuY2hlY2tNaWdyYXRlU3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0IHx8ICFuZXdUYXNrQ3RybC5zZWxlY3RlZFZlcnNpb25Ub0xvYWQpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0gPSAkc2NvcGUucmVxdWVzdGVkRW50aXRpZXNGb3JtO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkID0gXy5maW5kKG5ld1Rhc2tDdHJsLnZlcnNpb25zRm9yTG9hZCwge2ZhYnJpY19leGVjdXRpb25faWQ6IG5ld1Rhc2tDdHJsLnNlbGVjdGVkVmVyc2lvblRvTG9hZH0pO1xuICAgICAgICAgICAgdmFyIHRhc2tFeGVjdXRpb25JZCA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgbHVOYW1lcyA9IFwiXCI7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkKSB7XG4gICAgICAgICAgICAgICAgdGFza0V4ZWN1dGlvbklkID0gc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkLnRhc2tfZXhlY3V0aW9uX2lkO1xuICAgICAgICAgICAgICAgIGx1TmFtZXMgPSBzZWxlY3RlZFZlcnNpb25Ub0xvYWQubHVfbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2ZXJzaW9uX2RhdGV0aW1lID0gbmV3IERhdGUoc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkLnZlcnNpb25fZGF0ZXRpbWUpO1xuICAgICAgICAgICAgdmFyIGxvY2FsVGltZVpvbmUgPSB2ZXJzaW9uX2RhdGV0aW1lLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gICAgICAgICAgICB2ZXJzaW9uX2RhdGV0aW1lID0gdmVyc2lvbl9kYXRldGltZS5nZXRUaW1lKCkgKyBsb2NhbFRpbWVab25lICogNjAwMDA7XG4gICAgICAgICAgICBURE1TZXJ2aWNlLnBvc3RHZW5lcmljQVBJKCdjaGVja01pZ3JhdGVTdGF0dXNGb3JFbnRpdGllc0xpc3QnLCB7XG4gICAgICAgICAgICAgICAgZW50aXRsZXNMaXN0OiBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0LFxuICAgICAgICAgICAgICAgIHRhc2tFeGVjdXRpb25JZDogdGFza0V4ZWN1dGlvbklkLFxuICAgICAgICAgICAgICAgIGx1TGlzdDogbHVOYW1lcyxcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmFpbGVkRW50aXRpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHJlc3BvbnNlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdFtrZXldID09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZEVudGl0aWVzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbGVkRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiRW50aXRpZXMgXCIgKyBmYWlsZWRFbnRpdGllcyArIFwiIHdlcmUgbm90IG1pZ3JhdGVkIHN1Y2Nlc3NmdWxseSBpbnRvIHRoZSBURE0gc3RvcmFnZSBieSB0aGUgc2VsZWN0ZWQgdmVyc2lvbi4gUGxlYXNlIHJlbW92ZSB0aGVtIGZyb20gdGhlIEVudGl0aWVzIExpc3Qgb3Igc2VsZWN0IGFub3RoZXIgdmVyc2lvbiBcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllc05leHQoJHNjb3BlLnJlcXVlc3RlZEVudGl0aWVzRm9ybSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJGYWlsZWQgdG8gY2hlY2sgTWlncmF0ZSBTdGF0dXMgRm9yIEVudGl0ZXMgTGlzdFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbmV3VGFza0N0cmwuZ2V0U3RlcHNBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdGVwc0FycmF5ID0gW107XG4gICAgICAgICAgICBzdGVwc0FycmF5LnB1c2goMSk7XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEucmVmZXJlbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGVwc0FycmF5LnB1c2goNik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIShuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0VYVFJBQ1QnICYmIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdEFsbEVudGl0ZXMpICYmIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSAhPT0gJ3JlZmVybmNlT25seScpIHtcbiAgICAgICAgICAgICAgICBzdGVwc0FycmF5LnB1c2goMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza19nbG9iYWxzKSB7XG4gICAgICAgICAgICAgICAgc3RlcHNBcnJheS5wdXNoKDUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJyAmJiAhbmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQpIHx8XG4gICAgICAgICAgICAgICAgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSAnRVhUUkFDVCcgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kIFxuICAgICAgICAgICAgICAgICAgICAmJiAoKG5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlICYmIG5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlLmFsbG93ZWRfcmVxdWVzdF9vZl9mcmVzaF9kYXRhKSBcbiAgICAgICAgICAgICAgICAgICAgfHwgKG5ld1Rhc2tDdHJsLnVzZXJSb2xlICYmIG5ld1Rhc2tDdHJsLnVzZXJSb2xlLmFsbG93ZWRfcmVxdWVzdF9vZl9mcmVzaF9kYXRhKSkpKSAmJlxuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSAhPT0gJ3JlZmVybmNlT25seScpIHtcbiAgICAgICAgICAgICAgICBzdGVwc0FycmF5LnB1c2goMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGVwc0FycmF5LnB1c2goNCk7XG4gICAgICAgICAgICByZXR1cm4gc3RlcHNBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnN1Ym1pdEZvcm09ZnVuY3Rpb24oc3RlcCxuZXh0U3RlcCl7XG4gICAgICAgICAgICBjb25zdCBzdGVwcyA9IG5ld1Rhc2tDdHJsLmdldFN0ZXBzQXJyYXkoKTtcbiAgICAgICAgICAgIGlmIChzdGVwID09PSBuZXh0U3RlcCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0ZXBzLmluZGV4T2Yoc3RlcCkgPiBzdGVwcy5pbmRleE9mKG5leHRTdGVwKSl7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwub3BlblN0ZXAobmV4dFN0ZXApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaChzdGVwKXtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW5lcmFsRm9ybS4kc2V0U3VibWl0dGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmdlbmVyYWxOZXh0KCRzY29wZS5nZW5lcmFsRm9ybSxuZXh0U3RlcCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVxdWVzdGVkRW50aXRpZXNGb3JtLiRzZXRTdWJtaXR0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXNOZXh0KCRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0sIHVuZGVmaW5lZCwgbmV4dFN0ZXApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlcXVlc3RQYXJhbWV0ZXJzRm9ybS4kc2V0U3VibWl0dGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RQYXJhbWV0ZXJzTmV4dCgkc2NvcGUucmVxdWVzdFBhcmFtZXRlcnNGb3JtKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leGVjdXRpb25UaW1pbmdGb3JtLiRzZXRTdWJtaXR0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZXhlY3V0aW9uVGltaW5nRmluaXNoKCRzY29wZS5leGVjdXRpb25UaW1pbmdGb3JtKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLkFkZEdsb2JhbEZvcm0uJHNldFN1Ym1pdHRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5nbG9iYWxzTmV4dChuZXh0U3RlcCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuUmVmZXJlbmNlRm9ybS4kc2V0U3VibWl0dGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlZmVyZW5jZU5leHQobmV4dFN0ZXApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3VGFza0N0cmwub3BlblN0ZXAgPSBmdW5jdGlvbiAoc3RlcCwgdHlwZSkge1xuICAgICAgICAgICAgaWYgKCEobmV3VGFza0N0cmwudXNlclJvbGVUeXBlID09ICdhZG1pbicgfHwgbmV3VGFza0N0cmwuc291cmNlRW52T3duZXIgJiYgbmV3VGFza0N0cmwudGFyZ2V0RW52T3duZXIpKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnN0ZXAgPT0gMiAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0xPQUQnXG4gICAgICAgICAgICAgICAgJiYgbmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdEFsbEVudGl0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnYmFjaycgJiYgbmV3VGFza0N0cmwudGFza0RhdGEucmVmZXJlbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Rhc2tDdHJsLnN0ZXAgPSA2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdUYXNrQ3RybC5zdGVwID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuY2hlY2tNaWdyYXRlU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFycmF5U3RlcHMgPSBuZXdUYXNrQ3RybC5nZXRTdGVwc0FycmF5KCk7XG4gICAgICAgICAgICB2YXIgbmV4dFN0ZXAgPSBzdGVwO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGFycmF5U3RlcHMuaW5kZXhPZihuZXdUYXNrQ3RybC5zdGVwKTtcbiAgICAgICAgICAgIHZhciBuZXh0SW5kZXggPSBhcnJheVN0ZXBzLmluZGV4T2Yoc3RlcCk7XG4gICAgICAgICAgICBpZiAobmV4dEluZGV4IDwgY3VycmVudEluZGV4ICYmIG5leHRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXAgPSBhcnJheVN0ZXBzW25leHRJbmRleF07XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlID09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggPT0gYXJyYXlTdGVwcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhlcmUgaXMgbm8gbmV4dFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHRTdGVwID0gYXJyYXlTdGVwc1tjdXJyZW50SW5kZXggKyAxXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnYmFjaycpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGVyZSBpcyBubyBiYWNrXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXAgPSBhcnJheVN0ZXBzW2N1cnJlbnRJbmRleCAtIDFdO1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSBuZXh0U3RlcDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiAobmV3VGFza0N0cmwuc3RlcCA9PSA1KXtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gbmV3VGFza0N0cmwuc3RlcCA9IHN0ZXA7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBpZiAoYXJyYXlTdGVwcy5pbmRleE9mKHN0ZXApIDwgYXJyYXlTdGVwcy5pbmRleE9mKG5ld1Rhc2tDdHJsLnN0ZXApKSB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSAnTE9BRCcgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIG5ld1Rhc2tDdHJsLnN0ZXAgPSBzdGVwO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBlbHNlIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0VYVFJBQ1QnKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdEFsbEVudGl0ZXMgfHwgbmV3VGFza0N0cmwudGFza0RhdGEucmVmZXJlbmNlID09ICdyZWZlcm5jZU9ubHknKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHJldHVybiBuZXdUYXNrQ3RybC5zdGVwID0gMTtcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBpZiAobmV3VGFza0N0cmwuc3RlcCA9PSA0KXtcbiAgICAgICAgICAgIC8vICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfZ2xvYmFscyl7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gbmV3VGFza0N0cmwuc3RlcCA9IDU7XG4gICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIG5ld1Rhc2tDdHJsLnN0ZXAgPSAyO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBlbHNle1xuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gbmV3VGFza0N0cmwuc3RlcCA9IDE7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnN0ZXAgPT0gMSkge1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmdlbmVyYWxGb3JtLiR2YWxpZCl7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmdlbmVyYWxGb3JtID0gJHNjb3BlLmdlbmVyYWxGb3JtO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VuZXJhbEZvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5nZW5lcmFsTmV4dCgkc2NvcGUuZ2VuZXJhbEZvcm0sbmV4dFN0ZXApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VGFza0N0cmwuc3RlcCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUucmVxdWVzdGVkRW50aXRpZXNGb3JtLiR2YWxpZCl7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzRm9ybSA9ICRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm07XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllc05leHQoJHNjb3BlLnJlcXVlc3RlZEVudGl0aWVzRm9ybSwgZmFsc2UsIG5leHRTdGVwKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVxdWVzdGVkRW50aXRpZXNGb3JtLnN1Ym1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5zdGVwID09IDMgJiYgISRzY29wZS5yZXF1ZXN0UGFyYW1ldGVyc0Zvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucmVxdWVzdFBhcmFtZXRlcnNGb3JtID0gJHNjb3BlLnJlcXVlc3RQYXJhbWV0ZXJzRm9ybTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVxdWVzdFBhcmFtZXRlcnNGb3JtLnN1Ym1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5zdGVwID09IDQgJiYgISRzY29wZS5leGVjdXRpb25UaW1pbmdGb3JtLiR2YWxpZCkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmV4ZWN1dGlvblRpbWluZ0Zvcm0gPSAkc2NvcGUuZXhlY3V0aW9uVGltaW5nRm9ybTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXhlY3V0aW9uVGltaW5nRm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VGFza0N0cmwuc3RlcCA9PSA2KSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucmVmZXJlbmNlTmV4dChuZXh0U3RlcCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5zdGVwID09IDUpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5nbG9iYWxzTmV4dChuZXh0U3RlcCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwO1xuXG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwuc3RlcCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdlbmVyYWxGb3JtLnN1Ym1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLnN0ZXAgPT0gMikge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VGFza0N0cmwuc3RlcCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlcXVlc3RQYXJhbWV0ZXJzRm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5zdGVwID09IDQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXhlY3V0aW9uVGltaW5nRm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLmdlbmVyYWxOZXh0ID0gZnVuY3Rpb24gKGZvcm0sIG5leHRTdGVwKSB7XG4gICAgICAgICAgICAvLyBnYXAgY2FuIGhhcHBlbiBpbiBhdCBsZWFzdCAyIExVc1xuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLmlzRmx1eE1vZGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2VuZXJhbEZvcm0udGFza0xvZ2ljYWxVbml0LiRzZXRWYWxpZGl0eSgnZ2FwJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdlbmVyYWxGb3JtLnRhc2tMb2dpY2FsVW5pdC4kc2V0VmFsaWRpdHkoJ21pc3NpbmdQYXJlbnQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gbG9naWNhbCB1bml0IG5hbWUgaGFzIGJlZW4gc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbHVfbmFtZVxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGxldCBpc1NlbGVjdGVkTFUgPSAobHVfbmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5maW5kKG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cywge2x1X25hbWU6IGx1X25hbWV9KVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tHYXAgPSBsdSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsdS5sdV9wYXJlbnRfbmFtZSAmJiAhaXNTZWxlY3RlZExVKGx1Lmx1X3BhcmVudF9uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBJZiBhIGxvZ2ljYWwgdW5pdCBoYXMgYSBwYXJlbnQgYW5kIGl0IGhhcyBub3QgYmVpbmcgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIHRoZW4gdGhpcyBpcyB0aGUgb25seSBjaGFuY2UgdGhhdCB3ZSBtaWdodCBoYXZlIGEgZ2FwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICogVGhlIGdhcCB3aWxsIG9jY3VyIGlmIHRoZSBsdSBwYXJlbnQgbmFtZSB0aGF0IGlzIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIGhhcyBhIHBhcmVudCB3aGljaCBpcyBub3QgbWlzc2luZy4gVGhpcyB3aWxsIGdlbmVyYXRlIGEgZ2FwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGx1UGFyZW50ID0gXy5maW5kKG5ld1Rhc2tDdHJsLmFsbExvZ2ljYWxVbml0cywge2x1X25hbWU6IGx1Lmx1X3BhcmVudF9uYW1lfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobHVQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobHVQYXJlbnQubHVfcGFyZW50X25hbWUgJiYgaXNTZWxlY3RlZExVKGx1UGFyZW50Lmx1X3BhcmVudF9uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VuZXJhbEZvcm0udGFza0xvZ2ljYWxVbml0LiRzZXRWYWxpZGl0eSgnZ2FwJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5taXNzaW5nVW5pdEluR2FwID0gbHVQYXJlbnQubHVfbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbGV0IGNoZWNrSWZSb290SXNNaXNzaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VuZXJhbEZvcm0udGFza0xvZ2ljYWxVbml0LiRzZXRWYWxpZGl0eSgnbWlzc2luZ1BhcmVudCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5taXNzaW5nUm9vdExVID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgbHUgd2hpY2ggaGFzIGEgcGFyZW50IHRoYXQgZG9lcyBub3QgaGF2ZSBhIHBhcmVudCAocm9vdClcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsdSBvZiBuZXdUYXNrQ3RybC5sb2dpY2FsVW5pdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsdS5sdV9wYXJlbnRfbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGx1UGFyZW50ID0gXy5maW5kKG5ld1Rhc2tDdHJsLmFsbExvZ2ljYWxVbml0cywge2x1X25hbWU6IGx1Lmx1X3BhcmVudF9uYW1lfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGx1UGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGx1IGhhcyBhIHBhcmVudCB0aGF0IGRvZXMgbm90IGhhdmUgYSBwYXJlbnQgd2hpY2ggaXMgbWlzc2luZyB0aGVuIHJvb3QgaXMgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWx1UGFyZW50Lmx1X3BhcmVudF9uYW1lICYmICFpc1NlbGVjdGVkTFUobHVQYXJlbnQubHVfbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW5lcmFsRm9ybS50YXNrTG9naWNhbFVuaXQuJHNldFZhbGlkaXR5KCdtaXNzaW5nUGFyZW50JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubWlzc2luZ1Jvb3RMVS5wdXNoKGx1UGFyZW50Lmx1X25hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwubG9naWNhbFVuaXRzICYmIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubG9naWNhbFVuaXRzLmZvckVhY2gobHUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSAhPT0gJ3JlZmVybmNlT25seScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrR2FwKGx1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0lmUm9vdElzTWlzc2luZyhsdSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKGZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNiID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobmV3VGFza0N0cmwudXNlclJvbGVUeXBlID09ICdhZG1pbicgfHwgbmV3VGFza0N0cmwuc291cmNlRW52T3duZXIgJiYgbmV3VGFza0N0cmwudGFyZ2V0RW52T3duZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RBbGxFbnRpdGVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUVudiA9IF8uZmluZChuZXdUYXNrQ3RybC5hbGxTb3VyY2VFbnZpcm9ubWVudHMsIHtlbnZpcm9ubWVudF9pZDogbmV3VGFza0N0cmwudGFza0RhdGEuc291cmNlX2Vudmlyb25tZW50X2lkfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VFbnYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNvdXJjZV9lbnZfbmFtZSA9IHNvdXJjZUVudi5lbnZpcm9ubWVudF9uYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RBbGxFbnRpdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSBcIkVYVFJBQ1RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX2dsb2JhbHMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQgfHwgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFuZXdUYXNrQ3RybC51c2VyUm9sZSB8fCFuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcXVlc3Rfb2ZfZnJlc2hfZGF0YSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZSB8fCAhbmV3VGFza0N0cmwuc291cmNlVXNlclJvbGUuYWxsb3dlZF9yZXF1ZXN0X29mX2ZyZXNoX2RhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwIHx8IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09PSAnTE9BRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudXBkYXRlUGFyYW1zKGNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2IuYXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmdlbmVyYWxGb3JtID0gZm9ybTtcbiAgICAgICAgfTtcblxuICAgICAgICBuZXdUYXNrQ3RybC5yZWZlcmVuY2VOZXh0ID0gZnVuY3Rpb24gKG5leHRTdGVwKSB7XG4gICAgICAgICAgICBpZiAoXy5maWx0ZXIobmV3VGFza0N0cmwudGFza0RhdGEucmVmTGlzdCwge3NlbGVjdGVkOiB0cnVlfSkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZWZlcmVuY2VUYWJFcnJvciA9ICdQbGVhc2UgU2VsZWN0IFJlZmVyZW5jZSBUYWJsZSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VGFza0N0cmwucmVmZXJlbmNlVGFiRXJyb3IgPSAnJztcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0xPQUQnICYmIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kICYmICFfLmZpbmQobmV3VGFza0N0cmwudGFza0RhdGEucmVmTG9hZFZlcnNpb25zLCB7dGFza19leGVjdXRpb25faWQ6IHBhcnNlSW50KG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnNlbGVjdGVkUmVmVmVyc2lvblRvTG9hZCl9KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX2dsb2JhbHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwIHx8IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZlcmVuY2UgIT09ICdyZWZlcm5jZU9ubHknKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfdHlwZSA9PSBcIkVYVFJBQ1RcIiAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RBbGxFbnRpdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Rhc2tDdHJsLnN0ZXAgPSBuZXh0U3RlcCB8fCAyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwIHx8IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllc05leHQgPSBmdW5jdGlvbiAoZm9ybSwgbWlncmF0ZWQsIG5leHRTdGVwKSB7XG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09ICdMT0FEJ1xuICAgICAgICAgICAgICAgICYmIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kICYmICFuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RBbGxFbnRpdGVzICYmICFtaWdyYXRlZCkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmNoZWNrTWlncmF0ZVN0YXR1cygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLmlzRmx1eE1vZGUgJiZcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gJ0xPQUQnICYmICFuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCAmJlxuICAgICAgICAgICAgICAgIChuZXdUYXNrQ3RybC5zZWxlY3RGaWVsZFR5cGUgPT0gJ3N5bnRoZXRpYycgfHwgbmV3VGFza0N0cmwuc2VsZWN0RmllbGRUeXBlID09ICdwYXJhbWV0ZXJzJylcbiAgICAgICAgICAgICkge1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLkxVc01pc3NpbmdQYXJlbnQgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAobHUgb2YgbmV3VGFza0N0cmwubG9naWNhbFVuaXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsdS5sdV9wYXJlbnRfbmFtZSAmJiAhXy5maW5kKG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cywge2x1X25hbWU6IGx1Lmx1X3BhcmVudF9uYW1lfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5MVXNNaXNzaW5nUGFyZW50LnB1c2gobHUubHVfbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlcXVlc3RlZEVudGl0aWVzRm9ybS4kc2V0VmFsaWRpdHkoJ21pc3NpbmdQYXJlbnQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuTFVzTWlzc2luZ1BhcmVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0uJHNldFZhbGlkaXR5KCdtaXNzaW5nUGFyZW50JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwuc2VsZWN0RmllbGRUeXBlID09ICdnaXZlbicgJiYgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMgJiYgdHlwZW9mIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgJiYgbmV3VGFza0N0cmwudGFza0RhdGEuZW50aXR5X2V4Y2x1c2lvbl9saXN0ID09IG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5lcnJvckxpc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0gPSBmb3JtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmVuaXRpdGVzTGlzdE5vdFBhc3NlZEV4Y2x1c2lvbkxpc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmVuaXRpdGVzTGlzdEZhaWxlZFBhdHRlcm5UZXN0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gXCJMT0FEXCIgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kICYmIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgbmV3VGFza0N0cmwudGFza0RhdGEuZW50aXR5X2V4Y2x1c2lvbl9saXN0ID09PSAnc3RyaW5nJyAmJiBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS5lbnRpdHlfZXhjbHVzaW9uX2xpc3QgPSBuZXdUYXNrQ3RybC50YXNrRGF0YS5lbnRpdHlfZXhjbHVzaW9uX2xpc3QucmVwbGFjZSgvXFxzL2csICcnKTsgLy9yZW1vdmUgc3BhY2VzXG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEuZW50aXR5X2V4Y2x1c2lvbl9saXN0ID0gbmV3VGFza0N0cmwudGFza0RhdGEuZW50aXR5X2V4Y2x1c2lvbl9saXN0LnJlcGxhY2UoL1xccj9cXG58XFxyL2csICcnKTsgLy9yZW1vdmUgbmV3IGxpbmVzXG4gICAgICAgICAgICAgICAgaWYgKCFuZXdUYXNrQ3RybC5lbnRpdGllc1BhdHRlcm4udGVzdChuZXdUYXNrQ3RybC50YXNrRGF0YS5lbnRpdHlfZXhjbHVzaW9uX2xpc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmVuaXRpdGVzRXhjbHVzaW9uTGlzdFBhdHRlcm5UZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY2hlY2sgaWYgdGhlIGN1cnJlbnQgXCJlbnRpdGllcyBMaXN0XCIgaW5jbHVkZXMgYW55dGhpbmcgZnJvbSB0aGUgZXhjbHVzaW9uIGxpc3Qgd2UgZGVmaW5lZCBiZWZvcmUuXG4gICAgICAgICAgICBpZiAobmV3VGFza0N0cmwuc2VsZWN0RmllbGRUeXBlID09ICdnaXZlbicgJiYgdHlwZW9mIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QgPT09ICdzdHJpbmcnICYmIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QgPSBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0LnJlcGxhY2UoL1xccy9nLCAnJyk7IC8vcmVtb3ZlIHNwYWNlc1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3QgPSBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0LnJlcGxhY2UoL1xccj9cXG58XFxyL2csICcnKTsgLy9yZW1vdmUgbmV3IGxpbmVzXG4gICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzUGF0dGVybiA9IG5ld1Rhc2tDdHJsLmVudGl0aWVzUGF0dGVybjtcbiAgICAgICAgICAgICAgICBpZiAoIShuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gXCJMT0FEXCIgJiYgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdGllc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXigoXFxcXHd8LSkrKD86LChcXFxcd3wtKSspezAsXCIgKyAoKG5ld1Rhc2tDdHJsLm1heFRvQ29weSB8fCAxMDAwMDAwMDAwKSAtIDEpICsgXCJ9KT8kXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChlbnRpdGllc1BhdHRlcm4udGVzdChuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09IFwiTE9BRFwiICYmICFuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0ZSBhZ2FpbnN0IGV4Y2x1c2lvbiBsaXN0LiBBcyB3ZSBhcmUgdXNpbmcgc2FtZSBleGNsdXNpb24gbGlzdCB2YWxpZGF0aW9uIG1ldGhvZCwgd2UgcHJlcGFyZSBvYmplY3QgZm9yIHZhbGlkYXRpb24gdGhhdCBjb250YWlucyB0aGUgbmFtZXMgdGhhdCB0aGUgQmFja0VuZCBFeHBlY3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFGb3JWYWxpZGF0aW9uID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhRm9yVmFsaWRhdGlvbi5leGNsdXNpb25fbGlzdCA9IG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzLmVudGl0aWVzX2xpc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhRm9yVmFsaWRhdGlvbi5iZV9pZCA9IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBURE1TZXJ2aWNlLnBvc3RFbnZFeGNsdXNpb25MaXN0VmFsaWRhdGVMaXN0KG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkLCBkYXRhRm9yVmFsaWRhdGlvbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IFwiU1VDQ0VTU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZW5pdGl0ZXNMaXN0Tm90UGFzc2VkRXhjbHVzaW9uTGlzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5leGlzdGluZ0VudGl0aWVzSW5FeGNsdXNpb25MaXN0TWVtYmVycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5yZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5leGlzdGluZ0VudGl0aWVzSW5FeGNsdXNpb25MaXN0TWVtYmVycy5wdXNoKHJlc3BvbnNlLnJlc3VsdFtpXS51bm5lc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugey8vTm8gZXhjbHVzaW9ucyBmb3VuZCwgY29udGludWUgdG8gc3RlcCAzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZXJyb3JMaXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybS4kdmFsaWQgfHwgbmV3VGFza0N0cmwuZGlzYWJsZUNoYW5nZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfZ2xvYmFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXNGb3JtID0gZm9ybTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIlVuYWJsZSB0byBleGVjdXRlIHZhbGlkYXRpb24gYWdhaW5zdCBFeGNsdXNpb24gTGlzdFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5lcnJvckxpc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLiR2YWxpZCB8fCBuZXdUYXNrQ3RybC5kaXNhYmxlQ2hhbmdlID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza19nbG9iYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSBuZXh0U3RlcCB8fCA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gIGVsc2UgaWYgKChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gXCJFWFRSQUNUXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09IFwiTE9BRFwiKSAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICBlbHNlIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gXCJFWFRSQUNUXCIgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIW5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFuZXdUYXNrQ3RybC51c2VyUm9sZSB8fCFuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcXVlc3Rfb2ZfZnJlc2hfZGF0YSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFuZXdUYXNrQ3RybC5zb3VyY2VVc2VyUm9sZSB8fCAhbmV3VGFza0N0cmwuc291cmNlVXNlclJvbGUuYWxsb3dlZF9yZXF1ZXN0X29mX2ZyZXNoX2RhdGEgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RlZEVudGl0aWVzRm9ybSA9IGZvcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvL3BhdHRlcm4gdmFsaWRhdGlvbiBkaWRuJ3QgcGFzc1xuICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5lbml0aXRlc0xpc3RGYWlsZWRQYXR0ZXJuVGVzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5zZWxlY3RGaWVsZFR5cGUgPT0gJ3N5bnRoZXRpYycgJiYgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMuc3ludGhldGljKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFGb3JWYWxpZGF0aW9uID0ge307XG4gICAgICAgICAgICAgICAgZGF0YUZvclZhbGlkYXRpb24uZXhjbHVzaW9uX2xpc3QgPSBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5zeW50aGV0aWM7XG4gICAgICAgICAgICAgICAgZGF0YUZvclZhbGlkYXRpb24uYmVfaWQgPSBuZXdUYXNrQ3RybC50YXNrRGF0YS5iZV9pZDtcbiAgICAgICAgICAgICAgICBURE1TZXJ2aWNlLnBvc3RFbnZFeGNsdXNpb25MaXN0VmFsaWRhdGVMaXN0KG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmVudmlyb25tZW50X2lkLCBkYXRhRm9yVmFsaWRhdGlvbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZW5pdGl0ZXNMaXN0Tm90UGFzc2VkRXhjbHVzaW9uTGlzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZXhpc3RpbmdFbnRpdGllc0luRXhjbHVzaW9uTGlzdE1lbWJlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLnJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5leGlzdGluZ0VudGl0aWVzSW5FeGNsdXNpb25MaXN0TWVtYmVycy5wdXNoKHJlc3BvbnNlLnJlc3VsdFtpXS51bm5lc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugey8vTm8gZXhjbHVzaW9ucyBmb3VuZCwgY29udGludWUgdG8gc3RlcCAzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmVycm9yTGlzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLiR2YWxpZCB8fCBuZXdUYXNrQ3RybC5kaXNhYmxlQ2hhbmdlID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfZ2xvYmFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwIHx8IDU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uc3VibWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXNGb3JtID0gZm9ybTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIlVuYWJsZSB0byBleGVjdXRlIHZhbGlkYXRpb24gYWdhaW5zdCBFeGNsdXNpb24gTGlzdFwiICsgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7Ly9jb250aW51ZSB0byBzdGVwIDMuXG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZXJyb3JMaXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm0uJHZhbGlkIHx8IG5ld1Rhc2tDdHJsLmRpc2FibGVDaGFuZ2UgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza19nbG9iYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09IFwiRVhUUkFDVFwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC50YXNrRGF0YS50YXNrX3R5cGUgPT0gXCJMT0FEXCIpICYmIG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnZlcnNpb25faW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNDtcbiAgICAgICAgICAgICAgICAgICAgfSAgZWxzZSBpZiAobmV3VGFza0N0cmwudGFza0RhdGEudGFza190eXBlID09IFwiRVhUUkFDVFwiICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhbmV3VGFza0N0cmwudGFza0RhdGEudmVyc2lvbl9pbmQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFuZXdUYXNrQ3RybC51c2VyUm9sZSB8fCFuZXdUYXNrQ3RybC51c2VyUm9sZS5hbGxvd2VkX3JlcXVlc3Rfb2ZfZnJlc2hfZGF0YSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghbmV3VGFza0N0cmwuc291cmNlVXNlclJvbGUgfHwgIW5ld1Rhc2tDdHJsLnNvdXJjZVVzZXJSb2xlLmFsbG93ZWRfcmVxdWVzdF9vZl9mcmVzaF9kYXRhIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gbmV4dFN0ZXAgfHwgNDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSBuZXh0U3RlcCB8fCAzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0gPSBmb3JtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgbmV3VGFza0N0cmwuZ2xvYmFsc05leHQgPSBmdW5jdGlvbiAobmV4dFN0ZXApIHtcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS52ZXJzaW9uX2luZCB8fCBuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZlcmVuY2UgPT09ICdyZWZlcm5jZU9ubHknKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IG5leHRTdGVwIHx8IDQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSBuZXh0U3RlcCB8fCAzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLnJlcXVlc3RQYXJhbWV0ZXJzTmV4dCA9IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICAgICBpZiAoZm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gNDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybS5zdWJtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VGFza0N0cmwucmVxdWVzdFBhcmFtZXRlcnNGb3JtID0gZm9ybTtcbiAgICAgICAgfTtcblxuICAgICAgICBuZXdUYXNrQ3RybC5leGVjdXRpb25UaW1pbmdGaW5pc2ggPSBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAgICAgaWYgKGZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuZ2VuZXJhbEZvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSAxO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5yZWZlcmVuY2UgJiYgXy5maWx0ZXIobmV3VGFza0N0cmwudGFza0RhdGEucmVmTGlzdCwge3NlbGVjdGVkOiB0cnVlfSkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IDY7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnJlZmVyZW5jZSAhPT0gJ3JlZmVybmNlT25seScgJiYgISRzY29wZS5yZXF1ZXN0ZWRFbnRpdGllc0Zvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSAyO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghJHNjb3BlLnJlcXVlc3RQYXJhbWV0ZXJzRm9ybS4kdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuc3RlcCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuYWRkVGFzaygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtLnN1Ym1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC5leGVjdXRpb25UaW1pbmdGb3JtID0gZm9ybTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIG5ld1Rhc2tDdHJsLmNyb25UYWJDb25maWcgPSB7XG4gICAgICAgICAgICBhbGxvd011bHRpcGxlOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgbmV3VGFza0N0cmwudG9nZ2xlVmVyc2lvbiA9IGZ1bmN0aW9uKHRhc2tfZXhlY3V0aW9uX2lkKSB7XG4gICAgICAgICAgICBuZXdUYXNrQ3RybC52ZXJzaW9uc1RvZ2dsZVt0YXNrX2V4ZWN1dGlvbl9pZF0gPSAhbmV3VGFza0N0cmwudmVyc2lvbnNUb2dnbGVbdGFza19leGVjdXRpb25faWRdO1xuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLmR0SW5zdGFuY2VWZXJzaW9ucyAmJiBuZXdUYXNrQ3RybC5kdEluc3RhbmNlVmVyc2lvbnMucmVsb2FkRGF0YSkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmR0SW5zdGFuY2VWZXJzaW9ucy5yZWxvYWREYXRhKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmV3VGFza0N0cmwudmVyc2lvbnNUb2dnbGUgPSB7fTtcbiAgICAgICAgbmV3VGFza0N0cmwudmVyc2lvbnNGb3JMb2FkID0gW107XG4gICAgICAgIG5ld1Rhc2tDdHJsLmR0SW5zdGFuY2VWZXJzaW9ucyA9IHt9O1xuICAgICAgICBuZXdUYXNrQ3RybC5kdENvbHVtbnNWZXJzaW9ucyA9IFtdO1xuICAgICAgICBuZXdUYXNrQ3RybC5kdENvbHVtbkRlZnNWZXJzaW9ucyA9IFtdO1xuICAgICAgICBuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uOiAnY29sbGFwc2UnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgICAgIGNsaWNrQWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uOiAnYWN0aW9ucycsXG4gICAgICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uOiAndmVyc2lvbl9uYW1lJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnVmVyc2lvbiBOYW1lJyxcbiAgICAgICAgICAgICAgICBjbGlja0FibGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uOiAndGFza19pZCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1Rhc2sgSWQnLFxuICAgICAgICAgICAgICAgIGNsaWNrQWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uOiAndGFza19sYXN0X3VwZGF0ZWRfYnknLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdMYXN0IFVwZGF0ZWQgQnknLFxuICAgICAgICAgICAgICAgIGNsaWNrQWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1uOiAndmVyc2lvbl90eXBlJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnVmVyc2lvbiBUeXBlJyxcbiAgICAgICAgICAgICAgICBjbGlja0FibGU6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbHVtbjogJ3ZlcnNpb25fZGF0ZXRpbWUnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdEYXRlIFRpbWUnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICBjbGlja0FibGU6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbHVtbjogJ2x1X25hbWUnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdMb2dpY2FsIFVuaXQgTmFtZScsXG4gICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2x1bW46ICdudW1iZXJfb2ZfZXh0cmFjdGVkX2VudGl0aWVzJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnTnVtYmVyIG9mIEV4dHJhY3RlZCBFbnRpdGllcycsXG4gICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2x1bW46ICdyb290SW5kaWNhdG9yJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnUm9vdCBMVScsXG4gICAgICAgICAgICAgICAgY2xpY2tBYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcblxuICAgICAgICB2YXIgY2hhbmdlVG9Mb2NhbERhdGUgPSBmdW5jdGlvbiAoZGF0YSwgdHlwZSwgZnVsbCwgbWV0YSkge1xuICAgICAgICAgICAgcmV0dXJuIG1vbWVudChkYXRhKS5mb3JtYXQoJ0REIE1NTSBZWVlZLCBISDptbScpXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJlbmRlclNlbGVjdGlvbkNvbHVtbiA9IGZ1bmN0aW9uIChkYXRhLCB0eXBlLCBmdWxsLCBtZXRhKSB7XG4gICAgICAgICAgICBpZiAoZnVsbC5pc1Jvb3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy12YWx1ZT1cIlxcJycgKyBmdWxsLmZhYnJpY19leGVjdXRpb25faWQgKyAnXFwnXCIgbmFtZT1cInZlcnNpb25zVGFibGVTZWxlY3Rpb25cIiBuZy1tb2RlbD1cIm5ld1Rhc2tDdHJsLnNlbGVjdGVkVmVyc2lvblRvTG9hZFwiIHN0eWxlPVwiZGlzcGxheTpibG9jayAhaW1wb3J0bmFudDsgb3BhY2l0eToxICFpbXBvcnRuYW50O1wiPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJlbmRlckNvbGxhcHNlQ29sdW1uID0gZnVuY3Rpb24gKGRhdGEsIHR5cGUsIGZ1bGwsIG1ldGEpIHtcbiAgICAgICAgICAgIGlmIChmdWxsLmlzUm9vdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnPGEgY2xhc3M9XCJ0b2dnbGVWZXJzaW9ucyAnICsgKG5ld1Rhc2tDdHJsLnZlcnNpb25zVG9nZ2xlW2Z1bGwudGFza19leGVjdXRpb25faWRdID8gJ2FjdGl2ZScgOiAnJykgICsgJ1wiIG5nLWNsaWNrPVwibmV3VGFza0N0cmwudG9nZ2xlVmVyc2lvbignICsgZnVsbC50YXNrX2V4ZWN1dGlvbl9pZCArICcpXCI+PGkgY2xhc3M9XCJmYSBhcnJvd1wiPjwvaT4gPC9hPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uID09ICdhY3Rpb25zJykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmR0Q29sdW1uc1ZlcnNpb25zLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uKS53aXRoVGl0bGUobmV3VGFza0N0cmwuaGVhZGVyc1ZlcnNpb25zW2ldLm5hbWUpLnJlbmRlcldpdGgocmVuZGVyU2VsZWN0aW9uQ29sdW1uKS5ub3RTb3J0YWJsZSgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VGFza0N0cmwuaGVhZGVyc1ZlcnNpb25zW2ldLmNvbHVtbiA9PSAnY29sbGFwc2UnKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZHRDb2x1bW5zVmVyc2lvbnMucHVzaChEVENvbHVtbkJ1aWxkZXIubmV3Q29sdW1uKG5ld1Rhc2tDdHJsLmhlYWRlcnNWZXJzaW9uc1tpXS5jb2x1bW4pLndpdGhUaXRsZShuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0ubmFtZSkucmVuZGVyV2l0aChyZW5kZXJDb2xsYXBzZUNvbHVtbikubm90U29ydGFibGUoKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLmhlYWRlcnNWZXJzaW9uc1tpXS50eXBlID09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmR0Q29sdW1uc1ZlcnNpb25zLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uKS53aXRoVGl0bGUobmV3VGFza0N0cmwuaGVhZGVyc1ZlcnNpb25zW2ldLm5hbWUpLnJlbmRlcldpdGgoY2hhbmdlVG9Mb2NhbERhdGUpLm5vdFNvcnRhYmxlKCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uID09ICd0YXNrX2lkJykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmR0Q29sdW1uc1ZlcnNpb25zLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uKS53aXRoVGl0bGUobmV3VGFza0N0cmwuaGVhZGVyc1ZlcnNpb25zW2ldLm5hbWUpLm5vdFNvcnRhYmxlKCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uID09ICd2ZXJzaW9uX25hbWUnKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZHRDb2x1bW5zVmVyc2lvbnMucHVzaChEVENvbHVtbkJ1aWxkZXIubmV3Q29sdW1uKG5ld1Rhc2tDdHJsLmhlYWRlcnNWZXJzaW9uc1tpXS5jb2x1bW4pLndpdGhUaXRsZShuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0ubmFtZSkubm90U29ydGFibGUoKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Rhc2tDdHJsLmhlYWRlcnNWZXJzaW9uc1tpXS5jb2x1bW4gPT0gJ3Jvb3RJbmRpY2F0b3InICkge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmR0Q29sdW1uc1ZlcnNpb25zLnB1c2goRFRDb2x1bW5CdWlsZGVyLm5ld0NvbHVtbihuZXdUYXNrQ3RybC5oZWFkZXJzVmVyc2lvbnNbaV0uY29sdW1uKS53aXRoVGl0bGUobmV3VGFza0N0cmwuaGVhZGVyc1ZlcnNpb25zW2ldLm5hbWUpLm5vdFNvcnRhYmxlKCkubm90VmlzaWJsZSgpKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5kdENvbHVtbnNWZXJzaW9ucy5wdXNoKERUQ29sdW1uQnVpbGRlci5uZXdDb2x1bW4obmV3VGFza0N0cmwuaGVhZGVyc1ZlcnNpb25zW2ldLmNvbHVtbikud2l0aFRpdGxlKG5ld1Rhc2tDdHJsLmhlYWRlcnNWZXJzaW9uc1tpXS5uYW1lKS5ub3RTb3J0YWJsZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnZXRUYWJsZURhdGFWZXJzaW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB2YXIgdmVyc2lvbnNGb3JMb2FkID0gW107ICBcbiAgICAgICAgICAgIHZhciByb290TFVzID0gXy5maWx0ZXIobmV3VGFza0N0cmwubG9naWNhbFVuaXRzLHtsdV9wYXJlbnRfbmFtZSA6IG51bGx9KTtcbiAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnZlcnNpb25zRm9yTG9hZC5mb3JFYWNoKGZ1bmN0aW9uKHZlcnNpb25Gb3JMb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8uZmluZChyb290TFVzLHtsdV9uYW1lOiB2ZXJzaW9uRm9yTG9hZC5sdV9uYW1lfSkpe1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uRm9yTG9hZC5yb290SW5kaWNhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb25Gb3JMb2FkLnJvb3RJbmRpY2F0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZlcnNpb25Gb3JMb2FkLnJvb3RJbmRpY2F0b3IgJiYgXy5maW5kSW5kZXgodmVyc2lvbnNGb3JMb2FkLHt0YXNrX2V4ZWN1dGlvbl9pZCA6IHZlcnNpb25Gb3JMb2FkLnRhc2tfZXhlY3V0aW9uX2lkLGlzUm9vdDogdHJ1ZX0pIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uRm9yTG9hZC5pc1Jvb3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uRm9yTG9hZC5yb290SW5kaWNhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbnNGb3JMb2FkLnB1c2godmVyc2lvbkZvckxvYWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC52ZXJzaW9uc1RvZ2dsZVt2ZXJzaW9uRm9yTG9hZC50YXNrX2V4ZWN1dGlvbl9pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbkZvckxvYWQuaXNSb290ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb25zRm9yTG9hZC5wdXNoKHZlcnNpb25Gb3JMb2FkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgXG4gICAgICAgICAgICAvLyB2YXIgZ3JvdXBlZFZlcnNpb25zID0gXy5ncm91cEJ5KG5ld1Rhc2tDdHJsLnZlcnNpb25zRm9yTG9hZCwndGFza19leGVjdXRpb25faWQnKTtcbiAgICAgICAgICAgIC8vIGZvciAodmFyIGtleSBpbiBncm91cGVkVmVyc2lvbnMpe1xuICAgICAgICAgICAgLy8gICAgIHZhciByb290VmVyc2lvbkZvckxvYWQgPSBfLmZpbmQoZ3JvdXBlZFZlcnNpb25zW2tleV0se3Jvb3RfaW5kaWNhdG9yIDogJ1lZJ30pO1xuICAgICAgICAgICAgLy8gICAgIGlmIChyb290VmVyc2lvbkZvckxvYWQpe1xuICAgICAgICAgICAgLy8gICAgICAgICByb290VmVyc2lvbkZvckxvYWQubHVfbmFtZXMgPSBbcm9vdFZlcnNpb25Gb3JMb2FkLmx1X25hbWVdO1xuICAgICAgICAgICAgLy8gICAgICAgICB2ZXJzaW9uc0ZvckxvYWQucHVzaChyb290VmVyc2lvbkZvckxvYWQpO1xuICAgICAgICAgICAgLy8gICAgICAgICByb290VmVyc2lvbkZvckxvYWQuZXh0cmFjdF9lbnRpdGllc19wZXJfbHUgPSBbcm9vdFZlcnNpb25Gb3JMb2FkLm51bWJlcl9vZl9leHRyYWN0ZWRfZW50aXRpZXNdO1xuICAgICAgICAgICAgLy8gICAgICAgICBmb3IodmFyIGkgPSAwO2kgPCBncm91cGVkVmVyc2lvbnNba2V5XS5sZW5ndGggOyBpKyspe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIHZlcnNpb25Gb3JMb2FkID0gZ3JvdXBlZFZlcnNpb25zW2tleV1baV07XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBpZiAodmVyc2lvbkZvckxvYWQucm9vdF9pbmRpY2F0b3IgIT09ICdZWScpe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJvb3RWZXJzaW9uRm9yTG9hZC5sdV9uYW1lcy5wdXNoKHZlcnNpb25Gb3JMb2FkLmx1X25hbWUpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJvb3RWZXJzaW9uRm9yTG9hZC5leHRyYWN0X2VudGl0aWVzX3Blcl9sdS5wdXNoKHZlcnNpb25Gb3JMb2FkLm51bWJlcl9vZl9leHRyYWN0ZWRfZW50aXRpZXMpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICAgICAgIHJvb3RWZXJzaW9uRm9yTG9hZC5sdV9uYW1lcyA9IHJvb3RWZXJzaW9uRm9yTG9hZC5sdV9uYW1lcy50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gICAgICAgICByb290VmVyc2lvbkZvckxvYWQuZXh0cmFjdF9lbnRpdGllc19wZXJfbHUgPSByb290VmVyc2lvbkZvckxvYWQuZXh0cmFjdF9lbnRpdGllc19wZXJfbHUudG9TdHJpbmcoKTsgICAgXG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gICAgICAgICBmb3IgKHZhciBpID0gMDtpIDwgZ3JvdXBlZFZlcnNpb25zW2tleV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciB2ZXJzaW9uRm9yTG9hZFRlbXAgPSBncm91cGVkVmVyc2lvbnNba2V5XVtpXTsgXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB2ZXJzaW9uRm9yTG9hZFRlbXAubHVfbmFtZXMgPSAoW3ZlcnNpb25Gb3JMb2FkVGVtcC5sdV9uYW1lXSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZlcnNpb25Gb3JMb2FkVGVtcC5leHRyYWN0X2VudGl0aWVzX3Blcl9sdSA9IChbdmVyc2lvbkZvckxvYWRUZW1wLm51bWJlcl9vZl9leHRyYWN0ZWRfZW50aXRpZXNdKS50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICAgICAgIHZlcnNpb25zRm9yTG9hZCA9IHZlcnNpb25zRm9yTG9hZC5jb25jYXQoZ3JvdXBlZFZlcnNpb25zW2tleV0pO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIGlmIChuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RlZF92ZXJzaW9uX3Rhc2tfZXhlX2lkKSB7XG4gICAgICAgICAgICAvLyAgICAgdmFyIHNlbGVjdGVkVmVyc2lvbiA9IF8uZmluZCh2ZXJzaW9uc0ZvckxvYWQsIHt0YXNrX2V4ZWN1dGlvbl9pZDogbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0ZWRfdmVyc2lvbl90YXNrX2V4ZV9pZH0pO1xuICAgICAgICAgICAgLy8gICAgIGlmIChzZWxlY3RlZFZlcnNpb24pIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgbmV3VGFza0N0cmwuc2VsZWN0ZWRWZXJzaW9uVG9Mb2FkID0gc2VsZWN0ZWRWZXJzaW9uLmZhYnJpY19leGVjdXRpb25faWQ7XG4gICAgICAgICAgICAvLyAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZlcnNpb25zRm9yTG9hZCk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZlcnNpb25zRm9yTG9hZCk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICBuZXdUYXNrQ3RybC5kdE9wdGlvbnNWZXJzaW9ucyA9IERUT3B0aW9uc0J1aWxkZXIuZnJvbUZuUHJvbWlzZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGFibGVEYXRhVmVyc2lvbnMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC53aXRoRE9NKCc8XCJodG1sNWJ1dHRvbnNcIkI+bFRmZ2l0cCcpXG4gICAgICAgICAgICAud2l0aE9wdGlvbignY3JlYXRlZFJvdycsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICAvLyBSZWNvbXBpbGluZyBzbyB3ZSBjYW4gYmluZCBBbmd1bGFyIGRpcmVjdGl2ZSB0byB0aGUgRFRcbiAgICAgICAgICAgICAgICAkY29tcGlsZShhbmd1bGFyLmVsZW1lbnQocm93KS5jb250ZW50cygpKSgkc2NvcGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzY3JvbGxYJywgZmFsc2UpXG4gICAgICAgICAgICAud2l0aE9wdGlvbignbGVuZ3RoQ2hhbmdlJywgZmFsc2UpXG4gICAgICAgICAgICAud2l0aE9wdGlvbigncGFnaW5nJywgZmFsc2UpXG4gICAgICAgICAgICAud2l0aEJ1dHRvbnMoW10pXG4gICAgICAgICAgICAud2l0aE9wdGlvbihcImNhc2VJbnNlbnNpdGl2ZVwiLCB0cnVlKVxuICAgICAgICAgICAgLndpdGhPcHRpb24oXCJvcmRlclwiLCAgW1sgNiwgXCJkZXNjXCIgXSxbOSwgXCJkZXNjXCJdXSlcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzZWFyY2gnLCB7XG4gICAgICAgICAgICAgICAgXCJjYXNlSW5zZW5zaXRpdmVcIjogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLmR0T3B0aW9uc1ZlcnNpb25zLndpdGhMaWdodENvbHVtbkZpbHRlcih7XG4gICAgICAgICAgICAyOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA1OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNjoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDc6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA4OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ld1Rhc2tDdHJsLmdldFZlcnNpb25zRm9yTG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbnRpdGllc1Bhc3NlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0ICYmIG5ld1Rhc2tDdHJsLm1heFRvQ29weSkge1xuICAgICAgICAgICAgICAgIHZhciBlbnRpdGllc1BhdHRlcm4gPSBuZXcgUmVnRXhwKFwiXigoXFxcXHd8LSkrKD86LChcXFxcd3wtKSspezAsXCIgKyAoKG5ld1Rhc2tDdHJsLm1heFRvQ29weSB8fCAxMDAwMDAwMDAwKSAtIDEpICsgXCJ9KT8kXCIpO1xuICAgICAgICAgICAgICAgIGVudGl0aWVzUGFzc2VkID0gZW50aXRpZXNQYXR0ZXJuLnRlc3QobmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMuZW50aXRpZXNfbGlzdCk7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZW5pdGl0ZXNMaXN0RmFpbGVkUGF0dGVyblRlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC52ZXJzaW9uRm9yTG9hZEZyb20gJiYgbmV3VGFza0N0cmwudmVyc2lvbkZvckxvYWRUbyAmJlxuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmxvZ2ljYWxVbml0cyAmJiBuZXdUYXNrQ3RybC50YXNrRGF0YS5zb3VyY2VfZW52X25hbWVcbiAgICAgICAgICAgICAgICAmJiAobmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcyB8fFxuICAgICAgICAgICAgICAgICAgICAobmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMuZW50aXRpZXNfbGlzdCAmJiBlbnRpdGllc1Bhc3NlZCkpKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwubG9hZGluZ1RhYmxlVmVyc2lvbnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBmcm9tID0gbmV3IERhdGUobmV3VGFza0N0cmwudmVyc2lvbkZvckxvYWRGcm9tKTtcbiAgICAgICAgICAgICAgICBmcm9tLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgICAgIGZyb20uc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgICAgICBmcm9tLnNldFNlY29uZHMoMCk7XG4gICAgICAgICAgICAgICAgdmFyIHRvID0gbmV3IERhdGUobmV3VGFza0N0cmwudmVyc2lvbkZvckxvYWRUbyk7XG4gICAgICAgICAgICAgICAgdG8uc2V0SG91cnMoMjMpO1xuICAgICAgICAgICAgICAgIHRvLnNldE1pbnV0ZXMoNTkpO1xuICAgICAgICAgICAgICAgIHRvLnNldFNlY29uZHMoNTkpO1xuXG4gICAgICAgICAgICAgICAgVERNU2VydmljZS5wb3N0R2VuZXJpY0FQSSgndGFza3MvdmVyc2lvbnNGb3JMb2FkJywge1xuICAgICAgICAgICAgICAgICAgICBmcm9tRGF0ZTogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgdG9EYXRlOiB0byxcbiAgICAgICAgICAgICAgICAgICAgZW50aXRpZXNMaXN0OiBuZXdUYXNrQ3RybC50YXNrRGF0YS5zZWxlY3RBbGxFbnRpdGVzID8gJycgOiBuZXdUYXNrQ3RybC5yZXF1ZXN0ZWRFbnRpdGllcy5lbnRpdGllc19saXN0LFxuICAgICAgICAgICAgICAgICAgICBsdV9saXN0OiBuZXdUYXNrQ3RybC5sb2dpY2FsVW5pdHMsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZV9lbnZfbmFtZTogbmV3VGFza0N0cmwudGFza0RhdGEuc291cmNlX2Vudl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBiZV9pZCA6IG5ld1Rhc2tDdHJsLnRhc2tEYXRhLmJlX2lkLFxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3ZlcnJpZGVSb290SW5kaWNhdG9ycyA9IGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGlvbklkc1NldCA9IG5ldyBTZXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaXRlbSBvZiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXhlY3V0aW9uSWRzU2V0LmhhcyhpdGVtLnRhc2tfZXhlY3V0aW9uX2lkKSAmJiBpdGVtLnJvb3RfaW5kaWNhdG9yID09ICdZJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yb290X2luZGljYXRvciA9ICdZWSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25JZHNTZXQuYWRkKGl0ZW0udGFza19leGVjdXRpb25faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1ha2VSb290TFVzT25Ub3BGb3JFYWNoRXhlY3V0aW9uID0gZGF0YSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIG1ha2UgdGhlIHNlbGVjdGlvbiBpY29uIG9uIHRvcCBvZiBldmVyeSBleGVjdXRpb24gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VSb290TFVzT25Ub3BGb3JFYWNoRXhlY3V0aW9uKHJlc3BvbnNlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBvcmRlciB0byBhbGxvdyBvbmx5IG9uZSBzZWxlY3Rpb24gaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVSb290SW5kaWNhdG9ycyhyZXNwb25zZS5yZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC52ZXJzaW9uc0ZvckxvYWQgPSByZXNwb25zZS5yZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnZlcnNpb25zRm9yTG9hZCA9IF8uc29ydEJ5KG5ld1Rhc2tDdHJsLnZlcnNpb25zRm9yTG9hZCwgdmVyc2lvbiA9PiAtMSAqIG5ldyBEYXRlKHZlcnNpb24udmVyc2lvbl9kYXRldGltZSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLmR0SW5zdGFuY2VWZXJzaW9ucyAmJiBuZXdUYXNrQ3RybC5kdEluc3RhbmNlVmVyc2lvbnMucmVsb2FkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5kdEluc3RhbmNlVmVyc2lvbnMucmVsb2FkRGF0YShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLmxvYWRpbmdUYWJsZVZlcnNpb25zID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIk5ldyBUYXNrICMgRmFpbGVkIHRvIGdldCBWZXJzaW9ucyBmb3IgTG9hZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghbmV3VGFza0N0cmwucmVxdWVzdGVkRW50aXRpZXMuZW50aXRpZXNfbGlzdCAmJiAhbmV3VGFza0N0cmwudGFza0RhdGEuc2VsZWN0QWxsRW50aXRlcykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnZlcnNpb25zRm9yTG9hZCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChuZXdUYXNrQ3RybC5kdEluc3RhbmNlVmVyc2lvbnMgJiYgbmV3VGFza0N0cmwuZHRJbnN0YW5jZVZlcnNpb25zLnJlbG9hZERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZHRJbnN0YW5jZVZlcnNpb25zLnJlbG9hZERhdGEoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWVudGl0aWVzUGFzc2VkKSB7XG4gICAgICAgICAgICAgICAgbmV3VGFza0N0cmwuZW5pdGl0ZXNMaXN0RmFpbGVkUGF0dGVyblRlc3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgbmV3VGFza0N0cmwuaW5pdFJlZmVyZW5jZUZvcm0gPSAoUmVmZXJlbmNlRm9ybSkgPT4ge1xuICAgICAgICAgICAgJHNjb3BlLlJlZmVyZW5jZUZvcm0gPSBSZWZlcmVuY2VGb3JtO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3VGFza0N0cmwucmVxdWVzdFBhcmFtZXRlcnNQcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG5ld1Rhc2tDdHJsLnRhc2tEYXRhLnRhc2tfZ2xvYmFscykge1xuICAgICAgICAgICAgICAgIG5ld1Rhc2tDdHJsLnN0ZXAgPSA1O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdUYXNrQ3RybC5zdGVwID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEJyZWFkQ3J1bWJzU2VydmljZS5wdXNoKHt9LCAnTkVXX1RBU0snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6IHRlbXBsYXRlLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgY29udGVudDogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6IGNvbnRyb2xsZXIsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ25ld1Rhc2tDdHJsJ1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5QnVpbGRlcigkY29tcGlsZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBncm91cDogJz0nLFxuICAgICAgICAgICAgcGFyYW1zOiAnPScsXG4gICAgICAgICAgICBkaXNhYmxlY2hhbmdlOiAnPScsXG4gICAgICAgICAgICBsYXN0aW5kZXg6ICc9JyxcbiAgICAgICAgICAgIGZvcm06ICc9JyxcbiAgICAgICAgICAgIGluZGV4OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy90YXNrcy9xdWVyeUJ1aWxkZXJEaXJlY3RpdmUuaHRtbCcsXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGRpcmVjdGl2ZTtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBlbGVtZW50LmNvbnRlbnRzKCkucmVtb3ZlKCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgICAgICAgICAgc2NvcGUub3BlcmF0b3JzID0gW1xuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ0FORCd9LFxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ09SJ31cbiAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuY29uZGl0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJz0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICc9J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnPD4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICc8PidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJzwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICc+J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnPD0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICc+PSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJz4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICc8J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnPj0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICc8PSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0lzIG51bGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdJcyBudWxsJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSXMgbm90IG51bGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdJcyBub3QgbnVsbCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICBzY29wZS5jb21ib0NvbmRpdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnPSd9LFxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJzw+J30sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdJcyBudWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnSXMgbnVsbCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0lzIG5vdCBudWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnSXMgbm90IG51bGwnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuY2hhbmdlUGFyYW0gPSBmdW5jdGlvbiAocnVsZSwgZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5kYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5kYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBfLmZpbmQoc2NvcGUucGFyYW1zLCB7cGFyYW1fbmFtZTogZmllbGR9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLnR5cGUgPSBwYXJhbS5wYXJhbV90eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUudHlwZSA9PSAnaW50ZWdlcicgfHwgcnVsZS50eXBlID09ICdyZWFsJyB8fCBydWxlLnR5cGUgPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLm1pbiA9IHBhcnNlRmxvYXQocGFyYW0ubWluX3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLm1heCA9IHBhcnNlRmxvYXQocGFyYW0ubWF4X3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS52YWxpZFZhbHVlcyA9IHBhcmFtLnZhbGlkX3ZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJ1bGUuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuY2hhbmdlQ29uZGl0aW9uID0gZnVuY3Rpb24gKHJ1bGUsIGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBydWxlLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuY2hhbmdlRGF0YSA9IGZ1bmN0aW9uIChydWxlLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUuZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBydWxlLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBzY29wZS5hZGRDb25kaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmdyb3VwLnJ1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiAnQU5EJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgc2NvcGUuZGlzYWJsZUlmTnVsbCA9IGZ1bmN0aW9uIChydWxlLCBjb25kaXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uID09PSBcIklzIG51bGxcIiB8fCBjb25kaXRpb24gPT09IFwiSXMgbm90IG51bGxcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLmRpc2FibGVUaGlyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLmRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLmRpc2FibGVUaGlyZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2NvcGUucmVtb3ZlQ29uZGl0aW9uID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmdyb3VwLnJ1bGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNjb3BlLmFkZEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5ncm91cC5ydWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6ICdBTkQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgc2NvcGUucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIFwiZ3JvdXBcIiBpbiBzY29wZS4kcGFyZW50ICYmIHNjb3BlLiRwYXJlbnQuZ3JvdXAucnVsZXMuc3BsaWNlKHNjb3BlLiRwYXJlbnQuJGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlIHx8IChkaXJlY3RpdmUgPSAkY29tcGlsZShjb250ZW50KSk7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChkaXJlY3RpdmUoc2NvcGUsIGZ1bmN0aW9uICgkY29tcGlsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbXBpbGU7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cblxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnVERNLUZFJylcbiAgICAuZGlyZWN0aXZlKCduZXdUYXNrRGlyZWN0aXZlJywgbmV3VGFza0RpcmVjdGl2ZSk7XG4iXX0=
