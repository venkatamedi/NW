function postExecutionProcess(){return{restrict:"E",templateUrl:"js/components/postExecutionProcess/postExecutionProcess.html",scope:{data:"=",postExecutionProcess:"="},controller:function($scope,TDMService,AuthService,toastr,$timeout){var postExecutionProcessCtrl=this;postExecutionProcessCtrl.description=null,$scope.postExecutionProcess&&(postExecutionProcessCtrl.processName=$scope.postExecutionProcess.process_name,postExecutionProcessCtrl.executionOrder=$scope.postExecutionProcess.execution_order,postExecutionProcessCtrl.description=$scope.postExecutionProcess.process_description),TDMService.getGenericAPI("postexecutionprocesses").then((function(response){postExecutionProcessCtrl.processNames=_.filter(Object.keys(response.result),processName=>!($scope.data&&$scope.data.postExecutionData&&_.findIndex($scope.data.postExecutionData,{process_name:processName})>=0)),$scope.postExecutionProcess&&(postExecutionProcessCtrl.processName=$scope.postExecutionProcess.process_name,postExecutionProcessCtrl.processNames.indexOf($scope.postExecutionProcess.process_name)<0&&postExecutionProcessCtrl.processNames.push($scope.postExecutionProcess.process_name))})).catch((function(err){$scope.postExecutionProcess&&(postExecutionProcessCtrl.processName=$scope.postExecutionProcess.process_name)})),postExecutionProcessCtrl.postExecutionProcessChange=function(){var dataToSend={process_id:$scope.postExecutionProcess?$scope.postExecutionProcess.process_id:void 0,process_name:postExecutionProcessCtrl.processName,execution_order:postExecutionProcessCtrl.executionOrder,process_description:postExecutionProcessCtrl.description,be_id:$scope.data.beId},apiToCall=TDMService.postExecutionProcess;$scope.postExecutionProcess&&(apiToCall=TDMService.putExecutionProcess),apiToCall($scope.data.beId,$scope.data.beName,dataToSend).then((function(response){if("SUCCESS"==response.errorCode){if($scope.postExecutionProcess){var index=_.findIndex($scope.data.postExecutionData,{process_id:$scope.postExecutionProcess.process_id});index>=0&&($scope.data.postExecutionData[index]=dataToSend)}else{let temp=angular.copy(dataToSend);temp.process_id=response.result.id,$scope.data.postExecutionData.push(temp)}$scope.data.reloadData(),$scope.data.close(),toastr.success("Entity Group Query added successfully")}else response.message.indexOf('duplicate key value violates unique constraint "tdm_be_post_exe_process')>=0?postExecutionProcessCtrl.alert={type:"danger",msg:`Failed to add the Post Execution Process. The ${dataToSend.process_name} is already defined for the Business Entity. Please set a different Post Execution Process.`}:postExecutionProcessCtrl.alert={type:"danger",msg:"Failed to Add Post Execution Process ["+response.message+"]"}}))}},controllerAs:"postExecutionProcessCtrl"}}angular.module("TDM-FE").directive("postExecutionProcess",postExecutionProcess);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcG9zdEV4ZWN1dGlvblByb2Nlc3MvcG9zdEV4ZWN1dGlvblByb2Nlc3MuanMiXSwibmFtZXMiOlsicG9zdEV4ZWN1dGlvblByb2Nlc3MiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwic2NvcGUiLCJkYXRhIiwiY29udHJvbGxlciIsIiRzY29wZSIsIlRETVNlcnZpY2UiLCJBdXRoU2VydmljZSIsInRvYXN0ciIsIiR0aW1lb3V0IiwicG9zdEV4ZWN1dGlvblByb2Nlc3NDdHJsIiwidGhpcyIsImRlc2NyaXB0aW9uIiwicHJvY2Vzc05hbWUiLCJwcm9jZXNzX25hbWUiLCJleGVjdXRpb25PcmRlciIsImV4ZWN1dGlvbl9vcmRlciIsInByb2Nlc3NfZGVzY3JpcHRpb24iLCJnZXRHZW5lcmljQVBJIiwidGhlbiIsInJlc3BvbnNlIiwicHJvY2Vzc05hbWVzIiwiXyIsImZpbHRlciIsIk9iamVjdCIsImtleXMiLCJyZXN1bHQiLCJwb3N0RXhlY3V0aW9uRGF0YSIsImZpbmRJbmRleCIsImluZGV4T2YiLCJwdXNoIiwiY2F0Y2giLCJlcnIiLCJwb3N0RXhlY3V0aW9uUHJvY2Vzc0NoYW5nZSIsImRhdGFUb1NlbmQiLCJwcm9jZXNzX2lkIiwidW5kZWZpbmVkIiwiYmVfaWQiLCJiZUlkIiwiYXBpVG9DYWxsIiwicHV0RXhlY3V0aW9uUHJvY2VzcyIsImJlTmFtZSIsImVycm9yQ29kZSIsImluZGV4IiwidGVtcCIsImFuZ3VsYXIiLCJjb3B5IiwiaWQiLCJyZWxvYWREYXRhIiwiY2xvc2UiLCJzdWNjZXNzIiwibWVzc2FnZSIsImFsZXJ0IiwidHlwZSIsIm1zZyIsImNvbnRyb2xsZXJBcyIsIm1vZHVsZSIsImRpcmVjdGl2ZSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsdUJBa0ZMLE1BQU8sQ0FDSEMsU0FBVSxJQUNWQyxZQWxGVywrREFtRlhDLE1BQU8sQ0FDSEMsS0FBTSxJQUNOSixxQkFBc0IsS0FFMUJLLFdBckZhLFNBQVVDLE9BQU9DLFdBQVdDLFlBQVlDLE9BQU9DLFVBQzVELElBQUlDLHlCQUEyQkMsS0FDL0JELHlCQUF5QkUsWUFBYyxLQUNuQ1AsT0FBT04sdUJBQ1BXLHlCQUF5QkcsWUFBY1IsT0FBT04scUJBQXFCZSxhQUNuRUoseUJBQXlCSyxlQUFpQlYsT0FBT04scUJBQXFCaUIsZ0JBQ3RFTix5QkFBeUJFLFlBQWNQLE9BQU9OLHFCQUFxQmtCLHFCQUd2RVgsV0FBV1ksY0FBYywwQkFBMEJDLE1BQUssU0FBU0MsVUFDN0RWLHlCQUF5QlcsYUFBZUMsRUFBRUMsT0FBT0MsT0FBT0MsS0FBS0wsU0FBU00sUUFBUWIsZUFDdEVSLE9BQU9GLE1BQVFFLE9BQU9GLEtBQUt3QixtQkFBcUJMLEVBQUVNLFVBQVV2QixPQUFPRixLQUFLd0Isa0JBQWtCLENBQUNiLGFBQWNELGVBQWlCLElBSzlIUixPQUFPTix1QkFDUFcseUJBQXlCRyxZQUFjUixPQUFPTixxQkFBcUJlLGFBQy9ESix5QkFBeUJXLGFBQWFRLFFBQVF4QixPQUFPTixxQkFBcUJlLGNBQWdCLEdBQzFGSix5QkFBeUJXLGFBQWFTLEtBQUt6QixPQUFPTixxQkFBcUJlLGtCQUdoRmlCLE9BQU0sU0FBU0MsS0FDVjNCLE9BQU9OLHVCQUNQVyx5QkFBeUJHLFlBQWNSLE9BQU9OLHFCQUFxQmUsaUJBSTNFSix5QkFBeUJ1QiwyQkFBNkIsV0FDbEQsSUFBSUMsV0FBYSxDQUNiQyxXQUFhOUIsT0FBT04scUJBQXVCTSxPQUFPTixxQkFBcUJvQyxnQkFBYUMsRUFDcEZ0QixhQUFjSix5QkFBeUJHLFlBQ3ZDRyxnQkFBaUJOLHlCQUF5QkssZUFDMUNFLG9CQUFxQlAseUJBQXlCRSxZQUM5Q3lCLE1BQU9oQyxPQUFPRixLQUFLbUMsTUFFbkJDLFVBQVlqQyxXQUFXUCxxQkFDdkJNLE9BQU9OLHVCQUNQd0MsVUFBWWpDLFdBQVdrQyxxQkFFM0JELFVBQVVsQyxPQUFPRixLQUFLbUMsS0FBTWpDLE9BQU9GLEtBQUtzQyxPQUFRUCxZQUFZZixNQUFLLFNBQVVDLFVBQ3ZFLEdBQTBCLFdBQXRCQSxTQUFTc0IsVUFBd0IsQ0FDakMsR0FBSXJDLE9BQU9OLHFCQUFxQixDQUM1QixJQUFJNEMsTUFBUXJCLEVBQUVNLFVBQVV2QixPQUFPRixLQUFLd0Isa0JBQWtCLENBQUNRLFdBQWE5QixPQUFPTixxQkFBcUJvQyxhQUM3RlEsT0FBUyxJQUNSdEMsT0FBT0YsS0FBS3dCLGtCQUFrQmdCLE9BQVNULGdCQUczQyxDQUNBLElBQUlVLEtBQU1DLFFBQVFDLEtBQUtaLFlBQ3ZCVSxLQUFLVCxXQUFZZixTQUFTTSxPQUFPcUIsR0FDakMxQyxPQUFPRixLQUFLd0Isa0JBQWtCRyxLQUFLYyxNQUV2Q3ZDLE9BQU9GLEtBQUs2QyxhQUNaM0MsT0FBT0YsS0FBSzhDLFFBQ1p6QyxPQUFPMEMsUUFBUSw4Q0FHWDlCLFNBQVMrQixRQUFRdEIsUUFBUSw0RUFBOEUsRUFDdkduQix5QkFBeUIwQyxNQUFRLENBQzdCQyxLQUFNLFNBQVVDLElBQUssaURBQWlEcEIsV0FBV3BCLDJHQUlyRkoseUJBQXlCMEMsTUFBUSxDQUM3QkMsS0FBTSxTQUFVQyxJQUFLLHlDQUEyQ2xDLFNBQVMrQixRQUFVLFVBcUJ2R0ksYUFBYyw0QkFLdEJWLFFBQ0tXLE9BQU8sVUFDUEMsVUFBVSx1QkFBd0IxRCIsImZpbGUiOiJjb21wb25lbnRzL3Bvc3RFeGVjdXRpb25Qcm9jZXNzL3Bvc3RFeGVjdXRpb25Qcm9jZXNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcG9zdEV4ZWN1dGlvblByb2Nlc3MgKCl7XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBcImpzL2NvbXBvbmVudHMvcG9zdEV4ZWN1dGlvblByb2Nlc3MvcG9zdEV4ZWN1dGlvblByb2Nlc3MuaHRtbFwiO1xuXG4gICAgdmFyIGNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLFRETVNlcnZpY2UsQXV0aFNlcnZpY2UsdG9hc3RyLCR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwgPSB0aGlzO1xuICAgICAgICBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwuZGVzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICBpZiAoJHNjb3BlLnBvc3RFeGVjdXRpb25Qcm9jZXNzKXtcbiAgICAgICAgICAgIHBvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybC5wcm9jZXNzTmFtZSA9ICRzY29wZS5wb3N0RXhlY3V0aW9uUHJvY2Vzcy5wcm9jZXNzX25hbWU7XG4gICAgICAgICAgICBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwuZXhlY3V0aW9uT3JkZXIgPSAkc2NvcGUucG9zdEV4ZWN1dGlvblByb2Nlc3MuZXhlY3V0aW9uX29yZGVyO1xuICAgICAgICAgICAgcG9zdEV4ZWN1dGlvblByb2Nlc3NDdHJsLmRlc2NyaXB0aW9uID0gJHNjb3BlLnBvc3RFeGVjdXRpb25Qcm9jZXNzLnByb2Nlc3NfZGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFRETVNlcnZpY2UuZ2V0R2VuZXJpY0FQSSgncG9zdGV4ZWN1dGlvbnByb2Nlc3NlcycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgcG9zdEV4ZWN1dGlvblByb2Nlc3NDdHJsLnByb2Nlc3NOYW1lcyA9IF8uZmlsdGVyKE9iamVjdC5rZXlzKHJlc3BvbnNlLnJlc3VsdCkscHJvY2Vzc05hbWUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGF0YSAmJiAkc2NvcGUuZGF0YS5wb3N0RXhlY3V0aW9uRGF0YSAmJiBfLmZpbmRJbmRleCgkc2NvcGUuZGF0YS5wb3N0RXhlY3V0aW9uRGF0YSx7cHJvY2Vzc19uYW1lOiBwcm9jZXNzTmFtZX0pID49IDApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBvc3RFeGVjdXRpb25Qcm9jZXNzKXtcbiAgICAgICAgICAgICAgICBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwucHJvY2Vzc05hbWUgPSAkc2NvcGUucG9zdEV4ZWN1dGlvblByb2Nlc3MucHJvY2Vzc19uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwucHJvY2Vzc05hbWVzLmluZGV4T2YoJHNjb3BlLnBvc3RFeGVjdXRpb25Qcm9jZXNzLnByb2Nlc3NfbmFtZSkgPCAwKXtcbiAgICAgICAgICAgICAgICAgICAgcG9zdEV4ZWN1dGlvblByb2Nlc3NDdHJsLnByb2Nlc3NOYW1lcy5wdXNoKCRzY29wZS5wb3N0RXhlY3V0aW9uUHJvY2Vzcy5wcm9jZXNzX25hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgIGlmICgkc2NvcGUucG9zdEV4ZWN1dGlvblByb2Nlc3Mpe1xuICAgICAgICAgICAgICAgIHBvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybC5wcm9jZXNzTmFtZSA9ICRzY29wZS5wb3N0RXhlY3V0aW9uUHJvY2Vzcy5wcm9jZXNzX25hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcG9zdEV4ZWN1dGlvblByb2Nlc3NDdHJsLnBvc3RFeGVjdXRpb25Qcm9jZXNzQ2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBkYXRhVG9TZW5kID0ge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NfaWQgOiAkc2NvcGUucG9zdEV4ZWN1dGlvblByb2Nlc3MgPyAkc2NvcGUucG9zdEV4ZWN1dGlvblByb2Nlc3MucHJvY2Vzc19pZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBwcm9jZXNzX25hbWU6IHBvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybC5wcm9jZXNzTmFtZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IHBvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybC5leGVjdXRpb25PcmRlcixcbiAgICAgICAgICAgICAgICBwcm9jZXNzX2Rlc2NyaXB0aW9uOiBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgYmVfaWQ6ICRzY29wZS5kYXRhLmJlSWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXBpVG9DYWxsID0gVERNU2VydmljZS5wb3N0RXhlY3V0aW9uUHJvY2VzcztcbiAgICAgICAgICAgIGlmICgkc2NvcGUucG9zdEV4ZWN1dGlvblByb2Nlc3Mpe1xuICAgICAgICAgICAgICAgIGFwaVRvQ2FsbCA9IFRETVNlcnZpY2UucHV0RXhlY3V0aW9uUHJvY2VzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwaVRvQ2FsbCgkc2NvcGUuZGF0YS5iZUlkLCAkc2NvcGUuZGF0YS5iZU5hbWUsIGRhdGFUb1NlbmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBcIlNVQ0NFU1NcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBvc3RFeGVjdXRpb25Qcm9jZXNzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF8uZmluZEluZGV4KCRzY29wZS5kYXRhLnBvc3RFeGVjdXRpb25EYXRhLHtwcm9jZXNzX2lkIDogJHNjb3BlLnBvc3RFeGVjdXRpb25Qcm9jZXNzLnByb2Nlc3NfaWR9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID49IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnBvc3RFeGVjdXRpb25EYXRhW2luZGV4XSA9IGRhdGFUb1NlbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wID1hbmd1bGFyLmNvcHkoZGF0YVRvU2VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHJvY2Vzc19pZD0gcmVzcG9uc2UucmVzdWx0LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEucG9zdEV4ZWN1dGlvbkRhdGEucHVzaCh0ZW1wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5yZWxvYWREYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKFwiRW50aXR5IEdyb3VwIFF1ZXJ5IGFkZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlLmluZGV4T2YoJ2R1cGxpY2F0ZSBrZXkgdmFsdWUgdmlvbGF0ZXMgdW5pcXVlIGNvbnN0cmFpbnQgXCJ0ZG1fYmVfcG9zdF9leGVfcHJvY2VzcycpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybC5hbGVydCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywgbXNnOiBgRmFpbGVkIHRvIGFkZCB0aGUgUG9zdCBFeGVjdXRpb24gUHJvY2Vzcy4gVGhlICR7ZGF0YVRvU2VuZC5wcm9jZXNzX25hbWV9IGlzIGFscmVhZHkgZGVmaW5lZCBmb3IgdGhlIEJ1c2luZXNzIEVudGl0eS4gUGxlYXNlIHNldCBhIGRpZmZlcmVudCBQb3N0IEV4ZWN1dGlvbiBQcm9jZXNzLmBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybC5hbGVydCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywgbXNnOiAnRmFpbGVkIHRvIEFkZCBQb3N0IEV4ZWN1dGlvbiBQcm9jZXNzIFsnICsgcmVzcG9uc2UubWVzc2FnZSArICddJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvLyBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwuY2xvc2VBbGVydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gICAgIGRlbGV0ZSBwb3N0RXhlY3V0aW9uUHJvY2Vzc0N0cmwuYWxlcnQ7XG4gICAgICAgIC8vIH07XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6IHRlbXBsYXRlLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogJz0nLFxuICAgICAgICAgICAgcG9zdEV4ZWN1dGlvblByb2Nlc3M6IFwiPVwiXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6IGNvbnRyb2xsZXIsXG4gICAgICAgIGNvbnRyb2xsZXJBcyA6J3Bvc3RFeGVjdXRpb25Qcm9jZXNzQ3RybCdcbiAgICB9O1xufVxuXG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdURE0tRkUnKVxuICAgIC5kaXJlY3RpdmUoJ3Bvc3RFeGVjdXRpb25Qcm9jZXNzJywgcG9zdEV4ZWN1dGlvblByb2Nlc3MpO1xuIl19
