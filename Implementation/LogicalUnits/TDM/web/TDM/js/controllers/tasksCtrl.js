var run_once_flag=!0;function tasksCtrl($scope,$rootScope,AuthService,BreadCrumbsService,$timeout,$state){run_once_flag&&($rootScope.reload_interval=5e3,run_once_flag=!1);var tasksCtrl=this;tasksCtrl.pageDisplay="tasksTable",$rootScope.inter_flag=!0,tasksCtrl.openTasks=function(reload){reload&&$state.reload(),tasksCtrl.tasksData={openTask:tasksCtrl.openTask,openNewTask:tasksCtrl.openNewTask,openTaskHistory:tasksCtrl.openTaskHistory,openTaskSummary:tasksCtrl.openTaskSummary},tasksCtrl.pageDisplay="tasksTable",BreadCrumbsService.breadCrumbChange(1)},tasksCtrl.openEntitiesExecStats=function(taskExecId,type,fabricExecutionId,selectionMethod,refCount){tasksCtrl.tasksData={openTask:tasksCtrl.openTask,openNewTask:tasksCtrl.openNewTask,openTaskHistory:tasksCtrl.openTaskHistory,openTaskSummary:tasksCtrl.openTaskSummary,taskExecId:taskExecId,fabricExecutionId:fabricExecutionId,selectionMethod:selectionMethod,refCount:refCount,type:type},tasksCtrl.pageDisplay="taskStats",BreadCrumbsService.breadCrumbChange(3)},tasksCtrl.openTask=function(task,copy,tasks){tasksCtrl.taskData={mode:"update",task:task,openTasks:tasksCtrl.openTasks,copy:copy,tasks:tasks},tasksCtrl.pageDisplay="task"},tasksCtrl.openTaskHistory=function(task,exec_id){tasksCtrl.taskData={task:task,openTasks:tasksCtrl.openTasks,openTaskHistory:tasksCtrl.openTaskHistory,exec_id:exec_id,pageDisplay:"taskHistory"},tasksCtrl.pageDisplay="taskSummary"},tasksCtrl.openTaskSummary=function(task){$timeout((function(){tasksCtrl.taskData={task:task,openTaskHistory:tasksCtrl.openTaskHistory,pageDisplay:"taskSummary"},tasksCtrl.pageDisplay="taskSummary"}))},tasksCtrl.openNewTask=function(tasks,copyTask){tasksCtrl.taskData={mode:"create",task:copyTask,openTasks:tasksCtrl.openTasks,tasks:tasks},tasksCtrl.pageDisplay="newTask"},BreadCrumbsService.breadCrumbChange(0),BreadCrumbsService.push({},"TASKS",(function(){tasksCtrl.openTasks()}));localStorage.getItem(AuthService.getUsername());$rootScope.$on("refreshPage",(function(){!tasksCtrl.taskData||"taskHistory"!==tasksCtrl.taskData.pageDisplay&&"none"!==tasksCtrl.taskData.pageDisplay||(tasksCtrl.reloadTimeout&&$timeout.cancel(tasksCtrl.reloadTimeout),tasksCtrl.reloadTimeout=$timeout(()=>{localStorage.getItem(AuthService.getUsername()),console.log("broadcasted");var pageDisplay=tasksCtrl.pageDisplay;tasksCtrl.pageDisplay="none",$timeout((function(){tasksCtrl.pageDisplay=pageDisplay}),300)},500))})),tasksCtrl.tasksData={openTask:tasksCtrl.openTask,openNewTask:tasksCtrl.openNewTask,openTaskHistory:tasksCtrl.openTaskHistory,openTaskSummary:tasksCtrl.openTaskSummary},tasksCtrl.pageDisplay="tasksTable"}angular.module("TDM-FE").controller("tasksCtrl",tasksCtrl);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL3Rhc2tzQ3RybC5qcyJdLCJuYW1lcyI6WyJydW5fb25jZV9mbGFnIiwidGFza3NDdHJsIiwiJHNjb3BlIiwiJHJvb3RTY29wZSIsIkF1dGhTZXJ2aWNlIiwiQnJlYWRDcnVtYnNTZXJ2aWNlIiwiJHRpbWVvdXQiLCIkc3RhdGUiLCJyZWxvYWRfaW50ZXJ2YWwiLCJ0aGlzIiwicGFnZURpc3BsYXkiLCJpbnRlcl9mbGFnIiwib3BlblRhc2tzIiwicmVsb2FkIiwidGFza3NEYXRhIiwib3BlblRhc2siLCJvcGVuTmV3VGFzayIsIm9wZW5UYXNrSGlzdG9yeSIsIm9wZW5UYXNrU3VtbWFyeSIsImJyZWFkQ3J1bWJDaGFuZ2UiLCJvcGVuRW50aXRpZXNFeGVjU3RhdHMiLCJ0YXNrRXhlY0lkIiwidHlwZSIsImZhYnJpY0V4ZWN1dGlvbklkIiwic2VsZWN0aW9uTWV0aG9kIiwicmVmQ291bnQiLCJ0YXNrIiwiY29weSIsInRhc2tzIiwidGFza0RhdGEiLCJtb2RlIiwiZXhlY19pZCIsImNvcHlUYXNrIiwicHVzaCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJnZXRVc2VybmFtZSIsIiRvbiIsInJlbG9hZFRpbWVvdXQiLCJjYW5jZWwiLCJjb25zb2xlIiwibG9nIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLGVBQWdCLEVBRXBCLFNBQVNDLFVBQVdDLE9BQVFDLFdBQVlDLFlBQWFDLG1CQUFtQkMsU0FBU0MsUUFFekVQLGdCQUdBRyxXQUFXSyxnQkFBa0IsSUFDN0JSLGVBQWdCLEdBR3BCLElBQUlDLFVBQVlRLEtBQ2hCUixVQUFVUyxZQUFjLGFBQ3hCUCxXQUFXUSxZQUFhLEVBT3hCVixVQUFVVyxVQUFZLFNBQVVDLFFBQ3hCQSxRQUNBTixPQUFPTSxTQUVYWixVQUFVYSxVQUFZLENBQ2xCQyxTQUFVZCxVQUFVYyxTQUNwQkMsWUFBYWYsVUFBVWUsWUFDdkJDLGdCQUFpQmhCLFVBQVVnQixnQkFDM0JDLGdCQUFpQmpCLFVBQVVpQixpQkFFL0JqQixVQUFVUyxZQUFjLGFBQ3hCTCxtQkFBbUJjLGlCQUFpQixJQUl4Q2xCLFVBQVVtQixzQkFBd0IsU0FBVUMsV0FBV0MsS0FBS0Msa0JBQWtCQyxnQkFBZ0JDLFVBRTFGeEIsVUFBVWEsVUFBWSxDQUNsQkMsU0FBVWQsVUFBVWMsU0FDcEJDLFlBQWFmLFVBQVVlLFlBQ3ZCQyxnQkFBaUJoQixVQUFVZ0IsZ0JBQzNCQyxnQkFBaUJqQixVQUFVaUIsZ0JBQzNCRyxXQUFXQSxXQUNYRSxrQkFBa0JBLGtCQUNsQkMsZ0JBQWdCQSxnQkFDaEJDLFNBQVdBLFNBQ1hILEtBQU1BLE1BRVZyQixVQUFVUyxZQUFjLFlBQ3hCTCxtQkFBbUJjLGlCQUFpQixJQUd4Q2xCLFVBQVVjLFNBQVcsU0FBU1csS0FBS0MsS0FBS0MsT0FDcEMzQixVQUFVNEIsU0FBVyxDQUNqQkMsS0FBTyxTQUNQSixLQUFPQSxLQUNQZCxVQUFZWCxVQUFVVyxVQUN0QmUsS0FBT0EsS0FDUEMsTUFBUUEsT0FFWjNCLFVBQVVTLFlBQWMsUUFHNUJULFVBQVVnQixnQkFBa0IsU0FBU1MsS0FBTUssU0FDdkM5QixVQUFVNEIsU0FBVyxDQUNqQkgsS0FBT0EsS0FDUGQsVUFBWVgsVUFBVVcsVUFDdEJLLGdCQUFpQmhCLFVBQVVnQixnQkFDM0JjLFFBQVNBLFFBQ1RyQixZQUFhLGVBR2pCVCxVQUFVUyxZQUFjLGVBRzVCVCxVQUFVaUIsZ0JBQWtCLFNBQVNRLE1BQ2pDcEIsVUFBUyxXQUNMTCxVQUFVNEIsU0FBVyxDQUNqQkgsS0FBT0EsS0FDUFQsZ0JBQWlCaEIsVUFBVWdCLGdCQUMzQlAsWUFBYSxlQUVqQlQsVUFBVVMsWUFBYyxrQkFJaENULFVBQVVlLFlBQWMsU0FBU1ksTUFBTUksVUFDbkMvQixVQUFVNEIsU0FBVyxDQUNqQkMsS0FBTyxTQUNQSixLQUFPTSxTQUNQcEIsVUFBWVgsVUFBVVcsVUFDdEJnQixNQUFRQSxPQUVaM0IsVUFBVVMsWUFBYyxXQUc1QkwsbUJBQW1CYyxpQkFBaUIsR0FDcENkLG1CQUFtQjRCLEtBQUssR0FBRyxTQUFRLFdBQy9CaEMsVUFBVVcsZUFTUXNCLGFBQWFDLFFBQVEvQixZQUFZZ0MsZUFxQnZEakMsV0FBV2tDLElBQUksZUFuQmYsWUFDT3BDLFVBQVU0QixVQUErQyxnQkFBbkM1QixVQUFVNEIsU0FBU25CLGFBQ1QsU0FBbkNULFVBQVU0QixTQUFTbkIsY0FHakJULFVBQVVxQyxlQUNWaEMsU0FBU2lDLE9BQU90QyxVQUFVcUMsZUFFOUJyQyxVQUFVcUMsY0FBZ0JoQyxTQUFTLEtBQ2I0QixhQUFhQyxRQUFRL0IsWUFBWWdDLGVBQ25ESSxRQUFRQyxJQUFJLGVBQ1osSUFBSS9CLFlBQWNULFVBQVVTLFlBQzVCVCxVQUFVUyxZQUFjLE9BQ3hCSixVQUFTLFdBQ1BMLFVBQVVTLFlBQWNBLGNBQ3hCLE1BQ0gsU0FLTFQsVUFBVWEsVUFBWSxDQUNsQkMsU0FBV2QsVUFBVWMsU0FDckJDLFlBQWNmLFVBQVVlLFlBQ3hCQyxnQkFBa0JoQixVQUFVZ0IsZ0JBQzVCQyxnQkFBaUJqQixVQUFVaUIsaUJBRS9CakIsVUFBVVMsWUFBYyxhQUk1QmdDLFFBQ0tDLE9BQU8sVUFDUEMsV0FBVyxZQUFjM0MiLCJmaWxlIjoiY29udHJvbGxlcnMvdGFza3NDdHJsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgcnVuX29uY2VfZmxhZyA9IHRydWU7XG5cbmZ1bmN0aW9uIHRhc2tzQ3RybCAoJHNjb3BlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSwgQnJlYWRDcnVtYnNTZXJ2aWNlLCR0aW1lb3V0LCRzdGF0ZSkge1xuXG4gICAgaWYgKHJ1bl9vbmNlX2ZsYWcpIHtcblxuICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShBdXRoU2VydmljZS5nZXRVc2VybmFtZSgpLCAxMDAwMCk7XG4gICAgICAgICRyb290U2NvcGUucmVsb2FkX2ludGVydmFsID0gNTAwMDtcbiAgICAgICAgcnVuX29uY2VfZmxhZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciB0YXNrc0N0cmwgPSB0aGlzO1xuICAgIHRhc2tzQ3RybC5wYWdlRGlzcGxheSA9ICd0YXNrc1RhYmxlJztcbiAgICAkcm9vdFNjb3BlLmludGVyX2ZsYWcgPSB0cnVlO1xuXG4gICAgLy8gdGFza3NDdHJsLm9wZW5FbnRpdGllc0V4ZWNTdGF0cyA9IGZ1bmN0aW9uICh0YXNrRW50aXR5KSB7XG4gICAgLy9cbiAgICAvLyAgICAgdGFza3NDdHJsLnBhZ2VEaXNwbGF5ID0gJ3Rhc2tIaXN0b3J5JztcbiAgICAvLyB9XG5cbiAgICB0YXNrc0N0cmwub3BlblRhc2tzID0gZnVuY3Rpb24gKHJlbG9hZCkge1xuICAgICAgICBpZiAocmVsb2FkKSB7XG4gICAgICAgICAgICAkc3RhdGUucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGFza3NDdHJsLnRhc2tzRGF0YSA9IHtcbiAgICAgICAgICAgIG9wZW5UYXNrOiB0YXNrc0N0cmwub3BlblRhc2ssXG4gICAgICAgICAgICBvcGVuTmV3VGFzazogdGFza3NDdHJsLm9wZW5OZXdUYXNrLFxuICAgICAgICAgICAgb3BlblRhc2tIaXN0b3J5OiB0YXNrc0N0cmwub3BlblRhc2tIaXN0b3J5LFxuICAgICAgICAgICAgb3BlblRhc2tTdW1tYXJ5OiB0YXNrc0N0cmwub3BlblRhc2tTdW1tYXJ5XG4gICAgICAgIH07XG4gICAgICAgIHRhc2tzQ3RybC5wYWdlRGlzcGxheSA9ICd0YXNrc1RhYmxlJztcbiAgICAgICAgQnJlYWRDcnVtYnNTZXJ2aWNlLmJyZWFkQ3J1bWJDaGFuZ2UoMSk7XG4gICAgfTtcblxuXG4gICAgdGFza3NDdHJsLm9wZW5FbnRpdGllc0V4ZWNTdGF0cyA9IGZ1bmN0aW9uICh0YXNrRXhlY0lkLHR5cGUsZmFicmljRXhlY3V0aW9uSWQsc2VsZWN0aW9uTWV0aG9kLHJlZkNvdW50KVxuICAgIHtcbiAgICAgICAgdGFza3NDdHJsLnRhc2tzRGF0YSA9IHtcbiAgICAgICAgICAgIG9wZW5UYXNrOiB0YXNrc0N0cmwub3BlblRhc2ssXG4gICAgICAgICAgICBvcGVuTmV3VGFzazogdGFza3NDdHJsLm9wZW5OZXdUYXNrLFxuICAgICAgICAgICAgb3BlblRhc2tIaXN0b3J5OiB0YXNrc0N0cmwub3BlblRhc2tIaXN0b3J5LFxuICAgICAgICAgICAgb3BlblRhc2tTdW1tYXJ5OiB0YXNrc0N0cmwub3BlblRhc2tTdW1tYXJ5LFxuICAgICAgICAgICAgdGFza0V4ZWNJZDp0YXNrRXhlY0lkLFxuICAgICAgICAgICAgZmFicmljRXhlY3V0aW9uSWQ6ZmFicmljRXhlY3V0aW9uSWQsXG4gICAgICAgICAgICBzZWxlY3Rpb25NZXRob2Q6c2VsZWN0aW9uTWV0aG9kLFxuICAgICAgICAgICAgcmVmQ291bnQgOiByZWZDb3VudCxcbiAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgdGFza3NDdHJsLnBhZ2VEaXNwbGF5ID0gJ3Rhc2tTdGF0cyc7XG4gICAgICAgIEJyZWFkQ3J1bWJzU2VydmljZS5icmVhZENydW1iQ2hhbmdlKDMpO1xuXG4gICAgfVxuICAgIHRhc2tzQ3RybC5vcGVuVGFzayA9IGZ1bmN0aW9uKHRhc2ssY29weSx0YXNrcyl7XG4gICAgICAgIHRhc2tzQ3RybC50YXNrRGF0YSA9IHtcbiAgICAgICAgICAgIG1vZGUgOiBcInVwZGF0ZVwiLFxuICAgICAgICAgICAgdGFzayA6IHRhc2ssXG4gICAgICAgICAgICBvcGVuVGFza3MgOiB0YXNrc0N0cmwub3BlblRhc2tzLFxuICAgICAgICAgICAgY29weSA6IGNvcHksXG4gICAgICAgICAgICB0YXNrcyA6IHRhc2tzLFxuICAgICAgICB9O1xuICAgICAgICB0YXNrc0N0cmwucGFnZURpc3BsYXkgPSAndGFzayc7XG4gICAgfTtcblxuICAgIHRhc2tzQ3RybC5vcGVuVGFza0hpc3RvcnkgPSBmdW5jdGlvbih0YXNrLCBleGVjX2lkKXtcbiAgICAgICAgdGFza3NDdHJsLnRhc2tEYXRhID0ge1xuICAgICAgICAgICAgdGFzayA6IHRhc2ssXG4gICAgICAgICAgICBvcGVuVGFza3MgOiB0YXNrc0N0cmwub3BlblRhc2tzLFxuICAgICAgICAgICAgb3BlblRhc2tIaXN0b3J5OiB0YXNrc0N0cmwub3BlblRhc2tIaXN0b3J5LFxuICAgICAgICAgICAgZXhlY19pZDogZXhlY19pZCxcbiAgICAgICAgICAgIHBhZ2VEaXNwbGF5OiAndGFza0hpc3RvcnknXG5cbiAgICAgICAgfTtcbiAgICAgICAgdGFza3NDdHJsLnBhZ2VEaXNwbGF5ID0gJ3Rhc2tTdW1tYXJ5JztcbiAgICB9O1xuXG4gICAgdGFza3NDdHJsLm9wZW5UYXNrU3VtbWFyeSA9IGZ1bmN0aW9uKHRhc2spe1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGFza3NDdHJsLnRhc2tEYXRhID0ge1xuICAgICAgICAgICAgICAgIHRhc2sgOiB0YXNrLFxuICAgICAgICAgICAgICAgIG9wZW5UYXNrSGlzdG9yeTogdGFza3NDdHJsLm9wZW5UYXNrSGlzdG9yeSxcbiAgICAgICAgICAgICAgICBwYWdlRGlzcGxheTogJ3Rhc2tTdW1tYXJ5J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRhc2tzQ3RybC5wYWdlRGlzcGxheSA9ICd0YXNrU3VtbWFyeSc7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0YXNrc0N0cmwub3Blbk5ld1Rhc2sgPSBmdW5jdGlvbih0YXNrcyxjb3B5VGFzayl7XG4gICAgICAgIHRhc2tzQ3RybC50YXNrRGF0YSA9IHtcbiAgICAgICAgICAgIG1vZGUgOiBcImNyZWF0ZVwiLFxuICAgICAgICAgICAgdGFzayA6IGNvcHlUYXNrLFxuICAgICAgICAgICAgb3BlblRhc2tzIDogdGFza3NDdHJsLm9wZW5UYXNrcyxcbiAgICAgICAgICAgIHRhc2tzIDogdGFza3NcbiAgICAgICAgfTtcbiAgICAgICAgdGFza3NDdHJsLnBhZ2VEaXNwbGF5ID0gJ25ld1Rhc2snO1xuICAgIH07XG5cbiAgICBCcmVhZENydW1ic1NlcnZpY2UuYnJlYWRDcnVtYkNoYW5nZSgwKTtcbiAgICBCcmVhZENydW1ic1NlcnZpY2UucHVzaCh7fSwnVEFTS1MnLGZ1bmN0aW9uKCl7XG4gICAgICAgIHRhc2tzQ3RybC5vcGVuVGFza3MoKTtcbiAgICB9KTtcblxuICAgIC8vIGlmKCAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlbG9hZEludGVydmFsJykpIHtcbiAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWxvYWRJbnRlcnZhbCcsIDEwMDAwKTtcbiAgICAvLyB9XG5cdC8vIGlmKCAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oQXV0aFNlcnZpY2UuZ2V0VXNlcm5hbWUoKSkpIHtcbiAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEF1dGhTZXJ2aWNlLmdldFVzZXJuYW1lKCksIDEwMDAwKTtcbiAgICAvLyB9XG4gICAgdmFyIHJlbG9hZF9pbnRlcnZhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEF1dGhTZXJ2aWNlLmdldFVzZXJuYW1lKCkpO1xuXG4gICAgZnVuY3Rpb24gcmVsb2FkUGFnZSgpe1xuICAgICAgaWYgKCF0YXNrc0N0cmwudGFza0RhdGEgfHwgdGFza3NDdHJsLnRhc2tEYXRhLnBhZ2VEaXNwbGF5ICE9PSAndGFza0hpc3RvcnknICYmIFxuICAgICAgICB0YXNrc0N0cmwudGFza0RhdGEucGFnZURpc3BsYXkgIT09ICdub25lJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGFza3NDdHJsLnJlbG9hZFRpbWVvdXQpIHtcbiAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGFza3NDdHJsLnJlbG9hZFRpbWVvdXQpXG4gICAgICB9XG4gICAgICB0YXNrc0N0cmwucmVsb2FkVGltZW91dCA9ICR0aW1lb3V0KCgpID0+IHtcbiAgICAgICAgICByZWxvYWRfaW50ZXJ2YWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShBdXRoU2VydmljZS5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnYnJvYWRjYXN0ZWQnKTtcbiAgICAgICAgICB2YXIgcGFnZURpc3BsYXkgPSB0YXNrc0N0cmwucGFnZURpc3BsYXk7XG4gICAgICAgICAgdGFza3NDdHJsLnBhZ2VEaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0YXNrc0N0cmwucGFnZURpc3BsYXkgPSBwYWdlRGlzcGxheTtcbiAgICAgICAgICB9LDMwMCk7XG4gICAgICB9LCA1MDApO1xuICAgIH1cblxuICAgICRyb290U2NvcGUuJG9uKCdyZWZyZXNoUGFnZScsIHJlbG9hZFBhZ2UpO1xuXG4gICAgdGFza3NDdHJsLnRhc2tzRGF0YSA9IHtcbiAgICAgICAgb3BlblRhc2sgOiB0YXNrc0N0cmwub3BlblRhc2ssXG4gICAgICAgIG9wZW5OZXdUYXNrIDogdGFza3NDdHJsLm9wZW5OZXdUYXNrLFxuICAgICAgICBvcGVuVGFza0hpc3RvcnkgOiB0YXNrc0N0cmwub3BlblRhc2tIaXN0b3J5LFxuICAgICAgICBvcGVuVGFza1N1bW1hcnk6IHRhc2tzQ3RybC5vcGVuVGFza1N1bW1hcnlcbiAgICB9O1xuICAgIHRhc2tzQ3RybC5wYWdlRGlzcGxheSA9ICd0YXNrc1RhYmxlJztcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnVERNLUZFJylcbiAgICAuY29udHJvbGxlcigndGFza3NDdHJsJyAsIHRhc2tzQ3RybCk7Il19
