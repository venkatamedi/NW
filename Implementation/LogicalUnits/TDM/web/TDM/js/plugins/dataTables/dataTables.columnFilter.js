!function($){$.fn.columnFilter=function(options){var asInitVals,i,label,th,sRangeFormat="From {from} to {to}",afnSearch_=new Array,aiCustomSearch_Indexes=new Array,fnOnFiltered=function(){};function _fnGetColumnValues(oSettings,iColumn,bUnique,bFiltered,bIgnoreEmpty){if(void 0===iColumn)return new Array;var aiRows;void 0===bUnique&&(bUnique=!0),void 0===bFiltered&&(bFiltered=!0),void 0===bIgnoreEmpty&&(bIgnoreEmpty=!0),aiRows=1==bFiltered?oSettings.aiDisplay:oSettings.aiDisplayMaster;for(var asResultData=new Array,i=0,c=aiRows.length;i<c;i++){var iRow=aiRows[i],sValue=oTable.fnGetData(iRow)[iColumn];1==bIgnoreEmpty&&0==sValue.length||(1==bUnique&&jQuery.inArray(sValue,asResultData)>-1||asResultData.push(sValue))}return asResultData.sort()}function _fnColumnIndex(iColumnIndex){return properties.bUseColVis?iColumnIndex:oTable.fnSettings().oApi._fnVisibleToColumnIndex(oTable.fnSettings(),iColumnIndex)}function fnCreateInput(oTable,regex,smart,bIsNumber,iFilterLength,iMaxLenght){var sCSSClass="text_filter form-control";bIsNumber&&(sCSSClass="number_filter form-control"),label=label.replace(/(^\s*)|(\s*$)/g,"");var currentFilter=oTable.fnSettings().aoPreSearchCols[i].sSearch,search_init="search_init ",inputvalue=label;""!=currentFilter&&"^"!=currentFilter&&(inputvalue=bIsNumber&&"^"==currentFilter.charAt(0)?currentFilter.substr(1):currentFilter,search_init="");var input=$('<input type="text" class="'+search_init+sCSSClass+'" value="'+inputvalue+'" rel="'+i+'"/>');null!=iMaxLenght&&-1!=iMaxLenght&&input.attr("maxlength",iMaxLenght),th.html(input),bIsNumber?th.wrapInner('<span class="filter_column filter_number" />'):th.wrapInner('<span class="filter_column filter_text" />'),asInitVals[i]=label;var index=i;bIsNumber&&!oTable.fnSettings().oFeatures.bServerSide?input.keyup((function(){oTable.fnFilter("^"+this.value,_fnColumnIndex(index),!0,!1),fnOnFiltered()})):input.keyup((function(){if(oTable.fnSettings().oFeatures.bServerSide&&0!=iFilterLength){oTable.fnSettings().aoPreSearchCols[index].sSearch;var iLastFilterLength=$(this).data("dt-iLastFilterLength");void 0===iLastFilterLength&&(iLastFilterLength=0);var iCurrentFilterLength=this.value.length;if(Math.abs(iCurrentFilterLength-iLastFilterLength)<iFilterLength)return;$(this).data("dt-iLastFilterLength",iCurrentFilterLength)}oTable.fnFilter(this.value,_fnColumnIndex(index),regex,smart),fnOnFiltered()})),input.focus((function(){$(this).hasClass("search_init")&&($(this).removeClass("search_init"),this.value="")})),input.blur((function(){""==this.value&&($(this).addClass("search_init"),this.value=asInitVals[index])}))}function fnCreateColumnSelect(oTable,aData,iColumn,nTh,sLabel,bRegex,oSelected,bMultiselect){null==aData&&(aData=_fnGetColumnValues(oTable.fnSettings(),iColumn,!0,!1,!0));var index=iColumn,currentFilter=oTable.fnSettings().aoPreSearchCols[i].sSearch;null!=currentFilter&&""!=currentFilter||(currentFilter=oSelected);var r='<select class="search_init select_filter form-control" rel="'+i+'"><option value="" class="search_init">'+sLabel+"</option>";bMultiselect&&(r='<select class="search_init select_filter form-control" rel="'+i+'" multiple>');var j=0,iLen=aData.length;for(j=0;j<iLen;j++)if("object"!=typeof aData[j]){var selected="";escape(aData[j])!=currentFilter&&escape(aData[j])!=escape(currentFilter)||(selected="selected "),r+="<option "+selected+' value="'+escape(aData[j])+'">'+aData[j]+"</option>"}else{selected="";bRegex?(aData[j].value==currentFilter&&(selected="selected "),r+="<option "+selected+'value="'+aData[j].value+'">'+aData[j].label+"</option>"):(escape(aData[j].value)==currentFilter&&(selected="selected "),r+="<option "+selected+'value="'+escape(aData[j].value)+'">'+aData[j].label+"</option>")}var select=$(r+"</select>");nTh.html(select),nTh.wrapInner('<span class="filter_column filter_select" />'),bMultiselect?select.change((function(){""!=$(this).val()?$(this).removeClass("search_init"):$(this).addClass("search_init");var selectedOptions=$(this).val(),asEscapedFilters=[];if(null==selectedOptions||selectedOptions==[])var re="^(.*)$";else{$.each(selectedOptions,(function(i,sFilter){asEscapedFilters.push(sFilter.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))}));re="^("+asEscapedFilters.join("|")+")$"}oTable.fnFilter(re,index,!0,!1)})):(select.change((function(){""!=$(this).val()?$(this).removeClass("search_init"):$(this).addClass("search_init"),bRegex?oTable.fnFilter($(this).val(),iColumn,bRegex):oTable.fnFilter(unescape($(this).val()),iColumn),fnOnFiltered()})),null!=currentFilter&&""!=currentFilter&&oTable.fnFilter(unescape(currentFilter),iColumn))}function _fnRangeLabelPart(iPlace){switch(iPlace){case 0:return sRangeFormat.substring(0,sRangeFormat.indexOf("{from}"));case 1:return sRangeFormat.substring(sRangeFormat.indexOf("{from}")+6,sRangeFormat.indexOf("{to}"));default:return sRangeFormat.substring(sRangeFormat.indexOf("{to}")+4)}}var oTable=this,properties=$.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"},options);return this.each((function(){if(oTable.fnSettings().oFeatures.bFilter){asInitVals=new Array;var aoFilterCells=oTable.fnSettings().aoFooter[0];oTable.fnSettings().nTFoot;if("head:after"==properties.sPlaceHolder){var tr=$("tr:first",oTable.fnSettings().nTHead).detach();oTable.fnSettings().bSortCellsTop?(tr.prependTo($(oTable.fnSettings().nTHead)),aoFilterCells=oTable.fnSettings().aoHeader[1]):(tr.appendTo($(oTable.fnSettings().nTHead)),aoFilterCells=oTable.fnSettings().aoHeader[0]),"tr:last",oTable.fnSettings().nTHead}else if("head:before"==properties.sPlaceHolder){if(oTable.fnSettings().bSortCellsTop)(tr=$("tr:first",oTable.fnSettings().nTHead).detach()).appendTo($(oTable.fnSettings().nTHead)),aoFilterCells=oTable.fnSettings().aoHeader[1];else aoFilterCells=oTable.fnSettings().aoHeader[0];"tr:first",oTable.fnSettings().nTHead}for($(aoFilterCells).each((function(index){i=index;var aoColumn={type:"text",bRegex:!1,bSmart:!0,iMaxLenght:-1,iFilterLength:0};if(null!=properties.aoColumns){if(properties.aoColumns.length<i||null==properties.aoColumns[i])return;aoColumn=properties.aoColumns[i]}if(label=$($(this)[0].cell).text(),(null==aoColumn.sSelector||0==(th=$(aoColumn.sSelector)).length)&&(th=$($(this)[0].cell)),null!=aoColumn)switch(sRangeFormat=null!=aoColumn.sRangeFormat?aoColumn.sRangeFormat:properties.sRangeFormat,aoColumn.type){case"null":break;case"number":fnCreateInput(oTable,!0,!1,!0,aoColumn.iFilterLength,aoColumn.iMaxLenght);break;case"select":1!=aoColumn.bRegex&&(aoColumn.bRegex=!1),function(oTable,aData,bRegex,oSelected,bMultiselect){var iColumn,nTh,sLabel,oSettings=oTable.fnSettings();null!=aData&&"function"!=typeof aData||""==oSettings.sAjaxSource||oSettings.oFeatures.bServerSide||oSettings.aoDrawCallback.push({fn:(iColumn=i,nTh=th,sLabel=label,function(oSettings){if(2==oSettings.iDraw&&null!=oSettings.sAjaxSource&&""!=oSettings.sAjaxSource&&!oSettings.oFeatures.bServerSide)return fnCreateColumnSelect(oTable,aData&&aData(oSettings.aoData,oSettings),_fnColumnIndex(iColumn),nTh,sLabel,bRegex,oSelected,bMultiselect)}),sName:"column_filter_"+i}),fnCreateColumnSelect(oTable,"function"==typeof aData?null:aData,_fnColumnIndex(i),th,label,bRegex,oSelected,bMultiselect)}(oTable,aoColumn.values,aoColumn.bRegex,aoColumn.selected,aoColumn.multiple);break;case"number-range":!function(oTable){th.html(_fnRangeLabelPart(0));var sFromId=oTable.attr("id")+"_range_from_"+i,from=$('<input type="text" class="number_range_filter form-control" id="'+sFromId+'" rel="'+i+'"/>');th.append(from),th.append(_fnRangeLabelPart(1));var sToId=oTable.attr("id")+"_range_to_"+i,to=$('<input type="text" class="number_range_filter form-control" id="'+sToId+'" rel="'+i+'"/>');th.append(to),th.append(_fnRangeLabelPart(2)),th.wrapInner('<span class="filter_column filter_number_range form-control" />');var index=i;aiCustomSearch_Indexes.push(i),oTable.dataTableExt.afnFiltering.push((function(oSettings,aData,iDataIndex){if(oTable.attr("id")!=oSettings.sTableId)return!0;if(null==document.getElementById(sFromId))return!0;var iMin=1*document.getElementById(sFromId).value,iMax=1*document.getElementById(sToId).value,iValue="-"==aData[_fnColumnIndex(index)]?0:1*aData[_fnColumnIndex(index)];return""==iMin&&""==iMax||(""==iMin&&iValue<=iMax||(iMin<=iValue&&""==iMax||iMin<=iValue&&iValue<=iMax))})),$("#"+sFromId+",#"+sToId,th).keyup((function(){var iMin=1*document.getElementById(sFromId).value,iMax=1*document.getElementById(sToId).value;0!=iMin&&0!=iMax&&iMin>iMax||(oTable.fnDraw(),fnOnFiltered())}))}(oTable);break;case"date-range":!function(oTable){var aoFragments=sRangeFormat.split(/[}{]/);th.html("");var sFromId=oTable.attr("id")+"_range_from_"+i,from=$('<input type="text" class="date_range_filter form-control" id="'+sFromId+'" rel="'+i+'"/>');from.datepicker();var sToId=oTable.attr("id")+"_range_to_"+i,to=$('<input type="text" class="date_range_filter form-control" id="'+sToId+'" rel="'+i+'"/>');for(ti=0;ti<aoFragments.length;ti++)aoFragments[ti]==properties.sDateFromToken?th.append(from):aoFragments[ti]==properties.sDateToToken?th.append(to):th.append(aoFragments[ti]);th.wrapInner('<span class="filter_column filter_date_range" />'),to.datepicker();var index=i;aiCustomSearch_Indexes.push(i),oTable.dataTableExt.afnFiltering.push((function(oSettings,aData,iDataIndex){if(oTable.attr("id")!=oSettings.sTableId)return!0;var dStartDate=from.datepicker("getDate"),dEndDate=to.datepicker("getDate");if(null==dStartDate&&null==dEndDate)return!0;var dCellDate=null;try{if(null==aData[_fnColumnIndex(index)]||""==aData[_fnColumnIndex(index)])return!1;dCellDate=$.datepicker.parseDate($.datepicker.regional[""].dateFormat,aData[_fnColumnIndex(index)])}catch(ex){return!1}return null!=dCellDate&&(null==dStartDate&&dCellDate<=dEndDate||(dStartDate<=dCellDate&&null==dEndDate||dStartDate<=dCellDate&&dCellDate<=dEndDate))})),$("#"+sFromId+",#"+sToId,th).change((function(){oTable.fnDraw(),fnOnFiltered()}))}(oTable);break;case"checkbox":!function(oTable,aData){null==aData&&(aData=_fnGetColumnValues(oTable.fnSettings(),i,!0,!0,!0));var j,index=i,r="",iLen=aData.length,localLabel=label.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("£","STERL").replace("@","AT").replace(/\s/g,"_");localLabel=localLabel.replace(/[^a-zA-Z 0-9]+/g,"");var labelBtn=label;null==properties.sFilterButtonText&&null==properties.sFilterButtonText||(labelBtn=properties.sFilterButtonText);var numCol=Math.floor(iLen/12);iLen%12>0&&(numCol+=1);var divWidth=100/numCol-2,divWidthToggle=10*numCol;1==numCol&&(divWidth=20);var divRowDef='<div style="float:left; min-width: '+divWidth+'%; " >',uniqueId=oTable.attr("id")+localLabel,buttonId="chkBtnOpen"+uniqueId,checkToggleDiv=uniqueId+"-flt-toggle";for(r+='<button id="'+buttonId+'" class="checkbox_filter btn btn-default" > '+labelBtn+"</button>",r+='<div id="'+checkToggleDiv+'" title="'+label+'" rel="'+i+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+divWidthToggle+'%; " >',r+=divRowDef,j=0;j<iLen;j++){j%12==0&&0!=j&&(r+="</div>"+divRowDef);var sLabel=aData[j],sValue=aData[j];"object"==typeof aData[j]&&(sLabel=aData[j].label,sValue=aData[j].value);var checkbox=$(r+='<input class="search_init checkbox_filter btn btn-default" type="checkbox" id= "'+uniqueId+"_cb_"+sValue+'" name= "'+localLabel+'" value="'+sValue+'" >'+sLabel+"<br/>");th.html(checkbox),th.wrapInner('<span class="filter_column filter_checkbox" />'),checkbox.change((function(){var search="",or="|",resSize=$('input:checkbox[name="'+localLabel+'"]:checked').size();$('input:checkbox[name="'+localLabel+'"]:checked').each((function(index){(0==index&&1==resSize||0!=index&&index==resSize-1)&&(or=""),search=(search=search.replace(/^\s+|\s+$/g,""))+$(this).val()+or,or="|"})),""!=search?$('input:checkbox[name="'+localLabel+'"]').removeClass("search_init"):$('input:checkbox[name="'+localLabel+'"]').addClass("search_init"),oTable.fnFilter(search,index,!0,!1),fnOnFiltered()}))}$("#"+buttonId).button(),$("#"+checkToggleDiv).dialog({autoOpen:!1,hide:"blind",buttons:[{text:"Reset",click:function(){return $('input:checkbox[name="'+localLabel+'"]:checked').each((function(index3){$(this).attr("checked",!1),$(this).addClass("search_init")})),oTable.fnFilter("",index,!0,!1),fnOnFiltered(),!1}},{text:"Close",click:function(){$(this).dialog("close")}}]}),$("#"+buttonId).click((function(){$("#"+checkToggleDiv).dialog("open");var target=$(this);return $("#"+checkToggleDiv).dialog("widget").position({my:"top",at:"bottom",of:target}),!1}));var fnOnFilteredCurrent=fnOnFiltered;fnOnFiltered=function(){var target=$("#"+buttonId);$("#"+checkToggleDiv).dialog("widget").position({my:"top",at:"bottom",of:target}),fnOnFilteredCurrent()}}(oTable,aoColumn.values);break;case"twitter-dropdown":case"dropdown":!function(aData){var j,index=i,r='<div class="dropdown select_filter form-control"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+label+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',iLen=aData.length;for(j=0;j<iLen;j++)r+='<li data-value="'+aData[j]+'"><a>'+aData[j]+"</a></li>";var select=$(r+"</ul></div>");th.html(select),th.wrapInner('<span class="filterColumn filter_select" />'),select.find("li").click((function(){oTable.fnFilter($(this).data("value"),index)}))}(aoColumn.values);break;case"text":default:bRegex=null!=aoColumn.bRegex&&aoColumn.bRegex,bSmart=null!=aoColumn.bSmart&&aoColumn.bSmart,fnCreateInput(oTable,bRegex,bSmart,!1,aoColumn.iFilterLength,aoColumn.iMaxLenght)}})),j=0;j<aiCustomSearch_Indexes.length;j++){afnSearch_.push((function(){var id=oTable.attr("id");return $("#"+id+"_range_from_"+aiCustomSearch_Indexes[j]).val()+properties.sRangeSeparator+$("#"+id+"_range_to_"+aiCustomSearch_Indexes[j]).val()}))}if(oTable.fnSettings().oFeatures.bServerSide){var fnServerDataOriginal=oTable.fnSettings().fnServerData;oTable.fnSettings().fnServerData=function(sSource,aoData,fnCallback){for(j=0;j<aiCustomSearch_Indexes.length;j++){var index=aiCustomSearch_Indexes[j];for(k=0;k<aoData.length;k++)aoData[k].name=="sSearch_"+index&&(aoData[k].value=afnSearch_[j]())}if(aoData.push({name:"sRangeSeparator",value:properties.sRangeSeparator}),null!=fnServerDataOriginal)try{fnServerDataOriginal(sSource,aoData,fnCallback,oTable.fnSettings())}catch(ex){fnServerDataOriginal(sSource,aoData,fnCallback)}else $.getJSON(sSource,aoData,(function(json){fnCallback(json)}))}}}}))}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvZGF0YVRhYmxlcy9kYXRhVGFibGVzLmNvbHVtbkZpbHRlci5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJjb2x1bW5GaWx0ZXIiLCJvcHRpb25zIiwiYXNJbml0VmFscyIsImkiLCJsYWJlbCIsInRoIiwic1JhbmdlRm9ybWF0IiwiYWZuU2VhcmNoXyIsIkFycmF5IiwiYWlDdXN0b21TZWFyY2hfSW5kZXhlcyIsImZuT25GaWx0ZXJlZCIsIl9mbkdldENvbHVtblZhbHVlcyIsIm9TZXR0aW5ncyIsImlDb2x1bW4iLCJiVW5pcXVlIiwiYkZpbHRlcmVkIiwiYklnbm9yZUVtcHR5IiwiYWlSb3dzIiwiYWlEaXNwbGF5IiwiYWlEaXNwbGF5TWFzdGVyIiwiYXNSZXN1bHREYXRhIiwiYyIsImxlbmd0aCIsImlSb3ciLCJzVmFsdWUiLCJvVGFibGUiLCJmbkdldERhdGEiLCJqUXVlcnkiLCJpbkFycmF5IiwicHVzaCIsInNvcnQiLCJfZm5Db2x1bW5JbmRleCIsImlDb2x1bW5JbmRleCIsInByb3BlcnRpZXMiLCJiVXNlQ29sVmlzIiwiZm5TZXR0aW5ncyIsIm9BcGkiLCJfZm5WaXNpYmxlVG9Db2x1bW5JbmRleCIsImZuQ3JlYXRlSW5wdXQiLCJyZWdleCIsInNtYXJ0IiwiYklzTnVtYmVyIiwiaUZpbHRlckxlbmd0aCIsImlNYXhMZW5naHQiLCJzQ1NTQ2xhc3MiLCJyZXBsYWNlIiwiY3VycmVudEZpbHRlciIsImFvUHJlU2VhcmNoQ29scyIsInNTZWFyY2giLCJzZWFyY2hfaW5pdCIsImlucHV0dmFsdWUiLCJjaGFyQXQiLCJzdWJzdHIiLCJpbnB1dCIsInVuZGVmaW5lZCIsImF0dHIiLCJodG1sIiwid3JhcElubmVyIiwiaW5kZXgiLCJvRmVhdHVyZXMiLCJiU2VydmVyU2lkZSIsImtleXVwIiwiZm5GaWx0ZXIiLCJ0aGlzIiwidmFsdWUiLCJpTGFzdEZpbHRlckxlbmd0aCIsImRhdGEiLCJpQ3VycmVudEZpbHRlckxlbmd0aCIsIk1hdGgiLCJhYnMiLCJmb2N1cyIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJibHVyIiwiYWRkQ2xhc3MiLCJmbkNyZWF0ZUNvbHVtblNlbGVjdCIsImFEYXRhIiwiblRoIiwic0xhYmVsIiwiYlJlZ2V4Iiwib1NlbGVjdGVkIiwiYk11bHRpc2VsZWN0IiwiciIsImoiLCJpTGVuIiwic2VsZWN0ZWQiLCJlc2NhcGUiLCJzZWxlY3QiLCJjaGFuZ2UiLCJ2YWwiLCJzZWxlY3RlZE9wdGlvbnMiLCJhc0VzY2FwZWRGaWx0ZXJzIiwicmUiLCJlYWNoIiwic0ZpbHRlciIsImpvaW4iLCJ1bmVzY2FwZSIsIl9mblJhbmdlTGFiZWxQYXJ0IiwiaVBsYWNlIiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsImV4dGVuZCIsInNQbGFjZUhvbGRlciIsInNSYW5nZVNlcGFyYXRvciIsImlGaWx0ZXJpbmdEZWxheSIsImFvQ29sdW1ucyIsInNEYXRlRnJvbVRva2VuIiwic0RhdGVUb1Rva2VuIiwiYkZpbHRlciIsImFvRmlsdGVyQ2VsbHMiLCJhb0Zvb3RlciIsIm5URm9vdCIsInRyIiwiblRIZWFkIiwiZGV0YWNoIiwiYlNvcnRDZWxsc1RvcCIsInByZXBlbmRUbyIsImFvSGVhZGVyIiwiYXBwZW5kVG8iLCJhb0NvbHVtbiIsInR5cGUiLCJiU21hcnQiLCJjZWxsIiwidGV4dCIsInNTZWxlY3RvciIsInNBamF4U291cmNlIiwiYW9EcmF3Q2FsbGJhY2siLCJpRHJhdyIsImFvRGF0YSIsInNOYW1lIiwiZm5DcmVhdGVTZWxlY3QiLCJ2YWx1ZXMiLCJtdWx0aXBsZSIsInNGcm9tSWQiLCJmcm9tIiwiYXBwZW5kIiwic1RvSWQiLCJ0byIsImRhdGFUYWJsZUV4dCIsImFmbkZpbHRlcmluZyIsImlEYXRhSW5kZXgiLCJzVGFibGVJZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpTWluIiwiaU1heCIsImlWYWx1ZSIsImZuRHJhdyIsImZuQ3JlYXRlUmFuZ2VJbnB1dCIsImFvRnJhZ21lbnRzIiwic3BsaXQiLCJkYXRlcGlja2VyIiwidGkiLCJkU3RhcnREYXRlIiwiZEVuZERhdGUiLCJkQ2VsbERhdGUiLCJwYXJzZURhdGUiLCJyZWdpb25hbCIsImRhdGVGb3JtYXQiLCJleCIsImZuQ3JlYXRlRGF0ZVJhbmdlSW5wdXQiLCJsb2NhbExhYmVsIiwibGFiZWxCdG4iLCJzRmlsdGVyQnV0dG9uVGV4dCIsIm51bUNvbCIsImZsb29yIiwiZGl2V2lkdGgiLCJkaXZXaWR0aFRvZ2dsZSIsImRpdlJvd0RlZiIsInVuaXF1ZUlkIiwiYnV0dG9uSWQiLCJjaGVja1RvZ2dsZURpdiIsImNoZWNrYm94Iiwic2VhcmNoIiwib3IiLCJyZXNTaXplIiwic2l6ZSIsImJ1dHRvbiIsImRpYWxvZyIsImF1dG9PcGVuIiwiaGlkZSIsImJ1dHRvbnMiLCJjbGljayIsImluZGV4MyIsInRhcmdldCIsInBvc2l0aW9uIiwibXkiLCJhdCIsIm9mIiwiZm5PbkZpbHRlcmVkQ3VycmVudCIsImZuQ3JlYXRlQ2hlY2tib3giLCJmaW5kIiwiZm5DcmVhdGVEcm9wZG93biIsImlkIiwiZm5TZXJ2ZXJEYXRhT3JpZ2luYWwiLCJmblNlcnZlckRhdGEiLCJzU291cmNlIiwiZm5DYWxsYmFjayIsImsiLCJuYW1lIiwiZ2V0SlNPTiIsImpzb24iXSwibWFwcGluZ3MiOiJDQW9CQSxTQUFXQSxHQUdQQSxFQUFFQyxHQUFHQyxhQUFlLFNBQVVDLFNBRTFCLElBQUlDLFdBQVlDLEVBQUdDLE1BQU9DLEdBR3RCQyxhQUFlLHNCQUVmQyxXQUFhLElBQUlDLE1BQ2pCQyx1QkFBeUIsSUFBSUQsTUFJN0JFLGFBQWUsYUFFbkIsU0FBU0MsbUJBQW1CQyxVQUFXQyxRQUFTQyxRQUFTQyxVQUFXQyxjQVdoRSxRQUFzQixJQUFYSCxRQUF3QixPQUFPLElBQUlMLE1BWTlDLElBQUlTLFlBVGtCLElBQVhILFVBQXdCQSxTQUFVLFFBR3JCLElBQWJDLFlBQTBCQSxXQUFZLFFBR3RCLElBQWhCQyxlQUE2QkEsY0FBZSxHQU1oQ0MsT0FBTixHQUFiRixVQUE0QkgsVUFBVU0sVUFFNUJOLFVB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QUFFME0sUUFBUUosUUFBU3BFLFFBQVEsU0FBVXlFLE1BQ2pDSixXQUFXSSxnQkExeEJ2QyxDQXd5Qkc5SyIsImZpbGUiOiJwbHVnaW5zL2RhdGFUYWJsZXMvZGF0YVRhYmxlcy5jb2x1bW5GaWx0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogRmlsZTogICAgICAgIGpxdWVyeS5kYXRhVGFibGVzLmNvbHVtbkZpbHRlci5qc1xuICogVmVyc2lvbjogICAgIDEuNS42LlxuICogQXV0aG9yOiAgICAgIEpvdmFuIFBvcG92aWNcbiAqXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE0IEpvdmFuIFBvcG92aWMsIGFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgZmlsZSBpcyBmcmVlIHNvZnR3YXJlLCB1bmRlciBlaXRoZXIgdGhlIEdQTCB2MiBsaWNlbnNlIG9yIGFcbiAqIEJTRCBzdHlsZSBsaWNlbnNlLCBhcyBzdXBwbGllZCB3aXRoIHRoaXMgc29mdHdhcmUuXG4gKlxuICogVGhpcyBzb3VyY2UgZmlsZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXRcbiAqIFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZXG4gKiBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS5cbiAqXG4gKiBQYXJhbWV0ZXJzOlwiXG4gKiBAc1BsYWNlSG9sZGVyICAgICAgICAgICAgICAgICBTdHJpbmcgICAgICBQbGFjZSB3aGVyZSBpbmxpbmUgZmlsdGVyaW5nIGZ1bmN0aW9uIHNob3VsZCBiZSBwbGFjZWQgKFwidGZvb3RcIiwgXCJ0aGVhZDpiZWZvcmVcIiwgXCJ0aGVhZDphZnRlclwiKS4gRGVmYXVsdCBpcyBcInRmb290XCJcbiAqIEBzUmFuZ2VTZXBhcmF0b3IgICAgICAgICAgICAgIFN0cmluZyAgICAgIFNlcGFyYXRvciB0aGF0IHdpbGwgYmUgdXNlZCB3aGVuIHJhbmdlIHZhbHVlcyBhcmUgc2VudCB0byB0aGUgc2VydmVyLXNpZGUuIERlZmF1bHQgdmFsdWUgaXMgXCJ+XCIuXG4gKiBAc1JhbmdlRm9ybWF0ICAgICAgICAgICAgICAgICBzdHJpbmcgICAgICBEZWZhdWx0IGZvcm1hdCBvZiB0aGUgRnJvbSAuLi4gdG8gLi4uIHJhbmdlIGlucHV0cy4gRGVmYXVsdCBpcyBGcm9tIHtmcm9tfSB0byB7dG99XG4gKiBAYW9Db2x1bW5zICAgICAgICAgICAgICAgICAgICBBcnJheSAgICAgICBBcnJheSBvZiB0aGUgZmlsdGVyIHNldHRpbmdzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIG9uIHRoZSBjb2x1bW5zXG4gKi9cbihmdW5jdGlvbiAoJCkge1xuXG5cbiAgICAkLmZuLmNvbHVtbkZpbHRlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbiAgICAgICAgdmFyIGFzSW5pdFZhbHMsIGksIGxhYmVsLCB0aDtcblxuICAgICAgICAvL3ZhciBzVGFibGVJZCA9IFwidGFibGVcIjtcbiAgICAgICAgdmFyIHNSYW5nZUZvcm1hdCA9IFwiRnJvbSB7ZnJvbX0gdG8ge3RvfVwiO1xuICAgICAgICAvL0FycmF5IG9mIHRoZSBmdW5jdGlvbnMgdGhhdCB3aWxsIG92ZXJyaWRlIHNTZWFyY2hfIHBhcmFtZXRlcnNcbiAgICAgICAgdmFyIGFmblNlYXJjaF8gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdmFyIGFpQ3VzdG9tU2VhcmNoX0luZGV4ZXMgPSBuZXcgQXJyYXkoKTtcblxuICAgICAgICB2YXIgb0Z1bmN0aW9uVGltZW91dCA9IG51bGw7XG5cbiAgICAgICAgdmFyIGZuT25GaWx0ZXJlZCA9IGZ1bmN0aW9uICgpIHsgfTtcblxuICAgICAgICBmdW5jdGlvbiBfZm5HZXRDb2x1bW5WYWx1ZXMob1NldHRpbmdzLCBpQ29sdW1uLCBiVW5pcXVlLCBiRmlsdGVyZWQsIGJJZ25vcmVFbXB0eSkge1xuICAgICAgICAgICAgLy8vPHN1bW1hcnk+XG4gICAgICAgICAgICAvLy9SZXR1cm4gdmFsdWVzIGluIHRoZSBjb2x1bW5cbiAgICAgICAgICAgIC8vLzwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLzxwYXJhbSBuYW1lPVwib1NldHRpbmdzXCIgdHlwZT1cIk9iamVjdFwiPkRhdGFUYWJsZXMgc2V0dGluZ3M8L3BhcmFtPlxuICAgICAgICAgICAgLy8vPHBhcmFtIG5hbWU9XCJpQ29sdW1uXCIgdHlwZT1cImludFwiPklkIG9mIHRoZSBjb2x1bW48L3BhcmFtPlxuICAgICAgICAgICAgLy8vPHBhcmFtIG5hbWU9XCJiVW5pcXVlXCIgdHlwZT1cImJvb2xcIj5SZXR1cm4gb25seSBkaXN0aW5jdCB2YWx1ZXM8L3BhcmFtPlxuICAgICAgICAgICAgLy8vPHBhcmFtIG5hbWU9XCJiRmlsdGVyZWRcIiB0eXBlPVwiYm9vbFwiPlJldHVybiB2YWx1ZXMgb25seSBmcm9tIHRoZSBmaWx0ZXJlZCByb3dzPC9wYXJhbT5cbiAgICAgICAgICAgIC8vLzxwYXJhbSBuYW1lPVwiYklnbm9yZUVtcHR5XCIgdHlwZT1cImJvb2xcIj5JZ25vcmUgZW1wdHkgY2VsbHM8L3BhcmFtPlxuXG4gICAgICAgICAgICAvLyBjaGVjayB0aGF0IHdlIGhhdmUgYSBjb2x1bW4gaWRcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaUNvbHVtbiA9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbmV3IEFycmF5KCk7XG5cbiAgICAgICAgICAgIC8vIGJ5IGRlZmF1bHQgd2Ugb25seSB3YW55IHVuaXF1ZSBkYXRhXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJVbmlxdWUgPT0gXCJ1bmRlZmluZWRcIikgYlVuaXF1ZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGJ5IGRlZmF1bHQgd2UgZG8gd2FudCB0byBvbmx5IGxvb2sgYXQgZmlsdGVyZWQgZGF0YVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBiRmlsdGVyZWQgPT0gXCJ1bmRlZmluZWRcIikgYkZpbHRlcmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gYnkgZGVmYXVsdCB3ZSBkbyBub3Qgd2FueSB0byBpbmNsdWRlIGVtcHR5IHZhbHVlc1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBiSWdub3JlRW1wdHkgPT0gXCJ1bmRlZmluZWRcIikgYklnbm9yZUVtcHR5ID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gbGlzdCBvZiByb3dzIHdoaWNoIHdlJ3JlIGdvaW5nIHRvIGxvb3AgdGhyb3VnaFxuICAgICAgICAgICAgdmFyIGFpUm93cztcblxuICAgICAgICAgICAgLy8gdXNlIG9ubHkgZmlsdGVyZWQgcm93c1xuICAgICAgICAgICAgaWYgKGJGaWx0ZXJlZCA9PSB0cnVlKSBhaVJvd3MgPSBvU2V0dGluZ3MuYWlEaXNwbGF5O1xuICAgICAgICAgICAgLy8gdXNlIGFsbCByb3dzXG4gICAgICAgICAgICBlbHNlIGFpUm93cyA9IG9TZXR0aW5ncy5haURpc3BsYXlNYXN0ZXI7IC8vIGFsbCByb3cgbnVtYmVyc1xuXG4gICAgICAgICAgICAvLyBzZXQgdXAgZGF0YSBhcnJheVxuICAgICAgICAgICAgdmFyIGFzUmVzdWx0RGF0YSA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYyA9IGFpUm93cy5sZW5ndGg7IGkgPCBjOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaVJvdyA9IGFpUm93c1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgYURhdGEgPSBvVGFibGUuZm5HZXREYXRhKGlSb3cpO1xuICAgICAgICAgICAgICAgIHZhciBzVmFsdWUgPSBhRGF0YVtpQ29sdW1uXTtcblxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlbXB0eSB2YWx1ZXM/XG4gICAgICAgICAgICAgICAgaWYgKGJJZ25vcmVFbXB0eSA9PSB0cnVlICYmIHNWYWx1ZS5sZW5ndGggPT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgdW5pcXVlIHZhbHVlcz9cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChiVW5pcXVlID09IHRydWUgJiYgalF1ZXJ5LmluQXJyYXkoc1ZhbHVlLCBhc1Jlc3VsdERhdGEpID4gLTEpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgLy8gZWxzZSBwdXNoIHRoZSB2YWx1ZSBvbnRvIHRoZSByZXN1bHQgZGF0YSBhcnJheVxuICAgICAgICAgICAgICAgIGVsc2UgYXNSZXN1bHREYXRhLnB1c2goc1ZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFzUmVzdWx0RGF0YS5zb3J0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfZm5Db2x1bW5JbmRleChpQ29sdW1uSW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmJVc2VDb2xWaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlDb2x1bW5JbmRleDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gb1RhYmxlLmZuU2V0dGluZ3MoKS5vQXBpLl9mblZpc2libGVUb0NvbHVtbkluZGV4KG9UYWJsZS5mblNldHRpbmdzKCksIGlDb2x1bW5JbmRleCk7XG4gICAgICAgICAgICAvL3JldHVybiBpQ29sdW1uSW5kZXg7XG4gICAgICAgICAgICAvL3JldHVybiBvVGFibGUuZm5TZXR0aW5ncygpLm9BcGkuX2ZuQ29sdW1uSW5kZXhUb1Zpc2libGUob1RhYmxlLmZuU2V0dGluZ3MoKSwgaUNvbHVtbkluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZuQ3JlYXRlSW5wdXQob1RhYmxlLCByZWdleCwgc21hcnQsIGJJc051bWJlciwgaUZpbHRlckxlbmd0aCwgaU1heExlbmdodCkge1xuICAgICAgICAgICAgdmFyIHNDU1NDbGFzcyA9IFwidGV4dF9maWx0ZXIgZm9ybS1jb250cm9sXCI7XG4gICAgICAgICAgICBpZiAoYklzTnVtYmVyKVxuICAgICAgICAgICAgICAgIHNDU1NDbGFzcyA9IFwibnVtYmVyX2ZpbHRlciBmb3JtLWNvbnRyb2xcIjtcblxuICAgICAgICAgICAgbGFiZWwgPSBsYWJlbC5yZXBsYWNlKC8oXlxccyopfChcXHMqJCkvZywgXCJcIik7XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IG9UYWJsZS5mblNldHRpbmdzKCkuYW9QcmVTZWFyY2hDb2xzW2ldLnNTZWFyY2g7XG4gICAgICAgICAgICB2YXIgc2VhcmNoX2luaXQgPSAnc2VhcmNoX2luaXQgJztcbiAgICAgICAgICAgIHZhciBpbnB1dHZhbHVlID0gbGFiZWw7XG4gICAgICAgICAgICBpZiAoY3VycmVudEZpbHRlciAhPSAnJyAmJiBjdXJyZW50RmlsdGVyICE9ICdeJykge1xuICAgICAgICAgICAgICAgIGlmIChiSXNOdW1iZXIgJiYgY3VycmVudEZpbHRlci5jaGFyQXQoMCkgPT0gJ14nKVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHZhbHVlID0gY3VycmVudEZpbHRlci5zdWJzdHIoMSk7IC8vaWdub3JlIHRyYWlsaW5nIF5cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGlucHV0dmFsdWUgPSBjdXJyZW50RmlsdGVyO1xuICAgICAgICAgICAgICAgIHNlYXJjaF9pbml0ID0gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiJyArIHNlYXJjaF9pbml0ICsgc0NTU0NsYXNzICsgJ1wiIHZhbHVlPVwiJyArIGlucHV0dmFsdWUgKyAnXCIgcmVsPVwiJyArIGkgKyAnXCIvPicpO1xuICAgICAgICAgICAgaWYgKGlNYXhMZW5naHQgIT0gdW5kZWZpbmVkICYmIGlNYXhMZW5naHQgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5hdHRyKCdtYXhsZW5ndGgnLCBpTWF4TGVuZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoLmh0bWwoaW5wdXQpO1xuICAgICAgICAgICAgaWYgKGJJc051bWJlcilcbiAgICAgICAgICAgICAgICB0aC53cmFwSW5uZXIoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX2NvbHVtbiBmaWx0ZXJfbnVtYmVyXCIgLz4nKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aC53cmFwSW5uZXIoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX2NvbHVtbiBmaWx0ZXJfdGV4dFwiIC8+Jyk7XG5cbiAgICAgICAgICAgIGFzSW5pdFZhbHNbaV0gPSBsYWJlbDtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGk7XG5cbiAgICAgICAgICAgIGlmIChiSXNOdW1iZXIgJiYgIW9UYWJsZS5mblNldHRpbmdzKCkub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQua2V5dXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBGaWx0ZXIgb24gdGhlIGNvbHVtbiBhbGwgbnVtYmVycyB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBlbnRlcmVkIHZhbHVlICovXG4gICAgICAgICAgICAgICAgICAgIG9UYWJsZS5mbkZpbHRlcignXicgKyB0aGlzLnZhbHVlLCBfZm5Db2x1bW5JbmRleChpbmRleCksIHRydWUsIGZhbHNlKTsgLy9Jc3N1ZSAzN1xuICAgICAgICAgICAgICAgICAgICBmbk9uRmlsdGVyZWQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5wdXQua2V5dXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob1RhYmxlLmZuU2V0dGluZ3MoKS5vRmVhdHVyZXMuYlNlcnZlclNpZGUgJiYgaUZpbHRlckxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIGZpbHRlciBsZW5ndGggaXMgc2V0IGluIHRoZSBzZXJ2ZXItc2lkZSBwcm9jZXNzaW5nIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgaGFzIHRoZSB1c2VyIGVudGVyZWQgYXQgbGVhc3QgaUZpbHRlckxlbmd0aCBuZXcgY2hhcmFjdGVyc1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IG9UYWJsZS5mblNldHRpbmdzKCkuYW9QcmVTZWFyY2hDb2xzW2luZGV4XS5zU2VhcmNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlMYXN0RmlsdGVyTGVuZ3RoID0gJCh0aGlzKS5kYXRhKFwiZHQtaUxhc3RGaWx0ZXJMZW5ndGhcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlMYXN0RmlsdGVyTGVuZ3RoID09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaUxhc3RGaWx0ZXJMZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlDdXJyZW50RmlsdGVyTGVuZ3RoID0gdGhpcy52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoaUN1cnJlbnRGaWx0ZXJMZW5ndGggLSBpTGFzdEZpbHRlckxlbmd0aCkgPCBpRmlsdGVyTGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyYmIGN1cnJlbnRGaWx0ZXIubGVuZ3RoID09IDAgLy9XaHkgdGhpcz9cbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2FuY2VsIHRoZSBmaWx0ZXJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1JlbWVtYmVyIHRoZSBjdXJyZW50IGZpbHRlciBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoXCJkdC1pTGFzdEZpbHRlckxlbmd0aFwiLCBpQ3VycmVudEZpbHRlckxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyogRmlsdGVyIG9uIHRoZSBjb2x1bW4gKHRoZSBpbmRleCkgb2YgdGhpcyBlbGVtZW50ICovXG4gICAgICAgICAgICAgICAgICAgIG9UYWJsZS5mbkZpbHRlcih0aGlzLnZhbHVlLCBfZm5Db2x1bW5JbmRleChpbmRleCksIHJlZ2V4LCBzbWFydCk7IC8vSXNzdWUgMzdcbiAgICAgICAgICAgICAgICAgICAgZm5PbkZpbHRlcmVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0LmZvY3VzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcInNlYXJjaF9pbml0XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJzZWFyY2hfaW5pdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbnB1dC5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJzZWFyY2hfaW5pdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGFzSW5pdFZhbHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZm5DcmVhdGVSYW5nZUlucHV0KG9UYWJsZSkge1xuXG4gICAgICAgICAgICAvL3ZhciBjdXJyZW50RmlsdGVyID0gb1RhYmxlLmZuU2V0dGluZ3MoKS5hb1ByZVNlYXJjaENvbHNbaV0uc1NlYXJjaDtcbiAgICAgICAgICAgIHRoLmh0bWwoX2ZuUmFuZ2VMYWJlbFBhcnQoMCkpO1xuICAgICAgICAgICAgdmFyIHNGcm9tSWQgPSBvVGFibGUuYXR0cihcImlkXCIpICsgJ19yYW5nZV9mcm9tXycgKyBpO1xuICAgICAgICAgICAgdmFyIGZyb20gPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm51bWJlcl9yYW5nZV9maWx0ZXIgZm9ybS1jb250cm9sXCIgaWQ9XCInICsgc0Zyb21JZCArICdcIiByZWw9XCInICsgaSArICdcIi8+Jyk7XG4gICAgICAgICAgICB0aC5hcHBlbmQoZnJvbSk7XG4gICAgICAgICAgICB0aC5hcHBlbmQoX2ZuUmFuZ2VMYWJlbFBhcnQoMSkpO1xuICAgICAgICAgICAgdmFyIHNUb0lkID0gb1RhYmxlLmF0dHIoXCJpZFwiKSArICdfcmFuZ2VfdG9fJyArIGk7XG4gICAgICAgICAgICB2YXIgdG8gPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm51bWJlcl9yYW5nZV9maWx0ZXIgZm9ybS1jb250cm9sXCIgaWQ9XCInICsgc1RvSWQgKyAnXCIgcmVsPVwiJyArIGkgKyAnXCIvPicpO1xuICAgICAgICAgICAgdGguYXBwZW5kKHRvKTtcbiAgICAgICAgICAgIHRoLmFwcGVuZChfZm5SYW5nZUxhYmVsUGFydCgyKSk7XG4gICAgICAgICAgICB0aC53cmFwSW5uZXIoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX2NvbHVtbiBmaWx0ZXJfbnVtYmVyX3JhbmdlIGZvcm0tY29udHJvbFwiIC8+Jyk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpO1xuICAgICAgICAgICAgYWlDdXN0b21TZWFyY2hfSW5kZXhlcy5wdXNoKGkpO1xuXG5cblxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS1zdGFydCByYW5nZSBmaWx0ZXJpbmcgZnVuY3Rpb25cblxuXG4gICAgICAgICAgICAvKiBcdEN1c3RvbSBmaWx0ZXJpbmcgZnVuY3Rpb24gd2hpY2ggd2lsbCBmaWx0ZXIgZGF0YSBpbiBjb2x1bW4gZm91ciBiZXR3ZWVuIHR3byB2YWx1ZXNcbiAgICAgICAgICAgICAqXHRBdXRob3I6IFx0QWxsYW4gSmFyZGluZSwgTW9kaWZpZWQgYnkgSm92YW4gUG9wb3ZpY1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAvLyQuZm4uZGF0YVRhYmxlRXh0LmFmbkZpbHRlcmluZy5wdXNoKFxuICAgICAgICAgICAgb1RhYmxlLmRhdGFUYWJsZUV4dC5hZm5GaWx0ZXJpbmcucHVzaChcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAob1NldHRpbmdzLCBhRGF0YSwgaURhdGFJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob1RhYmxlLmF0dHIoXCJpZFwiKSAhPSBvU2V0dGluZ3Muc1RhYmxlSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGhhbmRsZSBtaXNzaW5nIG5vZGVzIG1vcmUgZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc0Zyb21JZCkgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaU1pbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNGcm9tSWQpLnZhbHVlICogMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlNYXggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzVG9JZCkudmFsdWUgKiAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaVZhbHVlID0gYURhdGFbX2ZuQ29sdW1uSW5kZXgoaW5kZXgpXSA9PSBcIi1cIiA/IDAgOiBhRGF0YVtfZm5Db2x1bW5JbmRleChpbmRleCldICogMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlNaW4gPT0gXCJcIiAmJiBpTWF4ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlNaW4gPT0gXCJcIiAmJiBpVmFsdWUgPD0gaU1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaU1pbiA8PSBpVmFsdWUgJiYgXCJcIiA9PSBpTWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpTWluIDw9IGlWYWx1ZSAmJiBpVmFsdWUgPD0gaU1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLWVuZCByYW5nZSBmaWx0ZXJpbmcgZnVuY3Rpb25cblxuXG5cbiAgICAgICAgICAgICQoJyMnICsgc0Zyb21JZCArICcsIycgKyBzVG9JZCwgdGgpLmtleXVwKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHZhciBpTWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc0Zyb21JZCkudmFsdWUgKiAxO1xuICAgICAgICAgICAgICAgIHZhciBpTWF4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc1RvSWQpLnZhbHVlICogMTtcbiAgICAgICAgICAgICAgICBpZiAoaU1pbiAhPSAwICYmIGlNYXggIT0gMCAmJiBpTWluID4gaU1heClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgb1RhYmxlLmZuRHJhdygpO1xuICAgICAgICAgICAgICAgIGZuT25GaWx0ZXJlZCgpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBmbkNyZWF0ZURhdGVSYW5nZUlucHV0KG9UYWJsZSkge1xuXG4gICAgICAgICAgICB2YXIgYW9GcmFnbWVudHMgPSBzUmFuZ2VGb3JtYXQuc3BsaXQoL1t9e10vKTtcblxuICAgICAgICAgICAgdGguaHRtbChcIlwiKTtcbiAgICAgICAgICAgIC8vdGguaHRtbChfZm5SYW5nZUxhYmVsUGFydCgwKSk7XG4gICAgICAgICAgICB2YXIgc0Zyb21JZCA9IG9UYWJsZS5hdHRyKFwiaWRcIikgKyAnX3JhbmdlX2Zyb21fJyArIGk7XG4gICAgICAgICAgICB2YXIgZnJvbSA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZGF0ZV9yYW5nZV9maWx0ZXIgZm9ybS1jb250cm9sXCIgaWQ9XCInICsgc0Zyb21JZCArICdcIiByZWw9XCInICsgaSArICdcIi8+Jyk7XG4gICAgICAgICAgICBmcm9tLmRhdGVwaWNrZXIoKTtcbiAgICAgICAgICAgIC8vdGguYXBwZW5kKGZyb20pO1xuICAgICAgICAgICAgLy90aC5hcHBlbmQoX2ZuUmFuZ2VMYWJlbFBhcnQoMSkpO1xuICAgICAgICAgICAgdmFyIHNUb0lkID0gb1RhYmxlLmF0dHIoXCJpZFwiKSArICdfcmFuZ2VfdG9fJyArIGk7XG4gICAgICAgICAgICB2YXIgdG8gPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImRhdGVfcmFuZ2VfZmlsdGVyIGZvcm0tY29udHJvbFwiIGlkPVwiJyArIHNUb0lkICsgJ1wiIHJlbD1cIicgKyBpICsgJ1wiLz4nKTtcbiAgICAgICAgICAgIC8vdGguYXBwZW5kKHRvKTtcbiAgICAgICAgICAgIC8vdGguYXBwZW5kKF9mblJhbmdlTGFiZWxQYXJ0KDIpKTtcblxuICAgICAgICAgICAgZm9yICh0aSA9IDA7IHRpIDwgYW9GcmFnbWVudHMubGVuZ3RoOyB0aSsrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoYW9GcmFnbWVudHNbdGldID09IHByb3BlcnRpZXMuc0RhdGVGcm9tVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGguYXBwZW5kKGZyb20pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhb0ZyYWdtZW50c1t0aV0gPT0gcHJvcGVydGllcy5zRGF0ZVRvVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoLmFwcGVuZCh0byk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aC5hcHBlbmQoYW9GcmFnbWVudHNbdGldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgdGgud3JhcElubmVyKCc8c3BhbiBjbGFzcz1cImZpbHRlcl9jb2x1bW4gZmlsdGVyX2RhdGVfcmFuZ2VcIiAvPicpO1xuICAgICAgICAgICAgdG8uZGF0ZXBpY2tlcigpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaTtcbiAgICAgICAgICAgIGFpQ3VzdG9tU2VhcmNoX0luZGV4ZXMucHVzaChpKTtcblxuXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLXN0YXJ0IGRhdGUgcmFuZ2UgZmlsdGVyaW5nIGZ1bmN0aW9uXG5cbiAgICAgICAgICAgIC8vJC5mbi5kYXRhVGFibGVFeHQuYWZuRmlsdGVyaW5nLnB1c2goXG4gICAgICAgICAgICBvVGFibGUuZGF0YVRhYmxlRXh0LmFmbkZpbHRlcmluZy5wdXNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChvU2V0dGluZ3MsIGFEYXRhLCBpRGF0YUluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvVGFibGUuYXR0cihcImlkXCIpICE9IG9TZXR0aW5ncy5zVGFibGVJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkU3RhcnREYXRlID0gZnJvbS5kYXRlcGlja2VyKFwiZ2V0RGF0ZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZEVuZERhdGUgPSB0by5kYXRlcGlja2VyKFwiZ2V0RGF0ZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZFN0YXJ0RGF0ZSA9PSBudWxsICYmIGRFbmREYXRlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRDZWxsRGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYURhdGFbX2ZuQ29sdW1uSW5kZXgoaW5kZXgpXSA9PSBudWxsIHx8IGFEYXRhW19mbkNvbHVtbkluZGV4KGluZGV4KV0gPT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBkQ2VsbERhdGUgPSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5yZWdpb25hbFtcIlwiXS5kYXRlRm9ybWF0LCBhRGF0YVtfZm5Db2x1bW5JbmRleChpbmRleCldKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZENlbGxEYXRlID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZFN0YXJ0RGF0ZSA9PSBudWxsICYmIGRDZWxsRGF0ZSA8PSBkRW5kRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZFN0YXJ0RGF0ZSA8PSBkQ2VsbERhdGUgJiYgZEVuZERhdGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZFN0YXJ0RGF0ZSA8PSBkQ2VsbERhdGUgJiYgZENlbGxEYXRlIDw9IGRFbmREYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tZW5kIGRhdGUgcmFuZ2UgZmlsdGVyaW5nIGZ1bmN0aW9uXG5cbiAgICAgICAgICAgICQoJyMnICsgc0Zyb21JZCArICcsIycgKyBzVG9JZCwgdGgpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb1RhYmxlLmZuRHJhdygpO1xuICAgICAgICAgICAgICAgIGZuT25GaWx0ZXJlZCgpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZm5DcmVhdGVDb2x1bW5TZWxlY3Qob1RhYmxlLCBhRGF0YSwgaUNvbHVtbiwgblRoLCBzTGFiZWwsIGJSZWdleCwgb1NlbGVjdGVkLCBiTXVsdGlzZWxlY3QpIHtcbiAgICAgICAgICAgIGlmIChhRGF0YSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGFEYXRhID0gX2ZuR2V0Q29sdW1uVmFsdWVzKG9UYWJsZS5mblNldHRpbmdzKCksIGlDb2x1bW4sIHRydWUsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGlDb2x1bW47XG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbHRlciA9IG9UYWJsZS5mblNldHRpbmdzKCkuYW9QcmVTZWFyY2hDb2xzW2ldLnNTZWFyY2g7XG4gICAgICAgICAgICBpZiAoY3VycmVudEZpbHRlciA9PSBudWxsIHx8IGN1cnJlbnRGaWx0ZXIgPT0gXCJcIikvL0lzc3VlIDgxXG4gICAgICAgICAgICAgICAgY3VycmVudEZpbHRlciA9IG9TZWxlY3RlZDtcblxuICAgICAgICAgICAgdmFyIHIgPSAnPHNlbGVjdCBjbGFzcz1cInNlYXJjaF9pbml0IHNlbGVjdF9maWx0ZXIgZm9ybS1jb250cm9sXCIgcmVsPVwiJyArIGkgKyAnXCI+PG9wdGlvbiB2YWx1ZT1cIlwiIGNsYXNzPVwic2VhcmNoX2luaXRcIj4nICsgc0xhYmVsICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICBpZihiTXVsdGlzZWxlY3QpIHtcbiAgICAgICAgICAgICAgICByID0gJzxzZWxlY3QgY2xhc3M9XCJzZWFyY2hfaW5pdCBzZWxlY3RfZmlsdGVyIGZvcm0tY29udHJvbFwiIHJlbD1cIicgKyBpICsgJ1wiIG11bHRpcGxlPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgICAgICB2YXIgaUxlbiA9IGFEYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBpTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChhRGF0YVtqXSkgIT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlc2NhcGUoYURhdGFbal0pID09IGN1cnJlbnRGaWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGVzY2FwZShhRGF0YVtqXSkgPT0gZXNjYXBlKGN1cnJlbnRGaWx0ZXIpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gJ3NlbGVjdGVkICdcbiAgICAgICAgICAgICAgICAgICAgciArPSAnPG9wdGlvbiAnICsgc2VsZWN0ZWQgKyAnIHZhbHVlPVwiJyArIGVzY2FwZShhRGF0YVtqXSkgKyAnXCI+JyArIGFEYXRhW2pdICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJSZWdleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9EbyBub3QgZXNjYXBlIHZhbHVlcyBpZiB0aGV5IGFyZSBleHBsaWNpdGVseSBzZXQgdG8gYXZvaWQgZXNjYXBpbmcgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHRoZSByZWdleHBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhRGF0YVtqXS52YWx1ZSA9PSBjdXJyZW50RmlsdGVyKSBzZWxlY3RlZCA9ICdzZWxlY3RlZCAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgciArPSAnPG9wdGlvbiAnICsgc2VsZWN0ZWQgKyAndmFsdWU9XCInICsgYURhdGFbal0udmFsdWUgKyAnXCI+JyArIGFEYXRhW2pdLmxhYmVsICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXNjYXBlKGFEYXRhW2pdLnZhbHVlKSA9PSBjdXJyZW50RmlsdGVyKSBzZWxlY3RlZCA9ICdzZWxlY3RlZCAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgciArPSAnPG9wdGlvbiAnICsgc2VsZWN0ZWQgKyAndmFsdWU9XCInICsgZXNjYXBlKGFEYXRhW2pdLnZhbHVlKSArICdcIj4nICsgYURhdGFbal0ubGFiZWwgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNlbGVjdCA9ICQociArICc8L3NlbGVjdD4nKTtcbiAgICAgICAgICAgIG5UaC5odG1sKHNlbGVjdCk7XG4gICAgICAgICAgICBuVGgud3JhcElubmVyKCc8c3BhbiBjbGFzcz1cImZpbHRlcl9jb2x1bW4gZmlsdGVyX3NlbGVjdFwiIC8+Jyk7XG5cbiAgICAgICAgICAgIGlmKGJNdWx0aXNlbGVjdCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwic2VhcmNoX2luaXRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwic2VhcmNoX2luaXRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhc0VzY2FwZWRGaWx0ZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmKHNlbGVjdGVkT3B0aW9ucz09bnVsbCB8fCBzZWxlY3RlZE9wdGlvbnM9PVtdKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZSA9ICdeKC4qKSQnO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaCggc2VsZWN0ZWRPcHRpb25zLCBmdW5jdGlvbiggaSwgc0ZpbHRlciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc0VzY2FwZWRGaWx0ZXJzLnB1c2goIGZuUmVnRXhwRXNjYXBlKCBzRmlsdGVyICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZSA9ICdeKCcgKyBhc0VzY2FwZWRGaWx0ZXJzLmpvaW4oJ3wnKSArICcpJCc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvVGFibGUuZm5GaWx0ZXIoIHJlLCBpbmRleCwgdHJ1ZSwgZmFsc2UgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0LmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJzZWFyY2hfaW5pdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJzZWFyY2hfaW5pdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYlJlZ2V4KVxuICAgICAgICAgICAgICAgICAgICAgICAgb1RhYmxlLmZuRmlsdGVyKCQodGhpcykudmFsKCksIGlDb2x1bW4sIGJSZWdleCk7IC8vSXNzdWUgNDFcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgb1RhYmxlLmZuRmlsdGVyKHVuZXNjYXBlKCQodGhpcykudmFsKCkpLCBpQ29sdW1uKTsgLy9Jc3N1ZSAyNVxuICAgICAgICAgICAgICAgICAgICBmbk9uRmlsdGVyZWQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbHRlciAhPSBudWxsICYmIGN1cnJlbnRGaWx0ZXIgIT0gXCJcIikvL0lzc3VlIDgxXG4gICAgICAgICAgICAgICAgICAgIG9UYWJsZS5mbkZpbHRlcih1bmVzY2FwZShjdXJyZW50RmlsdGVyKSwgaUNvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmbkNyZWF0ZVNlbGVjdChvVGFibGUsIGFEYXRhLCBiUmVnZXgsIG9TZWxlY3RlZCwgYk11bHRpc2VsZWN0KSB7XG4gICAgICAgICAgICB2YXIgb1NldHRpbmdzID0gb1RhYmxlLmZuU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGlmICggKGFEYXRhID09IG51bGwgfHwgdHlwZW9mKGFEYXRhKSA9PSAnZnVuY3Rpb24nICkgJiYgb1NldHRpbmdzLnNBamF4U291cmNlICE9IFwiXCIgJiYgIW9TZXR0aW5ncy5vRmVhdHVyZXMuYlNlcnZlclNpZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYSBmdW5jdGlvbiB0byB0aGUgZHJhdyBjYWxsYmFjaywgd2hpY2ggd2lsbCBjaGVjayBmb3IgdGhlIEFqYXggZGF0YSBoYXZpbmdcbiAgICAgICAgICAgICAgICAvLyBiZWVuIGxvYWRlZC4gVXNlIGEgY2xvc3VyZSBmb3IgdGhlIGluZGl2aWR1YWwgY29sdW1uIGVsZW1lbnRzIHRoYXQgYXJlIHVzZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBidWlsdCB0aGUgY29sdW1uIGZpbHRlciwgc2luY2UgJ2knIGFuZCAndGgnIChldGMpIGFyZSBsb2NhbGx5IFwiZ2xvYmFsXCIuXG4gICAgICAgICAgICAgICAgb1NldHRpbmdzLmFvRHJhd0NhbGxiYWNrLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBcImZuXCI6IChmdW5jdGlvbiAoaUNvbHVtbiwgblRoLCBzTGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob1NldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZWJ1aWxkIHRoZSBzZWxlY3Qgb24gdGhlIHNlY29uZCBkcmF3IC0gaS5lLiB3aGVuIHRoZSBBamF4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBoYXMgYmVlbiBsb2FkZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9TZXR0aW5ncy5pRHJhdyA9PSAyICYmIG9TZXR0aW5ncy5zQWpheFNvdXJjZSAhPSBudWxsICYmIG9TZXR0aW5ncy5zQWpheFNvdXJjZSAhPSBcIlwiICYmICFvU2V0dGluZ3Mub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmbkNyZWF0ZUNvbHVtblNlbGVjdChvVGFibGUsIGFEYXRhICYmIGFEYXRhKG9TZXR0aW5ncy5hb0RhdGEsIG9TZXR0aW5ncyksIF9mbkNvbHVtbkluZGV4KGlDb2x1bW4pLCBuVGgsIHNMYWJlbCwgYlJlZ2V4LCBvU2VsZWN0ZWQsIGJNdWx0aXNlbGVjdCk7IC8vSXNzdWUgMzdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KShpLCB0aCwgbGFiZWwpLFxuICAgICAgICAgICAgICAgICAgICBcInNOYW1lXCI6IFwiY29sdW1uX2ZpbHRlcl9cIiArIGlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlZ2FyZGxlc3Mgb2YgdGhlIEFqYXggc3RhdGUsIGJ1aWxkIHRoZSBzZWxlY3Qgb24gZmlyc3QgcGFzc1xuICAgICAgICAgICAgZm5DcmVhdGVDb2x1bW5TZWxlY3Qob1RhYmxlLCB0eXBlb2YoYURhdGEpID09ICdmdW5jdGlvbicgPyBudWxsOiBhRGF0YSwgX2ZuQ29sdW1uSW5kZXgoaSksIHRoLCBsYWJlbCwgYlJlZ2V4LCBvU2VsZWN0ZWQsIGJNdWx0aXNlbGVjdCk7IC8vSXNzdWUgMzdcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZm5SZWdFeHBFc2NhcGUoIHNUZXh0ICkge1xuICAgICAgICAgICAgcmV0dXJuIHNUZXh0LnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBmbkNyZWF0ZURyb3Bkb3duKGFEYXRhKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpO1xuICAgICAgICAgICAgdmFyIHIgPSAnPGRpdiBjbGFzcz1cImRyb3Bkb3duIHNlbGVjdF9maWx0ZXIgZm9ybS1jb250cm9sXCI+PGEgY2xhc3M9XCJkcm9wZG93bi10b2dnbGVcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgaHJlZj1cIiNcIj4nICsgbGFiZWwgKyAnPGIgY2xhc3M9XCJjYXJldFwiPjwvYj48L2E+PHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCI+PGxpIGRhdGEtdmFsdWU9XCJcIj48YT5TaG93IEFsbDwvYT48L2xpPicsIGosIGlMZW4gPSBhRGF0YS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBpTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICByICs9ICc8bGkgZGF0YS12YWx1ZT1cIicgKyBhRGF0YVtqXSArICdcIj48YT4nICsgYURhdGFbal0gKyAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSAkKHIgKyAnPC91bD48L2Rpdj4nKTtcbiAgICAgICAgICAgIHRoLmh0bWwoc2VsZWN0KTtcbiAgICAgICAgICAgIHRoLndyYXBJbm5lcignPHNwYW4gY2xhc3M9XCJmaWx0ZXJDb2x1bW4gZmlsdGVyX3NlbGVjdFwiIC8+Jyk7XG4gICAgICAgICAgICBzZWxlY3QuZmluZCgnbGknKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb1RhYmxlLmZuRmlsdGVyKCQodGhpcykuZGF0YSgndmFsdWUnKSwgaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGZuQ3JlYXRlQ2hlY2tib3gob1RhYmxlLCBhRGF0YSkge1xuXG4gICAgICAgICAgICBpZiAoYURhdGEgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBhRGF0YSA9IF9mbkdldENvbHVtblZhbHVlcyhvVGFibGUuZm5TZXR0aW5ncygpLCBpLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGk7XG5cbiAgICAgICAgICAgIHZhciByID0gJycsIGosIGlMZW4gPSBhRGF0YS5sZW5ndGg7XG5cbiAgICAgICAgICAgIC8vY2xlYW4gdGhlIHN0cmluZ1xuICAgICAgICAgICAgdmFyIGxvY2FsTGFiZWwgPSBsYWJlbC5yZXBsYWNlKCclJywgJ1BlcmMnKS5yZXBsYWNlKFwiJlwiLCBcIkFORFwiKS5yZXBsYWNlKFwiJFwiLCBcIkRPTFwiKS5yZXBsYWNlKFwiwqNcIiwgXCJTVEVSTFwiKS5yZXBsYWNlKFwiQFwiLCBcIkFUXCIpLnJlcGxhY2UoL1xccy9nLCBcIl9cIik7XG4gICAgICAgICAgICBsb2NhbExhYmVsID0gbG9jYWxMYWJlbC5yZXBsYWNlKC9bXmEtekEtWiAwLTldKy9nLCAnJyk7XG4gICAgICAgICAgICAvL2NsZWFuIHRoZSBzdHJpbmdcblxuICAgICAgICAgICAgLy9idXR0b24gbGFiZWwgb3ZlcnJpZGVcbiAgICAgICAgICAgIHZhciBsYWJlbEJ0biA9IGxhYmVsO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuc0ZpbHRlckJ1dHRvblRleHQgIT0gbnVsbCB8fCBwcm9wZXJ0aWVzLnNGaWx0ZXJCdXR0b25UZXh0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhYmVsQnRuID0gcHJvcGVydGllcy5zRmlsdGVyQnV0dG9uVGV4dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlRGl2V2lkdGhUb2dnbGVTaXplID0gMTA7XG4gICAgICAgICAgICB2YXIgbnVtUm93ID0gMTI7IC8vbnVtZXJvIGRpIGNoZWNrYm94IHBlciBjb2xvbm5hXG4gICAgICAgICAgICB2YXIgbnVtQ29sID0gTWF0aC5mbG9vcihpTGVuIC8gbnVtUm93KTtcbiAgICAgICAgICAgIGlmIChpTGVuICUgbnVtUm93ID4gMCkge1xuICAgICAgICAgICAgICAgIG51bUNvbCA9IG51bUNvbCArIDE7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL2NvdW50IGhvdyBtYW55IGNvbHVtbiBzaG91bGQgYmUgZ2VuZXJhdGVkIGFuZCBzcGxpdCB0aGUgZGl2IHNpemVcbiAgICAgICAgICAgIHZhciBkaXZXaWR0aCA9IDEwMCAvIG51bUNvbCAtIDI7XG5cbiAgICAgICAgICAgIHZhciBkaXZXaWR0aFRvZ2dsZSA9IHJlbGF0aXZlRGl2V2lkdGhUb2dnbGVTaXplICogbnVtQ29sO1xuXG4gICAgICAgICAgICBpZiAobnVtQ29sID09IDEpIHtcbiAgICAgICAgICAgICAgICBkaXZXaWR0aCA9IDIwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGl2Um93RGVmID0gJzxkaXYgc3R5bGU9XCJmbG9hdDpsZWZ0OyBtaW4td2lkdGg6ICcgKyBkaXZXaWR0aCArICclOyBcIiA+JztcbiAgICAgICAgICAgIHZhciBkaXZDbG9zZSA9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICB2YXIgdW5pcXVlSWQgPSBvVGFibGUuYXR0cihcImlkXCIpICsgbG9jYWxMYWJlbDtcbiAgICAgICAgICAgIHZhciBidXR0b25JZCA9IFwiY2hrQnRuT3BlblwiICsgdW5pcXVlSWQ7XG4gICAgICAgICAgICB2YXIgY2hlY2tUb2dnbGVEaXYgPSB1bmlxdWVJZCArIFwiLWZsdC10b2dnbGVcIjtcbiAgICAgICAgICAgIHIgKz0gJzxidXR0b24gaWQ9XCInICsgYnV0dG9uSWQgKyAnXCIgY2xhc3M9XCJjaGVja2JveF9maWx0ZXIgYnRuIGJ0bi1kZWZhdWx0XCIgPiAnICsgbGFiZWxCdG4gKyAnPC9idXR0b24+JzsgLy9maWx0ZXIgYnV0dG9uIHdpdGNoIG9wZW4gZGlhbG9nXG4gICAgICAgICAgICByICs9ICc8ZGl2IGlkPVwiJyArIGNoZWNrVG9nZ2xlRGl2ICsgJ1wiICdcbiAgICAgICAgICAgICsgJ3RpdGxlPVwiJyArIGxhYmVsICsgJ1wiICdcbiAgICAgICAgICAgICsgJ3JlbD1cIicgKyBpICsgJ1wiICdcbiAgICAgICAgICAgICsgJ2NsYXNzPVwidG9nZ2xlLWNoZWNrIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIiAgc3R5bGU9XCJ3aWR0aDogJyArIChkaXZXaWR0aFRvZ2dsZSkgKyAnJTsgXCIgPic7IC8vZGlhbG9nIGRpdlxuICAgICAgICAgICAgLy9yKz0gJzxkaXYgYWxpZ249XCJjZW50ZXJcIiBzdHlsZT1cIm1hcmdpbi10b3A6IDVweDsgXCI+IDxidXR0b24gaWQ9XCInK2J1dHRvbklkKydSZXNldFwiIGNsYXNzPVwiY2hlY2tib3hfZmlsdGVyXCIgPiByZXNldCA8L2J1dHRvbj4gPC9kaXY+JzsgLy9yZXNldCBidXR0b24gYW5kIGl0cyBkaXZcbiAgICAgICAgICAgIHIgKz0gZGl2Um93RGVmO1xuXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgaUxlbjsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICAvL2lmIGxhc3QgY2hlY2sgY2xvc2UgZGl2XG4gICAgICAgICAgICAgICAgaWYgKGogJSBudW1Sb3cgPT0gMCAmJiBqICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgciArPSBkaXZDbG9zZSArIGRpdlJvd0RlZjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc0xhYmVsID0gYURhdGFbal07XG4gICAgICAgICAgICAgICAgdmFyIHNWYWx1ZSA9IGFEYXRhW2pdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoYURhdGFbal0pID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNMYWJlbCA9IGFEYXRhW2pdLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICBzVmFsdWUgPSBhRGF0YVtqXS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2NoZWNrIGJ1dHRvblxuICAgICAgICAgICAgICAgIHIgKz0gJzxpbnB1dCBjbGFzcz1cInNlYXJjaF9pbml0IGNoZWNrYm94X2ZpbHRlciBidG4gYnRuLWRlZmF1bHRcIiB0eXBlPVwiY2hlY2tib3hcIiBpZD0gXCInICsgdW5pcXVlSWQgKyAnX2NiXycgKyBzVmFsdWUgKyAnXCIgbmFtZT0gXCInICsgbG9jYWxMYWJlbCArICdcIiB2YWx1ZT1cIicgKyBzVmFsdWUgKyAnXCIgPicgKyBzTGFiZWwgKyAnPGJyLz4nO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJChyKTtcbiAgICAgICAgICAgICAgICB0aC5odG1sKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICB0aC53cmFwSW5uZXIoJzxzcGFuIGNsYXNzPVwiZmlsdGVyX2NvbHVtbiBmaWx0ZXJfY2hlY2tib3hcIiAvPicpO1xuICAgICAgICAgICAgICAgIC8vb24gZXZlcnkgY2hlY2tib3ggc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hhbmdlKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvciA9ICd8JzsgLy92YXIgZm9yIHNlbGVjdCBjaGVja3MgaW4gJ29yJyBpbnRvIHRoZSByZWdleFxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzU2l6ZSA9ICQoJ2lucHV0OmNoZWNrYm94W25hbWU9XCInICsgbG9jYWxMYWJlbCArICdcIl06Y2hlY2tlZCcpLnNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXQ6Y2hlY2tib3hbbmFtZT1cIicgKyBsb2NhbExhYmVsICsgJ1wiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zZWFyY2ggPSBzZWFyY2ggKyAnICcgKyAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25jYXRlbmF0aW9uIGZvciBzZWxlY3RlZCBjaGVja3MgaW4gb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaW5kZXggPT0gMCAmJiByZXNTaXplID09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKGluZGV4ICE9IDAgJiYgaW5kZXggPT0gcmVzU2l6ZSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdHJpbVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoID0gc2VhcmNoLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoID0gc2VhcmNoICsgJCh0aGlzKS52YWwoKSArIG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3IgPSAnfCc7XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2lucHV0OmNoZWNrYm94W25hbWU9XCInICsgbG9jYWxMYWJlbCArICdcIl0nKS5yZW1vdmVDbGFzcyhcInNlYXJjaF9pbml0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXQ6Y2hlY2tib3hbbmFtZT1cIicgKyBsb2NhbExhYmVsICsgJ1wiXScpLmFkZENsYXNzKFwic2VhcmNoX2luaXRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyogT2xkIGNvZGUgZm9yIHNldHRpbmcgc2VhcmNoX2luaXQgQ1NTIGNsYXNzIG9uIGNoZWNrYm94ZXMgaWYgYW55IG9mIHRoZW0gaXMgY2hlY2tlZFxuICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgamogPSAwOyBqaiA8IGlMZW47IGpqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2ggIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBhRGF0YVtqal0pLnJlbW92ZUNsYXNzKFwic2VhcmNoX2luaXRcIik7XG4gICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBhRGF0YVtqal0pLmFkZENsYXNzKFwic2VhcmNoX2luaXRcIik7XG4gICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgICAgIC8vZXhlY3V0ZSBzZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgb1RhYmxlLmZuRmlsdGVyKHNlYXJjaCwgaW5kZXgsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgZm5PbkZpbHRlcmVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vZmlsdGVyIGJ1dHRvblxuICAgICAgICAgICAgJCgnIycgKyBidXR0b25JZCkuYnV0dG9uKCk7XG4gICAgICAgICAgICAvL2RpYWxvZ1xuICAgICAgICAgICAgJCgnIycgKyBjaGVja1RvZ2dsZURpdikuZGlhbG9nKHtcbiAgICAgICAgICAgICAgICAvL2hlaWdodDogMTQwLFxuICAgICAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAvL3Nob3c6IFwiYmxpbmRcIixcbiAgICAgICAgICAgICAgICBoaWRlOiBcImJsaW5kXCIsXG4gICAgICAgICAgICAgICAgYnV0dG9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJSZXNldFwiLFxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kKCcjJytidXR0b25JZCkucmVtb3ZlQ2xhc3MoXCJmaWx0ZXJfc2VsZWN0ZWRcIik7IC8vTE0gcmVtb3ZlIGJvcmRlciBpZiBmaWx0ZXIgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2lucHV0OmNoZWNrYm94W25hbWU9XCInICsgbG9jYWxMYWJlbCArICdcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24gKGluZGV4Mykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwic2VhcmNoX2luaXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9UYWJsZS5mbkZpbHRlcignJywgaW5kZXgsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuT25GaWx0ZXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJDbG9zZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHsgJCh0aGlzKS5kaWFsb2coXCJjbG9zZVwiKTsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgJCgnIycgKyBidXR0b25JZCkuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgJCgnIycgKyBjaGVja1RvZ2dsZURpdikuZGlhbG9nKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgJCgnIycgKyBjaGVja1RvZ2dsZURpdikuZGlhbG9nKFwid2lkZ2V0XCIpLnBvc2l0aW9uKHsgbXk6ICd0b3AnLFxuICAgICAgICAgICAgICAgICAgICBhdDogJ2JvdHRvbScsXG4gICAgICAgICAgICAgICAgICAgIG9mOiB0YXJnZXRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgZm5PbkZpbHRlcmVkQ3VycmVudCA9IGZuT25GaWx0ZXJlZDtcblxuICAgICAgICAgICAgZm5PbkZpbHRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKCcjJyArIGJ1dHRvbklkKTtcbiAgICAgICAgICAgICAgICAkKCcjJyArIGNoZWNrVG9nZ2xlRGl2KS5kaWFsb2coXCJ3aWRnZXRcIikucG9zaXRpb24oeyBteTogJ3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIGF0OiAnYm90dG9tJyxcbiAgICAgICAgICAgICAgICAgICAgb2Y6IHRhcmdldFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZuT25GaWx0ZXJlZEN1cnJlbnQoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvL3Jlc2V0XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICQoJyMnK2J1dHRvbklkK1wiUmVzZXRcIikuYnV0dG9uKCk7XG4gICAgICAgICAgICAgJCgnIycrYnV0dG9uSWQrXCJSZXNldFwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICQoJyMnK2J1dHRvbklkKS5yZW1vdmVDbGFzcyhcImZpbHRlcl9zZWxlY3RlZFwiKTsgLy9MTSByZW1vdmUgYm9yZGVyIGlmIGZpbHRlciBzZWxlY3RlZFxuICAgICAgICAgICAgICQoJ2lucHV0OmNoZWNrYm94W25hbWU9XCInK2xvY2FsTGFiZWwrJ1wiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbihpbmRleDMpIHtcbiAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcInNlYXJjaF9pbml0XCIpO1xuICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgIG9UYWJsZS5mbkZpbHRlcignJywgaW5kZXgsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIGZ1bmN0aW9uIF9mblJhbmdlTGFiZWxQYXJ0KGlQbGFjZSkge1xuICAgICAgICAgICAgc3dpdGNoIChpUGxhY2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzUmFuZ2VGb3JtYXQuc3Vic3RyaW5nKDAsIHNSYW5nZUZvcm1hdC5pbmRleE9mKFwie2Zyb219XCIpKTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzUmFuZ2VGb3JtYXQuc3Vic3RyaW5nKHNSYW5nZUZvcm1hdC5pbmRleE9mKFwie2Zyb219XCIpICsgNiwgc1JhbmdlRm9ybWF0LmluZGV4T2YoXCJ7dG99XCIpKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc1JhbmdlRm9ybWF0LnN1YnN0cmluZyhzUmFuZ2VGb3JtYXQuaW5kZXhPZihcInt0b31cIikgKyA0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIHZhciBvVGFibGUgPSB0aGlzO1xuXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIHNQbGFjZUhvbGRlcjogXCJmb290XCIsXG4gICAgICAgICAgICBzUmFuZ2VTZXBhcmF0b3I6IFwiflwiLFxuICAgICAgICAgICAgaUZpbHRlcmluZ0RlbGF5OiA1MDAsXG4gICAgICAgICAgICBhb0NvbHVtbnM6IG51bGwsXG4gICAgICAgICAgICBzUmFuZ2VGb3JtYXQ6IFwiRnJvbSB7ZnJvbX0gdG8ge3RvfVwiLFxuICAgICAgICAgICAgc0RhdGVGcm9tVG9rZW46IFwiZnJvbVwiLFxuICAgICAgICAgICAgc0RhdGVUb1Rva2VuOiBcInRvXCJcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcHJvcGVydGllcyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgaWYgKCFvVGFibGUuZm5TZXR0aW5ncygpLm9GZWF0dXJlcy5iRmlsdGVyKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGFzSW5pdFZhbHMgPSBuZXcgQXJyYXkoKTtcblxuICAgICAgICAgICAgdmFyIGFvRmlsdGVyQ2VsbHMgPSBvVGFibGUuZm5TZXR0aW5ncygpLmFvRm9vdGVyWzBdO1xuXG4gICAgICAgICAgICB2YXIgb0hvc3QgPSBvVGFibGUuZm5TZXR0aW5ncygpLm5URm9vdDsgLy9CZWZvcmUgZml4IGZvciBDb2xWaXNcbiAgICAgICAgICAgIHZhciBzRmlsdGVyUm93ID0gXCJ0clwiOyAvL0JlZm9yZSBmaXggZm9yIENvbFZpc1xuXG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5zUGxhY2VIb2xkZXIgPT0gXCJoZWFkOmFmdGVyXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSAkKFwidHI6Zmlyc3RcIiwgb1RhYmxlLmZuU2V0dGluZ3MoKS5uVEhlYWQpLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgIC8vdHIuYXBwZW5kVG8oJChvVGFibGUuZm5TZXR0aW5ncygpLm5USGVhZCkpO1xuICAgICAgICAgICAgICAgIGlmIChvVGFibGUuZm5TZXR0aW5ncygpLmJTb3J0Q2VsbHNUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgdHIucHJlcGVuZFRvKCQob1RhYmxlLmZuU2V0dGluZ3MoKS5uVEhlYWQpKTtcbiAgICAgICAgICAgICAgICAgICAgLy90ci5hcHBlbmRUbygkKFwidGhlYWRcIiwgb1RhYmxlKSk7XG4gICAgICAgICAgICAgICAgICAgIGFvRmlsdGVyQ2VsbHMgPSBvVGFibGUuZm5TZXR0aW5ncygpLmFvSGVhZGVyWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHIuYXBwZW5kVG8oJChvVGFibGUuZm5TZXR0aW5ncygpLm5USGVhZCkpO1xuICAgICAgICAgICAgICAgICAgICAvL3RyLnByZXBlbmRUbygkKFwidGhlYWRcIiwgb1RhYmxlKSk7XG4gICAgICAgICAgICAgICAgICAgIGFvRmlsdGVyQ2VsbHMgPSBvVGFibGUuZm5TZXR0aW5ncygpLmFvSGVhZGVyWzBdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNGaWx0ZXJSb3cgPSBcInRyOmxhc3RcIjtcbiAgICAgICAgICAgICAgICBvSG9zdCA9IG9UYWJsZS5mblNldHRpbmdzKCkublRIZWFkO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuc1BsYWNlSG9sZGVyID09IFwiaGVhZDpiZWZvcmVcIikge1xuXG4gICAgICAgICAgICAgICAgaWYgKG9UYWJsZS5mblNldHRpbmdzKCkuYlNvcnRDZWxsc1RvcCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHIgPSAkKFwidHI6Zmlyc3RcIiwgb1RhYmxlLmZuU2V0dGluZ3MoKS5uVEhlYWQpLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgICAgICB0ci5hcHBlbmRUbygkKG9UYWJsZS5mblNldHRpbmdzKCkublRIZWFkKSk7XG4gICAgICAgICAgICAgICAgICAgIGFvRmlsdGVyQ2VsbHMgPSBvVGFibGUuZm5TZXR0aW5ncygpLmFvSGVhZGVyWzFdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFvRmlsdGVyQ2VsbHMgPSBvVGFibGUuZm5TZXR0aW5ncygpLmFvSGVhZGVyWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKmVsc2Uge1xuICAgICAgICAgICAgICAgICAvL3RyLnByZXBlbmRUbygkKFwidGhlYWRcIiwgb1RhYmxlKSk7XG4gICAgICAgICAgICAgICAgIHNGaWx0ZXJSb3cgPSBcInRyOmZpcnN0XCI7XG4gICAgICAgICAgICAgICAgIH0qL1xuXG4gICAgICAgICAgICAgICAgc0ZpbHRlclJvdyA9IFwidHI6Zmlyc3RcIjtcblxuICAgICAgICAgICAgICAgIG9Ib3N0ID0gb1RhYmxlLmZuU2V0dGluZ3MoKS5uVEhlYWQ7XG5cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyQoc0ZpbHRlclJvdyArIFwiIHRoXCIsIG9Ib3N0KS5lYWNoKGZ1bmN0aW9uIChpbmRleCkgey8vYnVnIHdpdGggQ29sVmlzXG4gICAgICAgICAgICAkKGFvRmlsdGVyQ2VsbHMpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7Ly9maXggZm9yIENvbFZpc1xuICAgICAgICAgICAgICAgIGkgPSBpbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgYW9Db2x1bW4gPSB7IHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICBiUmVnZXg6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBiU21hcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlNYXhMZW5naHQ6IC0xLFxuICAgICAgICAgICAgICAgICAgICBpRmlsdGVyTGVuZ3RoOiAwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5hb0NvbHVtbnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5hb0NvbHVtbnMubGVuZ3RoIDwgaSB8fCBwcm9wZXJ0aWVzLmFvQ29sdW1uc1tpXSA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBhb0NvbHVtbiA9IHByb3BlcnRpZXMuYW9Db2x1bW5zW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2xhYmVsID0gJCh0aGlzKS50ZXh0KCk7IC8vQmVmb3JlIGZpeCBmb3IgQ29sVmlzXG4gICAgICAgICAgICAgICAgbGFiZWwgPSAkKCQodGhpcylbMF0uY2VsbCkudGV4dCgpOyAvL0ZpeCBmb3IgQ29sVmlzXG4gICAgICAgICAgICAgICAgaWYgKGFvQ29sdW1uLnNTZWxlY3RvciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGggPSAkKCQodGhpcylbMF0pOy8vQmVmb3JlIGZpeCBmb3IgQ29sVmlzXG4gICAgICAgICAgICAgICAgICAgIHRoID0gJCgkKHRoaXMpWzBdLmNlbGwpOyAvL0ZpeCBmb3IgQ29sVmlzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aCA9ICQoYW9Db2x1bW4uc1NlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGggPSAkKCQodGhpcylbMF0uY2VsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFvQ29sdW1uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFvQ29sdW1uLnNSYW5nZUZvcm1hdCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgc1JhbmdlRm9ybWF0ID0gYW9Db2x1bW4uc1JhbmdlRm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBzUmFuZ2VGb3JtYXQgPSBwcm9wZXJ0aWVzLnNSYW5nZUZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhb0NvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibnVsbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuQ3JlYXRlSW5wdXQob1RhYmxlLCB0cnVlLCBmYWxzZSwgdHJ1ZSwgYW9Db2x1bW4uaUZpbHRlckxlbmd0aCwgYW9Db2x1bW4uaU1heExlbmdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2VsZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFvQ29sdW1uLmJSZWdleCAhPSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhb0NvbHVtbi5iUmVnZXggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbkNyZWF0ZVNlbGVjdChvVGFibGUsIGFvQ29sdW1uLnZhbHVlcywgYW9Db2x1bW4uYlJlZ2V4LCBhb0NvbHVtbi5zZWxlY3RlZCwgYW9Db2x1bW4ubXVsdGlwbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bWJlci1yYW5nZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuQ3JlYXRlUmFuZ2VJbnB1dChvVGFibGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRhdGUtcmFuZ2VcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbkNyZWF0ZURhdGVSYW5nZUlucHV0KG9UYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbkNyZWF0ZUNoZWNrYm94KG9UYWJsZSwgYW9Db2x1bW4udmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0d2l0dGVyLWRyb3Bkb3duXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZHJvcGRvd25cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbkNyZWF0ZURyb3Bkb3duKGFvQ29sdW1uLnZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiUmVnZXggPSAoYW9Db2x1bW4uYlJlZ2V4ID09IG51bGwgPyBmYWxzZSA6IGFvQ29sdW1uLmJSZWdleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYlNtYXJ0ID0gKGFvQ29sdW1uLmJTbWFydCA9PSBudWxsID8gZmFsc2UgOiBhb0NvbHVtbi5iU21hcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuQ3JlYXRlSW5wdXQob1RhYmxlLCBiUmVnZXgsIGJTbWFydCwgZmFsc2UsIGFvQ29sdW1uLmlGaWx0ZXJMZW5ndGgsIGFvQ29sdW1uLmlNYXhMZW5naHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGFpQ3VzdG9tU2VhcmNoX0luZGV4ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAvL3ZhciBpbmRleCA9IGFpQ3VzdG9tU2VhcmNoX0luZGV4ZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGZuU2VhcmNoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gb1RhYmxlLmF0dHIoXCJpZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoXCIjXCIgKyBpZCArIFwiX3JhbmdlX2Zyb21fXCIgKyBhaUN1c3RvbVNlYXJjaF9JbmRleGVzW2pdKS52YWwoKSArIHByb3BlcnRpZXMuc1JhbmdlU2VwYXJhdG9yICsgJChcIiNcIiArIGlkICsgXCJfcmFuZ2VfdG9fXCIgKyBhaUN1c3RvbVNlYXJjaF9JbmRleGVzW2pdKS52YWwoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZm5TZWFyY2hfLnB1c2goZm5TZWFyY2hfKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9UYWJsZS5mblNldHRpbmdzKCkub0ZlYXR1cmVzLmJTZXJ2ZXJTaWRlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZm5TZXJ2ZXJEYXRhT3JpZ2luYWwgPSBvVGFibGUuZm5TZXR0aW5ncygpLmZuU2VydmVyRGF0YTtcblxuICAgICAgICAgICAgICAgIG9UYWJsZS5mblNldHRpbmdzKCkuZm5TZXJ2ZXJEYXRhID0gZnVuY3Rpb24gKHNTb3VyY2UsIGFvRGF0YSwgZm5DYWxsYmFjaykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBhaUN1c3RvbVNlYXJjaF9JbmRleGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBhaUN1c3RvbVNlYXJjaF9JbmRleGVzW2pdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgYW9EYXRhLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFvRGF0YVtrXS5uYW1lID09IFwic1NlYXJjaF9cIiArIGluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhb0RhdGFba10udmFsdWUgPSBhZm5TZWFyY2hfW2pdKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYW9EYXRhLnB1c2goeyBcIm5hbWVcIjogXCJzUmFuZ2VTZXBhcmF0b3JcIiwgXCJ2YWx1ZVwiOiBwcm9wZXJ0aWVzLnNSYW5nZVNlcGFyYXRvciB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm5TZXJ2ZXJEYXRhT3JpZ2luYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmblNlcnZlckRhdGFPcmlnaW5hbChzU291cmNlLCBhb0RhdGEsIGZuQ2FsbGJhY2ssIG9UYWJsZS5mblNldHRpbmdzKCkpOyAvL1RPRE86IFNlZSBJc3N1ZSAxOFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmblNlcnZlckRhdGFPcmlnaW5hbChzU291cmNlLCBhb0RhdGEsIGZuQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5nZXRKU09OKHNTb3VyY2UsIGFvRGF0YSwgZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbkNhbGxiYWNrKGpzb24pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH07XG5cblxuXG5cbn0pKGpRdWVyeSk7XG4iXX0=
