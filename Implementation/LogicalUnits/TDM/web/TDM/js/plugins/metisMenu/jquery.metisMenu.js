!function(a){"use strict";a.fn.emulateTransitionEnd=function(b){var c=!1,e=this;a(this).one("mmTransitionEnd",(function(){c=!0}));return setTimeout((function(){c||a(e).trigger(d.end)}),b),this};var d=function(){var a=document.createElement("mm"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}();d&&(a.event.special.mmTransitionEnd={bindType:d.end,delegateType:d.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}});var e=function(b,c){this.$element=a(b),this.options=a.extend({},e.DEFAULTS,c),this.transitioning=null,this.init()};e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0,doubleTapToGo:!1,activeClass:"active"},e.prototype.init=function(){var b=this,c=this.options.activeClass;this.$element.find("li."+c).has("ul").children("ul").addClass("collapse in"),this.$element.find("li").not("."+c).has("ul").children("ul").addClass("collapse"),this.options.doubleTapToGo&&this.$element.find("li."+c).has("ul").children("a").addClass("doubleTapToGo"),this.$element.find("li").has("ul").children("a").on("click.metisMenu",(function(d){var e=a(this),f=e.parent("li"),g=f.children("ul");return d.preventDefault(),f.hasClass(c)?b.hide(g):b.show(g),b.options.doubleTapToGo&&b.doubleTapToGo(e)&&"#"!==e.attr("href")&&""!==e.attr("href")?(d.stopPropagation(),void(document.location=e.attr("href"))):void 0}))},e.prototype.doubleTapToGo=function(a){var b=this.$element;return a.hasClass("doubleTapToGo")?(a.removeClass("doubleTapToGo"),!0):a.parent().children("ul").length?(b.find(".doubleTapToGo").removeClass("doubleTapToGo"),a.addClass("doubleTapToGo"),!1):void 0},e.prototype.show=function(b){var c=this.options.activeClass,f=a(b),g=f.parent("li");if(!this.transitioning&&!f.hasClass("in")){g.addClass(c),this.options.toggle&&this.hide(g.siblings().children("ul.in")),f.removeClass("collapse").addClass("collapsing").height(0),this.transitioning=1;var h=function(){f.removeClass("collapsing").addClass("collapse in").height(""),this.transitioning=0};return d?void f.one("mmTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(e.TRANSITION_DURATION).height(f[0].scrollHeight):h.call(this)}},e.prototype.hide=function(b){var c=this.options.activeClass,f=a(b);if(!this.transitioning&&f.hasClass("in")){f.parent("li").removeClass(c),f.height(f.height())[0].offsetHeight,f.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var g=function(){this.transitioning=0,f.removeClass("collapsing").addClass("collapse")};return d?void f.height(0).one("mmTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(e.TRANSITION_DURATION):g.call(this)}};var f=a.fn.metisMenu;a.fn.metisMenu=function(b){return this.each((function(){var c=a(this),d=c.data("mm"),f=a.extend({},e.DEFAULTS,c.data(),"object"==typeof b&&b);d||c.data("mm",d=new e(this,f)),"string"==typeof b&&d[b]()}))},a.fn.metisMenu.Constructor=e,a.fn.metisMenu.noConflict=function(){return a.fn.metisMenu=f,this}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvbWV0aXNNZW51L2pxdWVyeS5tZXRpc01lbnUuanMiXSwibmFtZXMiOlsiYSIsImZuIiwiZW11bGF0ZVRyYW5zaXRpb25FbmQiLCJiIiwiYyIsImUiLCJ0aGlzIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJkIiwiZW5kIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiV2Via2l0VHJhbnNpdGlvbiIsIk1velRyYW5zaXRpb24iLCJPVHJhbnNpdGlvbiIsInRyYW5zaXRpb24iLCJzdHlsZSIsImV2ZW50Iiwic3BlY2lhbCIsIm1tVHJhbnNpdGlvbkVuZCIsImJpbmRUeXBlIiwiZGVsZWdhdGVUeXBlIiwiaGFuZGxlIiwidGFyZ2V0IiwiaXMiLCJoYW5kbGVPYmoiLCJoYW5kbGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCIkZWxlbWVudCIsIm9wdGlvbnMiLCJleHRlbmQiLCJERUZBVUxUUyIsInRyYW5zaXRpb25pbmciLCJpbml0IiwiVFJBTlNJVElPTl9EVVJBVElPTiIsInRvZ2dsZSIsImRvdWJsZVRhcFRvR28iLCJhY3RpdmVDbGFzcyIsInByb3RvdHlwZSIsImZpbmQiLCJoYXMiLCJjaGlsZHJlbiIsImFkZENsYXNzIiwibm90Iiwib24iLCJmIiwicGFyZW50IiwiZyIsInByZXZlbnREZWZhdWx0IiwiaGFzQ2xhc3MiLCJoaWRlIiwic2hvdyIsImF0dHIiLCJzdG9wUHJvcGFnYXRpb24iLCJsb2NhdGlvbiIsInJlbW92ZUNsYXNzIiwibGVuZ3RoIiwic2libGluZ3MiLCJoZWlnaHQiLCJoIiwicHJveHkiLCJzY3JvbGxIZWlnaHQiLCJjYWxsIiwib2Zmc2V0SGVpZ2h0IiwibWV0aXNNZW51IiwiZWFjaCIsImRhdGEiLCJDb25zdHJ1Y3RvciIsIm5vQ29uZmxpY3QiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQVNFLFNBQVNBLEdBQ1AsYUF5QkFBLEVBQUVDLEdBQUdDLHFCQUF1QixTQUFTQyxHQUNqQyxJQUFJQyxHQUFJLEVBQ0pDLEVBQUlDLEtBQ1JOLEVBQUVNLE1BQU1DLElBQUksbUJBQW1CLFdBQzNCSCxHQUFJLEtBS1IsT0FBT0ksWUFIQyxXQUNKSixHQUFLSixFQUFFSyxHQUFHSSxRQUFRQyxFQUFFQyxPQUVIUixHQUFJRyxNQUU3QixJQUFJSSxFQWxDSixXQUNJLElBQUlWLEVBQUlZLFNBQVNDLGNBQWMsTUFDM0JWLEVBQUksQ0FDQVcsaUJBQWtCLHNCQUNsQkMsY0FBZSxnQkFDZkMsWUFBYSxnQ0FDYkMsV0FBWSxpQkFFcEIsSUFBSyxJQUFJYixLQUFLRCxFQUNWLFFBQUksSUFBV0gsRUFBRWtCLE1BQU1kLEdBQUksTUFBTyxDQUM5Qk8sSUFBS1IsRUFBRUMsSUFFZixPQUFPLEVBc0JIRCxHQUNSTyxJQUFNVixFQUFFbUIsTUFBTUMsUUFBUUMsZ0JBQWtCLENBQ3BDQyxTQUFVWixFQUFFQyxJQUNaWSxhQUFjYixFQUFFQyxJQUNoQmEsT0FBUSxTQUFTckIsR0FDYixPQUFPSCxFQUFFRyxFQUFFc0IsUUFBUUMsR0FBR3BCLE1BQVFILEVBQUV3QixVQUFVQyxRQUFRQyxNQUFNdkIsS0FBTXdCLGdCQUFhLEtBR25GLElBQUl6QixFQUFJLFNBQVNGLEVBQUdDLEdBQ2hCRSxLQUFLeUIsU0FBVy9CLEVBQUVHLEdBQUlHLEtBQUswQixRQUFVaEMsRUFBRWlDLE9BQU8sR0FBSTVCLEVBQUU2QixTQUFVOUIsR0FBSUUsS0FBSzZCLGNBQWdCLEtBQU03QixLQUFLOEIsUUFFdEcvQixFQUFFZ0Msb0JBQXNCLElBQUtoQyxFQUFFNkIsU0FBVyxDQUN0Q0ksUUFBUSxFQUNSQyxlQUFlLEVBQ2ZDLFlBQWEsVUFDZG5DLEVBQUVvQyxVQUFVTCxLQUFPLFdBQ2xCLElBQUlqQyxFQUFJRyxLQUNKRixFQUFJRSxLQUFLMEIsUUFBUVEsWUFDckJsQyxLQUFLeUIsU0FBU1csS0FBSyxNQUFRdEMsR0FBR3VDLElBQUksTUFBTUMsU0FBUyxNQUFNQyxTQUFTLGVBQWdCdkMsS0FBS3lCLFNBQVNXLEtBQUssTUFBTUksSUFBSSxJQUFNMUMsR0FBR3VDLElBQUksTUFBTUMsU0FBUyxNQUFNQyxTQUFTLFlBQWF2QyxLQUFLMEIsUUFBUU8sZUFBaUJqQyxLQUFLeUIsU0FBU1csS0FBSyxNQUFRdEMsR0FBR3VDLElBQUksTUFBTUMsU0FBUyxLQUFLQyxTQUFTLGlCQUFrQnZDLEtBQUt5QixTQUFTVyxLQUFLLE1BQU1DLElBQUksTUFBTUMsU0FBUyxLQUFLRyxHQUFHLG1CQUFtQixTQUFTckMsR0FDaFcsSUFBSUwsRUFBSUwsRUFBRU0sTUFDTjBDLEVBQUkzQyxFQUFFNEMsT0FBTyxNQUNiQyxFQUFJRixFQUFFSixTQUFTLE1BQ25CLE9BQU9sQyxFQUFFeUMsaUJBQWtCSCxFQUFFSSxTQUFTaEQsR0FBS0QsRUFBRWtELEtBQUtILEdBQUsvQyxFQUFFbUQsS0FBS0osR0FBSS9DLEVBQUU2QixRQUFRTyxlQUFpQnBDLEVBQUVvQyxjQUFjbEMsSUFBTSxNQUFRQSxFQUFFa0QsS0FBSyxTQUFXLEtBQU9sRCxFQUFFa0QsS0FBSyxTQUFXN0MsRUFBRThDLHVCQUF3QjVDLFNBQVM2QyxTQUFXcEQsRUFBRWtELEtBQUssZUFBWSxNQUU1T2xELEVBQUVvQyxVQUFVRixjQUFnQixTQUFTdkMsR0FDcEMsSUFBSUcsRUFBSUcsS0FBS3lCLFNBQ2IsT0FBTy9CLEVBQUVvRCxTQUFTLGtCQUFvQnBELEVBQUUwRCxZQUFZLGtCQUFrQixHQUFNMUQsRUFBRWlELFNBQVNMLFNBQVMsTUFBTWUsUUFBVXhELEVBQUV1QyxLQUFLLGtCQUFrQmdCLFlBQVksaUJBQWtCMUQsRUFBRTZDLFNBQVMsa0JBQWtCLFFBQU0sR0FDM014QyxFQUFFb0MsVUFBVWEsS0FBTyxTQUFTbkQsR0FDM0IsSUFBSUMsRUFBSUUsS0FBSzBCLFFBQVFRLFlBQ2pCUSxFQUFJaEQsRUFBRUcsR0FDTitDLEVBQUlGLEVBQUVDLE9BQU8sTUFDakIsSUFBSzNDLEtBQUs2QixnQkFBa0JhLEVBQUVJLFNBQVMsTUFBTyxDQUMxQ0YsRUFBRUwsU0FBU3pDLEdBQUlFLEtBQUswQixRQUFRTSxRQUFVaEMsS0FBSytDLEtBQUtILEVBQUVVLFdBQVdoQixTQUFTLFVBQVdJLEVBQUVVLFlBQVksWUFBWWIsU0FBUyxjQUFjZ0IsT0FBTyxHQUFJdkQsS0FBSzZCLGNBQWdCLEVBQ2xLLElBQUkyQixFQUFJLFdBQ0pkLEVBQUVVLFlBQVksY0FBY2IsU0FBUyxlQUFlZ0IsT0FBTyxJQUFLdkQsS0FBSzZCLGNBQWdCLEdBRXpGLE9BQU96QixPQUFTc0MsRUFBRXpDLElBQUksa0JBQW1CUCxFQUFFK0QsTUFBTUQsRUFBR3hELE9BQU9KLHFCQUFxQkcsRUFBRWdDLHFCQUFxQndCLE9BQU9iLEVBQUUsR0FBR2dCLGNBQWdCRixFQUFFRyxLQUFLM0QsUUFFL0lELEVBQUVvQyxVQUFVWSxLQUFPLFNBQVNsRCxHQUMzQixJQUFJQyxFQUFJRSxLQUFLMEIsUUFBUVEsWUFDakJRLEVBQUloRCxFQUFFRyxHQUNWLElBQUtHLEtBQUs2QixlQUFpQmEsRUFBRUksU0FBUyxNQUFPLENBQ3pDSixFQUFFQyxPQUFPLE1BQU1TLFlBQVl0RCxHQUFJNEMsRUFBRWEsT0FBT2IsRUFBRWEsVUFBVSxHQUFHSyxhQUFjbEIsRUFBRUgsU0FBUyxjQUFjYSxZQUFZLFlBQVlBLFlBQVksTUFBT3BELEtBQUs2QixjQUFnQixFQUM5SixJQUFJZSxFQUFJLFdBQ0o1QyxLQUFLNkIsY0FBZ0IsRUFBR2EsRUFBRVUsWUFBWSxjQUFjYixTQUFTLGFBRWpFLE9BQU9uQyxPQUFTc0MsRUFBRWEsT0FBTyxHQUFHdEQsSUFBSSxrQkFBbUJQLEVBQUUrRCxNQUFNYixFQUFHNUMsT0FBT0oscUJBQXFCRyxFQUFFZ0MscUJBQXVCYSxFQUFFZSxLQUFLM0QsUUFHbEksSUFBSTBDLEVBQUloRCxFQUFFQyxHQUFHa0UsVUFDYm5FLEVBQUVDLEdBQUdrRSxVQXJFTCxTQUFXaEUsR0FDUCxPQUFPRyxLQUFLOEQsTUFBSyxXQUNiLElBQUloRSxFQUFJSixFQUFFTSxNQUNOSSxFQUFJTixFQUFFaUUsS0FBSyxNQUNYckIsRUFBSWhELEVBQUVpQyxPQUFPLEdBQUk1QixFQUFFNkIsU0FBVTlCLEVBQUVpRSxPQUFRLGlCQUFtQmxFLEdBQUtBLEdBQ25FTyxHQUFLTixFQUFFaUUsS0FBSyxLQUFNM0QsRUFBSSxJQUFJTCxFQUFFQyxLQUFNMEMsSUFBSyxpQkFBbUI3QyxHQUFLTyxFQUFFUCxTQWdFckRILEVBQUVDLEdBQUdrRSxVQUFVRyxZQUFjakUsRUFBR0wsRUFBRUMsR0FBR2tFLFVBQVVJLFdBQWEsV0FDNUUsT0FBT3ZFLEVBQUVDLEdBQUdrRSxVQUFZbkIsRUFBRzFDLE1BeEZqQyxDQTBGQWtFIiwiZmlsZSI6InBsdWdpbnMvbWV0aXNNZW51L2pxdWVyeS5tZXRpc01lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogbWV0aXNtZW51IC0gdjIuMC4yXG4gKiBBIGpRdWVyeSBtZW51IHBsdWdpblxuICogaHR0cHM6Ly9naXRodWIuY29tL29ub2t1bXVzL21ldGlzTWVudVxuICpcbiAqIE1hZGUgYnkgT3NtYW4gTnVyaSBPa3VtdXNcbiAqIFVuZGVyIE1JVCBMaWNlbnNlXG4gKi9cblxuISBmdW5jdGlvbihhKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBiKCkge1xuICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJtbVwiKSxcbiAgICAgICAgICAgIGIgPSB7XG4gICAgICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbjogXCJ0cmFuc2l0aW9uZW5kXCIsXG4gICAgICAgICAgICAgICAgT1RyYW5zaXRpb246IFwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIixcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBcInRyYW5zaXRpb25lbmRcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgYyBpbiBiKVxuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gYS5zdHlsZVtjXSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlbmQ6IGJbY11cbiAgICAgICAgICAgIH07XG4gICAgICAgIHJldHVybiAhMVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGMoYikge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGMgPSBhKHRoaXMpLFxuICAgICAgICAgICAgICAgIGQgPSBjLmRhdGEoXCJtbVwiKSxcbiAgICAgICAgICAgICAgICBmID0gYS5leHRlbmQoe30sIGUuREVGQVVMVFMsIGMuZGF0YSgpLCBcIm9iamVjdFwiID09IHR5cGVvZiBiICYmIGIpO1xuICAgICAgICAgICAgZCB8fCBjLmRhdGEoXCJtbVwiLCBkID0gbmV3IGUodGhpcywgZikpLCBcInN0cmluZ1wiID09IHR5cGVvZiBiICYmIGRbYl0oKVxuICAgICAgICB9KVxuICAgIH1cbiAgICBhLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oYikge1xuICAgICAgICB2YXIgYyA9ICExLFxuICAgICAgICAgICAgZSA9IHRoaXM7XG4gICAgICAgIGEodGhpcykub25lKFwibW1UcmFuc2l0aW9uRW5kXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYyA9ICEwXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYyB8fCBhKGUpLnRyaWdnZXIoZC5lbmQpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGYsIGIpLCB0aGlzXG4gICAgfTtcbiAgICB2YXIgZCA9IGIoKTtcbiAgICBkICYmIChhLmV2ZW50LnNwZWNpYWwubW1UcmFuc2l0aW9uRW5kID0ge1xuICAgICAgICBiaW5kVHlwZTogZC5lbmQsXG4gICAgICAgIGRlbGVnYXRlVHlwZTogZC5lbmQsXG4gICAgICAgIGhhbmRsZTogZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgcmV0dXJuIGEoYi50YXJnZXQpLmlzKHRoaXMpID8gYi5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdm9pZCAwXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgZSA9IGZ1bmN0aW9uKGIsIGMpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudCA9IGEoYiksIHRoaXMub3B0aW9ucyA9IGEuZXh0ZW5kKHt9LCBlLkRFRkFVTFRTLCBjKSwgdGhpcy50cmFuc2l0aW9uaW5nID0gbnVsbCwgdGhpcy5pbml0KClcbiAgICB9O1xuICAgIGUuVFJBTlNJVElPTl9EVVJBVElPTiA9IDM1MCwgZS5ERUZBVUxUUyA9IHtcbiAgICAgICAgdG9nZ2xlOiAhMCxcbiAgICAgICAgZG91YmxlVGFwVG9HbzogITEsXG4gICAgICAgIGFjdGl2ZUNsYXNzOiBcImFjdGl2ZVwiXG4gICAgfSwgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYiA9IHRoaXMsXG4gICAgICAgICAgICBjID0gdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzO1xuICAgICAgICB0aGlzLiRlbGVtZW50LmZpbmQoXCJsaS5cIiArIGMpLmhhcyhcInVsXCIpLmNoaWxkcmVuKFwidWxcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZSBpblwiKSwgdGhpcy4kZWxlbWVudC5maW5kKFwibGlcIikubm90KFwiLlwiICsgYykuaGFzKFwidWxcIikuY2hpbGRyZW4oXCJ1bFwiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpLCB0aGlzLm9wdGlvbnMuZG91YmxlVGFwVG9HbyAmJiB0aGlzLiRlbGVtZW50LmZpbmQoXCJsaS5cIiArIGMpLmhhcyhcInVsXCIpLmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyhcImRvdWJsZVRhcFRvR29cIiksIHRoaXMuJGVsZW1lbnQuZmluZChcImxpXCIpLmhhcyhcInVsXCIpLmNoaWxkcmVuKFwiYVwiKS5vbihcImNsaWNrLm1ldGlzTWVudVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICB2YXIgZSA9IGEodGhpcyksXG4gICAgICAgICAgICAgICAgZiA9IGUucGFyZW50KFwibGlcIiksXG4gICAgICAgICAgICAgICAgZyA9IGYuY2hpbGRyZW4oXCJ1bFwiKTtcbiAgICAgICAgICAgIHJldHVybiBkLnByZXZlbnREZWZhdWx0KCksIGYuaGFzQ2xhc3MoYykgPyBiLmhpZGUoZykgOiBiLnNob3coZyksIGIub3B0aW9ucy5kb3VibGVUYXBUb0dvICYmIGIuZG91YmxlVGFwVG9HbyhlKSAmJiBcIiNcIiAhPT0gZS5hdHRyKFwiaHJlZlwiKSAmJiBcIlwiICE9PSBlLmF0dHIoXCJocmVmXCIpID8gKGQuc3RvcFByb3BhZ2F0aW9uKCksIHZvaWQoZG9jdW1lbnQubG9jYXRpb24gPSBlLmF0dHIoXCJocmVmXCIpKSkgOiB2b2lkIDBcbiAgICAgICAgfSlcbiAgICB9LCBlLnByb3RvdHlwZS5kb3VibGVUYXBUb0dvID0gZnVuY3Rpb24oYSkge1xuICAgICAgICB2YXIgYiA9IHRoaXMuJGVsZW1lbnQ7XG4gICAgICAgIHJldHVybiBhLmhhc0NsYXNzKFwiZG91YmxlVGFwVG9Hb1wiKSA/IChhLnJlbW92ZUNsYXNzKFwiZG91YmxlVGFwVG9Hb1wiKSwgITApIDogYS5wYXJlbnQoKS5jaGlsZHJlbihcInVsXCIpLmxlbmd0aCA/IChiLmZpbmQoXCIuZG91YmxlVGFwVG9Hb1wiKS5yZW1vdmVDbGFzcyhcImRvdWJsZVRhcFRvR29cIiksIGEuYWRkQ2xhc3MoXCJkb3VibGVUYXBUb0dvXCIpLCAhMSkgOiB2b2lkIDBcbiAgICB9LCBlLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oYikge1xuICAgICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyxcbiAgICAgICAgICAgIGYgPSBhKGIpLFxuICAgICAgICAgICAgZyA9IGYucGFyZW50KFwibGlcIik7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2l0aW9uaW5nICYmICFmLmhhc0NsYXNzKFwiaW5cIikpIHtcbiAgICAgICAgICAgIGcuYWRkQ2xhc3MoYyksIHRoaXMub3B0aW9ucy50b2dnbGUgJiYgdGhpcy5oaWRlKGcuc2libGluZ3MoKS5jaGlsZHJlbihcInVsLmluXCIpKSwgZi5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKS5oZWlnaHQoMCksIHRoaXMudHJhbnNpdGlvbmluZyA9IDE7XG4gICAgICAgICAgICB2YXIgaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGYucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLmFkZENsYXNzKFwiY29sbGFwc2UgaW5cIikuaGVpZ2h0KFwiXCIpLCB0aGlzLnRyYW5zaXRpb25pbmcgPSAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGQgPyB2b2lkIGYub25lKFwibW1UcmFuc2l0aW9uRW5kXCIsIGEucHJveHkoaCwgdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGUuVFJBTlNJVElPTl9EVVJBVElPTikuaGVpZ2h0KGZbMF0uc2Nyb2xsSGVpZ2h0KSA6IGguY2FsbCh0aGlzKVxuICAgICAgICB9XG4gICAgfSwgZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MsXG4gICAgICAgICAgICBmID0gYShiKTtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zaXRpb25pbmcgJiYgZi5oYXNDbGFzcyhcImluXCIpKSB7XG4gICAgICAgICAgICBmLnBhcmVudChcImxpXCIpLnJlbW92ZUNsYXNzKGMpLCBmLmhlaWdodChmLmhlaWdodCgpKVswXS5vZmZzZXRIZWlnaHQsIGYuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIikucmVtb3ZlQ2xhc3MoXCJpblwiKSwgdGhpcy50cmFuc2l0aW9uaW5nID0gMTtcbiAgICAgICAgICAgIHZhciBnID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nID0gMCwgZi5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBkID8gdm9pZCBmLmhlaWdodCgwKS5vbmUoXCJtbVRyYW5zaXRpb25FbmRcIiwgYS5wcm94eShnLCB0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoZS5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6IGcuY2FsbCh0aGlzKVxuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgZiA9IGEuZm4ubWV0aXNNZW51O1xuICAgIGEuZm4ubWV0aXNNZW51ID0gYywgYS5mbi5tZXRpc01lbnUuQ29uc3RydWN0b3IgPSBlLCBhLmZuLm1ldGlzTWVudS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhLmZuLm1ldGlzTWVudSA9IGYsIHRoaXNcbiAgICB9XG59KGpRdWVyeSk7Il19
