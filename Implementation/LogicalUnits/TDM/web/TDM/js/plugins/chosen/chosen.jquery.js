/*!
 Chosen, a Select Box Enhancer for jQuery and Prototype
 by Patrick Filler for Harvest, http://getharvest.com

 Version 1.6.0
 Full source at https://github.com/harvesthq/chosen
 Copyright (c) 2011-2016 Harvest http://getharvest.com

 MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
 This file is generated by `grunt build`, do not edit it by hand.
 */
(function(){var $,AbstractChosen,Chosen,SelectParser,__hasProp={}.hasOwnProperty;(SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return"OPTGROUP"===child.nodeName.toUpperCase()?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:this.escapeExpression(group.label),title:group.title?group.title:void 0,children:0,disabled:group.disabled,classes:group.className}),_results=[],_i=0,_len=(_ref=group.childNodes).length;_i<_len;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){if("OPTION"===option.nodeName.toUpperCase())return""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,title:option.title?option.title:void 0,selected:option.selected,disabled:!0===group_disabled?group_disabled:option.disabled,group_array_index:group_position,group_label:null!=group_position?this.parsed[group_position].label:null,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;return null==text||!1===text?"":/[\&\<\>\"\'\`]/.test(text)?(map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g,text.replace(unsafe_chars,(function(chr){return map[chr]||"&amp;"}))):text},SelectParser}()).select_to_array=function(select){var child,parser,_i,_len,_ref;for(parser=new SelectParser,_i=0,_len=(_ref=select.childNodes).length;_i<_len;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=null!=options?options:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.choice_label=function(item){return this.include_group_label_in_selected&&null!=item.group_label?"<b class='group-name'>"+item.group_label+"</b>"+item.html:item.html},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout((function(){return _this.container_mousedown()}),50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout((function(){return _this.blur_test()}),100)},AbstractChosen.prototype.results_option_build=function(options){var content,data,data_content,shown_results,_i,_len,_ref;for(content="",shown_results=0,_i=0,_len=(_ref=this.results_data).length;_i<_len&&(data_content="",""!==(data_content=(data=_ref[_i]).group?this.result_add_group(data):this.result_add_option(data))&&(shown_results++,content+=data_content),(null!=options?options.first:void 0)&&(data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(data))),!(shown_results>=this.max_shown_results));_i++);return content},AbstractChosen.prototype.result_add_option=function(option){var classes,option_el;return option.search_match&&this.include_option_in_results(option)?(classes=[],option.disabled||option.selected&&this.is_multiple||classes.push("active-result"),!option.disabled||option.selected&&this.is_multiple||classes.push("disabled-result"),option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),(option_el=document.createElement("li")).className=classes.join(" "),option_el.style.cssText=option.style,option_el.setAttribute("data-option-array-index",option.array_index),option_el.innerHTML=option.search_text,option.title&&(option_el.title=option.title),this.outerHTML(option_el)):""},AbstractChosen.prototype.result_add_group=function(group){var classes,group_el;return(group.search_match||group.group_match)&&group.active_options>0?((classes=[]).push("group-result"),group.classes&&classes.push(group.classes),(group_el=document.createElement("li")).className=classes.join(" "),group_el.innerHTML=group.search_text,group.title&&(group_el.title=group.title),this.outerHTML(group_el)):""},AbstractChosen.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},AbstractChosen.prototype.reset_single_select_options=function(){var result,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.results_data).length;_i<_len;_i++)(result=_ref[_i]).selected?_results.push(result.selected=!1):_results.push(void 0);return _results},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(evt){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;for(this.no_results_clear(),results=0,escapedSearchText=(searchText=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zregex=new RegExp(escapedSearchText,"i"),regex=this.get_search_regex(escapedSearchText),_i=0,_len=(_ref=this.results_data).length;_i<_len;_i++)(option=_ref[_i]).search_match=!1,results_group=null,this.include_option_in_results(option)&&(option.group&&(option.group_match=!1,option.active_options=0),null!=option.group_array_index&&this.results_data[option.group_array_index]&&(0===(results_group=this.results_data[option.group_array_index]).active_options&&results_group.search_match&&(results+=1),results_group.active_options+=1),option.search_text=option.group?option.label:option.html,option.group&&!this.group_search||(option.search_match=this.search_string_match(option.search_text,regex),option.search_match&&!option.group&&(results+=1),option.search_match?(searchText.length&&(startpos=option.search_text.search(zregex),text=option.search_text.substr(0,startpos+searchText.length)+"</em>"+option.search_text.substr(startpos+searchText.length),option.search_text=text.substr(0,startpos)+"<em>"+text.substr(startpos)),null!=results_group&&(results_group.group_match=!0)):null!=option.group_array_index&&this.results_data[option.group_array_index].search_match&&(option.search_match=!0)));return this.result_clear_highlight(),results<1&&searchText.length?(this.update_results_content(""),this.no_results(searchText)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.get_search_regex=function(escaped_search_string){var regex_anchor,regex_flag;return regex_anchor=this.search_contains?"":"^",regex_flag=this.case_sensitive_search?"":"i",new RegExp(regex_anchor+escaped_search_string,regex_flag)},AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string))return!0;if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||0===search_string.indexOf("["))&&(parts=search_string.replace(/\[|\]/g,"").split(" ")).length)for(_i=0,_len=parts.length;_i<_len;_i++)if(part=parts[_i],regex.test(part))return!0},AbstractChosen.prototype.choices_count=function(){var _i,_len,_ref;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,_i=0,_len=(_ref=this.form_field.options).length;_i<_len;_i++)_ref[_i].selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(evt){if(evt.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(evt.preventDefault(),this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(evt){var _this=this;return setTimeout((function(){return _this.results_search()}),50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(option){return!(this.is_multiple&&!this.display_selected_options&&option.selected)&&(!(!this.display_disabled_options&&option.disabled)&&!option.empty)},AbstractChosen.prototype.search_results_touchstart=function(evt){return this.touch_started=!0,this.search_results_mouseover(evt)},AbstractChosen.prototype.search_results_touchmove=function(evt){return this.touch_started=!1,this.search_results_mouseout(evt)},AbstractChosen.prototype.search_results_touchend=function(evt){if(this.touch_started)return this.search_results_mouseup(evt)},AbstractChosen.prototype.outerHTML=function(element){var tmp;return element.outerHTML?element.outerHTML:((tmp=document.createElement("div")).appendChild(element),tmp.innerHTML)},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent))},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),($=jQuery).fn.extend({chosen:function(options){return AbstractChosen.browser_is_supported()?this.each((function(input_field){var $this,chosen;chosen=($this=$(this)).data("chosen"),"destroy"!==options?chosen instanceof Chosen||$this.data("chosen",new Chosen(this,options)):chosen instanceof Chosen&&chosen.destroy()})):this}}),Chosen=function(_super){function Chosen(){return Chosen.__super__.constructor.apply(this,arguments)}return function(child,parent){for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var container_classes,container_props;return(container_classes=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&container_classes.push(this.form_field.className),this.is_rtl&&container_classes.push("chosen-rtl"),container_props={class:container_classes.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=$("<div />",container_props),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.bind("touchstart.chosen",(function(evt){return _this.container_mousedown(evt),evt.preventDefault()})),this.container.bind("touchend.chosen",(function(evt){return _this.container_mouseup(evt),evt.preventDefault()})),this.container.bind("mousedown.chosen",(function(evt){_this.container_mousedown(evt)})),this.container.bind("mouseup.chosen",(function(evt){_this.container_mouseup(evt)})),this.container.bind("mouseenter.chosen",(function(evt){_this.mouse_enter(evt)})),this.container.bind("mouseleave.chosen",(function(evt){_this.mouse_leave(evt)})),this.search_results.bind("mouseup.chosen",(function(evt){_this.search_results_mouseup(evt)})),this.search_results.bind("mouseover.chosen",(function(evt){_this.search_results_mouseover(evt)})),this.search_results.bind("mouseout.chosen",(function(evt){_this.search_results_mouseout(evt)})),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",(function(evt){_this.search_results_mousewheel(evt)})),this.search_results.bind("touchstart.chosen",(function(evt){_this.search_results_touchstart(evt)})),this.search_results.bind("touchmove.chosen",(function(evt){_this.search_results_touchmove(evt)})),this.search_results.bind("touchend.chosen",(function(evt){_this.search_results_touchend(evt)})),this.form_field_jq.bind("chosen:updated.chosen",(function(evt){_this.results_update_field(evt)})),this.form_field_jq.bind("chosen:activate.chosen",(function(evt){_this.activate_field(evt)})),this.form_field_jq.bind("chosen:open.chosen",(function(evt){_this.container_mousedown(evt)})),this.form_field_jq.bind("chosen:close.chosen",(function(evt){_this.input_blur(evt)})),this.search_field.bind("blur.chosen",(function(evt){_this.input_blur(evt)})),this.search_field.bind("keyup.chosen",(function(evt){_this.keyup_checker(evt)})),this.search_field.bind("keydown.chosen",(function(evt){_this.keydown_checker(evt)})),this.search_field.bind("focus.chosen",(function(evt){_this.input_focus(evt)})),this.search_field.bind("cut.chosen",(function(evt){_this.clipboard_event_checker(evt)})),this.search_field.bind("paste.chosen",(function(evt){_this.clipboard_event_checker(evt)})),this.is_multiple?this.search_choices.bind("click.chosen",(function(evt){_this.choices_click(evt)})):this.container.bind("click.chosen",(function(evt){evt.preventDefault()}))},Chosen.prototype.destroy=function(){return $(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled&&(evt&&"mousedown"===evt.type&&!this.results_showing&&evt.preventDefault(),null==evt||!$(evt.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("a.chosen-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},Chosen.prototype.container_mouseup=function(evt){if("ABBR"===evt.target.nodeName&&!this.is_disabled)return this.results_reset(evt)},Chosen.prototype.search_results_mousewheel=function(evt){var delta;if(evt.originalEvent&&(delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail),null!=delta)return evt.preventDefault(),"DOMMouseScroll"===evt.type&&(delta*=40),this.search_results.scrollTop(delta+this.search_results.scrollTop())},Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},Chosen.prototype.close_field=function(){return $(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){var active_container;return(active_container=$(evt.target).closest(".chosen-container")).length&&this.container[0]===active_container[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){if(this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),visible_bottom=(maxHeight=parseInt(this.search_results.css("maxHeight"),10))+(visible_top=this.search_results.scrollTop()),(high_bottom=(high_top=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(high_top<visible_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex)return ti=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=ti},Chosen.prototype.set_label_behavior=function(){var _this=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=$("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",(function(evt){return _this.is_multiple?_this.container_mousedown(evt):_this.activate_field()}))},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;if((target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first()).length)return this.result_highlight=target,this.result_select(evt),this.search_field.focus()},Chosen.prototype.search_results_mouseover=function(evt){var target;if(target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first())return this.result_do_highlight(target)},Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"))return this.result_clear_highlight()},Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;return choice=$("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(item)+"</span>"),item.disabled?choice.addClass("search-choice-disabled"):((close_link=$("<a />",{class:"search-choice-close","data-option-array-index":item.array_index})).bind("click.chosen",(function(evt){return _this.choice_destroy_link_click(evt)})),choice.append(close_link)),this.search_container.before(choice)},Chosen.prototype.choice_destroy_link_click=function(evt){if(evt.preventDefault(),evt.stopPropagation(),!this.is_disabled)return this.choice_destroy($(evt.target))},Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),link.parents("li").first().remove(),this.search_field_scale()},Chosen.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,item;if(this.result_highlight)return high=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?high.removeClass("active-result"):this.reset_single_select_options(),high.addClass("result-selected"),(item=this.results_data[high[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[item.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(item):this.single_set_selected_text(this.choice_label(item)),(evt.metaKey||evt.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,evt.preventDefault(),this.search_field_scale())},Chosen.prototype.single_set_selected_text=function(text){return null==text&&(text=this.default_text),text===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(text)},Chosen.prototype.result_deselect=function(pos){var result_data;return result_data=this.results_data[pos],!this.form_field.options[result_data.options_index].disabled&&(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},Chosen.prototype.get_search_text=function(){return $("<div/>").text($.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;if(null!=(do_high=(selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?selected_results.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(do_high)},Chosen.prototype.no_results=function(terms){var no_results_html;return(no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(terms),this.search_results.append(no_results_html),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var next_sib;return this.results_showing&&this.result_highlight?(next_sib=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(next_sib):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(prev_sibs.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(next_available_destroy=this.search_container.siblings("li.search-choice").last()).length&&!next_available_destroy.hasClass("search-choice-disabled")?(this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;switch(stroke=null!=(_ref1=evt.which)?_ref1:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:this.results_showing&&evt.preventDefault();break;case 32:this.disable_search&&evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:evt.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var div,f_width,style,style_block,styles,w,_i,_len;if(this.is_multiple){for(0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",_i=0,_len=(styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;_i<_len;_i++)style_block+=(style=styles[_i])+":"+this.search_field.css(style)+";";return(div=$("<div />",{style:style_block})).text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),w>(f_width=this.container.outerWidth())-10&&(w=f_width-10),this.search_field.css({width:w+"px"})}},Chosen}(AbstractChosen)}).call(this);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvY2hvc2VuL2Nob3Nlbi5qcXVlcnkuanMiXSwibmFtZXMiOlsiJCIsIkFic3RyYWN0Q2hvc2VuIiwiQ2hvc2VuIiwiU2VsZWN0UGFyc2VyIiwiX19oYXNQcm9wIiwiaGFzT3duUHJvcGVydHkiLCJ0aGlzIiwib3B0aW9uc19pbmRleCIsInBhcnNlZCIsInByb3RvdHlwZSIsImFkZF9ub2RlIiwiY2hpbGQiLCJub2RlTmFtZSIsInRvVXBwZXJDYXNlIiwiYWRkX2dyb3VwIiwiYWRkX29wdGlvbiIsImdyb3VwIiwiZ3JvdXBfcG9zaXRpb24iLCJvcHRpb24iLCJfaSIsIl9sZW4iLCJfcmVmIiwiX3Jlc3VsdHMiLCJsZW5ndGgiLCJwdXNoIiwiYXJyYXlfaW5kZXgiLCJsYWJlbCIsImVzY2FwZUV4cHJlc3Npb24iLCJ0aXRsZSIsImNoaWxkcmVuIiwiZGlzYWJsZWQiLCJjbGFzc2VzIiwiY2xhc3NOYW1lIiwiY2hpbGROb2RlcyIsImdyb3VwX2Rpc2FibGVkIiwidGV4dCIsInZhbHVlIiwiaHRtbCIsImlubmVySFRNTCIsInNlbGVjdGVkIiwiZ3JvdXBfYXJyYXlfaW5kZXgiLCJncm91cF9sYWJlbCIsInN0eWxlIiwiY3NzVGV4dCIsImVtcHR5IiwibWFwIiwidW5zYWZlX2NoYXJzIiwidGVzdCIsIjwiLCI+IiwiXCIiLCInIiwiYCIsInJlcGxhY2UiLCJjaHIiLCJzZWxlY3RfdG9fYXJyYXkiLCJzZWxlY3QiLCJwYXJzZXIiLCJmb3JtX2ZpZWxkIiwib3B0aW9ucyIsImJyb3dzZXJfaXNfc3VwcG9ydGVkIiwiaXNfbXVsdGlwbGUiLCJtdWx0aXBsZSIsInNldF9kZWZhdWx0X3RleHQiLCJzZXRfZGVmYXVsdF92YWx1ZXMiLCJzZXR1cCIsInNldF91cF9odG1sIiwicmVnaXN0ZXJfb2JzZXJ2ZXJzIiwib25fcmVhZHkiLCJfdGhpcyIsImNsaWNrX3Rlc3RfYWN0aW9uIiwiZXZ0IiwidGVzdF9hY3RpdmVfY2xpY2siLCJhY3RpdmF0ZV9hY3Rpb24iLCJhY3RpdmF0ZV9maWVsZCIsImFjdGl2ZV9maWVsZCIsIm1vdXNlX29uX2NvbnRhaW5lciIsInJlc3VsdHNfc2hvd2luZyIsInJlc3VsdF9oaWdobGlnaHRlZCIsImFsbG93X3NpbmdsZV9kZXNlbGVjdCIsImRpc2FibGVfc2VhcmNoX3RocmVzaG9sZCIsImRpc2FibGVfc2VhcmNoIiwiZW5hYmxlX3NwbGl0X3dvcmRfc2VhcmNoIiwiZ3JvdXBfc2VhcmNoIiwic2VhcmNoX2NvbnRhaW5zIiwic2luZ2xlX2JhY2tzdHJva2VfZGVsZXRlIiwibWF4X3NlbGVjdGVkX29wdGlvbnMiLCJJbmZpbml0eSIsImluaGVyaXRfc2VsZWN0X2NsYXNzZXMiLCJkaXNwbGF5X3NlbGVjdGVkX29wdGlvbnMiLCJkaXNwbGF5X2Rpc2FibGVkX29wdGlvbnMiLCJpbmNsdWRlX2dyb3VwX2xhYmVsX2luX3NlbGVjdGVkIiwibWF4X3Nob3duX3Jlc3VsdHMiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsImNhc2Vfc2Vuc2l0aXZlX3NlYXJjaCIsImdldEF0dHJpYnV0ZSIsImRlZmF1bHRfdGV4dCIsInBsYWNlaG9sZGVyX3RleHRfbXVsdGlwbGUiLCJwbGFjZWhvbGRlcl90ZXh0IiwiZGVmYXVsdF9tdWx0aXBsZV90ZXh0IiwicGxhY2Vob2xkZXJfdGV4dF9zaW5nbGUiLCJkZWZhdWx0X3NpbmdsZV90ZXh0IiwicmVzdWx0c19ub25lX2ZvdW5kIiwibm9fcmVzdWx0c190ZXh0IiwiZGVmYXVsdF9ub19yZXN1bHRfdGV4dCIsImNob2ljZV9sYWJlbCIsIml0ZW0iLCJtb3VzZV9lbnRlciIsIm1vdXNlX2xlYXZlIiwiaW5wdXRfZm9jdXMiLCJzZXRUaW1lb3V0IiwiY29udGFpbmVyX21vdXNlZG93biIsImlucHV0X2JsdXIiLCJibHVyX3Rlc3QiLCJyZXN1bHRzX29wdGlvbl9idWlsZCIsImNvbnRlbnQiLCJkYXRhIiwiZGF0YV9jb250ZW50Iiwic2hvd25fcmVzdWx0cyIsInJlc3VsdHNfZGF0YSIsInJlc3VsdF9hZGRfZ3JvdXAiLCJyZXN1bHRfYWRkX29wdGlvbiIsImZpcnN0IiwiY2hvaWNlX2J1aWxkIiwic2luZ2xlX3NldF9zZWxlY3RlZF90ZXh0Iiwib3B0aW9uX2VsIiwic2VhcmNoX21hdGNoIiwiaW5jbHVkZV9vcHRpb25faW5fcmVzdWx0cyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImpvaW4iLCJzZXRBdHRyaWJ1dGUiLCJzZWFyY2hfdGV4dCIsIm91dGVySFRNTCIsImdyb3VwX2VsIiwiZ3JvdXBfbWF0Y2giLCJhY3RpdmVfb3B0aW9ucyIsInJlc3VsdHNfdXBkYXRlX2ZpZWxkIiwicmVzdWx0c19yZXNldF9jbGVhbnVwIiwicmVzdWx0X2NsZWFyX2hpZ2hsaWdodCIsInJlc3VsdHNfYnVpbGQiLCJ3aW5ub3dfcmVzdWx0cyIsInJlc2V0X3NpbmdsZV9zZWxlY3Rfb3B0aW9ucyIsInJlc3VsdCIsInJlc3VsdHNfdG9nZ2xlIiwicmVzdWx0c19oaWRlIiwicmVzdWx0c19zaG93IiwicmVzdWx0c19zZWFyY2giLCJlc2NhcGVkU2VhcmNoVGV4dCIsInJlZ2V4IiwicmVzdWx0cyIsInJlc3VsdHNfZ3JvdXAiLCJzZWFyY2hUZXh0Iiwic3RhcnRwb3MiLCJ6cmVnZXgiLCJub19yZXN1bHRzX2NsZWFyIiwiZ2V0X3NlYXJjaF90ZXh0IiwiUmVnRXhwIiwiZ2V0X3NlYXJjaF9yZWdleCIsInNlYXJjaF9zdHJpbmdfbWF0Y2giLCJzZWFyY2giLCJzdWJzdHIiLCJ1cGRhdGVfcmVzdWx0c19jb250ZW50Iiwibm9fcmVzdWx0cyIsIndpbm5vd19yZXN1bHRzX3NldF9oaWdobGlnaHQiLCJlc2NhcGVkX3NlYXJjaF9zdHJpbmciLCJyZWdleF9hbmNob3IiLCJyZWdleF9mbGFnIiwic2VhcmNoX3N0cmluZyIsInBhcnQiLCJwYXJ0cyIsImluZGV4T2YiLCJzcGxpdCIsImNob2ljZXNfY291bnQiLCJzZWxlY3RlZF9vcHRpb25fY291bnQiLCJjaG9pY2VzX2NsaWNrIiwicHJldmVudERlZmF1bHQiLCJpc19kaXNhYmxlZCIsImtleXVwX2NoZWNrZXIiLCJzdHJva2UiLCJ3aGljaCIsImtleUNvZGUiLCJzZWFyY2hfZmllbGRfc2NhbGUiLCJiYWNrc3Ryb2tlX2xlbmd0aCIsImtleWRvd25fYmFja3N0cm9rZSIsInBlbmRpbmdfYmFja3N0cm9rZSIsInJlc3VsdF9zZWxlY3QiLCJjbGlwYm9hcmRfZXZlbnRfY2hlY2tlciIsImNvbnRhaW5lcl93aWR0aCIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJzZWFyY2hfcmVzdWx0c190b3VjaHN0YXJ0IiwidG91Y2hfc3RhcnRlZCIsInNlYXJjaF9yZXN1bHRzX21vdXNlb3ZlciIsInNlYXJjaF9yZXN1bHRzX3RvdWNobW92ZSIsInNlYXJjaF9yZXN1bHRzX21vdXNlb3V0Iiwic2VhcmNoX3Jlc3VsdHNfdG91Y2hlbmQiLCJzZWFyY2hfcmVzdWx0c19tb3VzZXVwIiwiZWxlbWVudCIsInRtcCIsImFwcGVuZENoaWxkIiwid2luZG93IiwibmF2aWdhdG9yIiwiYXBwTmFtZSIsImRvY3VtZW50TW9kZSIsInVzZXJBZ2VudCIsImpRdWVyeSIsImZuIiwiZXh0ZW5kIiwiY2hvc2VuIiwiZWFjaCIsImlucHV0X2ZpZWxkIiwiJHRoaXMiLCJkZXN0cm95IiwiX3N1cGVyIiwiX19zdXBlcl9fIiwiY29uc3RydWN0b3IiLCJhcHBseSIsImFyZ3VtZW50cyIsInBhcmVudCIsImtleSIsImNhbGwiLCJjdG9yIiwiX19leHRlbmRzIiwiZm9ybV9maWVsZF9qcSIsImN1cnJlbnRfc2VsZWN0ZWRJbmRleCIsInNlbGVjdGVkSW5kZXgiLCJpc19ydGwiLCJoYXNDbGFzcyIsImNvbnRhaW5lcl9jbGFzc2VzIiwiY29udGFpbmVyX3Byb3BzIiwiY2xhc3MiLCJpZCIsImNvbnRhaW5lciIsImhpZGUiLCJhZnRlciIsImRyb3Bkb3duIiwiZmluZCIsInNlYXJjaF9maWVsZCIsInNlYXJjaF9yZXN1bHRzIiwic2VhcmNoX25vX3Jlc3VsdHMiLCJzZWFyY2hfY2hvaWNlcyIsInNlYXJjaF9jb250YWluZXIiLCJzZWxlY3RlZF9pdGVtIiwic2V0X3RhYl9pbmRleCIsInNldF9sYWJlbF9iZWhhdmlvciIsInRyaWdnZXIiLCJiaW5kIiwiY29udGFpbmVyX21vdXNldXAiLCJzZWFyY2hfcmVzdWx0c19tb3VzZXdoZWVsIiwia2V5ZG93bl9jaGVja2VyIiwib3duZXJEb2N1bWVudCIsInVuYmluZCIsInRhYkluZGV4IiwicmVtb3ZlIiwicmVtb3ZlRGF0YSIsInNob3ciLCJzZWFyY2hfZmllbGRfZGlzYWJsZWQiLCJhZGRDbGFzcyIsImNsb3NlX2ZpZWxkIiwicmVtb3ZlQ2xhc3MiLCJ0eXBlIiwidGFyZ2V0IiwicGFyZW50cyIsInZhbCIsInJlc3VsdHNfcmVzZXQiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZWx0YVkiLCJ3aGVlbERlbHRhIiwiZGV0YWlsIiwic2Nyb2xsVG9wIiwiY2xlYXJfYmFja3N0cm9rZSIsInNob3dfc2VhcmNoX2ZpZWxkX2RlZmF1bHQiLCJmb2N1cyIsImFjdGl2ZV9jb250YWluZXIiLCJjbG9zZXN0IiwicGFyc2luZyIsInJlYWRPbmx5IiwicmVzdWx0X2RvX2hpZ2hsaWdodCIsImVsIiwiaGlnaF9ib3R0b20iLCJoaWdoX3RvcCIsIm1heEhlaWdodCIsInZpc2libGVfYm90dG9tIiwidmlzaWJsZV90b3AiLCJyZXN1bHRfaGlnaGxpZ2h0IiwicGFyc2VJbnQiLCJjc3MiLCJwb3NpdGlvbiIsInRvcCIsIm91dGVySGVpZ2h0IiwidGkiLCJmb3JtX2ZpZWxkX2xhYmVsIiwiY2hvaWNlIiwiY2xvc2VfbGluayIsImRhdGEtb3B0aW9uLWFycmF5LWluZGV4IiwiY2hvaWNlX2Rlc3Ryb3lfbGlua19jbGljayIsImFwcGVuZCIsImJlZm9yZSIsInN0b3BQcm9wYWdhdGlvbiIsImNob2ljZV9kZXN0cm95IiwibGluayIsInJlc3VsdF9kZXNlbGVjdCIsImhpZ2giLCJtZXRhS2V5IiwiY3RybEtleSIsInNpbmdsZV9kZXNlbGVjdF9jb250cm9sX2J1aWxkIiwicG9zIiwicmVzdWx0X2RhdGEiLCJkZXNlbGVjdGVkIiwidHJpbSIsImRvX2hpZ2giLCJzZWxlY3RlZF9yZXN1bHRzIiwidGVybXMiLCJub19yZXN1bHRzX2h0bWwiLCJrZXlkb3duX2Fycm93IiwibmV4dF9zaWIiLCJuZXh0QWxsIiwia2V5dXBfYXJyb3ciLCJwcmV2X3NpYnMiLCJwcmV2QWxsIiwibmV4dF9hdmFpbGFibGVfZGVzdHJveSIsInNpYmxpbmdzIiwibGFzdCIsIl9yZWYxIiwiZGl2IiwiZl93aWR0aCIsInN0eWxlX2Jsb2NrIiwic3R5bGVzIiwidyIsIm91dGVyV2lkdGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0NBWUEsV0FDSSxJQUFJQSxFQUFHQyxlQUFnQkMsT0FBUUMsYUFDM0JDLFVBQVksR0FBR0MsZ0JBR25CRixhQUFlLFdBQ1gsU0FBU0EsZUFDTEcsS0FBS0MsY0FBZ0IsRUFDckJELEtBQUtFLE9BQVMsR0FvRmxCLE9BakZBTCxhQUFhTSxVQUFVQyxTQUFXLFNBQVNDLE9BQ3ZDLE1BQXFDLGFBQWpDQSxNQUFNQyxTQUFTQyxjQUNSUCxLQUFLUSxVQUFVSCxPQUVmTCxLQUFLUyxXQUFXSixRQUkvQlIsYUFBYU0sVUFBVUssVUFBWSxTQUFTRSxPQUN4QyxJQUFJQyxlQUFnQkMsT0FBUUMsR0FBSUMsS0FBTUMsS0FBTUMsU0FhNUMsSUFaQUwsZUFBaUJYLEtBQUtFLE9BQU9lLE9BQzdCakIsS0FBS0UsT0FBT2dCLEtBQUssQ0FDYkMsWUFBYVIsZUFDYkQsT0FBTyxFQUNQVSxNQUFPcEIsS0FBS3FCLGlCQUFpQlgsTUFBTVUsT0FDbkNFLE1BQU9aLE1BQU1ZLE1BQVFaLE1BQU1ZLFdBQVEsRUFDbkNDLFNBQVUsRUFDVkMsU0FBVWQsTUFBTWMsU0FDaEJDLFFBQVNmLE1BQU1nQixZQUduQlYsU0FBVyxHQUNOSCxHQUFLLEVBQUdDLE1BRmJDLEtBQU9MLE1BQU1pQixZQUVZVixPQUFRSixHQUFLQyxLQUFNRCxLQUN4Q0QsT0FBU0csS0FBS0YsSUFDZEcsU0FBU0UsS0FBS2xCLEtBQUtTLFdBQVdH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SUMsS0FDeEQsR0FBSWQsS0FBS3VELFlBQWEsQ0FLbEIsSUFKSSxFQUNKOFEsRUFBSSxFQUNKRixZQUFjLGdFQUVUdFQsR0FBSyxFQUFHQyxNQURic1QsT0FBUyxDQUFDLFlBQWEsYUFBYyxjQUFlLGNBQWUsY0FBZSxpQkFBa0IsbUJBQ3pFblQsT0FBUUosR0FBS0MsS0FBTUQsS0FFMUNzVCxjQURBL1IsTUFBUWdTLE9BQU92VCxLQUNRLElBQU1iLEtBQUt5TyxhQUFha0QsSUFBSXZQLE9BQVMsSUFhaEUsT0FYQTZSLElBQU12VSxFQUFFLFVBQVcsQ0FDZjBDLE1BQVMrUixlQUVUdFMsS0FBSzdCLEtBQUt5TyxhQUFhMEIsT0FDM0J6USxFQUFFLFFBQVEyUyxPQUFPNEIsS0FDakJJLEVBQUlKLElBQUl6SSxRQUFVLEdBQ2xCeUksSUFBSXhFLFNBRUE0RSxHQURKSCxRQUFVbFUsS0FBS29PLFVBQVVrRyxjQUNQLEtBQ2RELEVBQUlILFFBQVUsSUFFWGxVLEtBQUt5TyxhQUFha0QsSUFBSSxDQUN6Qm5HLE1BQVM2SSxFQUFJLFNBS2xCelUsT0F4cUJGLENBMHFCTkQsa0JBRUo2TixLQUFLeE4iLCJmaWxlIjoicGx1Z2lucy9jaG9zZW4vY2hvc2VuLmpxdWVyeS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuIENob3NlbiwgYSBTZWxlY3QgQm94IEVuaGFuY2VyIGZvciBqUXVlcnkgYW5kIFByb3RvdHlwZVxuIGJ5IFBhdHJpY2sgRmlsbGVyIGZvciBIYXJ2ZXN0LCBodHRwOi8vZ2V0aGFydmVzdC5jb21cblxuIFZlcnNpb24gMS42LjBcbiBGdWxsIHNvdXJjZSBhdCBodHRwczovL2dpdGh1Yi5jb20vaGFydmVzdGhxL2Nob3NlblxuIENvcHlyaWdodCAoYykgMjAxMS0yMDE2IEhhcnZlc3QgaHR0cDovL2dldGhhcnZlc3QuY29tXG5cbiBNSVQgTGljZW5zZSwgaHR0cHM6Ly9naXRodWIuY29tL2hhcnZlc3RocS9jaG9zZW4vYmxvYi9tYXN0ZXIvTElDRU5TRS5tZFxuIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYnkgYGdydW50IGJ1aWxkYCwgZG8gbm90IGVkaXQgaXQgYnkgaGFuZC5cbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgdmFyICQsIEFic3RyYWN0Q2hvc2VuLCBDaG9zZW4sIFNlbGVjdFBhcnNlciwgX3JlZixcbiAgICAgICAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgICAgIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG4gICAgU2VsZWN0UGFyc2VyID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBTZWxlY3RQYXJzZXIoKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNfaW5kZXggPSAwO1xuICAgICAgICAgICAgdGhpcy5wYXJzZWQgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIFNlbGVjdFBhcnNlci5wcm90b3R5cGUuYWRkX25vZGUgPSBmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiT1BUR1JPVVBcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZF9ncm91cChjaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZF9vcHRpb24oY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIFNlbGVjdFBhcnNlci5wcm90b3R5cGUuYWRkX2dyb3VwID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgICAgICAgIHZhciBncm91cF9wb3NpdGlvbiwgb3B0aW9uLCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgICAgICBncm91cF9wb3NpdGlvbiA9IHRoaXMucGFyc2VkLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMucGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgICAgIGFycmF5X2luZGV4OiBncm91cF9wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBncm91cDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5lc2NhcGVFeHByZXNzaW9uKGdyb3VwLmxhYmVsKSxcbiAgICAgICAgICAgICAgICB0aXRsZTogZ3JvdXAudGl0bGUgPyBncm91cC50aXRsZSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogMCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogZ3JvdXAuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgY2xhc3NlczogZ3JvdXAuY2xhc3NOYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF9yZWYgPSBncm91cC5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgIG9wdGlvbiA9IF9yZWZbX2ldO1xuICAgICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5hZGRfb3B0aW9uKG9wdGlvbiwgZ3JvdXBfcG9zaXRpb24sIGdyb3VwLmRpc2FibGVkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH07XG5cbiAgICAgICAgU2VsZWN0UGFyc2VyLnByb3RvdHlwZS5hZGRfb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uLCBncm91cF9wb3NpdGlvbiwgZ3JvdXBfZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb24ubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJPUFRJT05cIikge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb24udGV4dCAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBfcG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRbZ3JvdXBfcG9zaXRpb25dLmNoaWxkcmVuICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheV9pbmRleDogdGhpcy5wYXJzZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc19pbmRleDogdGhpcy5vcHRpb25zX2luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbi50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogb3B0aW9uLmlubmVySFRNTCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb24udGl0bGUgPyBvcHRpb24udGl0bGUgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogb3B0aW9uLnNlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGdyb3VwX2Rpc2FibGVkID09PSB0cnVlID8gZ3JvdXBfZGlzYWJsZWQgOiBvcHRpb24uZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9hcnJheV9pbmRleDogZ3JvdXBfcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9sYWJlbDogZ3JvdXBfcG9zaXRpb24gIT0gbnVsbCA/IHRoaXMucGFyc2VkW2dyb3VwX3Bvc2l0aW9uXS5sYWJlbCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBvcHRpb24uY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IG9wdGlvbi5zdHlsZS5jc3NUZXh0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfaW5kZXg6IHRoaXMucGFyc2VkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNfaW5kZXg6IHRoaXMub3B0aW9uc19pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zX2luZGV4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgU2VsZWN0UGFyc2VyLnByb3RvdHlwZS5lc2NhcGVFeHByZXNzaW9uID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgICAgdmFyIG1hcCwgdW5zYWZlX2NoYXJzO1xuICAgICAgICAgICAgaWYgKCh0ZXh0ID09IG51bGwpIHx8IHRleHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIS9bXFwmXFw8XFw+XFxcIlxcJ1xcYF0vLnRlc3QodGV4dCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcCA9IHtcbiAgICAgICAgICAgICAgICBcIjxcIjogXCImbHQ7XCIsXG4gICAgICAgICAgICAgICAgXCI+XCI6IFwiJmd0O1wiLFxuICAgICAgICAgICAgICAgICdcIic6IFwiJnF1b3Q7XCIsXG4gICAgICAgICAgICAgICAgXCInXCI6IFwiJiN4Mjc7XCIsXG4gICAgICAgICAgICAgICAgXCJgXCI6IFwiJiN4NjA7XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB1bnNhZmVfY2hhcnMgPSAvJig/IVxcdys7KXxbXFw8XFw+XFxcIlxcJ1xcYF0vZztcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UodW5zYWZlX2NoYXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwW2Nocl0gfHwgXCImYW1wO1wiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIFNlbGVjdFBhcnNlcjtcblxuICAgIH0pKCk7XG5cbiAgICBTZWxlY3RQYXJzZXIuc2VsZWN0X3RvX2FycmF5ID0gZnVuY3Rpb24oc2VsZWN0KSB7XG4gICAgICAgIHZhciBjaGlsZCwgcGFyc2VyLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgICAgcGFyc2VyID0gbmV3IFNlbGVjdFBhcnNlcigpO1xuICAgICAgICBfcmVmID0gc2VsZWN0LmNoaWxkTm9kZXM7XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgY2hpbGQgPSBfcmVmW19pXTtcbiAgICAgICAgICAgIHBhcnNlci5hZGRfbm9kZShjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlci5wYXJzZWQ7XG4gICAgfTtcblxuICAgIEFic3RyYWN0Q2hvc2VuID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBBYnN0cmFjdENob3Nlbihmb3JtX2ZpZWxkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1fZmllbGQgPSBmb3JtX2ZpZWxkO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucyA6IHt9O1xuICAgICAgICAgICAgaWYgKCFBYnN0cmFjdENob3Nlbi5icm93c2VyX2lzX3N1cHBvcnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc19tdWx0aXBsZSA9IHRoaXMuZm9ybV9maWVsZC5tdWx0aXBsZTtcbiAgICAgICAgICAgIHRoaXMuc2V0X2RlZmF1bHRfdGV4dCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRfZGVmYXVsdF92YWx1ZXMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0X3VwX2h0bWwoKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfb2JzZXJ2ZXJzKCk7XG4gICAgICAgICAgICB0aGlzLm9uX3JlYWR5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBBYnN0cmFjdENob3Nlbi5wcm90b3R5cGUuc2V0X2RlZmF1bHRfdmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jbGlja190ZXN0X2FjdGlvbiA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50ZXN0X2FjdGl2ZV9jbGljayhldnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVfYWN0aW9uID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFjdGl2YXRlX2ZpZWxkKGV2dCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVfZmllbGQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubW91c2Vfb25fY29udGFpbmVyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdHNfc2hvd2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRfaGlnaGxpZ2h0ZWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5hbGxvd19zaW5nbGVfZGVzZWxlY3QgPSAodGhpcy5vcHRpb25zLmFsbG93X3NpbmdsZV9kZXNlbGVjdCAhPSBudWxsKSAmJiAodGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbMF0gIT0gbnVsbCkgJiYgdGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbMF0udGV4dCA9PT0gXCJcIiA/IHRoaXMub3B0aW9ucy5hbGxvd19zaW5nbGVfZGVzZWxlY3QgOiBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZV9zZWFyY2hfdGhyZXNob2xkID0gdGhpcy5vcHRpb25zLmRpc2FibGVfc2VhcmNoX3RocmVzaG9sZCB8fCAwO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlX3NlYXJjaCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlX3NlYXJjaCB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlX3NwbGl0X3dvcmRfc2VhcmNoID0gdGhpcy5vcHRpb25zLmVuYWJsZV9zcGxpdF93b3JkX3NlYXJjaCAhPSBudWxsID8gdGhpcy5vcHRpb25zLmVuYWJsZV9zcGxpdF93b3JkX3NlYXJjaCA6IHRydWU7XG4gICAgICAgICAgICB0aGlzLmdyb3VwX3NlYXJjaCA9IHRoaXMub3B0aW9ucy5ncm91cF9zZWFyY2ggIT0gbnVsbCA/IHRoaXMub3B0aW9ucy5ncm91cF9zZWFyY2ggOiB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfY29udGFpbnMgPSB0aGlzLm9wdGlvbnMuc2VhcmNoX2NvbnRhaW5zIHx8IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zaW5nbGVfYmFja3N0cm9rZV9kZWxldGUgPSB0aGlzLm9wdGlvbnMuc2luZ2xlX2JhY2tzdHJva2VfZGVsZXRlICE9IG51bGwgPyB0aGlzLm9wdGlvbnMuc2luZ2xlX2JhY2tzdHJva2VfZGVsZXRlIDogdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWF4X3NlbGVjdGVkX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMubWF4X3NlbGVjdGVkX29wdGlvbnMgfHwgSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLmluaGVyaXRfc2VsZWN0X2NsYXNzZXMgPSB0aGlzLm9wdGlvbnMuaW5oZXJpdF9zZWxlY3RfY2xhc3NlcyB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheV9zZWxlY3RlZF9vcHRpb25zID0gdGhpcy5vcHRpb25zLmRpc3BsYXlfc2VsZWN0ZWRfb3B0aW9ucyAhPSBudWxsID8gdGhpcy5vcHRpb25zLmRpc3BsYXlfc2VsZWN0ZWRfb3B0aW9ucyA6IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlfZGlzYWJsZWRfb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5kaXNwbGF5X2Rpc2FibGVkX29wdGlvbnMgIT0gbnVsbCA/IHRoaXMub3B0aW9ucy5kaXNwbGF5X2Rpc2FibGVkX29wdGlvbnMgOiB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pbmNsdWRlX2dyb3VwX2xhYmVsX2luX3NlbGVjdGVkID0gdGhpcy5vcHRpb25zLmluY2x1ZGVfZ3JvdXBfbGFiZWxfaW5fc2VsZWN0ZWQgfHwgZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm1heF9zaG93bl9yZXN1bHRzID0gdGhpcy5vcHRpb25zLm1heF9zaG93bl9yZXN1bHRzIHx8IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhc2Vfc2Vuc2l0aXZlX3NlYXJjaCA9IHRoaXMub3B0aW9ucy5jYXNlX3NlbnNpdGl2ZV9zZWFyY2ggfHwgZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLnNldF9kZWZhdWx0X3RleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1fZmllbGQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdF90ZXh0ID0gdGhpcy5mb3JtX2ZpZWxkLmdldEF0dHJpYnV0ZShcImRhdGEtcGxhY2Vob2xkZXJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRfdGV4dCA9IHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcl90ZXh0X211bHRpcGxlIHx8IHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcl90ZXh0IHx8IEFic3RyYWN0Q2hvc2VuLmRlZmF1bHRfbXVsdGlwbGVfdGV4dDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0X3RleHQgPSB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXJfdGV4dF9zaW5nbGUgfHwgdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyX3RleHQgfHwgQWJzdHJhY3RDaG9zZW4uZGVmYXVsdF9zaW5nbGVfdGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNfbm9uZV9mb3VuZCA9IHRoaXMuZm9ybV9maWVsZC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5vX3Jlc3VsdHNfdGV4dFwiKSB8fCB0aGlzLm9wdGlvbnMubm9fcmVzdWx0c190ZXh0IHx8IEFic3RyYWN0Q2hvc2VuLmRlZmF1bHRfbm9fcmVzdWx0X3RleHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLmNob2ljZV9sYWJlbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluY2x1ZGVfZ3JvdXBfbGFiZWxfaW5fc2VsZWN0ZWQgJiYgKGl0ZW0uZ3JvdXBfbGFiZWwgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8YiBjbGFzcz0nZ3JvdXAtbmFtZSc+XCIgKyBpdGVtLmdyb3VwX2xhYmVsICsgXCI8L2I+XCIgKyBpdGVtLmh0bWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmh0bWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLm1vdXNlX2VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3VzZV9vbl9jb250YWluZXIgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5tb3VzZV9sZWF2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW91c2Vfb25fY29udGFpbmVyID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLmlucHV0X2ZvY3VzID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlX2ZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb250YWluZXJfbW91c2Vkb3duKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pLCA1MCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlX2ZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2YXRlX2ZpZWxkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5pbnB1dF9ibHVyID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vdXNlX29uX2NvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlX2ZpZWxkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYmx1cl90ZXN0KCk7XG4gICAgICAgICAgICAgICAgfSksIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLnJlc3VsdHNfb3B0aW9uX2J1aWxkID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGRhdGEsIGRhdGFfY29udGVudCwgc2hvd25fcmVzdWx0cywgX2ksIF9sZW4sIF9yZWY7XG4gICAgICAgICAgICBjb250ZW50ID0gJyc7XG4gICAgICAgICAgICBzaG93bl9yZXN1bHRzID0gMDtcbiAgICAgICAgICAgIF9yZWYgPSB0aGlzLnJlc3VsdHNfZGF0YTtcbiAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBfcmVmW19pXTtcbiAgICAgICAgICAgICAgICBkYXRhX2NvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ncm91cCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhX2NvbnRlbnQgPSB0aGlzLnJlc3VsdF9hZGRfZ3JvdXAoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9jb250ZW50ID0gdGhpcy5yZXN1bHRfYWRkX29wdGlvbihkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFfY29udGVudCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd25fcmVzdWx0cysrO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGRhdGFfY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuZmlyc3QgOiB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2VsZWN0ZWQgJiYgdGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VfYnVpbGQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zZWxlY3RlZCAmJiAhdGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVfc2V0X3NlbGVjdGVkX3RleHQodGhpcy5jaG9pY2VfbGFiZWwoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzaG93bl9yZXN1bHRzID49IHRoaXMubWF4X3Nob3duX3Jlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLnJlc3VsdF9hZGRfb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3Nlcywgb3B0aW9uX2VsO1xuICAgICAgICAgICAgaWYgKCFvcHRpb24uc2VhcmNoX21hdGNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmluY2x1ZGVfb3B0aW9uX2luX3Jlc3VsdHMob3B0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsYXNzZXMgPSBbXTtcbiAgICAgICAgICAgIGlmICghb3B0aW9uLmRpc2FibGVkICYmICEob3B0aW9uLnNlbGVjdGVkICYmIHRoaXMuaXNfbXVsdGlwbGUpKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKFwiYWN0aXZlLXJlc3VsdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb24uZGlzYWJsZWQgJiYgIShvcHRpb24uc2VsZWN0ZWQgJiYgdGhpcy5pc19tdWx0aXBsZSkpIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goXCJkaXNhYmxlZC1yZXN1bHRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKFwicmVzdWx0LXNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbi5ncm91cF9hcnJheV9pbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKFwiZ3JvdXAtb3B0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbi5jbGFzc2VzICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKG9wdGlvbi5jbGFzc2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbl9lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgICAgICAgIG9wdGlvbl9lbC5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgb3B0aW9uX2VsLnN0eWxlLmNzc1RleHQgPSBvcHRpb24uc3R5bGU7XG4gICAgICAgICAgICBvcHRpb25fZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1vcHRpb24tYXJyYXktaW5kZXhcIiwgb3B0aW9uLmFycmF5X2luZGV4KTtcbiAgICAgICAgICAgIG9wdGlvbl9lbC5pbm5lckhUTUwgPSBvcHRpb24uc2VhcmNoX3RleHQ7XG4gICAgICAgICAgICBpZiAob3B0aW9uLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uX2VsLnRpdGxlID0gb3B0aW9uLnRpdGxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0ZXJIVE1MKG9wdGlvbl9lbCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLnJlc3VsdF9hZGRfZ3JvdXAgPSBmdW5jdGlvbihncm91cCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMsIGdyb3VwX2VsO1xuICAgICAgICAgICAgaWYgKCEoZ3JvdXAuc2VhcmNoX21hdGNoIHx8IGdyb3VwLmdyb3VwX21hdGNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKGdyb3VwLmFjdGl2ZV9vcHRpb25zID4gMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGFzc2VzID0gW107XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goXCJncm91cC1yZXN1bHRcIik7XG4gICAgICAgICAgICBpZiAoZ3JvdXAuY2xhc3Nlcykge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaChncm91cC5jbGFzc2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyb3VwX2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICAgICAgZ3JvdXBfZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIGdyb3VwX2VsLmlubmVySFRNTCA9IGdyb3VwLnNlYXJjaF90ZXh0O1xuICAgICAgICAgICAgaWYgKGdyb3VwLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBfZWwudGl0bGUgPSBncm91cC50aXRsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dGVySFRNTChncm91cF9lbCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLnJlc3VsdHNfdXBkYXRlX2ZpZWxkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnNldF9kZWZhdWx0X3RleHQoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c19yZXNldF9jbGVhbnVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0c19idWlsZCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c19zaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lubm93X3Jlc3VsdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBBYnN0cmFjdENob3Nlbi5wcm90b3R5cGUucmVzZXRfc2luZ2xlX3NlbGVjdF9vcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0LCBfaSwgX2xlbiwgX3JlZiwgX3Jlc3VsdHM7XG4gICAgICAgICAgICBfcmVmID0gdGhpcy5yZXN1bHRzX2RhdGE7XG4gICAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZltfaV07XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHJlc3VsdC5zZWxlY3RlZCA9IGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5yZXN1bHRzX3RvZ2dsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c19zaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c19oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNfc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5yZXN1bHRzX3NlYXJjaCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c19zaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lubm93X3Jlc3VsdHMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c19zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLndpbm5vd19yZXN1bHRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZXNjYXBlZFNlYXJjaFRleHQsIG9wdGlvbiwgcmVnZXgsIHJlc3VsdHMsIHJlc3VsdHNfZ3JvdXAsIHNlYXJjaFRleHQsIHN0YXJ0cG9zLCB0ZXh0LCB6cmVnZXgsIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgICAgICAgdGhpcy5ub19yZXN1bHRzX2NsZWFyKCk7XG4gICAgICAgICAgICByZXN1bHRzID0gMDtcbiAgICAgICAgICAgIHNlYXJjaFRleHQgPSB0aGlzLmdldF9zZWFyY2hfdGV4dCgpO1xuICAgICAgICAgICAgZXNjYXBlZFNlYXJjaFRleHQgPSBzZWFyY2hUZXh0LnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgICAgIHpyZWdleCA9IG5ldyBSZWdFeHAoZXNjYXBlZFNlYXJjaFRleHQsICdpJyk7XG4gICAgICAgICAgICByZWdleCA9IHRoaXMuZ2V0X3NlYXJjaF9yZWdleChlc2NhcGVkU2VhcmNoVGV4dCk7XG4gICAgICAgICAgICBfcmVmID0gdGhpcy5yZXN1bHRzX2RhdGE7XG4gICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgICAgICBvcHRpb24gPSBfcmVmW19pXTtcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VhcmNoX21hdGNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVzdWx0c19ncm91cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5jbHVkZV9vcHRpb25faW5fcmVzdWx0cyhvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5ncm91cF9tYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmFjdGl2ZV9vcHRpb25zID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoKG9wdGlvbi5ncm91cF9hcnJheV9pbmRleCAhPSBudWxsKSAmJiB0aGlzLnJlc3VsdHNfZGF0YVtvcHRpb24uZ3JvdXBfYXJyYXlfaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzX2dyb3VwID0gdGhpcy5yZXN1bHRzX2RhdGFbb3B0aW9uLmdyb3VwX2FycmF5X2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzX2dyb3VwLmFjdGl2ZV9vcHRpb25zID09PSAwICYmIHJlc3VsdHNfZ3JvdXAuc2VhcmNoX21hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c19ncm91cC5hY3RpdmVfb3B0aW9ucyArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZWFyY2hfdGV4dCA9IG9wdGlvbi5ncm91cCA/IG9wdGlvbi5sYWJlbCA6IG9wdGlvbi5odG1sO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb24uZ3JvdXAgJiYgIXRoaXMuZ3JvdXBfc2VhcmNoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlYXJjaF9tYXRjaCA9IHRoaXMuc2VhcmNoX3N0cmluZ19tYXRjaChvcHRpb24uc2VhcmNoX3RleHQsIHJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uc2VhcmNoX21hdGNoICYmICFvcHRpb24uZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlYXJjaF9tYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hUZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydHBvcyA9IG9wdGlvbi5zZWFyY2hfdGV4dC5zZWFyY2goenJlZ2V4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IG9wdGlvbi5zZWFyY2hfdGV4dC5zdWJzdHIoMCwgc3RhcnRwb3MgKyBzZWFyY2hUZXh0Lmxlbmd0aCkgKyAnPC9lbT4nICsgb3B0aW9uLnNlYXJjaF90ZXh0LnN1YnN0cihzdGFydHBvcyArIHNlYXJjaFRleHQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlYXJjaF90ZXh0ID0gdGV4dC5zdWJzdHIoMCwgc3RhcnRwb3MpICsgJzxlbT4nICsgdGV4dC5zdWJzdHIoc3RhcnRwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c19ncm91cCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNfZ3JvdXAuZ3JvdXBfbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKG9wdGlvbi5ncm91cF9hcnJheV9pbmRleCAhPSBudWxsKSAmJiB0aGlzLnJlc3VsdHNfZGF0YVtvcHRpb24uZ3JvdXBfYXJyYXlfaW5kZXhdLnNlYXJjaF9tYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZWFyY2hfbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXN1bHRfY2xlYXJfaGlnaGxpZ2h0KCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cyA8IDEgJiYgc2VhcmNoVGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZV9yZXN1bHRzX2NvbnRlbnQoXCJcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9fcmVzdWx0cyhzZWFyY2hUZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVfcmVzdWx0c19jb250ZW50KHRoaXMucmVzdWx0c19vcHRpb25fYnVpbGQoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lubm93X3Jlc3VsdHNfc2V0X2hpZ2hsaWdodCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5nZXRfc2VhcmNoX3JlZ2V4ID0gZnVuY3Rpb24oZXNjYXBlZF9zZWFyY2hfc3RyaW5nKSB7XG4gICAgICAgICAgICB2YXIgcmVnZXhfYW5jaG9yLCByZWdleF9mbGFnO1xuICAgICAgICAgICAgcmVnZXhfYW5jaG9yID0gdGhpcy5zZWFyY2hfY29udGFpbnMgPyBcIlwiIDogXCJeXCI7XG4gICAgICAgICAgICByZWdleF9mbGFnID0gdGhpcy5jYXNlX3NlbnNpdGl2ZV9zZWFyY2ggPyBcIlwiIDogXCJpXCI7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleF9hbmNob3IgKyBlc2NhcGVkX3NlYXJjaF9zdHJpbmcsIHJlZ2V4X2ZsYWcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5zZWFyY2hfc3RyaW5nX21hdGNoID0gZnVuY3Rpb24oc2VhcmNoX3N0cmluZywgcmVnZXgpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0LCBwYXJ0cywgX2ksIF9sZW47XG4gICAgICAgICAgICBpZiAocmVnZXgudGVzdChzZWFyY2hfc3RyaW5nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVuYWJsZV9zcGxpdF93b3JkX3NlYXJjaCAmJiAoc2VhcmNoX3N0cmluZy5pbmRleE9mKFwiIFwiKSA+PSAwIHx8IHNlYXJjaF9zdHJpbmcuaW5kZXhPZihcIltcIikgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgcGFydHMgPSBzZWFyY2hfc3RyaW5nLnJlcGxhY2UoL1xcW3xcXF0vZywgXCJcIikuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBwYXJ0cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFydCA9IHBhcnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KHBhcnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLmNob2ljZXNfY291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24sIF9pLCBfbGVuLCBfcmVmO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRfb3B0aW9uX2NvdW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZF9vcHRpb25fY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkX29wdGlvbl9jb3VudCA9IDA7XG4gICAgICAgICAgICBfcmVmID0gdGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnM7XG4gICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgICAgICBvcHRpb24gPSBfcmVmW19pXTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfb3B0aW9uX2NvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRfb3B0aW9uX2NvdW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5jaG9pY2VzX2NsaWNrID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICghKHRoaXMucmVzdWx0c19zaG93aW5nIHx8IHRoaXMuaXNfZGlzYWJsZWQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c19zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLmtleXVwX2NoZWNrZXIgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHZhciBzdHJva2UsIF9yZWY7XG4gICAgICAgICAgICBzdHJva2UgPSAoX3JlZiA9IGV2dC53aGljaCkgIT0gbnVsbCA/IF9yZWYgOiBldnQua2V5Q29kZTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoX2ZpZWxkX3NjYWxlKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHN0cm9rZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUgJiYgdGhpcy5iYWNrc3Ryb2tlX2xlbmd0aCA8IDEgJiYgdGhpcy5jaG9pY2VzX2NvdW50KCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5rZXlkb3duX2JhY2tzdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c19zZWFyY2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c19zaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRfc2VsZWN0KGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c19zaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHNfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICBjYXNlIDkxOlxuICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c19zZWFyY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBBYnN0cmFjdENob3Nlbi5wcm90b3R5cGUuY2xpcGJvYXJkX2V2ZW50X2NoZWNrZXIgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlc3VsdHNfc2VhcmNoKCk7XG4gICAgICAgICAgICB9KSwgNTApO1xuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5jb250YWluZXJfd2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMud2lkdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud2lkdGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgdGhpcy5mb3JtX2ZpZWxkLm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5pbmNsdWRlX29wdGlvbl9pbl9yZXN1bHRzID0gZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc19tdWx0aXBsZSAmJiAoIXRoaXMuZGlzcGxheV9zZWxlY3RlZF9vcHRpb25zICYmIG9wdGlvbi5zZWxlY3RlZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzcGxheV9kaXNhYmxlZF9vcHRpb25zICYmIG9wdGlvbi5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb24uZW1wdHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICBBYnN0cmFjdENob3Nlbi5wcm90b3R5cGUuc2VhcmNoX3Jlc3VsdHNfdG91Y2hzdGFydCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgdGhpcy50b3VjaF9zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaF9yZXN1bHRzX21vdXNlb3ZlcihldnQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLnByb3RvdHlwZS5zZWFyY2hfcmVzdWx0c190b3VjaG1vdmUgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hfc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoX3Jlc3VsdHNfbW91c2VvdXQoZXZ0KTtcbiAgICAgICAgfTtcblxuICAgICAgICBBYnN0cmFjdENob3Nlbi5wcm90b3R5cGUuc2VhcmNoX3Jlc3VsdHNfdG91Y2hlbmQgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoX3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfcmVzdWx0c19tb3VzZXVwKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4ucHJvdG90eXBlLm91dGVySFRNTCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciB0bXA7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5vdXRlckhUTUwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5vdXRlckhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0bXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdG1wLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRtcC5pbm5lckhUTUw7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4uYnJvd3Nlcl9pc19zdXBwb3J0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChcIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiID09PSB3aW5kb3cubmF2aWdhdG9yLmFwcE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRNb2RlID49IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoL2lQKG9kfGhvbmUpL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgfHwgL0lFTW9iaWxlL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgfHwgL1dpbmRvd3MgUGhvbmUvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvQmxhY2tCZXJyeS9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpIHx8IC9CQjEwL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgfHwgL0FuZHJvaWQuKk1vYmlsZS9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4uZGVmYXVsdF9tdWx0aXBsZV90ZXh0ID0gXCJTZWxlY3QgU29tZSBPcHRpb25zXCI7XG5cbiAgICAgICAgQWJzdHJhY3RDaG9zZW4uZGVmYXVsdF9zaW5nbGVfdGV4dCA9IFwiU2VsZWN0IGFuIE9wdGlvblwiO1xuXG4gICAgICAgIEFic3RyYWN0Q2hvc2VuLmRlZmF1bHRfbm9fcmVzdWx0X3RleHQgPSBcIk5vIHJlc3VsdHMgbWF0Y2hcIjtcblxuICAgICAgICByZXR1cm4gQWJzdHJhY3RDaG9zZW47XG5cbiAgICB9KSgpO1xuXG4gICAgJCA9IGpRdWVyeTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgY2hvc2VuOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIUFic3RyYWN0Q2hvc2VuLmJyb3dzZXJfaXNfc3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaW5wdXRfZmllbGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMsIGNob3NlbjtcbiAgICAgICAgICAgICAgICAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgY2hvc2VuID0gJHRoaXMuZGF0YSgnY2hvc2VuJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09ICdkZXN0cm95Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hvc2VuIGluc3RhbmNlb2YgQ2hvc2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaG9zZW4uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEoY2hvc2VuIGluc3RhbmNlb2YgQ2hvc2VuKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKCdjaG9zZW4nLCBuZXcgQ2hvc2VuKHRoaXMsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgQ2hvc2VuID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ2hvc2VuLCBfc3VwZXIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIENob3NlbigpIHtcbiAgICAgICAgICAgIF9yZWYgPSBDaG9zZW4uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gX3JlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybV9maWVsZF9qcSA9ICQodGhpcy5mb3JtX2ZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZEluZGV4ID0gdGhpcy5mb3JtX2ZpZWxkLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc19ydGwgPSB0aGlzLmZvcm1fZmllbGRfanEuaGFzQ2xhc3MoXCJjaG9zZW4tcnRsXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuc2V0X3VwX2h0bWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXJfY2xhc3NlcywgY29udGFpbmVyX3Byb3BzO1xuICAgICAgICAgICAgY29udGFpbmVyX2NsYXNzZXMgPSBbXCJjaG9zZW4tY29udGFpbmVyXCJdO1xuICAgICAgICAgICAgY29udGFpbmVyX2NsYXNzZXMucHVzaChcImNob3Nlbi1jb250YWluZXItXCIgKyAodGhpcy5pc19tdWx0aXBsZSA/IFwibXVsdGlcIiA6IFwic2luZ2xlXCIpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmluaGVyaXRfc2VsZWN0X2NsYXNzZXMgJiYgdGhpcy5mb3JtX2ZpZWxkLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcl9jbGFzc2VzLnB1c2godGhpcy5mb3JtX2ZpZWxkLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc19ydGwpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXJfY2xhc3Nlcy5wdXNoKFwiY2hvc2VuLXJ0bFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRhaW5lcl9wcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiBjb250YWluZXJfY2xhc3Nlcy5qb2luKCcgJyksXG4gICAgICAgICAgICAgICAgJ3N0eWxlJzogXCJ3aWR0aDogXCIgKyAodGhpcy5jb250YWluZXJfd2lkdGgoKSkgKyBcIjtcIixcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aGlzLmZvcm1fZmllbGQudGl0bGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtX2ZpZWxkLmlkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcl9wcm9wcy5pZCA9IHRoaXMuZm9ybV9maWVsZC5pZC5yZXBsYWNlKC9bXlxcd10vZywgJ18nKSArIFwiX2Nob3NlblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSAkKFwiPGRpdiAvPlwiLCBjb250YWluZXJfcHJvcHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5odG1sKCc8dWwgY2xhc3M9XCJjaG9zZW4tY2hvaWNlc1wiPjxsaSBjbGFzcz1cInNlYXJjaC1maWVsZFwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJyArIHRoaXMuZGVmYXVsdF90ZXh0ICsgJ1wiIGNsYXNzPVwiZGVmYXVsdFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiIHN0eWxlPVwid2lkdGg6MjVweDtcIiAvPjwvbGk+PC91bD48ZGl2IGNsYXNzPVwiY2hvc2VuLWRyb3BcIj48dWwgY2xhc3M9XCJjaG9zZW4tcmVzdWx0c1wiPjwvdWw+PC9kaXY+Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmh0bWwoJzxhIGNsYXNzPVwiY2hvc2VuLXNpbmdsZSBjaG9zZW4tZGVmYXVsdFwiPjxzcGFuPicgKyB0aGlzLmRlZmF1bHRfdGV4dCArICc8L3NwYW4+PGRpdj48Yj48L2I+PC9kaXY+PC9hPjxkaXYgY2xhc3M9XCJjaG9zZW4tZHJvcFwiPjxkaXYgY2xhc3M9XCJjaG9zZW4tc2VhcmNoXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgLz48L2Rpdj48dWwgY2xhc3M9XCJjaG9zZW4tcmVzdWx0c1wiPjwvdWw+PC9kaXY+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanEuaGlkZSgpLmFmdGVyKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd24gPSB0aGlzLmNvbnRhaW5lci5maW5kKCdkaXYuY2hvc2VuLWRyb3AnKS5maXJzdCgpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGQgPSB0aGlzLmNvbnRhaW5lci5maW5kKCdpbnB1dCcpLmZpcnN0KCk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9yZXN1bHRzID0gdGhpcy5jb250YWluZXIuZmluZCgndWwuY2hvc2VuLXJlc3VsdHMnKS5maXJzdCgpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoX25vX3Jlc3VsdHMgPSB0aGlzLmNvbnRhaW5lci5maW5kKCdsaS5uby1yZXN1bHRzJykuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX211bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hfY2hvaWNlcyA9IHRoaXMuY29udGFpbmVyLmZpbmQoJ3VsLmNob3Nlbi1jaG9pY2VzJykuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaF9jb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5maW5kKCdsaS5zZWFyY2gtZmllbGQnKS5maXJzdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaF9jb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5maW5kKCdkaXYuY2hvc2VuLXNlYXJjaCcpLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9pdGVtID0gdGhpcy5jb250YWluZXIuZmluZCgnLmNob3Nlbi1zaW5nbGUnKS5maXJzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXN1bHRzX2J1aWxkKCk7XG4gICAgICAgICAgICB0aGlzLnNldF90YWJfaW5kZXgoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldF9sYWJlbF9iZWhhdmlvcigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUub25fcmVhZHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1fZmllbGRfanEudHJpZ2dlcihcImNob3NlbjpyZWFkeVwiLCB7XG4gICAgICAgICAgICAgICAgY2hvc2VuOiB0aGlzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLnJlZ2lzdGVyX29ic2VydmVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmJpbmQoJ3RvdWNoc3RhcnQuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyX21vdXNlZG93bihldnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYmluZCgndG91Y2hlbmQuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyX21vdXNldXAoZXZ0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmJpbmQoJ21vdXNlZG93bi5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb250YWluZXJfbW91c2Vkb3duKGV2dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmJpbmQoJ21vdXNldXAuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyX21vdXNldXAoZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYmluZCgnbW91c2VlbnRlci5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5tb3VzZV9lbnRlcihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5iaW5kKCdtb3VzZWxlYXZlLmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm1vdXNlX2xlYXZlKGV2dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoX3Jlc3VsdHMuYmluZCgnbW91c2V1cC5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hfcmVzdWx0c19tb3VzZXVwKGV2dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoX3Jlc3VsdHMuYmluZCgnbW91c2VvdmVyLmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaF9yZXN1bHRzX21vdXNlb3ZlcihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9yZXN1bHRzLmJpbmQoJ21vdXNlb3V0LmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaF9yZXN1bHRzX21vdXNlb3V0KGV2dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoX3Jlc3VsdHMuYmluZCgnbW91c2V3aGVlbC5jaG9zZW4gRE9NTW91c2VTY3JvbGwuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VhcmNoX3Jlc3VsdHNfbW91c2V3aGVlbChldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9yZXN1bHRzLmJpbmQoJ3RvdWNoc3RhcnQuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2VhcmNoX3Jlc3VsdHNfdG91Y2hzdGFydChldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9yZXN1bHRzLmJpbmQoJ3RvdWNobW92ZS5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hfcmVzdWx0c190b3VjaG1vdmUoZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfcmVzdWx0cy5iaW5kKCd0b3VjaGVuZC5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hfcmVzdWx0c190b3VjaGVuZChldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanEuYmluZChcImNob3Nlbjp1cGRhdGVkLmNob3NlblwiLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXN1bHRzX3VwZGF0ZV9maWVsZChldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanEuYmluZChcImNob3NlbjphY3RpdmF0ZS5jaG9zZW5cIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZhdGVfZmllbGQoZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5mb3JtX2ZpZWxkX2pxLmJpbmQoXCJjaG9zZW46b3Blbi5jaG9zZW5cIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyX21vdXNlZG93bihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanEuYmluZChcImNob3NlbjpjbG9zZS5jaG9zZW5cIiwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5wdXRfYmx1cihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZC5iaW5kKCdibHVyLmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmlucHV0X2JsdXIoZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGQuYmluZCgna2V5dXAuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMua2V5dXBfY2hlY2tlcihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZC5iaW5kKCdrZXlkb3duLmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmtleWRvd25fY2hlY2tlcihldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZC5iaW5kKCdmb2N1cy5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbnB1dF9mb2N1cyhldnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZC5iaW5kKCdjdXQuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2xpcGJvYXJkX2V2ZW50X2NoZWNrZXIoZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGQuYmluZCgncGFzdGUuY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2xpcGJvYXJkX2V2ZW50X2NoZWNrZXIoZXZ0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfY2hvaWNlcy5iaW5kKCdjbGljay5jaG9zZW4nLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2hvaWNlc19jbGljayhldnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuYmluZCgnY2xpY2suY2hvc2VuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzLmNvbnRhaW5lclswXS5vd25lckRvY3VtZW50KS51bmJpbmQoXCJjbGljay5jaG9zZW5cIiwgdGhpcy5jbGlja190ZXN0X2FjdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hfZmllbGRbMF0udGFiSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanFbMF0udGFiSW5kZXggPSB0aGlzLnNlYXJjaF9maWVsZFswXS50YWJJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5mb3JtX2ZpZWxkX2pxLnJlbW92ZURhdGEoJ2Nob3NlbicpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybV9maWVsZF9qcS5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5zZWFyY2hfZmllbGRfZGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuaXNfZGlzYWJsZWQgPSB0aGlzLmZvcm1fZmllbGRfanFbMF0uZGlzYWJsZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pc19kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdjaG9zZW4tZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZFswXS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzX211bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfaXRlbS51bmJpbmQoXCJmb2N1cy5jaG9zZW5cIiwgdGhpcy5hY3RpdmF0ZV9hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZV9maWVsZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygnY2hvc2VuLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGRbMF0uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRfaXRlbS5iaW5kKFwiZm9jdXMuY2hvc2VuXCIsIHRoaXMuYWN0aXZhdGVfYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5jb250YWluZXJfbW91c2Vkb3duID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNfZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZ0ICYmIGV2dC50eXBlID09PSBcIm1vdXNlZG93blwiICYmICF0aGlzLnJlc3VsdHNfc2hvd2luZykge1xuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEoKGV2dCAhPSBudWxsKSAmJiAoJChldnQudGFyZ2V0KSkuaGFzQ2xhc3MoXCJzZWFyY2gtY2hvaWNlLWNsb3NlXCIpKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlX2ZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoX2ZpZWxkLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcy5jb250YWluZXJbMF0ub3duZXJEb2N1bWVudCkuYmluZCgnY2xpY2suY2hvc2VuJywgdGhpcy5jbGlja190ZXN0X2FjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHNfc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzX211bHRpcGxlICYmIGV2dCAmJiAoKCQoZXZ0LnRhcmdldClbMF0gPT09IHRoaXMuc2VsZWN0ZWRfaXRlbVswXSkgfHwgJChldnQudGFyZ2V0KS5wYXJlbnRzKFwiYS5jaG9zZW4tc2luZ2xlXCIpLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzX3RvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2YXRlX2ZpZWxkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuY29udGFpbmVyX21vdXNldXAgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0Lm5vZGVOYW1lID09PSBcIkFCQlJcIiAmJiAhdGhpcy5pc19kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNfcmVzZXQoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLnNlYXJjaF9yZXN1bHRzX21vdXNld2hlZWwgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YTtcbiAgICAgICAgICAgIGlmIChldnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgICAgIGRlbHRhID0gZXZ0Lm9yaWdpbmFsRXZlbnQuZGVsdGFZIHx8IC1ldnQub3JpZ2luYWxFdmVudC53aGVlbERlbHRhIHx8IGV2dC5vcmlnaW5hbEV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWx0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnRE9NTW91c2VTY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhID0gZGVsdGEgKiA0MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoX3Jlc3VsdHMuc2Nyb2xsVG9wKGRlbHRhICsgdGhpcy5zZWFyY2hfcmVzdWx0cy5zY3JvbGxUb3AoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5ibHVyX3Rlc3QgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmVfZmllbGQgJiYgdGhpcy5jb250YWluZXIuaGFzQ2xhc3MoXCJjaG9zZW4tY29udGFpbmVyLWFjdGl2ZVwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsb3NlX2ZpZWxkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5jbG9zZV9maWVsZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzLmNvbnRhaW5lclswXS5vd25lckRvY3VtZW50KS51bmJpbmQoXCJjbGljay5jaG9zZW5cIiwgdGhpcy5jbGlja190ZXN0X2FjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZV9maWVsZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzX2hpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKFwiY2hvc2VuLWNvbnRhaW5lci1hY3RpdmVcIik7XG4gICAgICAgICAgICB0aGlzLmNsZWFyX2JhY2tzdHJva2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd19zZWFyY2hfZmllbGRfZGVmYXVsdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoX2ZpZWxkX3NjYWxlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5hY3RpdmF0ZV9maWVsZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoXCJjaG9zZW4tY29udGFpbmVyLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlX2ZpZWxkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCh0aGlzLnNlYXJjaF9maWVsZC52YWwoKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfZmllbGQuZm9jdXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLnRlc3RfYWN0aXZlX2NsaWNrID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZlX2NvbnRhaW5lcjtcbiAgICAgICAgICAgIGFjdGl2ZV9jb250YWluZXIgPSAkKGV2dC50YXJnZXQpLmNsb3Nlc3QoJy5jaG9zZW4tY29udGFpbmVyJyk7XG4gICAgICAgICAgICBpZiAoYWN0aXZlX2NvbnRhaW5lci5sZW5ndGggJiYgdGhpcy5jb250YWluZXJbMF0gPT09IGFjdGl2ZV9jb250YWluZXJbMF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVfZmllbGQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZV9maWVsZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUucmVzdWx0c19idWlsZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5wYXJzaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfb3B0aW9uX2NvdW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0c19kYXRhID0gU2VsZWN0UGFyc2VyLnNlbGVjdF90b19hcnJheSh0aGlzLmZvcm1fZmllbGQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaF9jaG9pY2VzLmZpbmQoXCJsaS5zZWFyY2gtY2hvaWNlXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlX3NldF9zZWxlY3RlZF90ZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzYWJsZV9zZWFyY2ggfHwgdGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnMubGVuZ3RoIDw9IHRoaXMuZGlzYWJsZV9zZWFyY2hfdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoX2ZpZWxkWzBdLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoXCJjaG9zZW4tY29udGFpbmVyLXNpbmdsZS1ub3NlYXJjaFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZFswXS5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcyhcImNob3Nlbi1jb250YWluZXItc2luZ2xlLW5vc2VhcmNoXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlX3Jlc3VsdHNfY29udGVudCh0aGlzLnJlc3VsdHNfb3B0aW9uX2J1aWxkKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdHJ1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGRfZGlzYWJsZWQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd19zZWFyY2hfZmllbGRfZGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNpbmcgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLnJlc3VsdF9kb19oaWdobGlnaHQgPSBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgdmFyIGhpZ2hfYm90dG9tLCBoaWdoX3RvcCwgbWF4SGVpZ2h0LCB2aXNpYmxlX2JvdHRvbSwgdmlzaWJsZV90b3A7XG4gICAgICAgICAgICBpZiAoZWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRfY2xlYXJfaGlnaGxpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRfaGlnaGxpZ2h0ID0gZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRfaGlnaGxpZ2h0LmFkZENsYXNzKFwiaGlnaGxpZ2h0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5zZWFyY2hfcmVzdWx0cy5jc3MoXCJtYXhIZWlnaHRcIiksIDEwKTtcbiAgICAgICAgICAgICAgICB2aXNpYmxlX3RvcCA9IHRoaXMuc2VhcmNoX3Jlc3VsdHMuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICAgICAgdmlzaWJsZV9ib3R0b20gPSBtYXhIZWlnaHQgKyB2aXNpYmxlX3RvcDtcbiAgICAgICAgICAgICAgICBoaWdoX3RvcCA9IHRoaXMucmVzdWx0X2hpZ2hsaWdodC5wb3NpdGlvbigpLnRvcCArIHRoaXMuc2VhcmNoX3Jlc3VsdHMuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICAgICAgaGlnaF9ib3R0b20gPSBoaWdoX3RvcCArIHRoaXMucmVzdWx0X2hpZ2hsaWdodC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIGlmIChoaWdoX2JvdHRvbSA+PSB2aXNpYmxlX2JvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfcmVzdWx0cy5zY3JvbGxUb3AoKGhpZ2hfYm90dG9tIC0gbWF4SGVpZ2h0KSA+IDAgPyBoaWdoX2JvdHRvbSAtIG1heEhlaWdodCA6IDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGlnaF90b3AgPCB2aXNpYmxlX3RvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfcmVzdWx0cy5zY3JvbGxUb3AoaGlnaF90b3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdF9oaWdobGlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdF9oaWdobGlnaHQucmVtb3ZlQ2xhc3MoXCJoaWdobGlnaHRlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdF9oaWdobGlnaHQgPSBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUucmVzdWx0c19zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc19tdWx0aXBsZSAmJiB0aGlzLm1heF9zZWxlY3RlZF9vcHRpb25zIDw9IHRoaXMuY2hvaWNlc19jb3VudCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtX2ZpZWxkX2pxLnRyaWdnZXIoXCJjaG9zZW46bWF4c2VsZWN0ZWRcIiwge1xuICAgICAgICAgICAgICAgICAgICBjaG9zZW46IHRoaXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyhcImNob3Nlbi13aXRoLWRyb3BcIik7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdHNfc2hvd2luZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGQudmFsKHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCgpKTtcbiAgICAgICAgICAgIHRoaXMud2lubm93X3Jlc3VsdHMoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1fZmllbGRfanEudHJpZ2dlcihcImNob3NlbjpzaG93aW5nX2Ryb3Bkb3duXCIsIHtcbiAgICAgICAgICAgICAgICBjaG9zZW46IHRoaXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUudXBkYXRlX3Jlc3VsdHNfY29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaF9yZXN1bHRzLmh0bWwoY29udGVudCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5yZXN1bHRzX2hpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdHNfc2hvd2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKFwiY2hvc2VuLXdpdGgtZHJvcFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanEudHJpZ2dlcihcImNob3NlbjpoaWRpbmdfZHJvcGRvd25cIiwge1xuICAgICAgICAgICAgICAgICAgICBjaG9zZW46IHRoaXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNfc2hvd2luZyA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuc2V0X3RhYl9pbmRleCA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICB2YXIgdGk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtX2ZpZWxkLnRhYkluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGkgPSB0aGlzLmZvcm1fZmllbGQudGFiSW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtX2ZpZWxkLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoX2ZpZWxkWzBdLnRhYkluZGV4ID0gdGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5zZXRfbGFiZWxfYmVoYXZpb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfbGFiZWwgPSB0aGlzLmZvcm1fZmllbGRfanEucGFyZW50cyhcImxhYmVsXCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvcm1fZmllbGRfbGFiZWwubGVuZ3RoICYmIHRoaXMuZm9ybV9maWVsZC5pZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfbGFiZWwgPSAkKFwibGFiZWxbZm9yPSdcIiArIHRoaXMuZm9ybV9maWVsZC5pZCArIFwiJ11cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtX2ZpZWxkX2xhYmVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtX2ZpZWxkX2xhYmVsLmJpbmQoJ2NsaWNrLmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb250YWluZXJfbW91c2Vkb3duKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWN0aXZhdGVfZmllbGQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuc2hvd19zZWFyY2hfZmllbGRfZGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUgJiYgdGhpcy5jaG9pY2VzX2NvdW50KCkgPCAxICYmICF0aGlzLmFjdGl2ZV9maWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCh0aGlzLmRlZmF1bHRfdGV4dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoX2ZpZWxkLmFkZENsYXNzKFwiZGVmYXVsdFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGQudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaF9maWVsZC5yZW1vdmVDbGFzcyhcImRlZmF1bHRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5zZWFyY2hfcmVzdWx0c19tb3VzZXVwID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICAgICAgdGFyZ2V0ID0gJChldnQudGFyZ2V0KS5oYXNDbGFzcyhcImFjdGl2ZS1yZXN1bHRcIikgPyAkKGV2dC50YXJnZXQpIDogJChldnQudGFyZ2V0KS5wYXJlbnRzKFwiLmFjdGl2ZS1yZXN1bHRcIikuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRfaGlnaGxpZ2h0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0X3NlbGVjdChldnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaF9maWVsZC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuc2VhcmNoX3Jlc3VsdHNfbW91c2VvdmVyID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICAgICAgdGFyZ2V0ID0gJChldnQudGFyZ2V0KS5oYXNDbGFzcyhcImFjdGl2ZS1yZXN1bHRcIikgPyAkKGV2dC50YXJnZXQpIDogJChldnQudGFyZ2V0KS5wYXJlbnRzKFwiLmFjdGl2ZS1yZXN1bHRcIikuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRfZG9faGlnaGxpZ2h0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5zZWFyY2hfcmVzdWx0c19tb3VzZW91dCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgaWYgKCQoZXZ0LnRhcmdldCkuaGFzQ2xhc3MoXCJhY3RpdmUtcmVzdWx0XCIgfHwgJChldnQudGFyZ2V0KS5wYXJlbnRzKCcuYWN0aXZlLXJlc3VsdCcpLmZpcnN0KCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuY2hvaWNlX2J1aWxkID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgdmFyIGNob2ljZSwgY2xvc2VfbGluayxcbiAgICAgICAgICAgICAgICBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBjaG9pY2UgPSAkKCc8bGkgLz4nLCB7XG4gICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcInNlYXJjaC1jaG9pY2VcIlxuICAgICAgICAgICAgfSkuaHRtbChcIjxzcGFuPlwiICsgKHRoaXMuY2hvaWNlX2xhYmVsKGl0ZW0pKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgICAgIGlmIChpdGVtLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgY2hvaWNlLmFkZENsYXNzKCdzZWFyY2gtY2hvaWNlLWRpc2FibGVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb3NlX2xpbmsgPSAkKCc8YSAvPicsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiAnc2VhcmNoLWNob2ljZS1jbG9zZScsXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLW9wdGlvbi1hcnJheS1pbmRleCc6IGl0ZW0uYXJyYXlfaW5kZXhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjbG9zZV9saW5rLmJpbmQoJ2NsaWNrLmNob3NlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2hvaWNlX2Rlc3Ryb3lfbGlua19jbGljayhldnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNob2ljZS5hcHBlbmQoY2xvc2VfbGluayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfY29udGFpbmVyLmJlZm9yZShjaG9pY2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuY2hvaWNlX2Rlc3Ryb3lfbGlua19jbGljayA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNfZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaG9pY2VfZGVzdHJveSgkKGV2dC50YXJnZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLmNob2ljZV9kZXN0cm95ID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0X2Rlc2VsZWN0KGxpbmtbMF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1vcHRpb24tYXJyYXktaW5kZXhcIikpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93X3NlYXJjaF9maWVsZF9kZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUgJiYgdGhpcy5jaG9pY2VzX2NvdW50KCkgPiAwICYmIHRoaXMuc2VhcmNoX2ZpZWxkLnZhbCgpLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzX2hpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGluay5wYXJlbnRzKCdsaScpLmZpcnN0KCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoX2ZpZWxkX3NjYWxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5yZXN1bHRzX3Jlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0X3NpbmdsZV9zZWxlY3Rfb3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbMF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zaW5nbGVfc2V0X3NlbGVjdGVkX3RleHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd19zZWFyY2hfZmllbGRfZGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzX3Jlc2V0X2NsZWFudXAoKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlX2ZpZWxkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c19oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5yZXN1bHRzX3Jlc2V0X2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudF9zZWxlY3RlZEluZGV4ID0gdGhpcy5mb3JtX2ZpZWxkLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZF9pdGVtLmZpbmQoXCJhYmJyXCIpLnJlbW92ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUucmVzdWx0X3NlbGVjdCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgdmFyIGhpZ2gsIGl0ZW07XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRfaGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICAgICAgaGlnaCA9IHRoaXMucmVzdWx0X2hpZ2hsaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdF9jbGVhcl9oaWdobGlnaHQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc19tdWx0aXBsZSAmJiB0aGlzLm1heF9zZWxlY3RlZF9vcHRpb25zIDw9IHRoaXMuY2hvaWNlc19jb3VudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKFwiY2hvc2VuOm1heHNlbGVjdGVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNob3NlbjogdGhpc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICBoaWdoLnJlbW92ZUNsYXNzKFwiYWN0aXZlLXJlc3VsdFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0X3NpbmdsZV9zZWxlY3Rfb3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoaWdoLmFkZENsYXNzKFwicmVzdWx0LXNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIGl0ZW0gPSB0aGlzLnJlc3VsdHNfZGF0YVtoaWdoWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtb3B0aW9uLWFycmF5LWluZGV4XCIpXTtcbiAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1fZmllbGQub3B0aW9uc1tpdGVtLm9wdGlvbnNfaW5kZXhdLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkX29wdGlvbl9jb3VudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VfYnVpbGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVfc2V0X3NlbGVjdGVkX3RleHQodGhpcy5jaG9pY2VfbGFiZWwoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoISgoZXZ0Lm1ldGFLZXkgfHwgZXZ0LmN0cmxLZXkpICYmIHRoaXMuaXNfbXVsdGlwbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c19oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd19zZWFyY2hfZmllbGRfZGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzX211bHRpcGxlIHx8IHRoaXMuZm9ybV9maWVsZC5zZWxlY3RlZEluZGV4ICE9PSB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1fZmllbGRfanEudHJpZ2dlcihcImNoYW5nZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnc2VsZWN0ZWQnOiB0aGlzLmZvcm1fZmllbGQub3B0aW9uc1tpdGVtLm9wdGlvbnNfaW5kZXhdLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfc2VsZWN0ZWRJbmRleCA9IHRoaXMuZm9ybV9maWVsZC5zZWxlY3RlZEluZGV4O1xuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaF9maWVsZF9zY2FsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuc2luZ2xlX3NldF9zZWxlY3RlZF90ZXh0ID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0aGlzLmRlZmF1bHRfdGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ZXh0ID09PSB0aGlzLmRlZmF1bHRfdGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfaXRlbS5hZGRDbGFzcyhcImNob3Nlbi1kZWZhdWx0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZV9kZXNlbGVjdF9jb250cm9sX2J1aWxkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9pdGVtLnJlbW92ZUNsYXNzKFwiY2hvc2VuLWRlZmF1bHRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZF9pdGVtLmZpbmQoXCJzcGFuXCIpLmh0bWwodGV4dCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5yZXN1bHRfZGVzZWxlY3QgPSBmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRfZGF0YTtcbiAgICAgICAgICAgIHJlc3VsdF9kYXRhID0gdGhpcy5yZXN1bHRzX2RhdGFbcG9zXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbcmVzdWx0X2RhdGEub3B0aW9uc19pbmRleF0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRfZGF0YS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9maWVsZC5vcHRpb25zW3Jlc3VsdF9kYXRhLm9wdGlvbnNfaW5kZXhdLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9vcHRpb25fY291bnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0X2NsZWFyX2hpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdHNfc2hvd2luZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndpbm5vd19yZXN1bHRzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKFwiY2hhbmdlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzZWxlY3RlZDogdGhpcy5mb3JtX2ZpZWxkLm9wdGlvbnNbcmVzdWx0X2RhdGEub3B0aW9uc19pbmRleF0udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaF9maWVsZF9zY2FsZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5zaW5nbGVfZGVzZWxlY3RfY29udHJvbF9idWlsZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93X3NpbmdsZV9kZXNlbGVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZF9pdGVtLmZpbmQoXCJhYmJyXCIpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfaXRlbS5maW5kKFwic3BhblwiKS5maXJzdCgpLmFmdGVyKFwiPGFiYnIgY2xhc3M9XFxcInNlYXJjaC1jaG9pY2UtY2xvc2VcXFwiPjwvYWJicj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZF9pdGVtLmFkZENsYXNzKFwiY2hvc2VuLXNpbmdsZS13aXRoLWRlc2VsZWN0XCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuZ2V0X3NlYXJjaF90ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJCgnPGRpdi8+JykudGV4dCgkLnRyaW0odGhpcy5zZWFyY2hfZmllbGQudmFsKCkpKS5odG1sKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS53aW5ub3dfcmVzdWx0c19zZXRfaGlnaGxpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZG9faGlnaCwgc2VsZWN0ZWRfcmVzdWx0cztcbiAgICAgICAgICAgIHNlbGVjdGVkX3Jlc3VsdHMgPSAhdGhpcy5pc19tdWx0aXBsZSA/IHRoaXMuc2VhcmNoX3Jlc3VsdHMuZmluZChcIi5yZXN1bHQtc2VsZWN0ZWQuYWN0aXZlLXJlc3VsdFwiKSA6IFtdO1xuICAgICAgICAgICAgZG9faGlnaCA9IHNlbGVjdGVkX3Jlc3VsdHMubGVuZ3RoID8gc2VsZWN0ZWRfcmVzdWx0cy5maXJzdCgpIDogdGhpcy5zZWFyY2hfcmVzdWx0cy5maW5kKFwiLmFjdGl2ZS1yZXN1bHRcIikuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmIChkb19oaWdoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRfZG9faGlnaGxpZ2h0KGRvX2hpZ2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUubm9fcmVzdWx0cyA9IGZ1bmN0aW9uKHRlcm1zKSB7XG4gICAgICAgICAgICB2YXIgbm9fcmVzdWx0c19odG1sO1xuICAgICAgICAgICAgbm9fcmVzdWx0c19odG1sID0gJCgnPGxpIGNsYXNzPVwibm8tcmVzdWx0c1wiPicgKyB0aGlzLnJlc3VsdHNfbm9uZV9mb3VuZCArICcgXCI8c3Bhbj48L3NwYW4+XCI8L2xpPicpO1xuICAgICAgICAgICAgbm9fcmVzdWx0c19odG1sLmZpbmQoXCJzcGFuXCIpLmZpcnN0KCkuaHRtbCh0ZXJtcyk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9yZXN1bHRzLmFwcGVuZChub19yZXN1bHRzX2h0bWwpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybV9maWVsZF9qcS50cmlnZ2VyKFwiY2hvc2VuOm5vX3Jlc3VsdHNcIiwge1xuICAgICAgICAgICAgICAgIGNob3NlbjogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5ub19yZXN1bHRzX2NsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfcmVzdWx0cy5maW5kKFwiLm5vLXJlc3VsdHNcIikucmVtb3ZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hvc2VuLnByb3RvdHlwZS5rZXlkb3duX2Fycm93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV4dF9zaWI7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRzX3Nob3dpbmcgJiYgdGhpcy5yZXN1bHRfaGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICAgICAgbmV4dF9zaWIgPSB0aGlzLnJlc3VsdF9oaWdobGlnaHQubmV4dEFsbChcImxpLmFjdGl2ZS1yZXN1bHRcIikuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dF9zaWIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0X2RvX2hpZ2hsaWdodChuZXh0X3NpYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzX3Nob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLmtleXVwX2Fycm93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcHJldl9zaWJzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlc3VsdHNfc2hvd2luZyAmJiAhdGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNfc2hvdygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlc3VsdF9oaWdobGlnaHQpIHtcbiAgICAgICAgICAgICAgICBwcmV2X3NpYnMgPSB0aGlzLnJlc3VsdF9oaWdobGlnaHQucHJldkFsbChcImxpLmFjdGl2ZS1yZXN1bHRcIik7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZfc2licy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0X2RvX2hpZ2hsaWdodChwcmV2X3NpYnMuZmlyc3QoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hvaWNlc19jb3VudCgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRfY2xlYXJfaGlnaGxpZ2h0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUua2V5ZG93bl9iYWNrc3Ryb2tlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV4dF9hdmFpbGFibGVfZGVzdHJveTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdfYmFja3N0cm9rZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlX2Rlc3Ryb3kodGhpcy5wZW5kaW5nX2JhY2tzdHJva2UuZmluZChcImFcIikuZmlyc3QoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJfYmFja3N0cm9rZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0X2F2YWlsYWJsZV9kZXN0cm95ID0gdGhpcy5zZWFyY2hfY29udGFpbmVyLnNpYmxpbmdzKFwibGkuc2VhcmNoLWNob2ljZVwiKS5sYXN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRfYXZhaWxhYmxlX2Rlc3Ryb3kubGVuZ3RoICYmICFuZXh0X2F2YWlsYWJsZV9kZXN0cm95Lmhhc0NsYXNzKFwic2VhcmNoLWNob2ljZS1kaXNhYmxlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdfYmFja3N0cm9rZSA9IG5leHRfYXZhaWxhYmxlX2Rlc3Ryb3k7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZV9iYWNrc3Ryb2tlX2RlbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5ZG93bl9iYWNrc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UuYWRkQ2xhc3MoXCJzZWFyY2gtY2hvaWNlLWZvY3VzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIENob3Nlbi5wcm90b3R5cGUuY2xlYXJfYmFja3N0cm9rZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ19iYWNrc3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UucmVtb3ZlQ2xhc3MoXCJzZWFyY2gtY2hvaWNlLWZvY3VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ19iYWNrc3Ryb2tlID0gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLmtleWRvd25fY2hlY2tlciA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgdmFyIHN0cm9rZSwgX3JlZjE7XG4gICAgICAgICAgICBzdHJva2UgPSAoX3JlZjEgPSBldnQud2hpY2gpICE9IG51bGwgPyBfcmVmMSA6IGV2dC5rZXlDb2RlO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hfZmllbGRfc2NhbGUoKTtcbiAgICAgICAgICAgIGlmIChzdHJva2UgIT09IDggJiYgdGhpcy5wZW5kaW5nX2JhY2tzdHJva2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyX2JhY2tzdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoc3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tzdHJva2VfbGVuZ3RoID0gdGhpcy5zZWFyY2hfZmllbGQudmFsKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdHNfc2hvd2luZyAmJiAhdGhpcy5pc19tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRfc2VsZWN0KGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3VzZV9vbl9jb250YWluZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0c19zaG93aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlX3NlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5dXBfYXJyb3coKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5ZG93bl9hcnJvdygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBDaG9zZW4ucHJvdG90eXBlLnNlYXJjaF9maWVsZF9zY2FsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGRpdiwgZl93aWR0aCwgaCwgc3R5bGUsIHN0eWxlX2Jsb2NrLCBzdHlsZXMsIHcsIF9pLCBfbGVuO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBoID0gMDtcbiAgICAgICAgICAgICAgICB3ID0gMDtcbiAgICAgICAgICAgICAgICBzdHlsZV9ibG9jayA9IFwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6IC0xMDAwcHg7IHRvcDogLTEwMDBweDsgZGlzcGxheTpub25lO1wiO1xuICAgICAgICAgICAgICAgIHN0eWxlcyA9IFsnZm9udC1zaXplJywgJ2ZvbnQtc3R5bGUnLCAnZm9udC13ZWlnaHQnLCAnZm9udC1mYW1pbHknLCAnbGluZS1oZWlnaHQnLCAndGV4dC10cmFuc2Zvcm0nLCAnbGV0dGVyLXNwYWNpbmcnXTtcbiAgICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IHN0eWxlcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlc1tfaV07XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlX2Jsb2NrICs9IHN0eWxlICsgXCI6XCIgKyB0aGlzLnNlYXJjaF9maWVsZC5jc3Moc3R5bGUpICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpdiA9ICQoJzxkaXYgLz4nLCB7XG4gICAgICAgICAgICAgICAgICAgICdzdHlsZSc6IHN0eWxlX2Jsb2NrXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGl2LnRleHQodGhpcy5zZWFyY2hfZmllbGQudmFsKCkpO1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoZGl2KTtcbiAgICAgICAgICAgICAgICB3ID0gZGl2LndpZHRoKCkgKyAyNTtcbiAgICAgICAgICAgICAgICBkaXYucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZl93aWR0aCA9IHRoaXMuY29udGFpbmVyLm91dGVyV2lkdGgoKTtcbiAgICAgICAgICAgICAgICBpZiAodyA+IGZfd2lkdGggLSAxMCkge1xuICAgICAgICAgICAgICAgICAgICB3ID0gZl93aWR0aCAtIDEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hfZmllbGQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogdyArICdweCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gQ2hvc2VuO1xuXG4gICAgfSkoQWJzdHJhY3RDaG9zZW4pO1xuXG59KS5jYWxsKHRoaXMpO1xuIl19
