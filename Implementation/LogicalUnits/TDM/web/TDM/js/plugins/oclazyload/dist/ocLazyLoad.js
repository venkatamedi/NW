/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v0.5.2
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 */
!function(){"use strict";var regModules=["ng"],initModules=[],regInvokes={},regConfigs=[],justLoaded=[],runBlocks={},ocLazyLoad=angular.module("oc.lazyLoad",["ng"]),broadcast=angular.noop;function moduleExists(moduleName){try{return angular.module(moduleName)}catch(e){if(/No module/.test(e)||e.message.indexOf("$injector:nomod")>-1)return!1}}function invokeQueue(providers,queue,moduleName,reconfig){var i,len,args,provider;if(queue)for(i=0,len=queue.length;i<len;i++)if(args=queue[i],angular.isArray(args)){if(null!==providers){if(!providers.hasOwnProperty(args[0]))throw new Error("unsupported provider "+args[0]);provider=providers[args[0]]}var isNew=registerInvokeList(args,moduleName);if("invoke"!==args[1])isNew&&angular.isDefined(provider)&&provider[args[1]].apply(provider,args[2]);else{var callInvoke=function(fct){var invoked=regConfigs.indexOf(moduleName+"-"+fct);(-1===invoked||reconfig)&&(-1===invoked&&regConfigs.push(moduleName+"-"+fct),angular.isDefined(provider)&&provider[args[1]].apply(provider,args[2]))};if(angular.isFunction(args[2][0]))callInvoke(args[2][0]);else if(angular.isArray(args[2][0]))for(var j=0,jlen=args[2][0].length;j<jlen;j++)angular.isFunction(args[2][0][j])&&callInvoke(args[2][0][j])}}}function registerInvokeList(args,moduleName){var invokeList=args[2][0],type=args[1],newInvoke=!1;angular.isUndefined(regInvokes[moduleName])&&(regInvokes[moduleName]={}),angular.isUndefined(regInvokes[moduleName][type])&&(regInvokes[moduleName][type]=[]);var onInvoke=function(invokeName){newInvoke=!0,regInvokes[moduleName][type].push(invokeName),broadcast("ocLazyLoad.componentLoaded",[moduleName,type,invokeName])};if(angular.isString(invokeList)&&-1===regInvokes[moduleName][type].indexOf(invokeList))onInvoke(invokeList);else{if(!angular.isObject(invokeList))return!1;angular.forEach(invokeList,(function(invoke){angular.isString(invoke)&&-1===regInvokes[moduleName][type].indexOf(invoke)&&onInvoke(invoke)}))}return newInvoke}function getModuleName(module){var moduleName=null;return angular.isString(module)?moduleName=module:angular.isObject(module)&&module.hasOwnProperty("name")&&angular.isString(module.name)&&(moduleName=module.name),moduleName}ocLazyLoad.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function($controllerProvider,$provide,$compileProvider,$filterProvider,$injector,$animateProvider){var jsLoader,cssLoader,templatesLoader,modules={},providers={$controllerProvider:$controllerProvider,$compileProvider:$compileProvider,$filterProvider:$filterProvider,$provide:$provide,$injector:$injector,$animateProvider:$animateProvider},anchor=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],debug=!1,events=!1;!function(element){if(0===initModules.length){var elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,append=function(elm){return elm&&elements.push(elm)};angular.forEach(names,(function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),element[0].querySelectorAll&&(angular.forEach(element[0].querySelectorAll("."+name),append),angular.forEach(element[0].querySelectorAll("."+name+"\\:"),append),angular.forEach(element[0].querySelectorAll("["+name+"]"),append))})),angular.forEach(elements,(function(elm){if(0===initModules.length){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?initModules.push((match[2]||"").replace(/\s+/g,",")):angular.forEach(elm.attributes,(function(attr){0===initModules.length&&names[attr.name]&&initModules.push(attr.value)}))}}))}if(0===initModules.length)throw"No module found during bootstrap, unable to init ocLazyLoad";angular.forEach(initModules,(function(moduleName){!function addReg(moduleName){if(-1===regModules.indexOf(moduleName)){regModules.push(moduleName);var mainModule=angular.module(moduleName);invokeQueue(null,mainModule._invokeQueue,moduleName),invokeQueue(null,mainModule._configBlocks,moduleName),angular.forEach(mainModule.requires,addReg)}}(moduleName)}))}(angular.element(window.document)),this.$get=["$log","$q","$templateCache","$http","$rootElement","$rootScope","$cacheFactory","$interval",function($log,$q,$templateCache,$http,$rootElement,$rootScope,$cacheFactory,$interval){var instanceInjector,filesCache=$cacheFactory("ocLazyLoad"),useCssLoadPatch=!1;debug||(($log={}).error=angular.noop,$log.warn=angular.noop,$log.info=angular.noop),providers.getInstanceInjector=function(){return instanceInjector||(instanceInjector=$rootElement.data("$injector")||angular.injector())},broadcast=function(eventName,params){events&&$rootScope.$broadcast(eventName,params),debug&&$log.info(eventName,params)};var buildElement=function(type,path,params){var el,loaded,deferred=$q.defer(),cacheBuster=function(url){var dc=(new Date).getTime();return url.indexOf("?")>=0?"&"===url.substring(0,url.length-1)?url+"_dc="+dc:url+"&_dc="+dc:url+"?_dc="+dc};switch(angular.isUndefined(filesCache.get(path))&&filesCache.put(path,deferred.promise),type){case"css":(el=document.createElement("link")).type="text/css",el.rel="stylesheet",el.href=!1===params.cache?cacheBuster(path):path;break;case"js":(el=document.createElement("script")).src=!1===params.cache?cacheBuster(path):path;break;default:deferred.reject(new Error('Requested type "'+type+'" is not known. Could not inject "'+path+'"'))}el.onload=el.onreadystatechange=function(e){el.readyState&&!/^c|loade/.test(el.readyState)||loaded||(el.onload=el.onreadystatechange=null,loaded=1,broadcast("ocLazyLoad.fileLoaded",path),deferred.resolve())},el.onerror=function(e){deferred.reject(new Error("Unable to load "+path))},el.async=params.serie?0:1;var insertBeforeElem=anchor.lastChild;if(params.insertBefore){var element=angular.element(params.insertBefore);element&&element.length>0&&(insertBeforeElem=element[0])}if(anchor.insertBefore(el,insertBeforeElem),"css"==type){var ua=navigator.userAgent.toLowerCase();if(/iP(hone|od|ad)/.test(navigator.platform)){var v=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),iOSVersion=parseFloat([parseInt(v[1],10),parseInt(v[2],10),parseInt(v[3]||0,10)].join("."));useCssLoadPatch=iOSVersion<6}else if(ua.indexOf("android")>-1){var androidVersion=parseFloat(ua.slice(ua.indexOf("android")+8));useCssLoadPatch=androidVersion<4.4}else if(ua.indexOf("safari")>-1&&-1==ua.indexOf("chrome")){var safariVersion=parseFloat(ua.match(/version\/([\.\d]+)/i)[1]);useCssLoadPatch=safariVersion<6}if(useCssLoadPatch)var tries=1e3,interval=$interval((function(){try{el.sheet.cssRules,$interval.cancel(interval),el.onload()}catch(e){--tries<=0&&el.onerror()}}),20)}return deferred.promise};angular.isUndefined(jsLoader)&&((jsLoader=function(paths,callback,params){var promises=[];angular.forEach(paths,(function(path){promises.push(buildElement("js",path,params))})),$q.all(promises).then((function(){callback()}),(function(err){callback(err)}))}).ocLazyLoadLoader=!0),angular.isUndefined(cssLoader)&&((cssLoader=function(paths,callback,params){var promises=[];angular.forEach(paths,(function(path){promises.push(buildElement("css",path,params))})),$q.all(promises).then((function(){callback()}),(function(err){callback(err)}))}).ocLazyLoadLoader=!0),angular.isUndefined(templatesLoader)&&((templatesLoader=function(paths,callback,params){var promises=[];return angular.forEach(paths,(function(url){var deferred=$q.defer();promises.push(deferred.promise),$http.get(url,params).success((function(data){angular.isString(data)&&data.length>0&&angular.forEach(angular.element(data),(function(node){"SCRIPT"===node.nodeName&&"text/ng-template"===node.type&&$templateCache.put(node.id,node.innerHTML)})),angular.isUndefined(filesCache.get(url))&&filesCache.put(url,!0),deferred.resolve()})).error((function(err){deferred.reject(new Error('Unable to load template file "'+url+'": '+err))}))})),$q.all(promises).then((function(){callback()}),(function(err){callback(err)}))}).ocLazyLoadLoader=!0);var filesLoader=function(config,params){var cssFiles=[],templatesFiles=[],jsFiles=[],promises=[],cachePromise=null;angular.extend(params||{},config);var pushFile=function(path){cachePromise=filesCache.get(path),angular.isUndefined(cachePromise)||!1===params.cache?/\.(css|less)[^\.]*$/.test(path)&&-1===cssFiles.indexOf(path)?cssFiles.push(path):/\.(htm|html)[^\.]*$/.test(path)&&-1===templatesFiles.indexOf(path)?templatesFiles.push(path):-1===jsFiles.indexOf(path)&&jsFiles.push(path):cachePromise&&promises.push(cachePromise)};if(params.serie?pushFile(params.files.shift()):angular.forEach(params.files,(function(path){pushFile(path)})),cssFiles.length>0){var cssDeferred=$q.defer();cssLoader(cssFiles,(function(err){angular.isDefined(err)&&cssLoader.hasOwnProperty("ocLazyLoadLoader")?($log.error(err),cssDeferred.reject(err)):cssDeferred.resolve()}),params),promises.push(cssDeferred.promise)}if(templatesFiles.length>0){var templatesDeferred=$q.defer();templatesLoader(templatesFiles,(function(err){angular.isDefined(err)&&templatesLoader.hasOwnProperty("ocLazyLoadLoader")?($log.error(err),templatesDeferred.reject(err)):templatesDeferred.resolve()}),params),promises.push(templatesDeferred.promise)}if(jsFiles.length>0){var jsDeferred=$q.defer();jsLoader(jsFiles,(function(err){angular.isDefined(err)&&jsLoader.hasOwnProperty("ocLazyLoadLoader")?($log.error(err),jsDeferred.reject(err)):jsDeferred.resolve()}),params),promises.push(jsDeferred.promise)}return params.serie&&params.files.length>0?$q.all(promises).then((function(){return filesLoader(config,params)})):$q.all(promises)};return{getModuleConfig:function(moduleName){if(!angular.isString(moduleName))throw new Error("You need to give the name of the module to get");return modules[moduleName]?modules[moduleName]:null},setModuleConfig:function(moduleConfig){if(!angular.isObject(moduleConfig))throw new Error("You need to give the module config object to set");return modules[moduleConfig.name]=moduleConfig,moduleConfig},getModules:function(){return regModules},isLoaded:function(modulesNames){var module,isLoaded;if(angular.isString(modulesNames)&&(modulesNames=[modulesNames]),angular.isArray(modulesNames)){var i,len;for(i=0,len=modulesNames.length;i<len;i++)if(module=modulesNames[i],isLoaded=void 0,(isLoaded=regModules.indexOf(module)>-1)||(isLoaded=!!moduleExists(module)),!isLoaded)return!1;return!0}throw new Error("You need to define the module(s) name(s)")},load:function(module,params){var moduleName,errText,self=this,config=null,moduleCache=[],deferredList=[],deferred=$q.defer();if(angular.isUndefined(params)&&(params={}),angular.isArray(module))return angular.forEach(module,(function(m){m&&deferredList.push(self.load(m,params))})),$q.all(deferredList).then((function(){deferred.resolve(module)}),(function(err){deferred.reject(err)})),deferred.promise;if(moduleName=getModuleName(module),"string"==typeof module?(config=self.getModuleConfig(module))||(config={files:[module]},moduleName=null):"object"==typeof module&&(config=self.setModuleConfig(module)),null===config?(errText='Module "'+moduleName+'" is not configured, cannot load.',$log.error(errText),deferred.reject(new Error(errText))):angular.isDefined(config.template)&&(angular.isUndefined(config.files)&&(config.files=[]),angular.isString(config.template)?config.files.push(config.template):angular.isArray(config.template)&&config.files.concat(config.template)),moduleCache.push=function(value){-1===this.indexOf(value)&&Array.prototype.push.apply(this,arguments)},angular.isDefined(moduleName)&&moduleExists(moduleName)&&-1!==regModules.indexOf(moduleName)&&(moduleCache.push(moduleName),angular.isUndefined(config.files)))return deferred.resolve(),deferred.promise;var localParams={};angular.extend(localParams,params,config);var loadDependencies=function loadDependencies(module){var moduleName,loadedModule,requires,diff,promisesList=[];if(null===(moduleName=getModuleName(module)))return $q.when();try{loadedModule=function(moduleName){try{return angular.module(moduleName)}catch(e){throw(/No module/.test(e)||e.message.indexOf("$injector:nomod")>-1)&&(e.message='The module "'+moduleName+'" that you are trying to load does not exist. '+e.message),e}}(moduleName)}catch(e){var deferred=$q.defer();return $log.error(e.message),deferred.reject(e),deferred.promise}return requires=function(module){var requires=[];return angular.forEach(module.requires,(function(requireModule){-1===regModules.indexOf(requireModule)&&requires.push(requireModule)})),requires}(loadedModule),angular.forEach(requires,(function(requireEntry){if("string"==typeof requireEntry){var config=self.getModuleConfig(requireEntry);if(null===config)return void moduleCache.push(requireEntry);requireEntry=config}moduleExists(requireEntry.name)?"string"!=typeof module&&(0!==(diff=requireEntry.files.filter((function(n){return self.getModuleConfig(requireEntry.name).files.indexOf(n)<0}))).length&&$log.warn('Module "',moduleName,'" attempted to redefine configuration for dependency. "',requireEntry.name,'"\n Additional Files Loaded:',diff),promisesList.push(filesLoader(requireEntry.files,localParams).then((function(){return loadDependencies(requireEntry)})))):("object"==typeof requireEntry&&(requireEntry.hasOwnProperty("name")&&requireEntry.name&&(self.setModuleConfig(requireEntry),moduleCache.push(requireEntry.name)),requireEntry.hasOwnProperty("css")&&0!==requireEntry.css.length&&angular.forEach(requireEntry.css,(function(path){buildElement("css",path,localParams)}))),requireEntry.hasOwnProperty("files")&&0!==requireEntry.files.length&&requireEntry.files&&promisesList.push(filesLoader(requireEntry,localParams).then((function(){return loadDependencies(requireEntry)}))))})),$q.all(promisesList)};return filesLoader(config,localParams).then((function(){null===moduleName?deferred.resolve(module):(moduleCache.push(moduleName),loadDependencies(moduleName).then((function(){try{justLoaded=[],function register(providers,registerModules,params){if(registerModules){var k,moduleName,moduleFn,tempRunBlocks=[];for(k=registerModules.length-1;k>=0;k--)if("string"!=typeof(moduleName=registerModules[k])&&(moduleName=getModuleName(moduleName)),moduleName&&-1===justLoaded.indexOf(moduleName)){var newModule=-1===regModules.indexOf(moduleName);if(moduleFn=angular.module(moduleName),newModule&&(regModules.push(moduleName),register(providers,moduleFn.requires,params)),moduleFn._runBlocks.length>0)for(runBlocks[moduleName]=[];moduleFn._runBlocks.length>0;)runBlocks[moduleName].push(moduleFn._runBlocks.shift());angular.isDefined(runBlocks[moduleName])&&(newModule||params.rerun)&&(tempRunBlocks=tempRunBlocks.concat(runBlocks[moduleName])),invokeQueue(providers,moduleFn._invokeQueue,moduleName,params.reconfig),invokeQueue(providers,moduleFn._configBlocks,moduleName,params.reconfig),broadcast(newModule?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",moduleName),registerModules.pop(),justLoaded.push(moduleName)}var instanceInjector=providers.getInstanceInjector();angular.forEach(tempRunBlocks,(function(fn){instanceInjector.invoke(fn)}))}}(providers,moduleCache,localParams)}catch(e){return $log.error(e.message),void deferred.reject(e)}deferred.resolve(module)}),(function(err){deferred.reject(err)})))}),(function(err){deferred.reject(err)})),deferred.promise}}}],this.config=function(config){if(angular.isDefined(config.jsLoader)||angular.isDefined(config.asyncLoader)){if(!angular.isFunction(config.jsLoader||config.asyncLoader))throw"The js loader needs to be a function";jsLoader=config.jsLoader||config.asyncLoader}if(angular.isDefined(config.cssLoader)){if(!angular.isFunction(config.cssLoader))throw"The css loader needs to be a function";cssLoader=config.cssLoader}if(angular.isDefined(config.templatesLoader)){if(!angular.isFunction(config.templatesLoader))throw"The template loader needs to be a function";templatesLoader=config.templatesLoader}angular.isDefined(config.modules)&&(angular.isArray(config.modules)?angular.forEach(config.modules,(function(moduleConfig){modules[moduleConfig.name]=moduleConfig})):modules[config.modules.name]=config.modules),angular.isDefined(config.debug)&&(debug=config.debug),angular.isDefined(config.events)&&(events=config.events)}}]),ocLazyLoad.directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse",function($ocLazyLoad,$compile,$animate,$parse){return{restrict:"A",terminal:!0,priority:1e3,compile:function(element,attrs){var content=element[0].innerHTML;return element.html(""),function($scope,$element,$attr){var model=$parse($attr.ocLazyLoad);$scope.$watch((function(){return model($scope)||$attr.ocLazyLoad}),(function(moduleName){angular.isDefined(moduleName)&&$ocLazyLoad.load(moduleName).then((function(moduleConfig){$animate.enter($compile(content)($scope),null,$element)}))}),!0)}}}}]);var bootstrap=angular.bootstrap;angular.bootstrap=function(element,modules,config){return initModules=modules.slice(),bootstrap(element,modules,config)},Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(null==this)throw new TypeError('"this" is null or not defined');var O=Object(this),len=O.length>>>0;if(0===len)return-1;var n=+fromIndex||0;if(Math.abs(n)===1/0&&(n=0),n>=len)return-1;for(k=Math.max(n>=0?n:len-Math.abs(n),0);k<len;){if(k in O&&O[k]===searchElement)return k;k++}return-1})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvb2NsYXp5bG9hZC9kaXN0L29jTGF6eUxvYWQuanMiXSwibmFtZXMiOlsicmVnTW9kdWxlcyIsImluaXRNb2R1bGVzIiwicmVnSW52b2tlcyIsInJlZ0NvbmZpZ3MiLCJqdXN0TG9hZGVkIiwicnVuQmxvY2tzIiwib2NMYXp5TG9hZCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJicm9hZGNhc3QiLCJub29wIiwibW9kdWxlRXhpc3RzIiwibW9kdWxlTmFtZSIsImUiLCJ0ZXN0IiwibWVzc2FnZSIsImluZGV4T2YiLCJpbnZva2VRdWV1ZSIsInByb3ZpZGVycyIsInF1ZXVlIiwicmVjb25maWciLCJpIiwibGVuIiwiYXJncyIsInByb3ZpZGVyIiwibGVuZ3RoIiwiaXNBcnJheSIsImhhc093blByb3BlcnR5IiwiRXJyb3IiLCJpc05ldyIsInJlZ2lzdGVySW52b2tlTGlzdCIsImlzRGVmaW5lZCIsImFwcGx5IiwiY2FsbEludm9rZSIsImZjdCIsImludm9rZWQiLCJwdXNoIiwiaXNGdW5jdGlvbiIsImoiLCJqbGVuIiwiaW52b2tlTGlzdCIsInR5cGUiLCJuZXdJbnZva2UiLCJpc1VuZGVmaW5lZCIsIm9uSW52b2tlIiwiaW52b2tlTmFtZSIsImlzU3RyaW5nIiwiaXNPYmplY3QiLCJmb3JFYWNoIiwiaW52b2tlIiwiZ2V0TW9kdWxlTmFtZSIsIm5hbWUiLCIkY29udHJvbGxlclByb3ZpZGVyIiwiJHByb3ZpZGUiLCIkY29tcGlsZVByb3ZpZGVyIiwiJGZpbHRlclByb3ZpZGVyIiwiJGluamVjdG9yIiwiJGFuaW1hdGVQcm92aWRlciIsImpzTG9hZGVyIiwiY3NzTG9hZGVyIiwidGVtcGxhdGVzTG9hZGVyIiwibW9kdWxlcyIsImFuY2hvciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJkZWJ1ZyIsImV2ZW50cyIsImVsZW1lbnQiLCJlbGVtZW50cyIsIm5hbWVzIiwiTkdfQVBQX0NMQVNTX1JFR0VYUCIsImFwcGVuZCIsImVsbSIsImdldEVsZW1lbnRCeUlkIiwicmVwbGFjZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc05hbWUiLCJtYXRjaCIsImV4ZWMiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsInZhbHVlIiwiYWRkUmVnIiwibWFpbk1vZHVsZSIsIl9pbnZva2VRdWV1ZSIsIl9jb25maWdCbG9ja3MiLCJyZXF1aXJlcyIsImluaXQiLCJ3aW5kb3ciLCJ0aGlzIiwiJGdldCIsIiRsb2ciLCIkcSIsIiR0ZW1wbGF0ZUNhY2hlIiwiJGh0dHAiLCIkcm9vdEVsZW1lbnQiLCIkcm9vdFNjb3BlIiwiJGNhY2hlRmFjdG9yeSIsIiRpbnRlcnZhbCIsImluc3RhbmNlSW5qZWN0b3IiLCJmaWxlc0NhY2hlIiwidXNlQ3NzTG9hZFBhdGNoIiwiZ2V0SW5zdGFuY2VJbmplY3RvciIsImRhdGEiLCJpbmplY3RvciIsImV2ZW50TmFtZSIsInBhcmFtcyIsIiRicm9hZGNhc3QiLCJpbmZvIiwiYnVpbGRFbGVtZW50IiwicGF0aCIsImVsIiwibG9hZGVkIiwiZGVmZXJyZWQiLCJkZWZlciIsImNhY2hlQnVzdGVyIiwidXJsIiwiZGMiLCJEYXRlIiwiZ2V0VGltZSIsInN1YnN0cmluZyIsImdldCIsInB1dCIsInByb21pc2UiLCJjcmVhdGVFbGVtZW50IiwicmVsIiwiaHJlZiIsImNhY2hlIiwic3JjIiwicmVqZWN0Iiwib25sb2FkIiwicmVzb2x2ZSIsIm9uZXJyb3IiLCJhc3luYyIsInNlcmllIiwiaW5zZXJ0QmVmb3JlRWxlbSIsImxhc3RDaGlsZCIsImluc2VydEJlZm9yZSIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJwbGF0Zm9ybSIsInYiLCJpT1NWZXJzaW9uIiwicGFyc2VGbG9hdCIsInBhcnNlSW50Iiwiam9pbiIsImFuZHJvaWRWZXJzaW9uIiwic2xpY2UiLCJzYWZhcmlWZXJzaW9uIiwidHJpZXMiLCJpbnRlcnZhbCIsInNoZWV0IiwiY3NzUnVsZXMiLCJjYW5jZWwiLCJwYXRocyIsImNhbGxiYWNrIiwicHJvbWlzZXMiLCJhbGwiLCJ0aGVuIiwiZXJyIiwib2NMYXp5TG9hZExvYWRlciIsInN1Y2Nlc3MiLCJub2RlIiwibm9kZU5hbWUiLCJpZCIsImlubmVySFRNTCIsImVycm9yIiwiZmlsZXNMb2FkZXIiLCJjb25maWciLCJjc3NGaWxlcyIsInRlbXBsYXRlc0ZpbGVzIiwianNGaWxlcyIsImNhY2hlUHJvbWlzZSIsImV4dGVuZCIsInB1c2hGaWxlIiwiZmlsZXMiLCJzaGlmdCIsImNzc0RlZmVycmVkIiwidGVtcGxhdGVzRGVmZXJyZWQiLCJqc0RlZmVycmVkIiwiZ2V0TW9kdWxlQ29uZmlnIiwic2V0TW9kdWxlQ29uZmlnIiwibW9kdWxlQ29uZmlnIiwiZ2V0TW9kdWxlcyIsImlzTG9hZGVkIiwibW9kdWxlc05hbWVzIiwibG9hZCIsImVyclRleHQiLCJzZWxmIiwibW9kdWxlQ2FjaGUiLCJkZWZlcnJlZExpc3QiLCJtIiwidGVtcGxhdGUiLCJjb25jYXQiLCJBcnJheSIsInByb3RvdHlwZSIsImFyZ3VtZW50cyIsImxvY2FsUGFyYW1zIiwibG9hZERlcGVuZGVuY2llcyIsImxvYWRlZE1vZHVsZSIsImRpZmYiLCJwcm9taXNlc0xpc3QiLCJ3aGVuIiwiZ2V0TW9kdWxlIiwicmVxdWlyZU1vZHVsZSIsImdldFJlcXVpcmVzIiwicmVxdWlyZUVudHJ5IiwiZmlsdGVyIiwibiIsIndhcm4iLCJyZWdpc3RlciIsInJlZ2lzdGVyTW9kdWxlcyIsImsiLCJtb2R1bGVGbiIsInRlbXBSdW5CbG9ja3MiLCJuZXdNb2R1bGUiLCJfcnVuQmxvY2tzIiwicmVydW4iLCJwb3AiLCJmbiIsImFzeW5jTG9hZGVyIiwiZGlyZWN0aXZlIiwiJG9jTGF6eUxvYWQiLCIkY29tcGlsZSIsIiRhbmltYXRlIiwiJHBhcnNlIiwicmVzdHJpY3QiLCJ0ZXJtaW5hbCIsInByaW9yaXR5IiwiY29tcGlsZSIsImF0dHJzIiwiY29udGVudCIsImh0bWwiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRyIiwibW9kZWwiLCIkd2F0Y2giLCJlbnRlciIsImJvb3RzdHJhcCIsInNlYXJjaEVsZW1lbnQiLCJmcm9tSW5kZXgiLCJUeXBlRXJyb3IiLCJPIiwiT2JqZWN0IiwiTWF0aCIsImFicyIsIkluZmluaXR5IiwibWF4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0NBT0EsV0FDRSxhQUNBLElBQUlBLFdBQWEsQ0FBQyxNQUNoQkMsWUFBYyxHQUNkQyxXQUFhLEdBQ2JDLFdBQWEsR0FDYkMsV0FBYSxHQUNiQyxVQUFZLEdBQ1pDLFdBQWFDLFFBQVFDLE9BQU8sY0FBZSxDQUFDLE9BQzVDQyxVQUFZRixRQUFRRyxLQXlxQnRCLFNBQVNDLGFBQWFDLFlBQ3BCLElBQ0UsT0FBT0wsUUFBUUMsT0FBT0ksWUFDdEIsTUFBTUMsR0FDTixHQUFHLFlBQVlDLEtBQUtELElBQU9BLEVBQUVFLFFBQVFDLFFBQVEsb0JBQXNCLEVBQ2pFLE9BQU8sR0FpQmIsU0FBU0MsWUFBWUMsVUFBV0MsTUFBT1AsV0FBWVEsVUFLakQsSUFBSUMsRUFBR0MsSUFBS0MsS0FBTUMsU0FKbEIsR0FBSUwsTUFLSixJQUFJRSxFQUFJLEVBQUdDLElBQU1ILE1BQU1NLE9BQVFKLEVBQUlDLElBQUtELElBRXRDLEdBREFFLEtBQU9KLE1BQU1FLEdBQ1ZkLFFBQVFtQixRQUFRSCxNQUFPLENBQ3hCLEdBQWlCLE9BQWRMLFVBQW9CLENBQ3JCLElBQUdBLFVBQVVTLGVBQWVKLEtBQUssSUFHL0IsTUFBTSxJQUFJSyxNQUFNLHdCQUEwQkwsS0FBSyxJQUYvQ0MsU0FBV04sVUFBVUssS0FBSyxJQUs5QixJQUFJTSxNQUFRQyxtQkFBbUJQLEtBQU1YLFlBQ3JDLEdBQWUsV0FBWlcsS0FBSyxHQUNITSxPQUFTdEIsUUFBUXdCLFVBQVVQLFdBQzVCQSxTQUFTRCxLQUFLLElBQUlTLE1BQU1SLFNBQVVELEtBQUssUUFFcEMsQ0FDTCxJQUFJVSxXQUFhLFNBQVNDLEtBQ3hCLElBQUlDLFFBQVVoQyxXQUFXYSxRQUFRSixXQUFhLElBQU1zQixPQUNwQyxJQUFiQyxTQUFrQmYsYUFDSCxJQUFiZSxTQUNEaEMsV0FBV2lDLEtBQUt4QixXQUFhLElBQU1zQixLQUVsQzNCLFFBQVF3QixVQUFVUCxXQUNuQkEsU0FBU0QsS0FBSyxJQUFJUyxNQUFNUixTQUFVRCxLQUFLLE1BSTdDLEdBQUdoQixRQUFROEIsV0FBV2QsS0FBSyxHQUFHLElBQzVCVSxXQUFXVixLQUFLLEdBQUcsU0FDZCxHQUFHaEIsUUFBUW1CLFFBQVFILEtBQUssR0FBRyxJQUNoQyxJQUFJLElBQUllLEVBQUksRUFBR0MsS0FBT2hCLEtBQUssR0FBRyxHQUFHRSxPQUFRYSxFQUFJQyxLQUFNRCxJQUM5Qy9CLFFBQVE4QixXQUFXZCxLQUFLLEdBQUcsR0FBR2UsS0FDL0JMLFdBQVdWLEtBQUssR0FBRyxHQUFHZSxNQTZEcEMsU0FBU1IsbUJBQW1CUCxLQUFNWCxZQUNoQyxJQUFJNEIsV0FBYWpCLEtBQUssR0FBRyxHQUN2QmtCLEtBQU9sQixLQUFLLEdBQ1ptQixXQUFZLEVBQ1huQyxRQUFRb0MsWUFBWXpDLFdBQVdVLGVBQ2hDVixXQUFXVSxZQUFjLElBRXhCTCxRQUFRb0MsWUFBWXpDLFdBQVdVLFlBQVk2QixTQUM1Q3ZDLFdBQVdVLFlBQVk2QixNQUFRLElBRWpDLElBQUlHLFNBQVcsU0FBU0MsWUFDdEJILFdBQVksRUFDWnhDLFdBQVdVLFlBQVk2QixNQUFNTCxLQUFLUyxZQUNsQ3BDLFVBQVUsNkJBQThCLENBQUNHLFdBQVk2QixLQUFNSSxjQUU3RCxHQUFHdEMsUUFBUXVDLFNBQVNOLGNBQXFFLElBQXREdEMsV0FBV1UsWUFBWTZCLE1BQU16QixRQUFRd0IsWUFDdEVJLFNBQVNKLGdCQUNKLENBQUEsSUFBR2pDLFFBQVF3QyxTQUFTUCxZQU96QixPQUFPLEVBTlBqQyxRQUFReUMsUUFBUVIsWUFBWSxTQUFTUyxRQUNoQzFDLFFBQVF1QyxTQUFTRyxVQUE2RCxJQUFsRC9DLFdBQVdVLFlBQVk2QixNQUFNekIsUUFBUWlDLFNBQ2xFTCxTQUFTSyxXQU1mLE9BQU9QLFVBR1QsU0FBU1EsY0FBYzFDLFFBQ3JCLElBQUlJLFdBQWEsS0FNakIsT0FMR0wsUUFBUXVDLFNBQVN0QyxRQUNsQkksV0FBYUosT0FDTEQsUUFBUXdDLFNBQVN2QyxTQUFXQSxPQUFPbUIsZUFBZSxTQUFXcEIsUUFBUXVDLFNBQVN0QyxPQUFPMkMsUUFDN0Z2QyxXQUFhSixPQUFPMkMsTUFFZnZDLFdBcDBCVE4sV0FBV2tCLFNBQVMsY0FBZSxDQUFDLHNCQUF1QixXQUFZLG1CQUFvQixrQkFBbUIsWUFBYSxtQkFDekgsU0FBUzRCLG9CQUFxQkMsU0FBVUMsaUJBQWtCQyxnQkFBaUJDLFVBQVdDLGtCQUNwRixJQVVFQyxTQUFVQyxVQUFXQyxnQkFWbkJDLFFBQVUsR0FDWjNDLFVBQVksQ0FDVmtDLG9CQUFxQkEsb0JBQ3JCRSxpQkFBa0JBLGlCQUNsQkMsZ0JBQWlCQSxnQkFDakJGLFNBQVVBLFNBQ1ZHLFVBQVdBLFVBQ1hDLGlCQUFrQkEsa0JBRXBCSyxPQUFTQyxTQUFTQyxxQkFBcUIsUUFBUSxJQUFNRCxTQUFTQyxxQkFBcUIsUUFBUSxHQUUzRkMsT0FBUSxFQUNSQyxRQUFTLEdBNnpCZixTQUFjQyxTQUNaLEdBQTBCLElBQXZCbEUsWUFBWXdCLE9BQWMsQ0FDM0IsSUFBSTJDLFNBQVcsQ0FBQ0QsU0FDZEUsTUFBUSxDQUFDLFNBQVUsU0FBVSxXQUFZLGVBQ3pDQyxvQkFBc0Isb0NBQ3RCQyxPQUFTLFNBQWdCQyxLQUN2QixPQUFRQSxLQUFPSixTQUFTaEMsS0FBS29DLE1BR2pDakUsUUFBUXlDLFFBQVFxQixPQUFPLFNBQVNsQixNQUM5QmtCLE1BQU1sQixPQUFRLEVBQ2RvQixPQUFPUixTQUFTVSxlQUFldEIsT0FDL0JBLEtBQU9BLEtBQUt1QixRQUFRLElBQUssT0FDdEJQLFFBQVEsR0FBR1EsbUJBQ1pwRSxRQUFReUMsUUFBUW1CLFFBQVEsR0FBR1EsaUJBQWlCLElBQU14QixNQUFPb0IsUUFDekRoRSxRQUFReUMsUUFBUW1CLFFBQVEsR0FBR1EsaUJBQWlCLElBQU14QixLQUFPLE9BQVFvQixRQUNqRWhFLFFBQVF5QyxRQUFRbUIsUUFBUSxHQUFHUSxpQkFBaUIsSUFBTXhCLEtBQU8sS0FBTW9CLFlBSW5FaEUsUUFBUXlDLFFBQVFvQixVQUFVLFNBQVNJLEtBQ2pDLEdBQTBCLElBQXZCdkUsWUFBWXdCLE9BQWMsQ0FDM0IsSUFBSW1ELFVBQVksSUFBTVQsUUFBUVMsVUFBWSxJQUN0Q0MsTUFBUVAsb0JBQW9CUSxLQUFLRixXQUNsQ0MsTUFDRDVFLFlBQVltQyxNQUFNeUMsTUFBTSxJQUFNLElBQUlILFFBQVEsT0FBUSxNQUVsRG5FLFFBQVF5QyxRQUFRd0IsSUFBSU8sWUFBWSxTQUFTQyxNQUNiLElBQXZCL0UsWUFBWXdCLFFBQWdCNEMsTUFBTVcsS0FBSzdCLE9BQ3hDbEQsWUFBWW1DLEtBQUs0QyxLQUFLQyxjQU9sQyxHQUEwQixJQUF2QmhGLFlBQVl3QixPQUNiLEtBQU0sOERBaUJSbEIsUUFBUXlDLFFBQVEvQyxhQUFhLFNBQVNXLGFBZHpCLFNBQVNzRSxPQUFPdEUsWUFDM0IsSUFBdUMsSUFBcENaLFdBQVdnQixRQUFRSixZQUFvQixDQUV4Q1osV0FBV29DLEtBQUt4QixZQUNoQixJQUFJdUUsV0FBYTVFLFFBQVFDLE9BQU9JLFlBR2hDSyxZQUFZLEtBQU1rRSxXQUFXQyxhQUFjeEUsWUFDM0NLLFlBQVksS0FBTWtFLFdBQVdFLGNBQWV6RSxZQUU1Q0wsUUFBUXlDLFFBQVFtQyxXQUFXRyxTQUFVSixTQUt2Q0EsQ0FBT3RFLGVBajNCUDJFLENBQUtoRixRQUFRNEQsUUFBUXFCLE9BQU96QixXQUU1QjBCLEtBQUtDLEtBQU8sQ0FBQyxPQUFRLEtBQU0saUJBQWtCLFFBQVMsZUFBZ0IsYUFBYyxnQkFBaUIsWUFBYSxTQUFTQyxLQUFNQyxHQUFJQyxlQUFnQkMsTUFBT0MsYUFBY0MsV0FBWUMsY0FBZUMsV0FDbk0sSUFBSUMsaUJBQ0ZDLFdBQWFILGNBQWMsY0FFM0JJLGlCQUFrQixFQUVoQnBDLFNBQ0YwQixLQUFPLElBQ0ssTUFBSXBGLFFBQVFHLEtBQ3hCaUYsS0FBVyxLQUFJcEYsUUFBUUcsS0FDdkJpRixLQUFXLEtBQUlwRixRQUFRRyxNQUl6QlEsVUFBVW9GLG9CQUFzQixXQUM5QixPQUFPLG1CQUF5Q0gsaUJBQW9CSixhQUFhUSxLQUFLLGNBQWdCaEcsUUFBUWlHLGFBR2hIL0YsVUFBWSxTQUFtQmdHLFVBQVdDLFFBQ3JDeEMsUUFDRDhCLFdBQVdXLFdBQVdGLFVBQVdDLFFBRWhDekMsT0FDRDBCLEtBQUtpQixLQUFLSCxVQUFXQyxTQVV6QixJQUFJRyxhQUFlLFNBQXNCcEUsS0FBTXFFLEtBQU1KLFFBQ25ELElBQ0VLLEdBQUlDLE9BREZDLFNBQVdyQixHQUFHc0IsUUFFaEJDLFlBQWMsU0FBcUJDLEtBQ2pDLElBQUlDLElBQUssSUFBSUMsTUFBT0MsVUFDcEIsT0FBR0gsSUFBSXBHLFFBQVEsTUFBUSxFQUNtQixNQUFyQ29HLElBQUlJLFVBQVUsRUFBR0osSUFBSTNGLE9BQVMsR0FDeEIyRixJQUFNLE9BQVNDLEdBRWpCRCxJQUFNLFFBQVVDLEdBRWhCRCxJQUFNLFFBQVVDLElBWTdCLE9BTEc5RyxRQUFRb0MsWUFBWXlELFdBQVdxQixJQUFJWCxRQUNwQ1YsV0FBV3NCLElBQUlaLEtBQU1HLFNBQVNVLFNBSXpCbEYsTUFDTCxJQUFLLE9BQ0hzRSxHQUFLaEQsU0FBUzZELGNBQWMsU0FDekJuRixLQUFPLFdBQ1ZzRSxHQUFHYyxJQUFNLGFBQ1RkLEdBQUdlLE1BQXdCLElBQWpCcEIsT0FBT3FCLE1BQWtCWixZQUFZTCxNQUFRQSxLQUN2RCxNQUNGLElBQUssTUFDSEMsR0FBS2hELFNBQVM2RCxjQUFjLFdBQ3pCSSxLQUF1QixJQUFqQnRCLE9BQU9xQixNQUFrQlosWUFBWUwsTUFBUUEsS0FDdEQsTUFDRixRQUNFRyxTQUFTZ0IsT0FBTyxJQUFJckcsTUFBTSxtQkFBcUJhLEtBQU8scUNBQXVDcUUsS0FBTyxNQUd4R0MsR0FBR21CLE9BQVNuQixHQUF1QixtQkFBSSxTQUFTbEcsR0FDMUNrRyxHQUFlLGFBQU8sV0FBV2pHLEtBQUtpRyxHQUFlLGFBQVFDLFNBQ2pFRCxHQUFHbUIsT0FBU25CLEdBQXVCLG1CQUFJLEtBQ3ZDQyxPQUFTLEVBQ1R2RyxVQUFVLHdCQUF5QnFHLE1BQ25DRyxTQUFTa0IsWUFFWHBCLEdBQUdxQixRQUFVLFNBQVN2SCxHQUNwQm9HLFNBQVNnQixPQUFPLElBQUlyRyxNQUFNLGtCQUFvQmtGLFFBRWhEQyxHQUFHc0IsTUFBUTNCLE9BQU80QixNQUFRLEVBQUksRUFFOUIsSUFBSUMsaUJBQW1CekUsT0FBTzBFLFVBQzlCLEdBQUc5QixPQUFPK0IsYUFBYyxDQUN0QixJQUFJdEUsUUFBVTVELFFBQVE0RCxRQUFRdUMsT0FBTytCLGNBQ2xDdEUsU0FBV0EsUUFBUTFDLE9BQVMsSUFDN0I4RyxpQkFBbUJwRSxRQUFRLElBVy9CLEdBUkFMLE9BQU8yRSxhQUFhMUIsR0FBSXdCLGtCQVFiLE9BQVI5RixLQUFlLENBRWQsSUFBSWlHLEdBQUtDLFVBQVVDLFVBQVVDLGNBRzdCLEdBQUcsaUJBQWlCL0gsS0FBSzZILFVBQVVHLFVBQVcsQ0FDNUMsSUFBSUMsRUFBS0osVUFBb0IsV0FBRTlELE1BQU0sMEJBQ2pDbUUsV0FBYUMsV0FBVyxDQUFDQyxTQUFTSCxFQUFFLEdBQUksSUFBS0csU0FBU0gsRUFBRSxHQUFJLElBQUtHLFNBQVNILEVBQUUsSUFBTSxFQUFHLEtBQUtJLEtBQUssTUFDbkc5QyxnQkFBa0IyQyxXQUFhLE9BQzFCLEdBQUdOLEdBQUcxSCxRQUFRLFlBQWMsRUFBRyxDQUNwQyxJQUFJb0ksZUFBaUJILFdBQVdQLEdBQUdXLE1BQU1YLEdBQUcxSCxRQUFRLFdBQWEsSUFDakVxRixnQkFBa0IrQyxlQUFpQixTQUM5QixHQUFHVixHQUFHMUgsUUFBUSxXQUFhLElBQThCLEdBQXpCMEgsR0FBRzFILFFBQVEsVUFBaUIsQ0FDakUsSUFBSXNJLGNBQWdCTCxXQUFXUCxHQUFHN0QsTUFBTSx1QkFBdUIsSUFDL0R3QixnQkFBa0JpRCxjQUFnQixFQUl0QyxHQUFHakQsZ0JBQ0QsSUFBSWtELE1BQVEsSUFDUkMsU0FBV3RELFdBQVUsV0FDdkIsSUFDRWEsR0FBRzBDLE1BQU1DLFNBQ1R4RCxVQUFVeUQsT0FBT0gsVUFDakJ6QyxHQUFHbUIsU0FDSCxNQUFNckgsS0FDRDBJLE9BQVMsR0FDWnhDLEdBQUdxQixhQUdOLElBSVAsT0FBT25CLFNBQVNVLFNBR2ZwSCxRQUFRb0MsWUFBWWUsYUFTckJBLFNBQVcsU0FBU2tHLE1BQU9DLFNBQVVuRCxRQUNuQyxJQUFJb0QsU0FBVyxHQUNmdkosUUFBUXlDLFFBQVE0RyxPQUFPLFNBQWlCOUMsTUFDdENnRCxTQUFTMUgsS0FBS3lFLGFBQWEsS0FBTUMsS0FBTUosWUFFekNkLEdBQUdtRSxJQUFJRCxVQUFVRSxNQUFLLFdBQ3BCSCxjQUNDLFNBQWVJLEtBQ2hCSixTQUFTSSxVQUdKQyxrQkFBbUIsR0FHM0IzSixRQUFRb0MsWUFBWWdCLGNBU3JCQSxVQUFZLFNBQVNpRyxNQUFPQyxTQUFVbkQsUUFDcEMsSUFBSW9ELFNBQVcsR0FDZnZKLFFBQVF5QyxRQUFRNEcsT0FBTyxTQUFpQjlDLE1BQ3RDZ0QsU0FBUzFILEtBQUt5RSxhQUFhLE1BQU9DLEtBQU1KLFlBRTFDZCxHQUFHbUUsSUFBSUQsVUFBVUUsTUFBSyxXQUNwQkgsY0FDQyxTQUFlSSxLQUNoQkosU0FBU0ksVUFHSEMsa0JBQW1CLEdBRzVCM0osUUFBUW9DLFlBQVlpQixvQkFTckJBLGdCQUFrQixTQUFTZ0csTUFBT0MsU0FBVW5ELFFBQzFDLElBQUlvRCxTQUFXLEdBb0JmLE9BbkJBdkosUUFBUXlDLFFBQVE0RyxPQUFPLFNBQVN4QyxLQUM5QixJQUFJSCxTQUFXckIsR0FBR3NCLFFBQ2xCNEMsU0FBUzFILEtBQUs2RSxTQUFTVSxTQUN2QjdCLE1BQU0yQixJQUFJTCxJQUFLVixRQUFReUQsU0FBUSxTQUFTNUQsTUFDbkNoRyxRQUFRdUMsU0FBU3lELE9BQVNBLEtBQUs5RSxPQUFTLEdBQ3pDbEIsUUFBUXlDLFFBQVF6QyxRQUFRNEQsUUFBUW9DLE9BQU8sU0FBUzZELE1BQ3pCLFdBQWxCQSxLQUFLQyxVQUF1QyxxQkFBZEQsS0FBSzNILE1BQ3BDb0QsZUFBZTZCLElBQUkwQyxLQUFLRSxHQUFJRixLQUFLRyxjQUlwQ2hLLFFBQVFvQyxZQUFZeUQsV0FBV3FCLElBQUlMLE9BQ3BDaEIsV0FBV3NCLElBQUlOLEtBQUssR0FFdEJILFNBQVNrQixhQUNScUMsT0FBTSxTQUFTUCxLQUNoQmhELFNBQVNnQixPQUFPLElBQUlyRyxNQUFNLGlDQUFtQ3dGLElBQU0sTUFBUTZDLFlBR3hFckUsR0FBR21FLElBQUlELFVBQVVFLE1BQUssV0FDM0JILGNBQ0MsU0FBZUksS0FDaEJKLFNBQVNJLFVBR0dDLGtCQUFtQixHQUdyQyxJQUFJTyxZQUFjLFNBQVNDLE9BQVFoRSxRQUNqQyxJQUFJaUUsU0FBVyxHQUNiQyxlQUFpQixHQUNqQkMsUUFBVSxHQUNWZixTQUFXLEdBQ1hnQixhQUFlLEtBRWpCdkssUUFBUXdLLE9BQU9yRSxRQUFVLEdBQUlnRSxRQUU3QixJQUFJTSxTQUFXLFNBQVNsRSxNQUN0QmdFLGFBQWUxRSxXQUFXcUIsSUFBSVgsTUFDM0J2RyxRQUFRb0MsWUFBWW1JLGdCQUFrQyxJQUFqQnBFLE9BQU9xQixNQUMxQyxzQkFBc0JqSCxLQUFLZ0csUUFBcUMsSUFBNUI2RCxTQUFTM0osUUFBUThGLE1BQ3RENkQsU0FBU3ZJLEtBQUswRSxNQUNOLHNCQUFzQmhHLEtBQUtnRyxRQUEyQyxJQUFsQzhELGVBQWU1SixRQUFROEYsTUFDbkU4RCxlQUFleEksS0FBSzBFLE9BQ2UsSUFBM0IrRCxRQUFRN0osUUFBUThGLE9BQ3hCK0QsUUFBUXpJLEtBQUswRSxNQUVQZ0UsY0FDUmhCLFNBQVMxSCxLQUFLMEksZUFZbEIsR0FSR3BFLE9BQU80QixNQUNSMEMsU0FBU3RFLE9BQU91RSxNQUFNQyxTQUV0QjNLLFFBQVF5QyxRQUFRMEQsT0FBT3VFLE9BQU8sU0FBU25FLE1BQ3JDa0UsU0FBU2xFLFNBSVY2RCxTQUFTbEosT0FBUyxFQUFHLENBQ3RCLElBQUkwSixZQUFjdkYsR0FBR3NCLFFBQ3JCdkQsVUFBVWdILFVBQVUsU0FBU1YsS0FDeEIxSixRQUFRd0IsVUFBVWtJLE1BQVF0RyxVQUFVaEMsZUFBZSxxQkFDcERnRSxLQUFLNkUsTUFBTVAsS0FDWGtCLFlBQVlsRCxPQUFPZ0MsTUFFbkJrQixZQUFZaEQsWUFFYnpCLFFBQ0hvRCxTQUFTMUgsS0FBSytJLFlBQVl4RCxTQUc1QixHQUFHaUQsZUFBZW5KLE9BQVMsRUFBRyxDQUM1QixJQUFJMkosa0JBQW9CeEYsR0FBR3NCLFFBQzNCdEQsZ0JBQWdCZ0gsZ0JBQWdCLFNBQVNYLEtBQ3BDMUosUUFBUXdCLFVBQVVrSSxNQUFRckcsZ0JBQWdCakMsZUFBZSxxQkFDMURnRSxLQUFLNkUsTUFBTVAsS0FDWG1CLGtCQUFrQm5ELE9BQU9nQyxNQUV6Qm1CLGtCQUFrQmpELFlBRW5CekIsUUFDSG9ELFNBQVMxSCxLQUFLZ0osa0JBQWtCekQsU0FHbEMsR0FBR2tELFFBQVFwSixPQUFTLEVBQUcsQ0FDckIsSUFBSTRKLFdBQWF6RixHQUFHc0IsUUFDcEJ4RCxTQUFTbUgsU0FBUyxTQUFTWixLQUN0QjFKLFFBQVF3QixVQUFVa0ksTUFBUXZHLFNBQVMvQixlQUFlLHFCQUNuRGdFLEtBQUs2RSxNQUFNUCxLQUNYb0IsV0FBV3BELE9BQU9nQyxNQUVsQm9CLFdBQVdsRCxZQUVaekIsUUFDSG9ELFNBQVMxSCxLQUFLaUosV0FBVzFELFNBRzNCLE9BQUdqQixPQUFPNEIsT0FBUzVCLE9BQU91RSxNQUFNeEosT0FBUyxFQUNoQ21FLEdBQUdtRSxJQUFJRCxVQUFVRSxNQUFLLFdBQzNCLE9BQU9TLFlBQVlDLE9BQVFoRSxXQUd0QmQsR0FBR21FLElBQUlELFdBSWxCLE1BQU8sQ0FNTHdCLGdCQUFpQixTQUFTMUssWUFDeEIsSUFBSUwsUUFBUXVDLFNBQVNsQyxZQUNuQixNQUFNLElBQUlnQixNQUFNLGtEQUVsQixPQUFJaUMsUUFBUWpELFlBR0xpRCxRQUFRakQsWUFGTixNQVVYMkssZ0JBQWlCLFNBQVNDLGNBQ3hCLElBQUlqTCxRQUFRd0MsU0FBU3lJLGNBQ25CLE1BQU0sSUFBSTVKLE1BQU0sb0RBR2xCLE9BREFpQyxRQUFRMkgsYUFBYXJJLE1BQVFxSSxhQUN0QkEsY0FPVEMsV0FBWSxXQUNWLE9BQU96TCxZQVFUMEwsU0FBVSxTQUFTQyxjQUNqQixJQUE0Qm5MLE9BQ3RCa0wsU0FTTixHQUhHbkwsUUFBUXVDLFNBQVM2SSxnQkFDbEJBLGFBQWUsQ0FBQ0EsZUFFZnBMLFFBQVFtQixRQUFRaUssY0FBZSxDQUNoQyxJQUFJdEssRUFBR0MsSUFDUCxJQUFJRCxFQUFJLEVBQUdDLElBQU1xSyxhQUFhbEssT0FBUUosRUFBSUMsSUFBS0QsSUFDN0MsR0Fid0JiLE9BYVBtTCxhQUFhdEssR0FaNUJxSyxjQUFBQSxHQUFBQSxTQUFXMUwsV0FBV2dCLFFBQVFSLFNBQVcsS0FFM0NrTCxXQUFhL0ssYUFBYUgsVUFFckJrTCxTQVNILE9BQU8sRUFHWCxPQUFPLEVBRVAsTUFBTSxJQUFJOUosTUFBTSw2Q0FVcEJnSyxLQUFNLFNBQVNwTCxPQUFRa0csUUFDckIsSUFLRTlGLFdBQ0FpTCxRQU5FQyxLQUFPckcsS0FDVGlGLE9BQVMsS0FDVHFCLFlBQWMsR0FDZEMsYUFBZSxHQUNmL0UsU0FBV3JCLEdBQUdzQixRQVNoQixHQUxHM0csUUFBUW9DLFlBQVkrRCxVQUNyQkEsT0FBUyxJQUlSbkcsUUFBUW1CLFFBQVFsQixRQWVqQixPQWJBRCxRQUFReUMsUUFBUXhDLFFBQVEsU0FBU3lMLEdBQzVCQSxHQUNERCxhQUFhNUosS0FBSzBKLEtBQUtGLEtBQUtLLEVBQUd2RixZQUtuQ2QsR0FBR21FLElBQUlpQyxjQUFjaEMsTUFBSyxXQUN4Qi9DLFNBQVNrQixRQUFRM0gsV0FDaEIsU0FBZXlKLEtBQ2hCaEQsU0FBU2dCLE9BQU9nQyxRQUdYaEQsU0FBU1UsUUEyQ2xCLEdBeENBL0csV0FBYXNDLGNBQWMxQyxRQUdOLGlCQUFYQSxRQUNSa0ssT0FBU29CLEtBQUtSLGdCQUFnQjlLLFdBRTVCa0ssT0FBUyxDQUNQTyxNQUFPLENBQUN6SyxTQUVWSSxXQUFhLE1BRVcsaUJBQVhKLFNBQ2ZrSyxPQUFTb0IsS0FBS1AsZ0JBQWdCL0ssU0FHbEIsT0FBWGtLLFFBQ0RtQixRQUFVLFdBQWFqTCxXQUFhLG9DQUNwQytFLEtBQUs2RSxNQUFNcUIsU0FDWDVFLFNBQVNnQixPQUFPLElBQUlyRyxNQUFNaUssV0FHdkJ0TCxRQUFRd0IsVUFBVTJJLE9BQU93QixZQUN2QjNMLFFBQVFvQyxZQUFZK0gsT0FBT08sU0FDNUJQLE9BQU9PLE1BQVEsSUFFZDFLLFFBQVF1QyxTQUFTNEgsT0FBT3dCLFVBQ3pCeEIsT0FBT08sTUFBTTdJLEtBQUtzSSxPQUFPd0IsVUFDakIzTCxRQUFRbUIsUUFBUWdKLE9BQU93QixXQUMvQnhCLE9BQU9PLE1BQU1rQixPQUFPekIsT0FBT3dCLFdBS2pDSCxZQUFZM0osS0FBTyxTQUFTNkMsUUFDRSxJQUF6QlEsS0FBS3pFLFFBQVFpRSxRQUNkbUgsTUFBTUMsVUFBVWpLLEtBQUtKLE1BQU15RCxLQUFNNkcsWUFLbEMvTCxRQUFRd0IsVUFBVW5CLGFBQWVELGFBQWFDLGNBQW1ELElBQXBDWixXQUFXZ0IsUUFBUUosY0FDakZtTCxZQUFZM0osS0FBS3hCLFlBR2RMLFFBQVFvQyxZQUFZK0gsT0FBT08sUUFFNUIsT0FEQWhFLFNBQVNrQixVQUNGbEIsU0FBU1UsUUFJcEIsSUFBSTRFLFlBQWMsR0FDbEJoTSxRQUFRd0ssT0FBT3dCLFlBQWE3RixPQUFRZ0UsUUFFcEMsSUFBSThCLGlCQUFtQixTQUFTQSxpQkFBaUJoTSxRQUMvQyxJQUFJSSxXQUNGNkwsYUFDQW5ILFNBQ0FvSCxLQUNBQyxhQUFlLEdBR2pCLEdBQWtCLFFBRGxCL0wsV0FBYXNDLGNBQWMxQyxTQUV6QixPQUFPb0YsR0FBR2dILE9BRVYsSUFDRUgsYUF5TWhCLFNBQW1CN0wsWUFDakIsSUFDRSxPQUFPTCxRQUFRQyxPQUFPSSxZQUN0QixNQUFNQyxHQUtOLE1BSEcsWUFBWUMsS0FBS0QsSUFBT0EsRUFBRUUsUUFBUUMsUUFBUSxvQkFBc0IsS0FDakVILEVBQUVFLFFBQVUsZUFBaUJILFdBQWEsaURBQW1EQyxFQUFFRSxTQUUzRkYsR0FqTnFCZ00sQ0FBVWpNLFlBQ3pCLE1BQU1DLEdBQ04sSUFBSW9HLFNBQVdyQixHQUFHc0IsUUFHbEIsT0FGQXZCLEtBQUs2RSxNQUFNM0osRUFBRUUsU0FDYmtHLFNBQVNnQixPQUFPcEgsR0FDVG9HLFNBQVNVLFFBZ0VwQixPQTlERXJDLFNBeUtkLFNBQXFCOUUsUUFDbkIsSUFBSThFLFNBQVcsR0FNZixPQUxBL0UsUUFBUXlDLFFBQVF4QyxPQUFPOEUsVUFBVSxTQUFTd0gsZ0JBQ0UsSUFBdkM5TSxXQUFXZ0IsUUFBUThMLGdCQUNwQnhILFNBQVNsRCxLQUFLMEssa0JBR1h4SCxTQWhMZ0J5SCxDQUFZTixjQUd6QmxNLFFBQVF5QyxRQUFRc0MsVUFBVSxTQUFTMEgsY0FHakMsR0FBMkIsaUJBQWpCQSxhQUEyQixDQUNuQyxJQUFJdEMsT0FBU29CLEtBQUtSLGdCQUFnQjBCLGNBQ2xDLEdBQWMsT0FBWHRDLE9BRUQsWUFEQXFCLFlBQVkzSixLQUFLNEssY0FHbkJBLGFBQWV0QyxPQUlkL0osYUFBYXFNLGFBQWE3SixNQUNOLGlCQUFYM0MsU0FPVyxLQUxuQmtNLEtBQU9NLGFBQWEvQixNQUFNZ0MsUUFBTyxTQUFTQyxHQUN4QyxPQUFPcEIsS0FBS1IsZ0JBQWdCMEIsYUFBYTdKLE1BQU04SCxNQUFNakssUUFBUWtNLEdBQUssTUFJNUR6TCxRQUNOa0UsS0FBS3dILEtBQUssV0FBWXZNLFdBQVksMERBQTJEb00sYUFBYTdKLEtBQU0sK0JBQWdDdUosTUFJbEpDLGFBQWF2SyxLQUFLcUksWUFBWXVDLGFBQWEvQixNQUFPc0IsYUFBYXZDLE1BQUssV0FDbEUsT0FBT3dDLGlCQUFpQlEsb0JBSUksaUJBQWpCQSxlQUNaQSxhQUFhckwsZUFBZSxTQUFXcUwsYUFBbUIsT0FFM0RsQixLQUFLUCxnQkFBZ0J5QixjQUNyQmpCLFlBQVkzSixLQUFLNEssYUFBbUIsT0FJbkNBLGFBQWFyTCxlQUFlLFFBQXlDLElBQS9CcUwsYUFBa0IsSUFBRXZMLFFBRTNEbEIsUUFBUXlDLFFBQVFnSyxhQUFrQixLQUFHLFNBQVNsRyxNQUM1Q0QsYUFBYSxNQUFPQyxLQUFNeUYsaUJBTzdCUyxhQUFhckwsZUFBZSxVQUEwQyxJQUE5QnFMLGFBQWEvQixNQUFNeEosUUFDekR1TCxhQUFhL0IsT0FDZDBCLGFBQWF2SyxLQUFLcUksWUFBWXVDLGFBQWNULGFBQWF2QyxNQUFLLFdBQzVELE9BQU93QyxpQkFBaUJRLHNCQU96QnBILEdBQUdtRSxJQUFJNEMsZUEwQmhCLE9BdkJBbEMsWUFBWUMsT0FBUTZCLGFBQWF2QyxNQUFLLFdBQ2xCLE9BQWZwSixXQUNEcUcsU0FBU2tCLFFBQVEzSCxTQUVqQnVMLFlBQVkzSixLQUFLeEIsWUFDakI0TCxpQkFBaUI1TCxZQUFZb0osTUFBSyxXQUNoQyxJQUNFNUosV0FBYSxHQTJML0IsU0FBU2dOLFNBQVNsTSxVQUFXbU0sZ0JBQWlCM0csUUFDNUMsR0FBRzJHLGdCQUFpQixDQUNsQixJQUFJQyxFQUFNMU0sV0FBWTJNLFNBQVVDLGNBQWdCLEdBQ2hELElBQUlGLEVBQUlELGdCQUFnQjVMLE9BQVMsRUFBRzZMLEdBQUssRUFBR0EsSUFLMUMsR0FIeUIsaUJBRHpCMU0sV0FBYXlNLGdCQUFnQkMsTUFFM0IxTSxXQUFhc0MsY0FBY3RDLGFBRXpCQSxhQUFrRCxJQUFwQ1IsV0FBV1ksUUFBUUosWUFBckMsQ0FHQSxJQUFJNk0sV0FBZ0QsSUFBcEN6TixXQUFXZ0IsUUFBUUosWUFNbkMsR0FMQTJNLFNBQVdoTixRQUFRQyxPQUFPSSxZQUN2QjZNLFlBQ0R6TixXQUFXb0MsS0FBS3hCLFlBQ2hCd00sU0FBU2xNLFVBQVdxTSxTQUFTakksU0FBVW9CLFNBRXRDNkcsU0FBU0csV0FBV2pNLE9BQVMsRUFHOUIsSUFEQXBCLFVBQVVPLFlBQWMsR0FDbEIyTSxTQUFTRyxXQUFXak0sT0FBUyxHQUNqQ3BCLFVBQVVPLFlBQVl3QixLQUFLbUwsU0FBU0csV0FBV3hDLFNBR2hEM0ssUUFBUXdCLFVBQVUxQixVQUFVTyxlQUFpQjZNLFdBQWEvRyxPQUFPaUgsU0FDbEVILGNBQWdCQSxjQUFjckIsT0FBTzlMLFVBQVVPLGNBRWpESyxZQUFZQyxVQUFXcU0sU0FBU25JLGFBQWN4RSxXQUFZOEYsT0FBT3RGLFVBQ2pFSCxZQUFZQyxVQUFXcU0sU0FBU2xJLGNBQWV6RSxXQUFZOEYsT0FBT3RGLFVBQ2xFWCxVQUFVZ04sVUFBWSwwQkFBNEIsNEJBQTZCN00sWUFDL0V5TSxnQkFBZ0JPLE1BQ2hCeE4sV0FBV2dDLEtBQUt4QixZQUdsQixJQUFJdUYsaUJBQW1CakYsVUFBVW9GLHNCQUNqQy9GLFFBQVF5QyxRQUFRd0ssZUFBZSxTQUFTSyxJQUN0QzFILGlCQUFpQmxELE9BQU80SyxRQTlOWlQsQ0FBU2xNLFVBQVc2SyxZQUFhUSxhQUNqQyxNQUFNMUwsR0FHTixPQUZBOEUsS0FBSzZFLE1BQU0zSixFQUFFRSxjQUNia0csU0FBU2dCLE9BQU9wSCxHQUdsQm9HLFNBQVNrQixRQUFRM0gsV0FDaEIsU0FBZXlKLEtBQ2hCaEQsU0FBU2dCLE9BQU9nQyxZQUduQixTQUFlQSxLQUNoQmhELFNBQVNnQixPQUFPZ0MsUUFHWGhELFNBQVNVLFlBS3RCbEMsS0FBS2lGLE9BQVMsU0FBU0EsUUFDckIsR0FBR25LLFFBQVF3QixVQUFVMkksT0FBT2hILFdBQWFuRCxRQUFRd0IsVUFBVTJJLE9BQU9vRCxhQUFjLENBQzlFLElBQUl2TixRQUFROEIsV0FBV3FJLE9BQU9oSCxVQUFZZ0gsT0FBT29ELGFBQy9DLEtBQUssdUNBRVBwSyxTQUFXZ0gsT0FBT2hILFVBQVlnSCxPQUFPb0QsWUFHdkMsR0FBR3ZOLFFBQVF3QixVQUFVMkksT0FBTy9HLFdBQVksQ0FDdEMsSUFBSXBELFFBQVE4QixXQUFXcUksT0FBTy9HLFdBQzVCLEtBQUssd0NBRVBBLFVBQVkrRyxPQUFPL0csVUFHckIsR0FBR3BELFFBQVF3QixVQUFVMkksT0FBTzlHLGlCQUFrQixDQUM1QyxJQUFJckQsUUFBUThCLFdBQVdxSSxPQUFPOUcsaUJBQzVCLEtBQUssNkNBRVBBLGdCQUFrQjhHLE9BQU85RyxnQkFJeEJyRCxRQUFRd0IsVUFBVTJJLE9BQU83RyxXQUN2QnRELFFBQVFtQixRQUFRZ0osT0FBTzdHLFNBQ3hCdEQsUUFBUXlDLFFBQVEwSCxPQUFPN0csU0FBUyxTQUFTMkgsY0FDdkMzSCxRQUFRMkgsYUFBYXJJLE1BQVFxSSxnQkFHL0IzSCxRQUFRNkcsT0FBTzdHLFFBQVFWLE1BQVF1SCxPQUFPN0csU0FJdkN0RCxRQUFRd0IsVUFBVTJJLE9BQU96RyxTQUMxQkEsTUFBUXlHLE9BQU96RyxPQUdkMUQsUUFBUXdCLFVBQVUySSxPQUFPeEcsVUFDMUJBLE9BQVN3RyxPQUFPeEcsWUFLeEI1RCxXQUFXeU4sVUFBVSxhQUFjLENBQUMsY0FBZSxXQUFZLFdBQVksU0FDekUsU0FBU0MsWUFBYUMsU0FBVUMsU0FBVUMsUUFDeEMsTUFBTyxDQUNMQyxTQUFVLElBQ1ZDLFVBQVUsRUFDVkMsU0FBVSxJQUNWQyxRQUFTLFNBQVNwSyxRQUFTcUssT0FFekIsSUFBSUMsUUFBVXRLLFFBQVEsR0FBR29HLFVBR3pCLE9BRkFwRyxRQUFRdUssS0FBSyxJQUVOLFNBQVNDLE9BQVFDLFNBQVVDLE9BQ2hDLElBQUlDLE1BQVFYLE9BQU9VLE1BQU12TyxZQUN6QnFPLE9BQU9JLFFBQU8sV0FFWixPQUFPRCxNQUFNSCxTQUFXRSxNQUFNdk8sY0FDN0IsU0FBU00sWUFDUEwsUUFBUXdCLFVBQVVuQixhQUNuQm9OLFlBQVlwQyxLQUFLaEwsWUFBWW9KLE1BQUssU0FBaUJ3QixjQUNqRDBDLFNBQVNjLE1BQU1mLFNBQVNRLFFBQVRSLENBQWtCVSxRQUFTLEtBQU1DLGdCQUduRCxTQXlQYixJQUFJSyxVQUFZMU8sUUFBUTBPLFVBQ3hCMU8sUUFBUTBPLFVBQVksU0FBUzlLLFFBQVNOLFFBQVM2RyxRQUU3QyxPQURBekssWUFBYzRELFFBQVF3RixRQUNmNEYsVUFBVTlLLFFBQVNOLFFBQVM2RyxTQUlqQzBCLE1BQU1DLFVBQVVyTCxVQUNsQm9MLE1BQU1DLFVBQVVyTCxRQUFVLFNBQVNrTyxjQUFlQyxXQUVoRCxJQUFJN0IsRUFJSixHQUFXLE1BQVI3SCxLQUNELE1BQU0sSUFBSTJKLFVBQVUsaUNBR3RCLElBQUlDLEVBQUlDLE9BQU83SixNQUtYbkUsSUFBTStOLEVBQUU1TixTQUFXLEVBR3ZCLEdBQVcsSUFBUkgsSUFDRCxPQUFRLEVBS1YsSUFBSTRMLEdBQUtpQyxXQUFhLEVBT3RCLEdBTEdJLEtBQUtDLElBQUl0QyxLQUFPdUMsRUFBQUEsSUFDakJ2QyxFQUFJLEdBSUhBLEdBQUs1TCxJQUNOLE9BQVEsRUFTVixJQUhBZ00sRUFBSWlDLEtBQUtHLElBQUl4QyxHQUFLLEVBQUlBLEVBQUk1TCxJQUFNaU8sS0FBS0MsSUFBSXRDLEdBQUksR0FHdkNJLEVBQUloTSxLQUFLLENBYWIsR0FBR2dNLEtBQUsrQixHQUFLQSxFQUFFL0IsS0FBTzRCLGNBQ3BCLE9BQU81QixFQUVUQSxJQUVGLE9BQVEsSUFwOUJkIiwiZmlsZSI6InBsdWdpbnMvb2NsYXp5bG9hZC9kaXN0L29jTGF6eUxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIG9jbGF6eWxvYWQgLSBMb2FkIG1vZHVsZXMgb24gZGVtYW5kIChsYXp5IGxvYWQpIHdpdGggYW5ndWxhckpTXG4gKiBAdmVyc2lvbiB2MC41LjJcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9vY29tYmUvb2NMYXp5TG9hZFxuICogQGxpY2Vuc2UgTUlUXG4gKiBAYXV0aG9yIE9saXZpZXIgQ29tYmUgPG9saXZpZXIuY29tYmVAZ21haWwuY29tPlxuICovXG4oZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIHJlZ01vZHVsZXMgPSBbJ25nJ10sXG4gICAgaW5pdE1vZHVsZXMgPSBbXSxcbiAgICByZWdJbnZva2VzID0ge30sXG4gICAgcmVnQ29uZmlncyA9IFtdLFxuICAgIGp1c3RMb2FkZWQgPSBbXSxcbiAgICBydW5CbG9ja3MgPSB7fSxcbiAgICBvY0xhenlMb2FkID0gYW5ndWxhci5tb2R1bGUoJ29jLmxhenlMb2FkJywgWyduZyddKSxcbiAgICBicm9hZGNhc3QgPSBhbmd1bGFyLm5vb3A7XG5cbiAgb2NMYXp5TG9hZC5wcm92aWRlcignJG9jTGF6eUxvYWQnLCBbJyRjb250cm9sbGVyUHJvdmlkZXInLCAnJHByb3ZpZGUnLCAnJGNvbXBpbGVQcm92aWRlcicsICckZmlsdGVyUHJvdmlkZXInLCAnJGluamVjdG9yJywgJyRhbmltYXRlUHJvdmlkZXInLFxuICAgIGZ1bmN0aW9uKCRjb250cm9sbGVyUHJvdmlkZXIsICRwcm92aWRlLCAkY29tcGlsZVByb3ZpZGVyLCAkZmlsdGVyUHJvdmlkZXIsICRpbmplY3RvciwgJGFuaW1hdGVQcm92aWRlcikge1xuICAgICAgdmFyIG1vZHVsZXMgPSB7fSxcbiAgICAgICAgcHJvdmlkZXJzID0ge1xuICAgICAgICAgICRjb250cm9sbGVyUHJvdmlkZXI6ICRjb250cm9sbGVyUHJvdmlkZXIsXG4gICAgICAgICAgJGNvbXBpbGVQcm92aWRlcjogJGNvbXBpbGVQcm92aWRlcixcbiAgICAgICAgICAkZmlsdGVyUHJvdmlkZXI6ICRmaWx0ZXJQcm92aWRlcixcbiAgICAgICAgICAkcHJvdmlkZTogJHByb3ZpZGUsIC8vIG90aGVyIHRoaW5nc1xuICAgICAgICAgICRpbmplY3RvcjogJGluamVjdG9yLFxuICAgICAgICAgICRhbmltYXRlUHJvdmlkZXI6ICRhbmltYXRlUHJvdmlkZXJcbiAgICAgICAgfSxcbiAgICAgICAgYW5jaG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLFxuICAgICAgICBqc0xvYWRlciwgY3NzTG9hZGVyLCB0ZW1wbGF0ZXNMb2FkZXIsXG4gICAgICAgIGRlYnVnID0gZmFsc2UsXG4gICAgICAgIGV2ZW50cyA9IGZhbHNlO1xuXG4gICAgICAvLyBMZXQncyBnZXQgdGhlIGxpc3Qgb2YgbG9hZGVkIG1vZHVsZXMgJiBjb21wb25lbnRzXG4gICAgICBpbml0KGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cuZG9jdW1lbnQpKTtcblxuICAgICAgdGhpcy4kZ2V0ID0gWyckbG9nJywgJyRxJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRodHRwJywgJyRyb290RWxlbWVudCcsICckcm9vdFNjb3BlJywgJyRjYWNoZUZhY3RvcnknLCAnJGludGVydmFsJywgZnVuY3Rpb24oJGxvZywgJHEsICR0ZW1wbGF0ZUNhY2hlLCAkaHR0cCwgJHJvb3RFbGVtZW50LCAkcm9vdFNjb3BlLCAkY2FjaGVGYWN0b3J5LCAkaW50ZXJ2YWwpIHtcbiAgICAgICAgdmFyIGluc3RhbmNlSW5qZWN0b3IsXG4gICAgICAgICAgZmlsZXNDYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ29jTGF6eUxvYWQnKSxcbiAgICAgICAgICB1YUNzc0NoZWNrZWQgPSBmYWxzZSxcbiAgICAgICAgICB1c2VDc3NMb2FkUGF0Y2ggPSBmYWxzZTtcblxuICAgICAgICBpZighZGVidWcpIHtcbiAgICAgICAgICAkbG9nID0ge307XG4gICAgICAgICAgJGxvZ1snZXJyb3InXSA9IGFuZ3VsYXIubm9vcDtcbiAgICAgICAgICAkbG9nWyd3YXJuJ10gPSBhbmd1bGFyLm5vb3A7XG4gICAgICAgICAgJGxvZ1snaW5mbyddID0gYW5ndWxhci5ub29wO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFrZSB0aGlzIGxhenkgYmVjYXVzZSBhdCB0aGUgbW9tZW50IHRoYXQgJGdldCgpIGlzIGNhbGxlZCB0aGUgaW5zdGFuY2UgaW5qZWN0b3IgaGFzbid0IGJlZW4gYXNzaWduZWQgdG8gdGhlIHJvb3RFbGVtZW50IHlldFxuICAgICAgICBwcm92aWRlcnMuZ2V0SW5zdGFuY2VJbmplY3RvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAoaW5zdGFuY2VJbmplY3RvcikgPyBpbnN0YW5jZUluamVjdG9yIDogKGluc3RhbmNlSW5qZWN0b3IgPSAoJHJvb3RFbGVtZW50LmRhdGEoJyRpbmplY3RvcicpIHx8IGFuZ3VsYXIuaW5qZWN0b3IoKSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJyb2FkY2FzdCA9IGZ1bmN0aW9uIGJyb2FkY2FzdChldmVudE5hbWUsIHBhcmFtcykge1xuICAgICAgICAgIGlmKGV2ZW50cykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KGV2ZW50TmFtZSwgcGFyYW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZGVidWcpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbyhldmVudE5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWQgYSBqcy9jc3MgZmlsZVxuICAgICAgICAgKiBAcGFyYW0gdHlwZVxuICAgICAgICAgKiBAcGFyYW0gcGF0aFxuICAgICAgICAgKiBAcmV0dXJucyBwcm9taXNlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgYnVpbGRFbGVtZW50ID0gZnVuY3Rpb24gYnVpbGRFbGVtZW50KHR5cGUsIHBhdGgsIHBhcmFtcykge1xuICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCksXG4gICAgICAgICAgICBlbCwgbG9hZGVkLFxuICAgICAgICAgICAgY2FjaGVCdXN0ZXIgPSBmdW5jdGlvbiBjYWNoZUJ1c3Rlcih1cmwpIHtcbiAgICAgICAgICAgICAgdmFyIGRjID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIGlmKHVybC5pbmRleE9mKCc/JykgPj0gMCkge1xuICAgICAgICAgICAgICAgIGlmKHVybC5zdWJzdHJpbmcoMCwgdXJsLmxlbmd0aCAtIDEpID09PSAnJicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB1cmwgKyAnX2RjPScgKyBkYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybCArICcmX2RjPScgKyBkYztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsICsgJz9fZGM9JyArIGRjO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gU3RvcmUgdGhlIHByb21pc2UgZWFybHkgc28gdGhlIGZpbGUgbG9hZCBjYW4gYmUgZGV0ZWN0ZWQgYnkgb3RoZXIgcGFyYWxsZWwgbGF6eSBsb2Fkc1xuICAgICAgICAgIC8vIChpZTogbXVsdGlwbGUgcm91dGVzIG9uIG9uZSBwYWdlKSBhICd0cnVlJyB2YWx1ZSBpc24ndCBzdWZmaWNpZW50XG4gICAgICAgICAgLy8gYXMgaXQgY2F1c2VzIGZhbHNlIHBvc2l0aXZlIGxvYWQgcmVzdWx0cy5cbiAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGZpbGVzQ2FjaGUuZ2V0KHBhdGgpKSkge1xuICAgICAgICAgICAgZmlsZXNDYWNoZS5wdXQocGF0aCwgZGVmZXJyZWQucHJvbWlzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3dpdGNoIGluIGNhc2UgbW9yZSBjb250ZW50IHR5cGVzIGFyZSBhZGRlZCBsYXRlclxuICAgICAgICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdjc3MnOlxuICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgICAgICAgIGVsLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICAgICAgICAgICAgZWwuaHJlZiA9IHBhcmFtcy5jYWNoZSA9PT0gZmFsc2UgPyBjYWNoZUJ1c3RlcihwYXRoKSA6IHBhdGg7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnanMnOlxuICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICBlbC5zcmMgPSBwYXJhbXMuY2FjaGUgPT09IGZhbHNlID8gY2FjaGVCdXN0ZXIocGF0aCkgOiBwYXRoO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoJ1JlcXVlc3RlZCB0eXBlIFwiJyArIHR5cGUgKyAnXCIgaXMgbm90IGtub3duLiBDb3VsZCBub3QgaW5qZWN0IFwiJyArIHBhdGggKyAnXCInKSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbC5vbmxvYWQgPSBlbFsnb25yZWFkeXN0YXRlY2hhbmdlJ10gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZigoZWxbJ3JlYWR5U3RhdGUnXSAmJiAhKC9eY3xsb2FkZS8udGVzdChlbFsncmVhZHlTdGF0ZSddKSkpIHx8IGxvYWRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgZWwub25sb2FkID0gZWxbJ29ucmVhZHlzdGF0ZWNoYW5nZSddID0gbnVsbFxuICAgICAgICAgICAgbG9hZGVkID0gMTtcbiAgICAgICAgICAgIGJyb2FkY2FzdCgnb2NMYXp5TG9hZC5maWxlTG9hZGVkJywgcGF0aCk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QobmV3IEVycm9yKCdVbmFibGUgdG8gbG9hZCAnICsgcGF0aCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbC5hc3luYyA9IHBhcmFtcy5zZXJpZSA/IDAgOiAxO1xuXG4gICAgICAgICAgdmFyIGluc2VydEJlZm9yZUVsZW0gPSBhbmNob3IubGFzdENoaWxkO1xuICAgICAgICAgIGlmKHBhcmFtcy5pbnNlcnRCZWZvcmUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KHBhcmFtcy5pbnNlcnRCZWZvcmUpO1xuICAgICAgICAgICAgaWYoZWxlbWVudCAmJiBlbGVtZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgaW5zZXJ0QmVmb3JlRWxlbSA9IGVsZW1lbnRbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGFuY2hvci5pbnNlcnRCZWZvcmUoZWwsIGluc2VydEJlZm9yZUVsZW0pO1xuXG4gICAgICAgICAgLypcbiAgICAgICAgICAgVGhlIGV2ZW50IGxvYWQgb3IgcmVhZHlzdGF0ZWNoYW5nZSBkb2Vzbid0IGZpcmUgaW46XG4gICAgICAgICAgIC0gaU9TIDwgNiAgICAgICAoZGVmYXVsdCBtb2JpbGUgYnJvd3NlcilcbiAgICAgICAgICAgLSBBbmRyb2lkIDwgNC40IChkZWZhdWx0IG1vYmlsZSBicm93c2VyKVxuICAgICAgICAgICAtIFNhZmFyaSA8IDYgICAgKGRlc2t0b3AgYnJvd3NlcilcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZih0eXBlID09ICdjc3MnKSB7XG4gICAgICAgICAgICBpZighdWFDc3NDaGVja2VkKSB7XG4gICAgICAgICAgICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAvLyBpT1MgPCA2XG4gICAgICAgICAgICAgIGlmKC9pUChob25lfG9kfGFkKS8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSAobmF2aWdhdG9yLmFwcFZlcnNpb24pLm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XG4gICAgICAgICAgICAgICAgdmFyIGlPU1ZlcnNpb24gPSBwYXJzZUZsb2F0KFtwYXJzZUludCh2WzFdLCAxMCksIHBhcnNlSW50KHZbMl0sIDEwKSwgcGFyc2VJbnQodlszXSB8fCAwLCAxMCldLmpvaW4oJy4nKSk7XG4gICAgICAgICAgICAgICAgdXNlQ3NzTG9hZFBhdGNoID0gaU9TVmVyc2lvbiA8IDY7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZih1YS5pbmRleE9mKFwiYW5kcm9pZFwiKSA+IC0xKSB7IC8vIEFuZHJvaWQgPCA0LjRcbiAgICAgICAgICAgICAgICB2YXIgYW5kcm9pZFZlcnNpb24gPSBwYXJzZUZsb2F0KHVhLnNsaWNlKHVhLmluZGV4T2YoXCJhbmRyb2lkXCIpICsgOCkpO1xuICAgICAgICAgICAgICAgIHVzZUNzc0xvYWRQYXRjaCA9IGFuZHJvaWRWZXJzaW9uIDwgNC40O1xuICAgICAgICAgICAgICB9IGVsc2UgaWYodWEuaW5kZXhPZignc2FmYXJpJykgPiAtMSAmJiB1YS5pbmRleE9mKCdjaHJvbWUnKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHZhciBzYWZhcmlWZXJzaW9uID0gcGFyc2VGbG9hdCh1YS5tYXRjaCgvdmVyc2lvblxcLyhbXFwuXFxkXSspL2kpWzFdKTtcbiAgICAgICAgICAgICAgICB1c2VDc3NMb2FkUGF0Y2ggPSBzYWZhcmlWZXJzaW9uIDwgNjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih1c2VDc3NMb2FkUGF0Y2gpIHtcbiAgICAgICAgICAgICAgdmFyIHRyaWVzID0gMTAwMDsgLy8gKiAyMCA9IDIwMDAwIG1pbGlzZWNvbmRzXG4gICAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgZWwuc2hlZXQuY3NzUnVsZXM7XG4gICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgIGVsLm9ubG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgaWYoLS10cmllcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLm9uZXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIDIwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoanNMb2FkZXIpKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICoganNMb2FkZXIgZnVuY3Rpb25cbiAgICAgICAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAgICAgICAqIEBwYXJhbSBwYXRocyBhcnJheSBsaXN0IG9mIGpzIGZpbGVzIHRvIGxvYWRcbiAgICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgdG8gY2FsbCB3aGVuIGV2ZXJ5dGhpbmcgaXMgbG9hZGVkLiBXZSB1c2UgYSBjYWxsYmFjayBhbmQgbm90IGEgcHJvbWlzZVxuICAgICAgICAgICAqIEBwYXJhbSBwYXJhbXMgb2JqZWN0IGNvbmZpZyBwYXJhbWV0ZXJzXG4gICAgICAgICAgICogYmVjYXVzZSB0aGUgdXNlciBjYW4gb3ZlcndyaXRlIGpzTG9hZGVyIGFuZCBpdCB3aWxsIHByb2JhYmx5IG5vdCB1c2UgcHJvbWlzZXMgOihcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBqc0xvYWRlciA9IGZ1bmN0aW9uKHBhdGhzLCBjYWxsYmFjaywgcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXRocywgZnVuY3Rpb24gbG9hZGluZyhwYXRoKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2goYnVpbGRFbGVtZW50KCdqcycsIHBhdGgsIHBhcmFtcykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcygpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGpzTG9hZGVyLm9jTGF6eUxvYWRMb2FkZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChjc3NMb2FkZXIpKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogY3NzTG9hZGVyIGZ1bmN0aW9uXG4gICAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgICAgICAgKiBAcGFyYW0gcGF0aHMgYXJyYXkgbGlzdCBvZiBjc3MgZmlsZXMgdG8gbG9hZFxuICAgICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB0byBjYWxsIHdoZW4gZXZlcnl0aGluZyBpcyBsb2FkZWQuIFdlIHVzZSBhIGNhbGxiYWNrIGFuZCBub3QgYSBwcm9taXNlXG4gICAgICAgICAgICogQHBhcmFtIHBhcmFtcyBvYmplY3QgY29uZmlnIHBhcmFtZXRlcnNcbiAgICAgICAgICAgKiBiZWNhdXNlIHRoZSB1c2VyIGNhbiBvdmVyd3JpdGUgY3NzTG9hZGVyIGFuZCBpdCB3aWxsIHByb2JhYmx5IG5vdCB1c2UgcHJvbWlzZXMgOihcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjc3NMb2FkZXIgPSBmdW5jdGlvbihwYXRocywgY2FsbGJhY2ssIHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocGF0aHMsIGZ1bmN0aW9uIGxvYWRpbmcocGF0aCkge1xuICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGJ1aWxkRWxlbWVudCgnY3NzJywgcGF0aCwgcGFyYW1zKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRxLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3NzTG9hZGVyLm9jTGF6eUxvYWRMb2FkZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZCh0ZW1wbGF0ZXNMb2FkZXIpKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogdGVtcGxhdGVzTG9hZGVyIGZ1bmN0aW9uXG4gICAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgICAgICAgKiBAcGFyYW0gcGF0aHMgYXJyYXkgbGlzdCBvZiBjc3MgZmlsZXMgdG8gbG9hZFxuICAgICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB0byBjYWxsIHdoZW4gZXZlcnl0aGluZyBpcyBsb2FkZWQuIFdlIHVzZSBhIGNhbGxiYWNrIGFuZCBub3QgYSBwcm9taXNlXG4gICAgICAgICAgICogQHBhcmFtIHBhcmFtcyBvYmplY3QgY29uZmlnIHBhcmFtZXRlcnMgZm9yICRodHRwXG4gICAgICAgICAgICogYmVjYXVzZSB0aGUgdXNlciBjYW4gb3ZlcndyaXRlIHRlbXBsYXRlc0xvYWRlciBhbmQgaXQgd2lsbCBwcm9iYWJseSBub3QgdXNlIHByb21pc2VzIDooXG4gICAgICAgICAgICovXG4gICAgICAgICAgdGVtcGxhdGVzTG9hZGVyID0gZnVuY3Rpb24ocGF0aHMsIGNhbGxiYWNrLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBhdGhzLCBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChkZWZlcnJlZC5wcm9taXNlKTtcbiAgICAgICAgICAgICAgJGh0dHAuZ2V0KHVybCwgcGFyYW1zKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzU3RyaW5nKGRhdGEpICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGFuZ3VsYXIuZWxlbWVudChkYXRhKSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZihub2RlLm5vZGVOYW1lID09PSAnU0NSSVBUJyAmJiBub2RlLnR5cGUgPT09ICd0ZXh0L25nLXRlbXBsYXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dChub2RlLmlkLCBub2RlLmlubmVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGZpbGVzQ2FjaGUuZ2V0KHVybCkpKSB7XG4gICAgICAgICAgICAgICAgICBmaWxlc0NhY2hlLnB1dCh1cmwsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2FkIHRlbXBsYXRlIGZpbGUgXCInICsgdXJsICsgJ1wiOiAnICsgZXJyKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ZW1wbGF0ZXNMb2FkZXIub2NMYXp5TG9hZExvYWRlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlsZXNMb2FkZXIgPSBmdW5jdGlvbihjb25maWcsIHBhcmFtcykge1xuICAgICAgICAgIHZhciBjc3NGaWxlcyA9IFtdLFxuICAgICAgICAgICAgdGVtcGxhdGVzRmlsZXMgPSBbXSxcbiAgICAgICAgICAgIGpzRmlsZXMgPSBbXSxcbiAgICAgICAgICAgIHByb21pc2VzID0gW10sXG4gICAgICAgICAgICBjYWNoZVByb21pc2UgPSBudWxsO1xuXG4gICAgICAgICAgYW5ndWxhci5leHRlbmQocGFyYW1zIHx8IHt9LCBjb25maWcpO1xuXG4gICAgICAgICAgdmFyIHB1c2hGaWxlID0gZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICAgICAgY2FjaGVQcm9taXNlID0gZmlsZXNDYWNoZS5nZXQocGF0aCk7XG4gICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGNhY2hlUHJvbWlzZSkgfHwgcGFyYW1zLmNhY2hlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBpZigvXFwuKGNzc3xsZXNzKVteXFwuXSokLy50ZXN0KHBhdGgpICYmIGNzc0ZpbGVzLmluZGV4T2YocGF0aCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY3NzRmlsZXMucHVzaChwYXRoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmKC9cXC4oaHRtfGh0bWwpW15cXC5dKiQvLnRlc3QocGF0aCkgJiYgdGVtcGxhdGVzRmlsZXMuaW5kZXhPZihwYXRoKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNGaWxlcy5wdXNoKHBhdGgpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYoanNGaWxlcy5pbmRleE9mKHBhdGgpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGpzRmlsZXMucHVzaChwYXRoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKGNhY2hlUHJvbWlzZSkge1xuICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGNhY2hlUHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYocGFyYW1zLnNlcmllKSB7XG4gICAgICAgICAgICBwdXNoRmlsZShwYXJhbXMuZmlsZXMuc2hpZnQoKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwYXJhbXMuZmlsZXMsIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgICAgICAgcHVzaEZpbGUocGF0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZihjc3NGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgY3NzRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgY3NzTG9hZGVyKGNzc0ZpbGVzLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoZXJyKSAmJiBjc3NMb2FkZXIuaGFzT3duUHJvcGVydHkoJ29jTGF6eUxvYWRMb2FkZXInKSkge1xuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBjc3NEZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjc3NEZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHBhcmFtcyk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGNzc0RlZmVycmVkLnByb21pc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmKHRlbXBsYXRlc0ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXNEZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICB0ZW1wbGF0ZXNMb2FkZXIodGVtcGxhdGVzRmlsZXMsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChlcnIpICYmIHRlbXBsYXRlc0xvYWRlci5oYXNPd25Qcm9wZXJ0eSgnb2NMYXp5TG9hZExvYWRlcicpKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc0RlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc0RlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcGFyYW1zKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGVtcGxhdGVzRGVmZXJyZWQucHJvbWlzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoanNGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIganNEZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICBqc0xvYWRlcihqc0ZpbGVzLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoZXJyKSAmJiBqc0xvYWRlci5oYXNPd25Qcm9wZXJ0eSgnb2NMYXp5TG9hZExvYWRlcicpKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGpzRGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAganNEZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHBhcmFtcyk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGpzRGVmZXJyZWQucHJvbWlzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYocGFyYW1zLnNlcmllICYmIHBhcmFtcy5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmaWxlc0xvYWRlcihjb25maWcsIHBhcmFtcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBMZXQgeW91IGdldCBhIG1vZHVsZSBjb25maWcgb2JqZWN0XG4gICAgICAgICAgICogQHBhcmFtIG1vZHVsZU5hbWUgU3RyaW5nIHRoZSBuYW1lIG9mIHRoZSBtb2R1bGVcbiAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBnZXRNb2R1bGVDb25maWc6IGZ1bmN0aW9uKG1vZHVsZU5hbWUpIHtcbiAgICAgICAgICAgIGlmKCFhbmd1bGFyLmlzU3RyaW5nKG1vZHVsZU5hbWUpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gZ2l2ZSB0aGUgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIGdldCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIW1vZHVsZXNbbW9kdWxlTmFtZV0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9kdWxlc1ttb2R1bGVOYW1lXTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogTGV0IHlvdSBkZWZpbmUgYSBtb2R1bGUgY29uZmlnIG9iamVjdFxuICAgICAgICAgICAqIEBwYXJhbSBtb2R1bGVDb25maWcgT2JqZWN0IHRoZSBtb2R1bGUgY29uZmlnIG9iamVjdFxuICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAqL1xuICAgICAgICAgIHNldE1vZHVsZUNvbmZpZzogZnVuY3Rpb24obW9kdWxlQ29uZmlnKSB7XG4gICAgICAgICAgICBpZighYW5ndWxhci5pc09iamVjdChtb2R1bGVDb25maWcpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gZ2l2ZSB0aGUgbW9kdWxlIGNvbmZpZyBvYmplY3QgdG8gc2V0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2R1bGVzW21vZHVsZUNvbmZpZy5uYW1lXSA9IG1vZHVsZUNvbmZpZztcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVDb25maWc7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgbG9hZGVkIG1vZHVsZXNcbiAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119XG4gICAgICAgICAgICovXG4gICAgICAgICAgZ2V0TW9kdWxlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnTW9kdWxlcztcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogTGV0IHlvdSBjaGVjayBpZiBhIG1vZHVsZSBoYXMgYmVlbiBsb2FkZWQgaW50byBBbmd1bGFyIG9yIG5vdFxuICAgICAgICAgICAqIEBwYXJhbSBtb2R1bGVzTmFtZXMgU3RyaW5nL09iamVjdCBhIG1vZHVsZSBuYW1lLCBvciBhIGxpc3Qgb2YgbW9kdWxlIG5hbWVzXG4gICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICovXG4gICAgICAgICAgaXNMb2FkZWQ6IGZ1bmN0aW9uKG1vZHVsZXNOYW1lcykge1xuICAgICAgICAgICAgdmFyIG1vZHVsZUxvYWRlZCA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgICAgICAgICB2YXIgaXNMb2FkZWQgPSByZWdNb2R1bGVzLmluZGV4T2YobW9kdWxlKSA+IC0xO1xuICAgICAgICAgICAgICBpZighaXNMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBpc0xvYWRlZCA9ICEhbW9kdWxlRXhpc3RzKG1vZHVsZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGlzTG9hZGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc1N0cmluZyhtb2R1bGVzTmFtZXMpKSB7XG4gICAgICAgICAgICAgIG1vZHVsZXNOYW1lcyA9IFttb2R1bGVzTmFtZXNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KG1vZHVsZXNOYW1lcykpIHtcbiAgICAgICAgICAgICAgdmFyIGksIGxlbjtcbiAgICAgICAgICAgICAgZm9yKGkgPSAwLCBsZW4gPSBtb2R1bGVzTmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZighbW9kdWxlTG9hZGVkKG1vZHVsZXNOYW1lc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIGRlZmluZSB0aGUgbW9kdWxlKHMpIG5hbWUocyknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogTG9hZCBhIG1vZHVsZSBvciBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIEFuZ3VsYXJcbiAgICAgICAgICAgKiBAcGFyYW0gbW9kdWxlIE1peGVkIHRoZSBuYW1lIG9mIGEgcHJlZGVmaW5lZCBtb2R1bGUgY29uZmlnIG9iamVjdCwgb3IgYSBtb2R1bGUgY29uZmlnIG9iamVjdCwgb3IgYW4gYXJyYXkgb2YgZWl0aGVyXG4gICAgICAgICAgICogQHBhcmFtIHBhcmFtcyBPYmplY3Qgb3B0aW9uYWwgcGFyYW1ldGVyc1xuICAgICAgICAgICAqIEByZXR1cm5zIHByb21pc2VcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBsb2FkOiBmdW5jdGlvbihtb2R1bGUsIHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICBjb25maWcgPSBudWxsLFxuICAgICAgICAgICAgICBtb2R1bGVDYWNoZSA9IFtdLFxuICAgICAgICAgICAgICBkZWZlcnJlZExpc3QgPSBbXSxcbiAgICAgICAgICAgICAgZGVmZXJyZWQgPSAkcS5kZWZlcigpLFxuICAgICAgICAgICAgICBtb2R1bGVOYW1lLFxuICAgICAgICAgICAgICBlcnJUZXh0O1xuXG4gICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHBhcmFtcykpIHtcbiAgICAgICAgICAgICAgcGFyYW1zID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIG1vZHVsZSBpcyBhbiBhcnJheSwgYnJlYWsgaXQgZG93blxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KG1vZHVsZSkpIHtcbiAgICAgICAgICAgICAgLy8gUmVzdWJtaXQgZWFjaCBlbnRyeSBhcyBhIHNpbmdsZSBtb2R1bGVcbiAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZHVsZSwgZnVuY3Rpb24obSkge1xuICAgICAgICAgICAgICAgIGlmKG0pIHtcbiAgICAgICAgICAgICAgICAgIGRlZmVycmVkTGlzdC5wdXNoKHNlbGYubG9hZChtLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIHByb21pc2Ugb25jZSBldmVyeXRoaW5nIGhhcyBsb2FkZWRcbiAgICAgICAgICAgICAgJHEuYWxsKGRlZmVycmVkTGlzdCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobW9kdWxlKTtcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtb2R1bGVOYW1lID0gZ2V0TW9kdWxlTmFtZShtb2R1bGUpO1xuXG4gICAgICAgICAgICAvLyBHZXQgb3IgU2V0IGEgY29uZmlndXJhdGlvbiBkZXBlbmRpbmcgb24gd2hhdCB3YXMgcGFzc2VkIGluXG4gICAgICAgICAgICBpZih0eXBlb2YgbW9kdWxlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb25maWcgPSBzZWxmLmdldE1vZHVsZUNvbmZpZyhtb2R1bGUpO1xuICAgICAgICAgICAgICBpZighY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgZmlsZXM6IFttb2R1bGVdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIGNvbmZpZyA9IHNlbGYuc2V0TW9kdWxlQ29uZmlnKG1vZHVsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGNvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBlcnJUZXh0ID0gJ01vZHVsZSBcIicgKyBtb2R1bGVOYW1lICsgJ1wiIGlzIG5vdCBjb25maWd1cmVkLCBjYW5ub3QgbG9hZC4nO1xuICAgICAgICAgICAgICAkbG9nLmVycm9yKGVyclRleHQpO1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QobmV3IEVycm9yKGVyclRleHQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGRlcHJlY2F0ZWRcbiAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoY29uZmlnLmZpbGVzKSkge1xuICAgICAgICAgICAgICAgICAgY29uZmlnLmZpbGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNTdHJpbmcoY29uZmlnLnRlbXBsYXRlKSkge1xuICAgICAgICAgICAgICAgICAgY29uZmlnLmZpbGVzLnB1c2goY29uZmlnLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYW5ndWxhci5pc0FycmF5KGNvbmZpZy50ZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbmZpZy5maWxlcy5jb25jYXQoY29uZmlnLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbW9kdWxlQ2FjaGUucHVzaCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmKHRoaXMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gSWYgdGhpcyBtb2R1bGUgaGFzIGJlZW4gbG9hZGVkIGJlZm9yZSwgcmUtdXNlIGl0LlxuICAgICAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQobW9kdWxlTmFtZSkgJiYgbW9kdWxlRXhpc3RzKG1vZHVsZU5hbWUpICYmIHJlZ01vZHVsZXMuaW5kZXhPZihtb2R1bGVOYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgbW9kdWxlQ2FjaGUucHVzaChtb2R1bGVOYW1lKTtcblxuICAgICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCB3YW50IHRvIGxvYWQgbmV3IGZpbGVzLCByZXNvbHZlIGhlcmVcbiAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChjb25maWcuZmlsZXMpKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBsb2NhbFBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobG9jYWxQYXJhbXMsIHBhcmFtcywgY29uZmlnKTtcblxuICAgICAgICAgICAgdmFyIGxvYWREZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiBsb2FkRGVwZW5kZW5jaWVzKG1vZHVsZSkge1xuICAgICAgICAgICAgICB2YXIgbW9kdWxlTmFtZSxcbiAgICAgICAgICAgICAgICBsb2FkZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgcmVxdWlyZXMsXG4gICAgICAgICAgICAgICAgZGlmZixcbiAgICAgICAgICAgICAgICBwcm9taXNlc0xpc3QgPSBbXTtcblxuICAgICAgICAgICAgICBtb2R1bGVOYW1lID0gZ2V0TW9kdWxlTmFtZShtb2R1bGUpO1xuICAgICAgICAgICAgICBpZihtb2R1bGVOYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLndoZW4oKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgbG9hZGVkTW9kdWxlID0gZ2V0TW9kdWxlKG1vZHVsZU5hbWUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXF1aXJlcyA9IGdldFJlcXVpcmVzKGxvYWRlZE1vZHVsZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVxdWlyZXMsIGZ1bmN0aW9uKHJlcXVpcmVFbnRyeSkge1xuICAgICAgICAgICAgICAgIC8vIElmIG5vIGNvbmZpZ3VyYXRpb24gaXMgcHJvdmlkZWQsIHRyeSBhbmQgZmluZCBvbmUgZnJvbSBhIHByZXZpb3VzIGxvYWQuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXNuJ3Qgb25lLCBiYWlsIGFuZCBsZXQgdGhlIG5vcm1hbCBmbG93IHJ1blxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiByZXF1aXJlRW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gc2VsZi5nZXRNb2R1bGVDb25maWcocmVxdWlyZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgIGlmKGNvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVDYWNoZS5wdXNoKHJlcXVpcmVFbnRyeSk7IC8vIFdlIGRvbid0IGtub3cgYWJvdXQgdGhpcyBtb2R1bGUsIGJ1dCBzb21ldGhpbmcgZWxzZSBtaWdodCwgc28gcHVzaCBpdCBhbnl3YXkuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVFbnRyeSA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGRlcGVuZGVuY3kgaGFzIGJlZW4gbG9hZGVkIHByZXZpb3VzbHlcbiAgICAgICAgICAgICAgICBpZihtb2R1bGVFeGlzdHMocmVxdWlyZUVudHJ5Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICBpZih0eXBlb2YgbW9kdWxlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb21wYXJlIGFnYWluc3QgdGhlIGFscmVhZHkgbG9hZGVkIG1vZHVsZSB0byBzZWUgaWYgdGhlIG5ldyBkZWZpbml0aW9uIGFkZHMgYW55IG5ldyBmaWxlc1xuICAgICAgICAgICAgICAgICAgICBkaWZmID0gcmVxdWlyZUVudHJ5LmZpbGVzLmZpbHRlcihmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TW9kdWxlQ29uZmlnKHJlcXVpcmVFbnRyeS5uYW1lKS5maWxlcy5pbmRleE9mKG4pIDwgMDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1vZHVsZSB3YXMgcmVkZWZpbmVkLCBhZHZpc2UgdmlhIHRoZSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgIGlmKGRpZmYubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgJGxvZy53YXJuKCdNb2R1bGUgXCInLCBtb2R1bGVOYW1lLCAnXCIgYXR0ZW1wdGVkIHRvIHJlZGVmaW5lIGNvbmZpZ3VyYXRpb24gZm9yIGRlcGVuZGVuY3kuIFwiJywgcmVxdWlyZUVudHJ5Lm5hbWUsICdcIlxcbiBBZGRpdGlvbmFsIEZpbGVzIExvYWRlZDonLCBkaWZmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFB1c2ggZXZlcnl0aGluZyB0byB0aGUgZmlsZSBsb2FkZXIsIGl0IHdpbGwgd2VlZCBvdXQgdGhlIGR1cGxpY2F0ZXMuXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKGZpbGVzTG9hZGVyKHJlcXVpcmVFbnRyeS5maWxlcywgbG9jYWxQYXJhbXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvYWREZXBlbmRlbmNpZXMocmVxdWlyZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YgcmVxdWlyZUVudHJ5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgaWYocmVxdWlyZUVudHJ5Lmhhc093blByb3BlcnR5KCduYW1lJykgJiYgcmVxdWlyZUVudHJ5WyduYW1lJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGRlcGVuZGVuY3kgZG9lc24ndCBleGlzdCBpbiB0aGUgbW9kdWxlIGNhY2hlIGFuZCBpcyBhIG5ldyBjb25maWd1cmF0aW9uLCBzbyBzdG9yZSBhbmQgcHVzaCBpdC5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRNb2R1bGVDb25maWcocmVxdWlyZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ2FjaGUucHVzaChyZXF1aXJlRW50cnlbJ25hbWUnXSk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIENTUyBMb2FkaW5nIEhhbmRsZXJcbiAgICAgICAgICAgICAgICAgIGlmKHJlcXVpcmVFbnRyeS5oYXNPd25Qcm9wZXJ0eSgnY3NzJykgJiYgcmVxdWlyZUVudHJ5Wydjc3MnXS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9jYXRlIHRoZSBkb2N1bWVudCBpbnNlcnRpb24gcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlcXVpcmVFbnRyeVsnY3NzJ10sIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBidWlsZEVsZW1lbnQoJ2NzcycsIHBhdGgsIGxvY2FsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvLyBDU1MgRW5kLlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBkZXBlbmRlbmN5IGhhcyBhbnkgZmlsZXMgdGhhdCBuZWVkIHRvIGJlIGxvYWRlZC4gSWYgdGhlcmUgYXJlLCBwdXNoIGEgbmV3IHByb21pc2UgdG8gdGhlIHByb21pc2UgbGlzdC5cbiAgICAgICAgICAgICAgICBpZihyZXF1aXJlRW50cnkuaGFzT3duUHJvcGVydHkoJ2ZpbGVzJykgJiYgcmVxdWlyZUVudHJ5LmZpbGVzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgaWYocmVxdWlyZUVudHJ5LmZpbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKGZpbGVzTG9hZGVyKHJlcXVpcmVFbnRyeSwgbG9jYWxQYXJhbXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvYWREZXBlbmRlbmNpZXMocmVxdWlyZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgd3JhcHBlciBwcm9taXNlIHRvIHdhdGNoIHRoZSBwcm9taXNlIGxpc3QgYW5kIHJlc29sdmUgaXQgb25jZSBldmVyeXRoaW5nIGlzIGRvbmUuXG4gICAgICAgICAgICAgIHJldHVybiAkcS5hbGwocHJvbWlzZXNMaXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsZXNMb2FkZXIoY29uZmlnLCBsb2NhbFBhcmFtcykudGhlbihmdW5jdGlvbiBzdWNjZXNzKCkge1xuICAgICAgICAgICAgICBpZihtb2R1bGVOYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShtb2R1bGUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZHVsZUNhY2hlLnB1c2gobW9kdWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgbG9hZERlcGVuZGVuY2llcyhtb2R1bGVOYW1lKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBqdXN0TG9hZGVkID0gW107XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyKHByb3ZpZGVycywgbW9kdWxlQ2FjaGUsIGxvY2FsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICAkbG9nLmVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShtb2R1bGUpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XTtcblxuICAgICAgdGhpcy5jb25maWcgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoY29uZmlnLmpzTG9hZGVyKSB8fCBhbmd1bGFyLmlzRGVmaW5lZChjb25maWcuYXN5bmNMb2FkZXIpKSB7XG4gICAgICAgICAgaWYoIWFuZ3VsYXIuaXNGdW5jdGlvbihjb25maWcuanNMb2FkZXIgfHwgY29uZmlnLmFzeW5jTG9hZGVyKSkge1xuICAgICAgICAgICAgdGhyb3coJ1RoZSBqcyBsb2FkZXIgbmVlZHMgdG8gYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBqc0xvYWRlciA9IGNvbmZpZy5qc0xvYWRlciB8fCBjb25maWcuYXN5bmNMb2FkZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChjb25maWcuY3NzTG9hZGVyKSkge1xuICAgICAgICAgIGlmKCFhbmd1bGFyLmlzRnVuY3Rpb24oY29uZmlnLmNzc0xvYWRlcikpIHtcbiAgICAgICAgICAgIHRocm93KCdUaGUgY3NzIGxvYWRlciBuZWVkcyB0byBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNzc0xvYWRlciA9IGNvbmZpZy5jc3NMb2FkZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChjb25maWcudGVtcGxhdGVzTG9hZGVyKSkge1xuICAgICAgICAgIGlmKCFhbmd1bGFyLmlzRnVuY3Rpb24oY29uZmlnLnRlbXBsYXRlc0xvYWRlcikpIHtcbiAgICAgICAgICAgIHRocm93KCdUaGUgdGVtcGxhdGUgbG9hZGVyIG5lZWRzIHRvIGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGVtcGxhdGVzTG9hZGVyID0gY29uZmlnLnRlbXBsYXRlc0xvYWRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdlIHdhbnQgdG8gZGVmaW5lIG1vZHVsZXMgY29uZmlnc1xuICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChjb25maWcubW9kdWxlcykpIHtcbiAgICAgICAgICBpZihhbmd1bGFyLmlzQXJyYXkoY29uZmlnLm1vZHVsZXMpKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY29uZmlnLm1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZUNvbmZpZykge1xuICAgICAgICAgICAgICBtb2R1bGVzW21vZHVsZUNvbmZpZy5uYW1lXSA9IG1vZHVsZUNvbmZpZztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2R1bGVzW2NvbmZpZy5tb2R1bGVzLm5hbWVdID0gY29uZmlnLm1vZHVsZXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoY29uZmlnLmRlYnVnKSkge1xuICAgICAgICAgIGRlYnVnID0gY29uZmlnLmRlYnVnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoYW5ndWxhci5pc0RlZmluZWQoY29uZmlnLmV2ZW50cykpIHtcbiAgICAgICAgICBldmVudHMgPSBjb25maWcuZXZlbnRzO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcblxuICBvY0xhenlMb2FkLmRpcmVjdGl2ZSgnb2NMYXp5TG9hZCcsIFsnJG9jTGF6eUxvYWQnLCAnJGNvbXBpbGUnLCAnJGFuaW1hdGUnLCAnJHBhcnNlJyxcbiAgICBmdW5jdGlvbigkb2NMYXp5TG9hZCwgJGNvbXBpbGUsICRhbmltYXRlLCAkcGFyc2UpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgICBwcmlvcml0eTogMTAwMCxcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAvLyB3ZSBzdG9yZSB0aGUgY29udGVudCBhbmQgcmVtb3ZlIGl0IGJlZm9yZSBjb21waWxhdGlvblxuICAgICAgICAgIHZhciBjb250ZW50ID0gZWxlbWVudFswXS5pbm5lckhUTUw7XG4gICAgICAgICAgZWxlbWVudC5odG1sKCcnKTtcblxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cikge1xuICAgICAgICAgICAgdmFyIG1vZGVsID0gJHBhcnNlKCRhdHRyLm9jTGF6eUxvYWQpO1xuICAgICAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gaXQgY2FuIGJlIGEgbW9kdWxlIG5hbWUgKHN0cmluZyksIGFuIG9iamVjdCwgYW4gYXJyYXksIG9yIGEgc2NvcGUgcmVmZXJlbmNlIHRvIGFueSBvZiB0aGlzXG4gICAgICAgICAgICAgIHJldHVybiBtb2RlbCgkc2NvcGUpIHx8ICRhdHRyLm9jTGF6eUxvYWQ7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihtb2R1bGVOYW1lKSB7XG4gICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG1vZHVsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgJG9jTGF6eUxvYWQubG9hZChtb2R1bGVOYW1lKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MobW9kdWxlQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcigkY29tcGlsZShjb250ZW50KSgkc2NvcGUpLCBudWxsLCAkZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfV0pO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgcmVxdWlyZWQgbW9kdWxlcy9zZXJ2aWNlcy8uLi4gZm9yIHRoaXMgbW9kdWxlXG4gICAqIEBwYXJhbSBtb2R1bGVcbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0UmVxdWlyZXMobW9kdWxlKSB7XG4gICAgdmFyIHJlcXVpcmVzID0gW107XG4gICAgYW5ndWxhci5mb3JFYWNoKG1vZHVsZS5yZXF1aXJlcywgZnVuY3Rpb24ocmVxdWlyZU1vZHVsZSkge1xuICAgICAgaWYocmVnTW9kdWxlcy5pbmRleE9mKHJlcXVpcmVNb2R1bGUpID09PSAtMSkge1xuICAgICAgICByZXF1aXJlcy5wdXNoKHJlcXVpcmVNb2R1bGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXF1aXJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG1vZHVsZSBleGlzdHMgYW5kIHJldHVybnMgaXQgaWYgaXQgZG9lc1xuICAgKiBAcGFyYW0gbW9kdWxlTmFtZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGZ1bmN0aW9uIG1vZHVsZUV4aXN0cyhtb2R1bGVOYW1lKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhbmd1bGFyLm1vZHVsZShtb2R1bGVOYW1lKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIGlmKC9ObyBtb2R1bGUvLnRlc3QoZSkgfHwgKGUubWVzc2FnZS5pbmRleE9mKCckaW5qZWN0b3I6bm9tb2QnKSA+IC0xKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TW9kdWxlKG1vZHVsZU5hbWUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGFuZ3VsYXIubW9kdWxlKG1vZHVsZU5hbWUpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgLy8gdGhpcyBlcnJvciBtZXNzYWdlIHJlYWxseSBzdXh4XG4gICAgICBpZigvTm8gbW9kdWxlLy50ZXN0KGUpIHx8IChlLm1lc3NhZ2UuaW5kZXhPZignJGluamVjdG9yOm5vbW9kJykgPiAtMSkpIHtcbiAgICAgICAgZS5tZXNzYWdlID0gJ1RoZSBtb2R1bGUgXCInICsgbW9kdWxlTmFtZSArICdcIiB0aGF0IHlvdSBhcmUgdHJ5aW5nIHRvIGxvYWQgZG9lcyBub3QgZXhpc3QuICcgKyBlLm1lc3NhZ2VcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlUXVldWUocHJvdmlkZXJzLCBxdWV1ZSwgbW9kdWxlTmFtZSwgcmVjb25maWcpIHtcbiAgICBpZighcXVldWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaSwgbGVuLCBhcmdzLCBwcm92aWRlcjtcbiAgICBmb3IoaSA9IDAsIGxlbiA9IHF1ZXVlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzID0gcXVldWVbaV07XG4gICAgICBpZihhbmd1bGFyLmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgaWYocHJvdmlkZXJzICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYocHJvdmlkZXJzLmhhc093blByb3BlcnR5KGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICBwcm92aWRlciA9IHByb3ZpZGVyc1thcmdzWzBdXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBwcm92aWRlciAnICsgYXJnc1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBpc05ldyA9IHJlZ2lzdGVySW52b2tlTGlzdChhcmdzLCBtb2R1bGVOYW1lKTtcbiAgICAgICAgaWYoYXJnc1sxXSAhPT0gJ2ludm9rZScpIHtcbiAgICAgICAgICBpZihpc05ldyAmJiBhbmd1bGFyLmlzRGVmaW5lZChwcm92aWRlcikpIHtcbiAgICAgICAgICAgIHByb3ZpZGVyW2FyZ3NbMV1dLmFwcGx5KHByb3ZpZGVyLCBhcmdzWzJdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGNvbmZpZyBibG9ja1xuICAgICAgICAgIHZhciBjYWxsSW52b2tlID0gZnVuY3Rpb24oZmN0KSB7XG4gICAgICAgICAgICB2YXIgaW52b2tlZCA9IHJlZ0NvbmZpZ3MuaW5kZXhPZihtb2R1bGVOYW1lICsgJy0nICsgZmN0KTtcbiAgICAgICAgICAgIGlmKGludm9rZWQgPT09IC0xIHx8IHJlY29uZmlnKSB7XG4gICAgICAgICAgICAgIGlmKGludm9rZWQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVnQ29uZmlncy5wdXNoKG1vZHVsZU5hbWUgKyAnLScgKyBmY3QpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHByb3ZpZGVyKSkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyW2FyZ3NbMV1dLmFwcGx5KHByb3ZpZGVyLCBhcmdzWzJdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihhbmd1bGFyLmlzRnVuY3Rpb24oYXJnc1syXVswXSkpIHtcbiAgICAgICAgICAgIGNhbGxJbnZva2UoYXJnc1syXVswXSk7XG4gICAgICAgICAgfSBlbHNlIGlmKGFuZ3VsYXIuaXNBcnJheShhcmdzWzJdWzBdKSkge1xuICAgICAgICAgICAgZm9yKHZhciBqID0gMCwgamxlbiA9IGFyZ3NbMl1bMF0ubGVuZ3RoOyBqIDwgamxlbjsgaisrKSB7XG4gICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNGdW5jdGlvbihhcmdzWzJdWzBdW2pdKSkge1xuICAgICAgICAgICAgICAgIGNhbGxJbnZva2UoYXJnc1syXVswXVtqXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBuZXcgbW9kdWxlIGFuZCBsb2FkIGl0XG4gICAqIEBwYXJhbSBwcm92aWRlcnNcbiAgICogQHBhcmFtIHJlZ2lzdGVyTW9kdWxlc1xuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyKHByb3ZpZGVycywgcmVnaXN0ZXJNb2R1bGVzLCBwYXJhbXMpIHtcbiAgICBpZihyZWdpc3Rlck1vZHVsZXMpIHtcbiAgICAgIHZhciBrLCByLCBtb2R1bGVOYW1lLCBtb2R1bGVGbiwgdGVtcFJ1bkJsb2NrcyA9IFtdO1xuICAgICAgZm9yKGsgPSByZWdpc3Rlck1vZHVsZXMubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcbiAgICAgICAgbW9kdWxlTmFtZSA9IHJlZ2lzdGVyTW9kdWxlc1trXTtcbiAgICAgICAgaWYodHlwZW9mIG1vZHVsZU5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgbW9kdWxlTmFtZSA9IGdldE1vZHVsZU5hbWUobW9kdWxlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIW1vZHVsZU5hbWUgfHwganVzdExvYWRlZC5pbmRleE9mKG1vZHVsZU5hbWUpICE9PSAtMSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdNb2R1bGUgPSByZWdNb2R1bGVzLmluZGV4T2YobW9kdWxlTmFtZSkgPT09IC0xO1xuICAgICAgICBtb2R1bGVGbiA9IGFuZ3VsYXIubW9kdWxlKG1vZHVsZU5hbWUpO1xuICAgICAgICBpZihuZXdNb2R1bGUpIHsgLy8gbmV3IG1vZHVsZVxuICAgICAgICAgIHJlZ01vZHVsZXMucHVzaChtb2R1bGVOYW1lKTtcbiAgICAgICAgICByZWdpc3Rlcihwcm92aWRlcnMsIG1vZHVsZUZuLnJlcXVpcmVzLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmKG1vZHVsZUZuLl9ydW5CbG9ja3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIG5ldyBydW4gYmxvY2tzIGRldGVjdGVkISBSZXBsYWNlIHRoZSBvbGQgb25lcyAoaWYgZXhpc3RpbmcpXG4gICAgICAgICAgcnVuQmxvY2tzW21vZHVsZU5hbWVdID0gW107XG4gICAgICAgICAgd2hpbGUobW9kdWxlRm4uX3J1bkJsb2Nrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBydW5CbG9ja3NbbW9kdWxlTmFtZV0ucHVzaChtb2R1bGVGbi5fcnVuQmxvY2tzLnNoaWZ0KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihhbmd1bGFyLmlzRGVmaW5lZChydW5CbG9ja3NbbW9kdWxlTmFtZV0pICYmIChuZXdNb2R1bGUgfHwgcGFyYW1zLnJlcnVuKSkge1xuICAgICAgICAgIHRlbXBSdW5CbG9ja3MgPSB0ZW1wUnVuQmxvY2tzLmNvbmNhdChydW5CbG9ja3NbbW9kdWxlTmFtZV0pO1xuICAgICAgICB9XG4gICAgICAgIGludm9rZVF1ZXVlKHByb3ZpZGVycywgbW9kdWxlRm4uX2ludm9rZVF1ZXVlLCBtb2R1bGVOYW1lLCBwYXJhbXMucmVjb25maWcpO1xuICAgICAgICBpbnZva2VRdWV1ZShwcm92aWRlcnMsIG1vZHVsZUZuLl9jb25maWdCbG9ja3MsIG1vZHVsZU5hbWUsIHBhcmFtcy5yZWNvbmZpZyk7IC8vIGFuZ3VsYXIgMS4zK1xuICAgICAgICBicm9hZGNhc3QobmV3TW9kdWxlID8gJ29jTGF6eUxvYWQubW9kdWxlTG9hZGVkJyA6ICdvY0xhenlMb2FkLm1vZHVsZVJlbG9hZGVkJywgbW9kdWxlTmFtZSk7XG4gICAgICAgIHJlZ2lzdGVyTW9kdWxlcy5wb3AoKTtcbiAgICAgICAganVzdExvYWRlZC5wdXNoKG1vZHVsZU5hbWUpO1xuICAgICAgfVxuICAgICAgLy8gZXhlY3V0ZSB0aGUgcnVuIGJsb2NrcyBhdCB0aGUgZW5kXG4gICAgICB2YXIgaW5zdGFuY2VJbmplY3RvciA9IHByb3ZpZGVycy5nZXRJbnN0YW5jZUluamVjdG9yKCk7XG4gICAgICBhbmd1bGFyLmZvckVhY2godGVtcFJ1bkJsb2NrcywgZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgaW5zdGFuY2VJbmplY3Rvci5pbnZva2UoZm4pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGFuIGludm9rZVxuICAgKiBAcGFyYW0gYXJnc1xuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG4gIGZ1bmN0aW9uIHJlZ2lzdGVySW52b2tlTGlzdChhcmdzLCBtb2R1bGVOYW1lKSB7XG4gICAgdmFyIGludm9rZUxpc3QgPSBhcmdzWzJdWzBdLFxuICAgICAgdHlwZSA9IGFyZ3NbMV0sXG4gICAgICBuZXdJbnZva2UgPSBmYWxzZTtcbiAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHJlZ0ludm9rZXNbbW9kdWxlTmFtZV0pKSB7XG4gICAgICByZWdJbnZva2VzW21vZHVsZU5hbWVdID0ge307XG4gICAgfVxuICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQocmVnSW52b2tlc1ttb2R1bGVOYW1lXVt0eXBlXSkpIHtcbiAgICAgIHJlZ0ludm9rZXNbbW9kdWxlTmFtZV1bdHlwZV0gPSBbXTtcbiAgICB9XG4gICAgdmFyIG9uSW52b2tlID0gZnVuY3Rpb24oaW52b2tlTmFtZSkge1xuICAgICAgbmV3SW52b2tlID0gdHJ1ZTtcbiAgICAgIHJlZ0ludm9rZXNbbW9kdWxlTmFtZV1bdHlwZV0ucHVzaChpbnZva2VOYW1lKTtcbiAgICAgIGJyb2FkY2FzdCgnb2NMYXp5TG9hZC5jb21wb25lbnRMb2FkZWQnLCBbbW9kdWxlTmFtZSwgdHlwZSwgaW52b2tlTmFtZV0pO1xuICAgIH1cbiAgICBpZihhbmd1bGFyLmlzU3RyaW5nKGludm9rZUxpc3QpICYmIHJlZ0ludm9rZXNbbW9kdWxlTmFtZV1bdHlwZV0uaW5kZXhPZihpbnZva2VMaXN0KSA9PT0gLTEpIHtcbiAgICAgIG9uSW52b2tlKGludm9rZUxpc3QpO1xuICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzT2JqZWN0KGludm9rZUxpc3QpKSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2goaW52b2tlTGlzdCwgZnVuY3Rpb24oaW52b2tlKSB7XG4gICAgICAgIGlmKGFuZ3VsYXIuaXNTdHJpbmcoaW52b2tlKSAmJiByZWdJbnZva2VzW21vZHVsZU5hbWVdW3R5cGVdLmluZGV4T2YoaW52b2tlKSA9PT0gLTEpIHtcbiAgICAgICAgICBvbkludm9rZShpbnZva2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3SW52b2tlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TW9kdWxlTmFtZShtb2R1bGUpIHtcbiAgICB2YXIgbW9kdWxlTmFtZSA9IG51bGw7XG4gICAgaWYoYW5ndWxhci5pc1N0cmluZyhtb2R1bGUpKSB7XG4gICAgICBtb2R1bGVOYW1lID0gbW9kdWxlO1xuICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzT2JqZWN0KG1vZHVsZSkgJiYgbW9kdWxlLmhhc093blByb3BlcnR5KCduYW1lJykgJiYgYW5ndWxhci5pc1N0cmluZyhtb2R1bGUubmFtZSkpIHtcbiAgICAgIG1vZHVsZU5hbWUgPSBtb2R1bGUubmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZHVsZU5hbWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsaXN0IG9mIGV4aXN0aW5nIHJlZ2lzdGVyZWQgbW9kdWxlc1xuICAgKiBAcGFyYW0gZWxlbWVudFxuICAgKi9cbiAgZnVuY3Rpb24gaW5pdChlbGVtZW50KSB7XG4gICAgaWYoaW5pdE1vZHVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgZWxlbWVudHMgPSBbZWxlbWVudF0sXG4gICAgICAgIG5hbWVzID0gWyduZzphcHAnLCAnbmctYXBwJywgJ3gtbmctYXBwJywgJ2RhdGEtbmctYXBwJ10sXG4gICAgICAgIE5HX0FQUF9DTEFTU19SRUdFWFAgPSAvXFxzbmdbOlxcLV1hcHAoOlxccyooW1xcd1xcZF9dKyk7Pyk/XFxzLyxcbiAgICAgICAgYXBwZW5kID0gZnVuY3Rpb24gYXBwZW5kKGVsbSkge1xuICAgICAgICAgIHJldHVybiAoZWxtICYmIGVsZW1lbnRzLnB1c2goZWxtKSk7XG4gICAgICAgIH07XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChuYW1lcywgZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBuYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIGFwcGVuZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYW1lKSk7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoJzonLCAnXFxcXDonKTtcbiAgICAgICAgaWYoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbCgnLicgKyBuYW1lKSwgYXBwZW5kKTtcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIG5hbWUgKyAnXFxcXDonKSwgYXBwZW5kKTtcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdbJyArIG5hbWUgKyAnXScpLCBhcHBlbmQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYW5ndWxhci5mb3JFYWNoKGVsZW1lbnRzLCBmdW5jdGlvbihlbG0pIHtcbiAgICAgICAgaWYoaW5pdE1vZHVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICcgJyArIGVsZW1lbnQuY2xhc3NOYW1lICsgJyAnO1xuICAgICAgICAgIHZhciBtYXRjaCA9IE5HX0FQUF9DTEFTU19SRUdFWFAuZXhlYyhjbGFzc05hbWUpO1xuICAgICAgICAgIGlmKG1hdGNoKSB7XG4gICAgICAgICAgICBpbml0TW9kdWxlcy5wdXNoKChtYXRjaFsyXSB8fCAnJykucmVwbGFjZSgvXFxzKy9nLCAnLCcpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGVsbS5hdHRyaWJ1dGVzLCBmdW5jdGlvbihhdHRyKSB7XG4gICAgICAgICAgICAgIGlmKGluaXRNb2R1bGVzLmxlbmd0aCA9PT0gMCAmJiBuYW1lc1thdHRyLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgaW5pdE1vZHVsZXMucHVzaChhdHRyLnZhbHVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYoaW5pdE1vZHVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyAnTm8gbW9kdWxlIGZvdW5kIGR1cmluZyBib290c3RyYXAsIHVuYWJsZSB0byBpbml0IG9jTGF6eUxvYWQnO1xuICAgIH1cblxuICAgIHZhciBhZGRSZWcgPSBmdW5jdGlvbiBhZGRSZWcobW9kdWxlTmFtZSkge1xuICAgICAgaWYocmVnTW9kdWxlcy5pbmRleE9mKG1vZHVsZU5hbWUpID09PSAtMSkge1xuICAgICAgICAvLyByZWdpc3RlciBleGlzdGluZyBtb2R1bGVzXG4gICAgICAgIHJlZ01vZHVsZXMucHVzaChtb2R1bGVOYW1lKTtcbiAgICAgICAgdmFyIG1haW5Nb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShtb2R1bGVOYW1lKTtcblxuICAgICAgICAvLyByZWdpc3RlciBleGlzdGluZyBjb21wb25lbnRzIChkaXJlY3RpdmVzLCBzZXJ2aWNlcywgLi4uKVxuICAgICAgICBpbnZva2VRdWV1ZShudWxsLCBtYWluTW9kdWxlLl9pbnZva2VRdWV1ZSwgbW9kdWxlTmFtZSk7XG4gICAgICAgIGludm9rZVF1ZXVlKG51bGwsIG1haW5Nb2R1bGUuX2NvbmZpZ0Jsb2NrcywgbW9kdWxlTmFtZSk7IC8vIGFuZ3VsYXIgMS4zK1xuXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtYWluTW9kdWxlLnJlcXVpcmVzLCBhZGRSZWcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLmZvckVhY2goaW5pdE1vZHVsZXMsIGZ1bmN0aW9uKG1vZHVsZU5hbWUpIHtcbiAgICAgIGFkZFJlZyhtb2R1bGVOYW1lKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBib290c3RyYXAgPSBhbmd1bGFyLmJvb3RzdHJhcDtcbiAgYW5ndWxhci5ib290c3RyYXAgPSBmdW5jdGlvbihlbGVtZW50LCBtb2R1bGVzLCBjb25maWcpIHtcbiAgICBpbml0TW9kdWxlcyA9IG1vZHVsZXMuc2xpY2UoKTsgLy8gbWFrZSBhIGNsZWFuIGNvcHlcbiAgICByZXR1cm4gYm9vdHN0cmFwKGVsZW1lbnQsIG1vZHVsZXMsIGNvbmZpZyk7XG4gIH07XG5cbiAgLy8gQXJyYXkuaW5kZXhPZiBwb2x5ZmlsbCBmb3IgSUU4XG4gIGlmKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG5cbiAgICAgIHZhciBrO1xuXG4gICAgICAvLyAxLiBMZXQgTyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgVG9PYmplY3QgcGFzc2luZ1xuICAgICAgLy8gICAgdGhlIHRoaXMgdmFsdWUgYXMgdGhlIGFyZ3VtZW50LlxuICAgICAgaWYodGhpcyA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widGhpc1wiIGlzIG51bGwgb3Igbm90IGRlZmluZWQnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIE8gPSBPYmplY3QodGhpcyk7XG5cbiAgICAgIC8vIDIuIExldCBsZW5WYWx1ZSBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIEdldFxuICAgICAgLy8gICAgaW50ZXJuYWwgbWV0aG9kIG9mIE8gd2l0aCB0aGUgYXJndW1lbnQgXCJsZW5ndGhcIi5cbiAgICAgIC8vIDMuIExldCBsZW4gYmUgVG9VaW50MzIobGVuVmFsdWUpLlxuICAgICAgdmFyIGxlbiA9IE8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAvLyA0LiBJZiBsZW4gaXMgMCwgcmV0dXJuIC0xLlxuICAgICAgaWYobGVuID09PSAwKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cblxuICAgICAgLy8gNS4gSWYgYXJndW1lbnQgZnJvbUluZGV4IHdhcyBwYXNzZWQgbGV0IG4gYmVcbiAgICAgIC8vICAgIFRvSW50ZWdlcihmcm9tSW5kZXgpOyBlbHNlIGxldCBuIGJlIDAuXG4gICAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcblxuICAgICAgaWYoTWF0aC5hYnMobikgPT09IEluZmluaXR5KSB7XG4gICAgICAgIG4gPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyA2LiBJZiBuID49IGxlbiwgcmV0dXJuIC0xLlxuICAgICAgaWYobiA+PSBsZW4pIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuXG4gICAgICAvLyA3LiBJZiBuID49IDAsIHRoZW4gTGV0IGsgYmUgbi5cbiAgICAgIC8vIDguIEVsc2UsIG48MCwgTGV0IGsgYmUgbGVuIC0gYWJzKG4pLlxuICAgICAgLy8gICAgSWYgayBpcyBsZXNzIHRoYW4gMCwgdGhlbiBsZXQgayBiZSAwLlxuICAgICAgayA9IE1hdGgubWF4KG4gPj0gMCA/IG4gOiBsZW4gLSBNYXRoLmFicyhuKSwgMCk7XG5cbiAgICAgIC8vIDkuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuICAgICAgd2hpbGUoayA8IGxlbikge1xuICAgICAgICAvLyBhLiBMZXQgUGsgYmUgVG9TdHJpbmcoaykuXG4gICAgICAgIC8vICAgVGhpcyBpcyBpbXBsaWNpdCBmb3IgTEhTIG9wZXJhbmRzIG9mIHRoZSBpbiBvcGVyYXRvclxuICAgICAgICAvLyBiLiBMZXQga1ByZXNlbnQgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZVxuICAgICAgICAvLyAgICBIYXNQcm9wZXJ0eSBpbnRlcm5hbCBtZXRob2Qgb2YgTyB3aXRoIGFyZ3VtZW50IFBrLlxuICAgICAgICAvLyAgIFRoaXMgc3RlcCBjYW4gYmUgY29tYmluZWQgd2l0aCBjXG4gICAgICAgIC8vIGMuIElmIGtQcmVzZW50IGlzIHRydWUsIHRoZW5cbiAgICAgICAgLy8gICAgaS4gIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIEdldFxuICAgICAgICAvLyAgICAgICAgaW50ZXJuYWwgbWV0aG9kIG9mIE8gd2l0aCB0aGUgYXJndW1lbnQgVG9TdHJpbmcoaykuXG4gICAgICAgIC8vICAgaWkuICBMZXQgc2FtZSBiZSB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZVxuICAgICAgICAvLyAgICAgICAgU3RyaWN0IEVxdWFsaXR5IENvbXBhcmlzb24gQWxnb3JpdGhtIHRvXG4gICAgICAgIC8vICAgICAgICBzZWFyY2hFbGVtZW50IGFuZCBlbGVtZW50Sy5cbiAgICAgICAgLy8gIGlpaS4gIElmIHNhbWUgaXMgdHJ1ZSwgcmV0dXJuIGsuXG4gICAgICAgIGlmKGsgaW4gTyAmJiBPW2tdID09PSBzZWFyY2hFbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGs7XG4gICAgICAgIH1cbiAgICAgICAgaysrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cbn0pKCk7XG4iXX0=
